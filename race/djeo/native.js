//>>built
require({cache:{"dojo/_base/html":function(){define("dojo/_base/html",["./kernel","../dom","../dom-style","../dom-attr","../dom-prop","../dom-class","../dom-construct","../dom-geometry"],function(f,l,j,o,k,i,g,a){f.byId=l.byId;f.isDescendant=l.isDescendant;f.setSelectable=l.setSelectable;f.getAttr=o.get;f.setAttr=o.set;f.hasAttr=o.has;f.removeAttr=o.remove;f.getNodeProp=o.getNodeProp;f.attr=function(a,c,n){if(arguments.length==2)return o[typeof c=="string"?"get":"set"](a,c);return o.set(a,c,n)};f.hasClass=
i.contains;f.addClass=i.add;f.removeClass=i.remove;f.toggleClass=i.toggle;f.replaceClass=i.replace;f._toDom=f.toDom=g.toDom;f.place=g.place;f.create=g.create;f.empty=function(a){g.empty(a)};f._destroyElement=f.destroy=function(a){g.destroy(a)};f._getPadExtents=f.getPadExtents=a.getPadExtents;f._getBorderExtents=f.getBorderExtents=a.getBorderExtents;f._getPadBorderExtents=f.getPadBorderExtents=a.getPadBorderExtents;f._getMarginExtents=f.getMarginExtents=a.getMarginExtents;f._getMarginSize=f.getMarginSize=
a.getMarginSize;f._getMarginBox=f.getMarginBox=a.getMarginBox;f.setMarginBox=a.setMarginBox;f._getContentBox=f.getContentBox=a.getContentBox;f.setContentSize=a.setContentSize;f._isBodyLtr=f.isBodyLtr=a.isBodyLtr;f._docScroll=f.docScroll=a.docScroll;f._getIeDocumentElementOffset=f.getIeDocumentElementOffset=a.getIeDocumentElementOffset;f._fixIeBiDiScrollLeft=f.fixIeBiDiScrollLeft=a.fixIeBiDiScrollLeft;f.position=a.position;f.marginBox=function(e,c){return c?a.setMarginBox(e,c):a.getMarginBox(e)};f.contentBox=
function(e,c){return c?a.setContentSize(e,c):a.getContentBox(e)};f.coords=function(e,c){f.deprecated("dojo.coords()","Use dojo.position() or dojo.marginBox().");var e=l.byId(e),n=j.getComputedStyle(e),n=a.getMarginBox(e,n),g=a.position(e,c);n.x=g.x;n.y=g.y;return n};f.getProp=k.get;f.setProp=k.set;f.prop=function(a,c,n){if(arguments.length==2)return k[typeof c=="string"?"get":"set"](a,c);return k.set(a,c,n)};f.getStyle=j.get;f.setStyle=j.set;f.getComputedStyle=j.getComputedStyle;f.__toPixelValue=
f.toPixelValue=j.toPixelValue;f.style=function(a,c,n){switch(arguments.length){case 1:return j.get(a);case 2:return j[typeof c=="string"?"get":"set"](a,c)}return j.set(a,c,n)};return f})},"djeo/djeo/Engine":function(){define("djeo/djeo/Engine",["require","dojo/_base/declare","dojo/has","dojo/_base/lang","dojo/_base/array","dojo/dom-construct","dojo/dom-geometry","dojo/on","../_base","../dojox/gfx","../dojox/gfx/matrix","../Engine","./Placemark","../util/geometry","../_tiles"],function(f,l,j,o,k,i,
g,a,e,c,n,q,h,d,t){var m={mouseover:"onmouseover",mouseout:"onmouseout",click:"onclick"};return l([q],{scaleFactor:1.2,correctionScale:1E4,pointZoomFactor:0.01,resizePoints:!0,resizeLines:!0,resizeAreas:!0,correctScale:!1,layers:null,_layerReg:null,container:null,constructor:function(){this._require=f;o.mixin(this.ignoredDependencies,{Highlight:1,Tooltip:1});this._supportedLayers=t;this._initBasicFactories(new h({map:this.map,engine:this}))},initialize:function(b){var d=this.map;this.map.container.style.overflow=
"hidden";this.container=i.create("div",{style:{width:"100%",height:"100%",position:"relative"}},d.container);this.surface=c.createSurface(this.container,d.width,d.height);this.surface.rawNode.style.position="absolute";this.group=this.surface.createGroup();if(d.resizePoints!==void 0)this.resizePoints=d.resizePoints;if(d.resizeLines!==void 0)this.resizeLines=d.resizeLines;if(d.resizeAreas!==void 0)this.resizeAreas=d.resizeAreas;if(d.resizePoints!==void 0)this.resizePoints=d.resizePoints;if(d.resizeLines!==
void 0)this.resizeLines=d.resizeLines;if(d.resizeAreas!==void 0)this.resizeAreas=d.resizeAreas;this.initialized=!0;b()},createContainer:function(b){return b.createGroup()},prepare:function(){var b=this.map.getBbox();if(b)this.extent=b;var d=b[3]-b[1];if(b[2]-b[0]<1E3||d<1E3)this.correctScale=!0;this.factories.Placemark.init();this.factories.Placemark.prepare()},getTopContainer:function(){return this.group},onForFeature:function(b,d,a,c){var h=[],a=this.normalizeCallback(b,d,a,c),d=m[d];k.forEach(b.baseShapes,
function(b){h.push([b,b.connect(d,a)])});return h},disconnect:function(b){k.forEach(b,function(b){b[0].disconnect(b[1])})},destroy:function(){this.surface.destroy()},onForMap:function(b,d,c){return a(this.map.container,b,o.hitch(this,function(b){var a=g.position(this.container,!0),a=this.map.containerPixelToCoords(b.pageX-a.x,b.pageY-a.y);d.call(c,{mapCoords:a,nativeEvent:b})}))},_on_zoom_changed:function(b,d,c){return a(this,b,o.hitch(c,d))},_on_extent_changed:function(b,d,c){return a(this,b,o.hitch(c,
d))},zoomTo:function(b){var d=this.map,a=b[2]-b[0],c=b[3]-b[1],h=(this.group.getTransform()||{xx:1}).xx,r=Math.min(d.width/a,d.height/c),v=this.factories.Placemark,e=v.getX(b[0]),m=v.getY(b[3]);a==0&&c==0&&(a=d.extent||d.getBbox(),r=this.pointZoomFactor*Math.min(a[2]-a[0],a[3]-a[1]),d.width>d.height?(c=r,a=d.width/d.height*r):(a=r,c=d.height/d.width*r),r=d.width/a,e=v.getX(b[0]-a/2),m=v.getY(b[3]+c/2));var g=this.layers;g.length&&(k.forEach(g,function(r){r.zoomTo(b)}),g[0].discreteScales&&(r=g[0].getScale()));
g=r;this.correctScale&&(r/=this.correctionScale);this.group.setTransform([n.translate((d.width-g*a)/2,(d.height-g*c)/2),n.scale(r),n.translate(-e,-m)]);h!=r&&(v.calculateLengthDenominator(),this.resizeFeatures(this.map.document,h/r));this.onzoom_changed()},resizeFeatures:function(b,d){k.forEach(b.features,function(b){b.isPlacemark?this._resizePlacemark(b,d):b.isContainer&&this.resizeFeatures(b,d)},this)},_resizePlacemark:function(b,d){if(!b.invalid&&(this.resizePoints&&b.isPoint()?k.forEach(b.baseShapes,
function(b){b.applyRightTransform(n.scale(d))}):c.renderer!="vml"&&!(c.renderer=="svg"&&(j("webkit")||j("opera")))&&(this.resizeLines&&b.isLine()||this.resizeAreas&&b.isArea())&&k.forEach(b.baseShapes,function(b){var a=b.getStroke();a&&(a.width*=d,b.setStroke(a))}),b.textShapes)){var a=this.map.engine.factories.Placemark._calculateTextPosition(b);k.forEach(b.textShapes,function(b){b.setTransform(a)})}},_setCamera:function(b){var d=this.map,a=d.engine.factories.Placemark,c=e.scales[b.zoom],h=a.getX(b.center[0]-
d.width/c/2),r=a.getY(b.center[1]+d.height/c/2),v=this.layers;v.length&&k.forEach(v,function(r){r._setCenterAndZoom(b.center,b.zoom)},this);this.correctScale&&(c/=this.correctionScale);this.group.setTransform([n.scale(c),n.translate(-h,-r)]);a.calculateLengthDenominator();this.resizeFeatures(d.document,1/c)},_set_center:function(b){var b=this.map.getCoords(b),d=this.map,a=d.engine.factories.Placemark,c=(this.group.getTransform()||{xx:1}).xx,h=c,r=this.layers;r.length&&k.forEach(r,function(r){r.setCenter(b)},
this);this.correctScale&&(h*=this.correctionScale);r=a.getX(b[0]-d.width/h/2);d=a.getY(b[1]+d.height/h/2);this.group.setTransform([n.scale(c),n.translate(-r,-d)])},_get_center:function(){var b=this.map;return this.containerPixelToCoords(b.width/2,b.height/2)},_set_zoom:function(b){var d=this.map;if(!(b<d.minZoom||b>d.maxZoom)){var a=(this.group.getTransform()||{xx:1}).xx,a=e.scales[b]/a,c=this.layers;c.length&&k.forEach(c,function(d){d.setZoom(b)});this.group.applyLeftTransform({xx:a,yy:a,dx:d.width/
2*(1-a),dy:d.height/2*(1-a)});this.factories.Placemark.calculateLengthDenominator();this.resizeFeatures(this.map.document,1/a);this.onzoom_changed()}},_get_zoom:function(){return this.layers.length?this.layers[0].zoom:-1},_get_extent:function(){var b=this.map,d=this.containerPixelToCoords(0,b.height),b=this.containerPixelToCoords(b.width,0);return[d[0],d[1],b[0],b[1]]},containerPixelToCoords:function(b,d){var a=this.group.getTransform(),c=a.xx,h=-a.dx/c,a=-a.dy/c;this.correctScale&&(h/=this.correctionScale,
a/=this.correctionScale);this.correctScale&&(c*=this.correctionScale);h+=this.extent[0]+b/c;a=this.extent[3]-a-d/c;return[h,a]},_appendDiv:function(b){this.container.children[0].appendChild(b)}})})},"tiles/BaseTileable":function(){define("tiles/BaseTileable",["dojo/_base/declare","dojo/has","dojo/_base/window","dojo/_base/lang","dojo/dom","dojo/dom-class","dojo/dom-construct","dojo/_base/sniff"],function(f,l,j,o,k,i,g){var a;if(l("webkit")){i=j.doc.createElement("div");i.style.webkitTransform="translate3d(0px,1px,0px)";
j.doc.documentElement.appendChild(i);var e=j.doc.defaultView.getComputedStyle(i,"")["-webkit-transform"];a=e&&e.indexOf("matrix")===0;j.doc.documentElement.removeChild(i)}var c=function(a,c){a.style.KhtmlUserSelect=c?"auto":"none";a.style.MozUserSelect=c?"":"none";a.onselectstart=c?null:function(){return!1};if(l("ie")){a.unselectable=c?"":"on";for(var h=a.getElementsByTagName("*"),d=0;d<h.length;d++)h[d].unselectable=c?"":"on"}};return f(null,{maxSpeed:500,scrollBar:!1,constraint:!1,numTilesX:0,numTilesY:0,
tileBounds:null,wrapHor:!1,tiles:null,ltTile:null,rtTile:null,lbTile:null,rbTile:null,tileSize:256,zoom:0,center:null,setTileContent:null,offsetX:0,offsetY:0,extraTilesL:0,extraTilesR:0,extraTilesT:0,extraTilesB:0,swapThresholdX:1,swapThresholdY:1,_left:0,_top:0,constructor:function(a,c){this.kwArgs=a;o.isString(c)&&(c=k.byId(c));this.domNode=c;if(!dojo.isArray(this.tileSize))this.tileSize=[this.tileSize,this.tileSize];if(a.zoom!==void 0)this.zoom=a.zoom;if(!a.extent){var h=Math.pow(2,this.zoom);
this.extent=[0,0,this.tileSize[0]*h,this.tileSize[1]*h]}if(!a.center)this.center=[0,0];if(!a.setTileContent)this.setTileContent=function(){};this.tiles=[];this.tileBounds=[];if(a.extraTiles!==void 0)this.extraTilesB=this.extraTilesT=this.extraTilesR=this.extraTilesL=h=a.extraTiles},_calculateTileBounds:function(){var a=this.tileBounds,c=this.extent,h=this.tileSize;a[0]=Math.floor((c[0]+1)/h[0]);a[1]=Math.floor((c[1]+1)/h[1]);a[2]=Math.floor((c[2]-1)/h[0]);a[3]=Math.floor((c[3]-1)/h[1])},_mixin:function(){o.mixin(this,
this.kwArgs);delete this.kwArgs},_buildRendering:function(){this.containerNode=g.create("div",{style:{position:"relative"}});this.containerNode.style.height=(j.global.innerHeight||j.doc.documentElement.clientHeight)*2+"px";this.buildTiles();this.domNode.appendChild(this.containerNode);this.touchNode=this.domNode;c(this.domNode,!1)},buildTiles:function(){this.updateDivDimensions();this.numTilesX=1+Math.ceil(this.width/this.tileSize[0])+this.extraTilesL+this.extraTilesR;this.numTilesY=1+Math.ceil(this.height/
this.tileSize[1])+this.extraTilesT+this.extraTilesB;for(var a=this.tiles,c=0,h=0;h<this.numTilesX;h++)for(var d=0;d<this.numTilesY;d++){a[c]={empty:!0,div:g.create("div",{style:{position:"absolute",left:h*this.tileSize[0]+"px",top:d*this.tileSize[1]+"px",width:this.tileSize[0]+"px",height:this.tileSize[1]+"px"}},this.containerNode),l:h!=0?a[c-this.numTilesY]:null,t:d!=0?a[c-1]:null,r:null,b:null,x:h,y:d};if(h!=0)a[c-this.numTilesY].r=a[c];if(d!=0)a[c-1].b=a[c];c++}this.ltTile=this.tiles[0];this.lbTile=
this.tiles[this.numTilesY-1];this.rtTile=this.tiles[this.numTilesY*(this.numTilesX-1)];this.rbTile=this.tiles[this.numTilesY*this.numTilesX-1]},_startup:function(){this.updateTileDivs()},doZoom:function(a,c,h){this.updateDivDimensions();if(c===void 0)c=this.halfWidth,h=this.halfHeight;var d=Math.pow(2,a-this.zoom);this.zoom=a;for(a=0;a<4;a++)this.extent[a]=Math.floor(d*this.extent[a]);this._calculateTileBounds();var a=this.getPos(),e=d*(-this._top+(this.y1-this.tileOffsetY)*this.tileSize[1]-a.y+h);
this.center[0]=d*(-this._left+(this.x1-this.tileOffsetX)*this.tileSize[0]-a.x+c)+this.halfWidth-c;this.center[1]=e+this.halfHeight-h;this.updateTileDivs()},updateDivDimensions:function(){this.width=this.domNode.clientWidth;this.height=this.domNode.clientHeight;this.halfWidth=Math.floor(this.width/2);this.halfHeight=Math.floor(this.height/2)},updateTileDivs:function(){var a=this.center,c=this.tileBounds,h=a[0]-(this.width-this.halfWidth),d=a[1]-(this.height-this.halfHeight),a=h%this.tileSize[0],e=
d%this.tileSize[1],h=(h-a)/this.tileSize[0],d=(d-e)/this.tileSize[1],m=0,b=0;a<0&&(m=-a,m=1+(m-m%this.tileSize[0])/this.tileSize[0],a+=m*this.tileSize[0]);e<0&&(b=-e,b=1+(b-b%this.tileSize[1])/this.tileSize[1],e+=b*this.tileSize[1]);a+=this.extraTilesL*this.tileSize[0];e+=this.extraTilesT*this.tileSize[1];m+=this.extraTilesL;b+=this.extraTilesT;h<c[0]&&(m+=c[0]-h,h=c[0]);d<c[1]&&(b+=c[1]-d,d=c[1]);this.x1=h;this.y1=d;this.tileOffsetX=m;this.tileOffsetY=b;for(var p=this.ltTile,g=0;g<this.numTilesX;g++)for(var i=
p,k=0;k<this.numTilesY;k++){var r=g+h-m,v=k+d-b,x=r>=c[0]&&r<=c[2];if(v>=c[1]&&v<=c[3]&&(x||this.wrapHor)){this.wrapHor&&!x&&(r>c[2]?r=c[0]+(r-c[2]-1)%(c[2]-c[0]+1):r<c[0]&&(r=c[2]+(r-c[0]+1)%(c[2]-c[0]+1)));if(p.empty)p.empty=!1;this.setTileContent(p,this.zoom,r,v)}else p.empty||this.clearTile(p);p=p.b?p.b:i.r}this.offsetX=-this._left-a;this.offsetY=-this._top-e;this.scrollTo({x:this.offsetX,y:this.offsetY})},clearTile:function(a){a.div.removeChild(a.img);delete a.img;a.empty=!0},_renderTile:function(a,
c,h){var d=this.tileBounds,c=c+this.x1-this.tileOffsetX,h=h+this.y1-this.tileOffsetY,e=c>=d[0]&&c<=d[2];if(h>=d[1]&&h<=d[3]&&(e||this.wrapHor)){this.wrapHor&&!e&&(c>d[2]?c=d[0]+(c-d[2]-1)%(d[2]-d[0]+1):c<d[0]&&(c=d[2]+(c-d[0]+1)%(d[2]-d[0]+1)));if(a.empty)a.empty=!1;this.setTileContent(a,this.zoom,c,h)}else a.empty||this.clearTile(a)},onTouchMove:function(a,c){var h=this.getPos(),d=h.x-this.offsetX,e=h.y-this.offsetY,m=(d-d%this.tileSize[0])/this.tileSize[0],b=(e-e%this.tileSize[1])/this.tileSize[1];
this.swapTiles(Math.abs(m)>=this.swapThresholdX?m:0,Math.abs(b)>=this.swapThresholdY?b:0);if(Math.abs(m)>=this.swapThresholdX)this.offsetX=h.x-d%this.tileSize[0];if(Math.abs(b)>=this.swapThresholdY)this.offsetY=h.y-e%this.tileSize[1];this.scrollTo({x:this.startPos.x+a,y:this.startPos.y+c})},swapTiles:function(a,c){if(a){var h=this.ltTile,d=h,e=this.rtTile,m=e,b=this.lbTile,p=this.rbTile,g=Math.abs(a);if(g>1)for(var i=1;i<g;i++)d=d.r,m=e.l,b=b.r,p=p.l;var k=this._left;a<0?(this.ltTile=d.r,this.rtTile=
d,this.lbTile=b.r,this.rbTile=b,k+=this.numTilesX*this.tileSize[0]):(this.ltTile=m,this.rtTile=m.l,this.lbTile=p,this.rbTile=p.l,k-=this.tileSize[0]);this._left-=a*this.tileSize[0];for(i=0;i<this.numTilesY;i++){if(a<0){for(var b=h,r=0;r<g;r++)b.div.style.left=k+r*this.tileSize[0]+"px",this._renderTile(b,this.numTilesX+r,i),b=b.r;d.r.l=null;d.r=null}else{b=e;for(r=0;r<g;r++)b.div.style.left=k-r*this.tileSize[0]+"px",this._renderTile(b,-1-r,i),b=b.l;m.l.r=null;m.l=null}e.r=h;h.l=e;h=h.b;d=d.b;m=m.b;
e=e.b}this.x1-=a}if(c){p=b=this.lbTile;d=h=this.ltTile;m=this.rbTile;e=this.rtTile;k=Math.abs(c);if(g>1)for(i=1;i<g;i++)p=p.t,d=d.b,m=m.t,e=e.b;g=this._top;c<0?(this.ltTile=d.b,this.lbTile=d,this.rtTile=e.b,this.rbTile=e,g+=this.numTilesY*this.tileSize[1]):(this.ltTile=p,this.lbTile=p.t,this.rtTile=m,this.rbTile=m.t,g-=this.tileSize[1]);this._top-=c*this.tileSize[1];for(i=0;i<this.numTilesX;i++){if(c<0){e=h;for(r=0;r<k;r++)e.div.style.top=g+r*this.tileSize[1]+"px",this._renderTile(e,i,this.numTilesY+
r),e=e.b;d.b.t=null;d.b=null}else{e=b;for(r=0;r<k;r++)e.div.style.top=g-r*this.tileSize[1]+"px",this._renderTile(e,i,-1-r),e=e.t;p.t.b=null;p.t=null}h.t=b;b.b=h;b=b.r;p=p.r;d=d.r;h=h.r}this.y1-=c}},slideTo:function(){},scrollTo:function(a){var c=this.containerNode.style;l("webkit")?c.webkitTransform=this.makeTranslateStr(a):(c.top=Math.round(a.y)+"px",c.left=Math.round(a.x)+"px");this._pos=a},makeTranslateStr:function(c){var e=c.y+"px",c=c.x+"px";return a?"translate3d("+c+","+e+",0px)":"translate("+
c+","+e+")"},getPos:function(){return this._pos||{x:0,y:0}}})})},"djeo/dojox/gfx/gradient":function(){define("djeo/dojox/gfx/gradient",["dojo/_base/lang","./matrix","dojo/_base/Color"],function(f,l,j){function o(g,a,e,c,i,k){g=l.multiplyPoint(e,g,a);c=l.multiplyPoint(c,g);return{r:g,p:c,o:l.multiplyPoint(i,c).x/k}}function k(g,a){return g.o-a.o}var i=f.getObject("dojox.gfx.gradient",!0);i.rescale=function(g,a,e){var c=g.length,i=e<a,k;i&&(k=a,a=e,e=k);if(!c)return[];if(e<=g[0].offset)k=[{offset:0,
color:g[0].color},{offset:1,color:g[0].color}];else if(a>=g[c-1].offset)k=[{offset:0,color:g[c-1].color},{offset:1,color:g[c-1].color}];else{var h=e-a,d,f,m;k=[];a<0&&k.push({offset:0,color:new j(g[0].color)});for(m=0;m<c;++m)if(d=g[m],d.offset>=a)break;m?(f=g[m-1],k.push({offset:0,color:j.blendColors(new j(f.color),new j(d.color),(a-f.offset)/(d.offset-f.offset))})):k.push({offset:0,color:new j(d.color)});for(;m<c;++m){d=g[m];if(d.offset>=e)break;k.push({offset:(d.offset-a)/h,color:new j(d.color)})}m<
c?(f=g[m-1],k.push({offset:1,color:j.blendColors(new j(f.color),new j(d.color),(e-f.offset)/(d.offset-f.offset))})):k.push({offset:1,color:new j(g[c-1].color)})}if(i){k.reverse();m=0;for(c=k.length;m<c;++m)d=k[m],d.offset=1-d.offset}return k};i.project=function(g,a,e,c){var g=g||l.identity,n=l.multiplyPoint(g,a.x1,a.y1),f=l.multiplyPoint(g,a.x2,a.y2),h=Math.atan2(f.y-n.y,f.x-n.x),d=l.project(f.x-n.x,f.y-n.y),n=l.multiplyPoint(d,n),f=l.multiplyPoint(d,f),n=new l.Matrix2D([l.rotate(-h),{dx:-n.x,dy:-n.y}]),
f=l.multiplyPoint(n,f).x,g=[o(e.x,e.y,g,d,n,f),o(c.x,c.y,g,d,n,f),o(e.x,c.y,g,d,n,f),o(c.x,e.y,g,d,n,f)].sort(k),a=i.rescale(a.colors,g[0].o,g[3].o);return{type:"linear",x1:g[0].p.x,y1:g[0].p.y,x2:g[3].p.x,y2:g[3].p.y,colors:a,angle:h}};return i})},"dojo/touch":function(){define("dojo/touch",["./_base/kernel","./on","./has","./mouse"],function(f,l,j,o){function k(i){return function(g,a){return l(g,i,a)}}j=j("touch");f.touch={press:k(j?"touchstart":"mousedown"),move:k(j?"touchmove":"mousemove"),release:k(j?
"touchend":"mouseup"),cancel:j?k("touchcancel"):o.leave};return f.touch})},"djeo/dojox/gfx":function(){define("djeo/dojox/gfx",["dojo/_base/lang","./gfx/_base","./gfx/renderer!"],function(f,l,j){l.switchTo(j);return l})},"djeo/util/geometry":function(){define("djeo/util/geometry",["./bbox"],function(f){return{center:function(l){var l=f.get(l),j;l&&(j=[(l[0]+l[2])/2,(l[1]+l[3])/2]);return j}}})},"dojo/dom-prop":function(){define("dojo/dom-prop",["exports","./_base/kernel","./_base/sniff","./_base/lang",
"./dom","./dom-style","./dom-construct","./_base/connect"],function(f,l,j,o,k,i,g,a){var e={},c=0,n=l._scopeName+"attrid",q={col:1,colgroup:1,table:1,tbody:1,tfoot:1,thead:1,tr:1,title:1};f.names={"class":"className","for":"htmlFor",tabindex:"tabIndex",readonly:"readOnly",colspan:"colSpan",frameborder:"frameBorder",rowspan:"rowSpan",valuetype:"valueType"};f.get=function(a,d){var a=k.byId(a),c=d.toLowerCase();return a[f.names[c]||d]};f.set=function(h,d,t){h=k.byId(h);if(arguments.length==2&&typeof d!=
"string"){for(var m in d)f.set(h,m,d[m]);return h}m=d.toLowerCase();m=f.names[m]||d;if(m=="style"&&typeof t!="string")return i.style(h,t),h;if(m=="innerHTML")return j("ie")&&h.tagName.toLowerCase()in q?(g.empty(h),h.appendChild(g.toDom(t,h.ownerDocument))):h[m]=t,h;if(o.isFunction(t)){var b=h[n];b||(b=c++,h[n]=b);e[b]||(e[b]={});var p=e[b][m];if(p)a.disconnect(p);else try{delete h[m]}catch(y){}t?e[b][m]=a.connect(h,m,t):h[m]=null;return h}h[m]=t;return h}})},"djeo/djeo/Moveable":function(){define("djeo/djeo/Moveable",
["dojo/_base/declare","dojo/_base/event","dojo/on","dojo/touch","dojo/_base/lang","dojo/dom-class","./Mover"],function(f,l,j,o,k,i,g){return f(null,{delay:0,constructor:function(a,e){this.node=a;this.map=e;this.mover=g;this._pressHandle=j(a,o.press,k.hitch(this,this.onPress))},destroy:function(){this._pressHandle.remove();delete this._pressHandle},onPress:function(a){if(this.delay)this._onMoveHandle=j(this.node,o.move,k.hitch(this,this._onMove)),this._onReleaseHandle=j(this.node,o.release,k.hitch(this,
this.onRelease)),this._lastX=a.pageX,this._lastY=a.pageY;else this.onDragDetected(a);l.stop(a)},_onMove:function(a){if(Math.abs(a.pageX-this._lastX)>this.delay||Math.abs(a.pageY-this._lastY)>this.delay)this.onRelease(a),this.onDragDetected(a);l.stop(a)},onRelease:function(a){this._onReleaseHandle.cancel();this._onMoveHandle.cancel();delete this._onReleaseHandle;l.stop(a)},onDragDetected:function(a){new this.mover(this.node,a,this)},onMoveStart:function(){},onMoveStop:function(){},onFirstMove:function(){for(var a=
this.map.engine,e=0;e<a.layers.length;e++)a.layers[e].setStartPos()},onMove:function(a,e,c,g,i){this.onMoving(a,e,c,g,i);var h=this.map.engine;h.group.applyLeftTransform({dx:g,dy:i});if(h._infoWindow){s=h._infoWindow.domNode.style;var d=s.left,k=s.top;s.left=d?parseInt(d.substr(0,d.length-2))+g:g;s.top=k?parseInt(k.substr(0,k.length-2))+i:i}for(d=0;d<h.layers.length;d++)h.layers[d].onMove(e,c);this.onMoved(a,e,c,g,i)},onMoving:function(){},onMoved:function(){}})})},"djeo/gfx":function(){define("djeo/gfx",
["dojo/has","dojo/_base/Color","./dojox/gfx","./_base","./common/Placemark","dojo/_base/sniff"],function(f,l,j,o,k){o.shapes={circle:1,star:{size:[1E3,1E3],points:[0,-476,118,-112,500,-112,191,112,309,476,0,251,-309,476,-191,112,-500,-112,-118,-112,0,-476]},cross:{size:[10,10],points:[-1,-5,1,-5,1,-1,5,-1,5,1,1,1,1,5,-1,5,-1,1,-5,1,-5,-1,-1,-1,-1,-5]},x:{size:[100,100],points:[-50,-50,-25,-50,0,-15,25,-50,50,-50,15,0,50,50,25,50,0,15,-25,50,-50,50,-15,0,-50,-50]},square:{size:[2,2],points:[-1,-1,
-1,1,1,1,1,-1,-1,-1]},triangle:{size:[10,10],points:[-5,5,5,5,0,-5,-5,5]}};return{applyFill:function(i,g,a,e){var c=k.get("fill",g,a,e),g=k.get("fillOpacity",g,a,e);if(c||g!==void 0)if(e=(a=i.getFill())&&a.a,c&&(a=new l(c)),a){if(g!==void 0)a.a=g;else if(e!==void 0)a.a=e;i.setFill(a)}},applyStroke:function(i,g,a,e,c){if(j.renderer=="vml"||j.renderer=="svg"&&(f("webkit")||f("opera")))c=1;var n=k.get("stroke",g,a,e),q=k.get("strokeWidth",g,a,e),g=k.get("strokeOpacity",g,a,e);if(n||q!==void 0||g!==void 0)if(q===
0)i.setStroke(null);else{a=i.getStroke();if(n)a||(a={join:"round",cap:"round"}),a.color=new l(n);if(a){if(g!==void 0)a.color.a=g;if(q)a.width=q*c;i.setStroke(a)}}}}})},"dojo/dom-attr":function(){define("dojo/dom-attr",["exports","./_base/sniff","./_base/lang","./dom","./dom-style","./dom-prop"],function(f,l,j,o,k,i){function g(a,e){var g=a.getAttributeNode&&a.getAttributeNode(e);return g&&g.specified}var a={innerHTML:1,className:1,htmlFor:l("ie"),value:1},e={classname:"class",htmlfor:"for",tabindex:"tabIndex",
readonly:"readOnly"};f.has=function(c,k){var f=k.toLowerCase();return a[i.names[f]||k]||g(o.byId(c),e[f]||k)};f.get=function(c,k){var c=o.byId(c),f=k.toLowerCase(),h=i.names[f]||k,d=a[h];value=c[h];if(d&&typeof value!="undefined")return value;if(h!="href"&&(typeof value=="boolean"||j.isFunction(value)))return value;f=e[f]||k;return g(c,f)?c.getAttribute(f):null};f.set=function(c,g,l){c=o.byId(c);if(arguments.length==2){for(var h in g)f.set(c,h,g[h]);return c}h=g.toLowerCase();var d=i.names[h]||g,
t=a[d];if(d=="style"&&typeof l!="string")return k.set(c,l),c;if(t||typeof l=="boolean"||j.isFunction(l))return i.set(c,g,l);c.setAttribute(e[h]||g,l);return c};f.remove=function(a,g){o.byId(a).removeAttribute(e[g.toLowerCase()]||g)};f.getNodeProp=function(a,k){var a=o.byId(a),f=k.toLowerCase(),h=i.names[f]||k;if(h in a&&h!="href")return a[h];f=e[f]||k;return g(a,f)?a.getAttribute(f):null}})},"dojo/dom-construct":function(){define("dojo/dom-construct",["exports","./_base/kernel","./_base/sniff","./_base/window",
"./dom","./dom-attr","./on"],function(f,l,j,o,k,i,g){function a(b,a){var d=a.parentNode;d&&d.insertBefore(b,a)}var e={option:["select"],tbody:["table"],thead:["table"],tfoot:["table"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","thead","tr"],legend:["fieldset"],caption:["table"],colgroup:["table"],col:["table","colgroup"],li:["ul"]},c=/<\s*([\w\:]+)/,n={},q=0,h="__"+l._scopeName+"ToDomId",d;for(d in e)if(e.hasOwnProperty(d))l=e[d],l.pre=d=="option"?'<select multiple="multiple">':"<"+
l.join("><")+">",l.post="</"+l.reverse().join("></")+">";var t=null,m;g(window,"unload",function(){t=null});f.toDom=function(b,a){var a=a||o.doc,d=a[h];d||(a[h]=d=++q+"",n[d]=a.createElement("div"));b+="";var g=b.match(c),m=g?g[1].toLowerCase():"",d=n[d];if(g&&e[m]){g=e[m];d.innerHTML=g.pre+b+g.post;for(g=g.length;g;--g)d=d.firstChild}else d.innerHTML=b;if(d.childNodes.length==1)return d.removeChild(d.firstChild);for(m=a.createDocumentFragment();g=d.firstChild;)m.appendChild(g);return m};f.place=
function(b,d,c){d=k.byId(d);typeof b=="string"&&(b=/^\s*</.test(b)?f.toDom(b,d.ownerDocument):k.byId(b));if(typeof c=="number"){var h=d.childNodes;!h.length||h.length<=c?d.appendChild(b):a(b,h[c<0?0:c])}else switch(c){case "before":a(b,d);break;case "after":c=b;(h=d.parentNode)&&(h.lastChild==d?h.appendChild(c):h.insertBefore(c,d.nextSibling));break;case "replace":d.parentNode.replaceChild(b,d);break;case "only":f.empty(d);d.appendChild(b);break;case "first":if(d.firstChild){a(b,d.firstChild);break}default:d.appendChild(b)}return b};
f.create=function(b,a,d,c){var h=o.doc;if(d)d=k.byId(d),h=d.ownerDocument;typeof b=="string"&&(b=h.createElement(b));a&&i.set(b,a);d&&f.place(b,d,c);return b};f.empty=j("ie")?function(b){for(var b=k.byId(b),a;a=b.lastChild;)f.destroy(a)}:function(b){k.byId(b).innerHTML=""};f.destroy=function(b){b=k.byId(b);try{var a=b.ownerDocument;if(!t||m!=a)t=a.createElement("div"),m=a;t.appendChild(b.parentNode?b.parentNode.removeChild(b):b);t.innerHTML=""}catch(d){}}})},"djeo/djeo/Mover":function(){define("djeo/djeo/Mover",
["dojo/_base/declare","dojo/has","dojo/_base/event","dojo/on","dojo/touch","dojo/_base/lang","dojo/_base/sniff"],function(f,l,j,o,k,i){return f(null,{constructor:function(g,a,e){this.node=g;this.startX=a.touches?a.touches[0].pageX:a.pageX;this.startY=a.touches?a.touches[0].pageY:a.pageY;this.mouseButton=a.button;a=this.host=e;g=g.ownerDocument;this._onFirstMove=o(g,k.move,i.hitch(this,this.onFirstMove));this._onMouseMove=o(g,k.move,i.hitch(this,this.onMouseMove));this._onMouseUp=o(g,k.release,i.hitch(this,
this.onMouseUp));if(a&&a.onMoveStart)a.onMoveStart(this)},onMouseMove:function(g){var a=g.touches?g.touches[0].pageX:g.pageX,e=g.touches?g.touches[0].pageY:g.pageY;this.host.onMove(this,this.startPosX+(a-this.startX),this.startPosY+(e-this.startY),a-this.lastX,e-this.lastY,g);this.lastX=a;this.lastY=e;j.stop(g)},onMouseUp:function(g){(l("webkit")&&l("mac")&&this.mouseButton==2?g.button==0:this.mouseButton==g.button)&&this.destroy();j.stop(g)},onFirstMove:function(g){var a=this.node.style,e=this.host;
this.startPosX=Math.round(parseFloat(a.left))||0;this.startPosY=Math.round(parseFloat(a.top))||0;this.lastX=this.startX;this.lastY=this.startY;if(e&&e.onFirstMove)e.onFirstMove(this,g);this._onFirstMove.remove();delete this._onFirstMove},destroy:function(){this._onFirstMove&&this._onFirstMove.remove();this._onMouseUp.remove();this._onMouseMove.remove();var g=this.host;if(g&&g.onMoveStop)g.onMoveStop(this);this._onFirstMove=this._onMouseMove=this._onMouseUp=this._onFirstMove=this.node=this.host=null}})})},
"djeo/dojox/gfx/path":function(){define("djeo/dojox/gfx/path",["./_base","dojo/_base/lang","dojo/_base/declare","./matrix","./shape"],function(f,l,j,o,k){f.path={};k=j("dojox.gfx.path.Path",k.Shape,{constructor:function(i){this.shape=l.clone(f.defaultPath);this.segments=[];this.tbbox=null;this.absolute=!0;this.last={};this.rawNode=i;this.segmented=!1},setAbsoluteMode:function(i){this._confirmSegmented();this.absolute=typeof i=="string"?i=="absolute":i;return this},getAbsoluteMode:function(){this._confirmSegmented();
return this.absolute},getBoundingBox:function(){this._confirmSegmented();return this.bbox&&"l"in this.bbox?{x:this.bbox.l,y:this.bbox.t,width:this.bbox.r-this.bbox.l,height:this.bbox.b-this.bbox.t}:null},_getRealBBox:function(){this._confirmSegmented();if(this.tbbox)return this.tbbox;var i=this.bbox,g=this._getRealMatrix();this.bbox=null;for(var a=0,e=this.segments.length;a<e;++a)this._updateWithSegment(this.segments[a],g);g=this.bbox;this.bbox=i;return this.tbbox=g?[{x:g.l,y:g.t},{x:g.r,y:g.t},{x:g.r,
y:g.b},{x:g.l,y:g.b}]:null},getLastPosition:function(){this._confirmSegmented();return"x"in this.last?this.last:null},_applyTransform:function(){this.tbbox=null;return this.inherited(arguments)},_updateBBox:function(i,g,a){if(a)g=o.multiplyPoint(a,i,g),i=g.x,g=g.y;if(this.bbox&&"l"in this.bbox){if(this.bbox.l>i)this.bbox.l=i;if(this.bbox.r<i)this.bbox.r=i;if(this.bbox.t>g)this.bbox.t=g;if(this.bbox.b<g)this.bbox.b=g}else this.bbox={l:i,b:g,r:i,t:g}},_updateWithSegment:function(i,g){var a=i.args,e=
a.length,c;switch(i.action){case "M":case "L":case "C":case "S":case "Q":case "T":for(c=0;c<e;c+=2)this._updateBBox(a[c],a[c+1],g);this.last.x=a[e-2];this.last.y=a[e-1];this.absolute=!0;break;case "H":for(c=0;c<e;++c)this._updateBBox(a[c],this.last.y,g);this.last.x=a[e-1];this.absolute=!0;break;case "V":for(c=0;c<e;++c)this._updateBBox(this.last.x,a[c],g);this.last.y=a[e-1];this.absolute=!0;break;case "m":c=0;if(!("x"in this.last))this._updateBBox(this.last.x=a[0],this.last.y=a[1],g),c=2;for(;c<e;c+=
2)this._updateBBox(this.last.x+=a[c],this.last.y+=a[c+1],g);this.absolute=!1;break;case "l":case "t":for(c=0;c<e;c+=2)this._updateBBox(this.last.x+=a[c],this.last.y+=a[c+1],g);this.absolute=!1;break;case "h":for(c=0;c<e;++c)this._updateBBox(this.last.x+=a[c],this.last.y,g);this.absolute=!1;break;case "v":for(c=0;c<e;++c)this._updateBBox(this.last.x,this.last.y+=a[c],g);this.absolute=!1;break;case "c":for(c=0;c<e;c+=6)this._updateBBox(this.last.x+a[c],this.last.y+a[c+1],g),this._updateBBox(this.last.x+
a[c+2],this.last.y+a[c+3],g),this._updateBBox(this.last.x+=a[c+4],this.last.y+=a[c+5],g);this.absolute=!1;break;case "s":case "q":for(c=0;c<e;c+=4)this._updateBBox(this.last.x+a[c],this.last.y+a[c+1],g),this._updateBBox(this.last.x+=a[c+2],this.last.y+=a[c+3],g);this.absolute=!1;break;case "A":for(c=0;c<e;c+=7)this._updateBBox(a[c+5],a[c+6],g);this.last.x=a[e-2];this.last.y=a[e-1];this.absolute=!0;break;case "a":for(c=0;c<e;c+=7)this._updateBBox(this.last.x+=a[c+5],this.last.y+=a[c+6],g);this.absolute=
!1}var k=[i.action];for(c=0;c<e;++c)k.push(f.formatNumber(a[c],!0));typeof this.shape.path=="string"?this.shape.path+=k.join(""):Array.prototype.push.apply(this.shape.path,k)},_validSegments:{m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7,z:0},_pushSegment:function(i,g){this.tbbox=null;var a=this._validSegments[i.toLowerCase()];typeof a=="number"&&(a?g.length>=a&&(a={action:i,args:g.slice(0,g.length-g.length%a)},this.segments.push(a),this._updateWithSegment(a)):(a={action:i,args:[]},this.segments.push(a),this._updateWithSegment(a)))},
_collectArgs:function(i,g){for(var a=0;a<g.length;++a){var e=g[a];typeof e=="boolean"?i.push(e?1:0):typeof e=="number"?i.push(e):e instanceof Array?this._collectArgs(i,e):"x"in e&&"y"in e&&i.push(e.x,e.y)}},moveTo:function(){this._confirmSegmented();var i=[];this._collectArgs(i,arguments);this._pushSegment(this.absolute?"M":"m",i);return this},lineTo:function(){this._confirmSegmented();var i=[];this._collectArgs(i,arguments);this._pushSegment(this.absolute?"L":"l",i);return this},hLineTo:function(){this._confirmSegmented();
var i=[];this._collectArgs(i,arguments);this._pushSegment(this.absolute?"H":"h",i);return this},vLineTo:function(){this._confirmSegmented();var i=[];this._collectArgs(i,arguments);this._pushSegment(this.absolute?"V":"v",i);return this},curveTo:function(){this._confirmSegmented();var i=[];this._collectArgs(i,arguments);this._pushSegment(this.absolute?"C":"c",i);return this},smoothCurveTo:function(){this._confirmSegmented();var i=[];this._collectArgs(i,arguments);this._pushSegment(this.absolute?"S":
"s",i);return this},qCurveTo:function(){this._confirmSegmented();var i=[];this._collectArgs(i,arguments);this._pushSegment(this.absolute?"Q":"q",i);return this},qSmoothCurveTo:function(){this._confirmSegmented();var i=[];this._collectArgs(i,arguments);this._pushSegment(this.absolute?"T":"t",i);return this},arcTo:function(){this._confirmSegmented();var i=[];this._collectArgs(i,arguments);this._pushSegment(this.absolute?"A":"a",i);return this},closePath:function(){this._confirmSegmented();this._pushSegment("Z",
[]);return this},_confirmSegmented:function(){if(!this.segmented){var i=this.shape.path;this.shape.path=[];this._setPath(i);this.shape.path=this.shape.path.join("");this.segmented=!0}},_setPath:function(i){i=l.isArray(i)?i:i.match(f.pathSvgRegExp);this.segments=[];this.absolute=!0;this.bbox={};this.last={};if(i){for(var g="",a=[],e=i.length,c=0;c<e;++c){var k=i[c],j=parseFloat(k);isNaN(j)?(g&&this._pushSegment(g,a),a=[],g=k):a.push(j)}this._pushSegment(g,a)}},setShape:function(i){this.inherited(arguments,
[typeof i=="string"?{path:i}:i]);this.segmented=!1;this.segments=[];f.lazyPathSegmentation||this._confirmSegmented();return this},_2PI:Math.PI*2});j=j("dojox.gfx.path.TextPath",k,{constructor:function(){if(!("text"in this))this.text=l.clone(f.defaultTextPath);if(!("fontStyle"in this))this.fontStyle=l.clone(f.defaultFont)},getText:function(){return this.text},setText:function(i){this.text=f.makeParameters(this.text,typeof i=="string"?{text:i}:i);this._setText();return this},getFont:function(){return this.fontStyle},
setFont:function(i){this.fontStyle=typeof i=="string"?f.splitFontString(i):f.makeParameters(f.defaultFont,i);this._setFont();return this}});return{Path:k,TextPath:j}})},"djeo/dojox/gfx/vml":function(){define("djeo/dojox/gfx/vml",["dojo/_base/lang","dojo/_base/declare","dojo/_base/array","dojo/_base/Color","dojo/_base/sniff","dojo/_base/config","dojo/dom","dojo/dom-geometry","dojo/_base/window","./_base","./shape","./path","./arc","./gradient","./matrix"],function(f,l,j,o,k,i,g,a,e,c,n,q,h,d,t){function m(b,
a,d){d=d||e.global;a.call(d,b);(b instanceof c.Surface||b instanceof c.Group)&&j.forEach(b.children,function(b){m(b,a,d)})}var b=c.vml={};b.xmlns="urn:schemas-microsoft-com:vml";document.namespaces.add("v",b.xmlns);var d=["*","group","roundrect","oval","shape","rect","imagedata","path","textpath","text"],p=0,y=1,u=document.createStyleSheet();if(k("ie")>=8)p=1,y=d.length;for(;p<y;++p)u.addRule("v\\:"+d[p],"behavior:url(#default#VML); display:inline-block");b.text_alignment={start:"left",middle:"center",
end:"right"};b._parseFloat=function(b){return b.match(/^\d+f$/i)?parseInt(b)/65536:parseFloat(b)};b._bool={t:1,"true":1};l("dojox.gfx.vml.Shape",n.Shape,{setFill:function(b){if(!b)return this.fillStyle=null,this.rawNode.filled="f",this;var a,d,h;if(typeof b=="object"&&"type"in b){switch(b.type){case "linear":var e=this._getRealMatrix(),g=this.getBoundingBox(),m=this._getRealBBox?this._getRealBBox():this.getTransformedBoundingBox();h=[];if(this.fillStyle!==b)this.fillStyle=c.makeParameters(c.defaultLinearGradient,
b);b=c.gradient.project(e,this.fillStyle,{x:g.x,y:g.y},{x:g.x+g.width,y:g.y+g.height},m[0],m[2]);d=b.colors;d[0].offset.toFixed(5)!="0.00000"&&h.push("0 "+c.normalizeColor(d[0].color).toHex());for(a=0;a<d.length;++a)h.push(d[a].offset.toFixed(5)+" "+c.normalizeColor(d[a].color).toHex());a=d.length-1;d[a].offset.toFixed(5)!="1.00000"&&h.push("1 "+c.normalizeColor(d[a].color).toHex());a=this.rawNode.fill;a.colors.value=h.join(";");a.method="sigma";a.type="gradient";a.angle=(270-t._radToDeg(b.angle))%
360;a.on=!0;break;case "radial":this.fillStyle=b=c.makeParameters(c.defaultRadialGradient,b);var e=parseFloat(this.rawNode.style.left),g=parseFloat(this.rawNode.style.top),m=parseFloat(this.rawNode.style.width),p=parseFloat(this.rawNode.style.height),i=isNaN(m)?1:2*b.r/m;d=[];b.colors[0].offset>0&&d.push({offset:1,color:c.normalizeColor(b.colors[0].color)});j.forEach(b.colors,function(b){d.push({offset:1-b.offset*i,color:c.normalizeColor(b.color)})});for(a=d.length-1;a>=0&&d[a].offset<0;)--a;if(a<
d.length-1){h=d[a];var k=d[a+1];k.color=o.blendColors(h.color,k.color,h.offset/(h.offset-k.offset));for(k.offset=0;d.length-a>2;)d.pop()}a=d.length-1;h=[];for(d[a].offset>0&&h.push("0 "+d[a].color.toHex());a>=0;--a)h.push(d[a].offset.toFixed(5)+" "+d[a].color.toHex());a=this.rawNode.fill;a.colors.value=h.join(";");a.method="sigma";a.type="gradientradial";a.focusposition=isNaN(m)||isNaN(p)||isNaN(e)||isNaN(g)?"0.5 0.5":((b.cx-e)/m).toFixed(5)+" "+((b.cy-g)/p).toFixed(5);a.focussize="0 0";a.on=!0;break;
case "pattern":this.fillStyle=b=c.makeParameters(c.defaultPattern,b);a=this.rawNode.fill;a.type="tile";a.src=b.src;if(b.width&&b.height)a.size.x=c.px2pt(b.width),a.size.y=c.px2pt(b.height);a.alignShape="f";a.position.x=0;a.position.y=0;a.origin.x=b.width?b.x/b.width:0;a.origin.y=b.height?b.y/b.height:0;a.on=!0}this.rawNode.fill.opacity=1;return this}this.fillStyle=c.normalizeColor(b);(a=this.rawNode.fill)||(a=this.rawNode.ownerDocument.createElement("v:fill"));a.method="any";a.type="solid";a.opacity=
this.fillStyle.a;if(h=this.rawNode.filters["DXImageTransform.Microsoft.Alpha"])h.opacity=Math.round(this.fillStyle.a*100);this.rawNode.fillcolor=this.fillStyle.toHex();this.rawNode.filled=!0;return this},setStroke:function(b){if(!b)return this.strokeStyle=null,this.rawNode.stroked="f",this;if(typeof b=="string"||f.isArray(b)||b instanceof o)b={color:b};b=this.strokeStyle=c.makeParameters(c.defaultStroke,b);b.color=c.normalizeColor(b.color);var a=this.rawNode;a.stroked=!0;a.strokecolor=b.color.toCss();
a.strokeweight=b.width+"px";if(a.stroke)a.stroke.opacity=b.color.a,a.stroke.endcap=this._translate(this._capMap,b.cap),typeof b.join=="number"?(a.stroke.joinstyle="miter",a.stroke.miterlimit=b.join):a.stroke.joinstyle=b.join,a.stroke.dashstyle=b.style=="none"?"Solid":b.style;return this},_capMap:{butt:"flat"},_capMapReversed:{flat:"butt"},_translate:function(b,a){return a in b?b[a]:a},_applyTransform:function(){var b=this._getRealMatrix();if(b){var a=this.rawNode.skew;if(typeof a=="undefined")for(var d=
0;d<this.rawNode.childNodes.length;++d)if(this.rawNode.childNodes[d].tagName=="skew"){a=this.rawNode.childNodes[d];break}if(a){a.on="f";var d=b.xx.toFixed(8)+" "+b.xy.toFixed(8)+" "+b.yx.toFixed(8)+" "+b.yy.toFixed(8)+" 0 0",b=Math.floor(b.dx).toFixed()+"px "+Math.floor(b.dy).toFixed()+"px",c=this.rawNode.style,h=parseFloat(c.left),e=parseFloat(c.top),g=parseFloat(c.width),c=parseFloat(c.height);isNaN(h)&&(h=0);isNaN(e)&&(e=0);if(isNaN(g)||!g)g=1;if(isNaN(c)||!c)c=1;h=(-h/g-0.5).toFixed(8)+" "+(-e/
c-0.5).toFixed(8);a.matrix=d;a.origin=h;a.offset=b;a.on=!0}}this.fillStyle&&this.fillStyle.type=="linear"&&this.setFill(this.fillStyle);return this},_setDimensions:function(){return this},setRawNode:function(b){b.stroked="f";b.filled="f";this.rawNode=b;this.rawNode.__gfxObject__=this.getUID()},_moveToFront:function(){this.rawNode.parentNode.appendChild(this.rawNode);return this},_moveToBack:function(){var b=this.rawNode,a=b.parentNode,d=a.firstChild;a.insertBefore(b,d);d.tagName=="rect"&&d.swapNode(b);
return this},_getRealMatrix:function(){return this.parentMatrix?new t.Matrix2D([this.parentMatrix,this.matrix]):this.matrix}});l("dojox.gfx.vml.Group",b.Shape,{constructor:function(){n.Container._init.call(this)},_applyTransform:function(){for(var b=this._getRealMatrix(),a=0;a<this.children.length;++a)this.children[a]._updateParentMatrix(b);return this},_setDimensions:function(b,a){var d=this.rawNode,c=d.style,h=this.bgNode.style;c.width=b;c.height=a;d.coordsize=b+" "+a;h.width=b;h.height=a;for(d=
0;d<this.children.length;++d)this.children[d]._setDimensions(b,a);return this}});b.Group.nodeType="group";l("dojox.gfx.vml.Rect",[b.Shape,n.Rect],{setShape:function(b){b=this.shape=c.makeParameters(this.shape,b);this.bbox=null;var a=Math.min(1,b.r/Math.min(parseFloat(b.width),parseFloat(b.height))).toFixed(8),d=this.rawNode.parentNode,h=null;if(d){if(d.lastChild!==this.rawNode)for(var e=0;e<d.childNodes.length;++e)if(d.childNodes[e]===this.rawNode){h=d.childNodes[e+1];break}d.removeChild(this.rawNode)}k("ie")>
7?(e=this.rawNode.ownerDocument.createElement("v:roundrect"),e.arcsize=a,e.style.display="inline-block",this.rawNode=e,this.rawNode.__gfxObject__=this.getUID()):this.rawNode.arcsize=a;d&&(h?d.insertBefore(this.rawNode,h):d.appendChild(this.rawNode));a=this.rawNode.style;a.left=b.x.toFixed();a.top=b.y.toFixed();a.width=typeof b.width=="string"&&b.width.indexOf("%")>=0?b.width:Math.max(b.width.toFixed(),0);a.height=typeof b.height=="string"&&b.height.indexOf("%")>=0?b.height:Math.max(b.height.toFixed(),
0);return this.setTransform(this.matrix).setFill(this.fillStyle).setStroke(this.strokeStyle)}});b.Rect.nodeType="roundrect";l("dojox.gfx.vml.Ellipse",[b.Shape,n.Ellipse],{setShape:function(b){b=this.shape=c.makeParameters(this.shape,b);this.bbox=null;var a=this.rawNode.style;a.left=(b.cx-b.rx).toFixed();a.top=(b.cy-b.ry).toFixed();a.width=(b.rx*2).toFixed();a.height=(b.ry*2).toFixed();return this.setTransform(this.matrix)}});b.Ellipse.nodeType="oval";l("dojox.gfx.vml.Circle",[b.Shape,n.Circle],{setShape:function(b){b=
this.shape=c.makeParameters(this.shape,b);this.bbox=null;var a=this.rawNode.style;a.left=(b.cx-b.r).toFixed();a.top=(b.cy-b.r).toFixed();a.width=(b.r*2).toFixed();a.height=(b.r*2).toFixed();return this}});b.Circle.nodeType="oval";l("dojox.gfx.vml.Line",[b.Shape,n.Line],{constructor:function(b){b&&b.setAttribute("dojoGfxType","line")},setShape:function(b){b=this.shape=c.makeParameters(this.shape,b);this.bbox=null;this.rawNode.path.v="m"+b.x1.toFixed()+" "+b.y1.toFixed()+"l"+b.x2.toFixed()+" "+b.y2.toFixed()+
"e";return this.setTransform(this.matrix)}});b.Line.nodeType="shape";l("dojox.gfx.vml.Polyline",[b.Shape,n.Polyline],{constructor:function(b){b&&b.setAttribute("dojoGfxType","polyline")},setShape:function(b,a){b&&b instanceof Array?(this.shape=c.makeParameters(this.shape,{points:b}),a&&this.shape.points.length&&this.shape.points.push(this.shape.points[0])):this.shape=c.makeParameters(this.shape,b);this.bbox=null;this._normalizePoints();var d=[],h=this.shape.points;if(h.length>0&&(d.push("m"),d.push(h[0].x.toFixed(),
h[0].y.toFixed()),h.length>1)){d.push("l");for(var e=1;e<h.length;++e)d.push(h[e].x.toFixed(),h[e].y.toFixed())}d.push("e");this.rawNode.path.v=d.join(" ");return this.setTransform(this.matrix)}});b.Polyline.nodeType="shape";l("dojox.gfx.vml.Image",[b.Shape,n.Image],{setShape:function(b){b=this.shape=c.makeParameters(this.shape,b);this.bbox=null;this.rawNode.firstChild.src=b.src;return this.setTransform(this.matrix)},_applyTransform:function(){var b=this._getRealMatrix(),a=this.rawNode,d=a.style,
c=this.shape,b=b?t.multiply(b,{dx:c.x,dy:c.y}):t.normalize({dx:c.x,dy:c.y});if(b.xy==0&&b.yx==0&&b.xx>0&&b.yy>0)d.filter="",d.width=Math.floor(b.xx*c.width),d.height=Math.floor(b.yy*c.height),d.left=Math.floor(b.dx),d.top=Math.floor(b.dy);else{var h=a.parentNode.style;d.left="0px";d.top="0px";d.width=h.width;d.height=h.height;b=t.multiply(b,{xx:c.width/parseInt(d.width),yy:c.height/parseInt(d.height)});(a=a.filters["DXImageTransform.Microsoft.Matrix"])?(a.M11=b.xx,a.M12=b.xy,a.M21=b.yx,a.M22=b.yy,
a.Dx=b.dx,a.Dy=b.dy):d.filter="progid:DXImageTransform.Microsoft.Matrix(M11="+b.xx+", M12="+b.xy+", M21="+b.yx+", M22="+b.yy+", Dx="+b.dx+", Dy="+b.dy+")"}return this},_setDimensions:function(b,a){var d=this.rawNode;if(d.filters["DXImageTransform.Microsoft.Matrix"])return d=d.style,d.width=b,d.height=a,this._applyTransform();return this}});b.Image.nodeType="rect";l("dojox.gfx.vml.Text",[b.Shape,n.Text],{constructor:function(b){b&&b.setAttribute("dojoGfxType","text");this.fontStyle=null},_alignment:{start:"left",
middle:"center",end:"right"},setShape:function(a){this.shape=c.makeParameters(this.shape,a);this.bbox=null;var d=this.rawNode,a=this.shape,h=a.x,e=a.y.toFixed();switch(a.align){case "middle":h-=5;break;case "end":h-=10}for(var e="m"+h.toFixed()+","+e+"l"+(h+10).toFixed()+","+e+"e",g=null,h=null,m=d.childNodes,p=0;p<m.length;++p){var i=m[p].tagName;if(i=="path"){if(g=m[p],h)break}else if(i=="textpath"&&(h=m[p],g))break}g||(g=d.ownerDocument.createElement("v:path"),d.appendChild(g));h||(h=d.ownerDocument.createElement("v:textpath"),
d.appendChild(h));g.v=e;g.textPathOk=!0;h.on=!0;d=b.text_alignment[a.align];h.style["v-text-align"]=d?d:"left";h.style["text-decoration"]=a.decoration;h.style["v-rotate-letters"]=a.rotated;h.style["v-text-kern"]=a.kerning;h.string=a.text;return this.setTransform(this.matrix)},_setFont:function(){for(var b=this.fontStyle,a=this.rawNode.childNodes,d=0;d<a.length;++d)if(a[d].tagName=="textpath"){a[d].style.font=c.makeFontString(b);break}this.setTransform(this.matrix)},_getRealMatrix:function(){var b=
this.inherited(arguments);b&&(b=t.multiply(b,{dy:-c.normalizedLength(this.fontStyle?this.fontStyle.size:"10pt")*0.35}));return b},getTextWidth:function(){var b=this.rawNode,a=b.style.display;b.style.display="inline";var d=c.pt2px(parseFloat(b.currentStyle.width));b.style.display=a;return d}});b.Text.nodeType="shape";l("dojox.gfx.vml.Path",[b.Shape,q.Path],{constructor:function(b){b&&!b.getAttribute("dojoGfxType")&&b.setAttribute("dojoGfxType","path");this.vmlPath="";this.lastControl={}},_updateWithSegment:function(b){var a=
f.clone(this.last);this.inherited(arguments);if(!(arguments.length>1))a=this[this.renderers[b.action]](b,a),typeof this.vmlPath=="string"?(this.vmlPath+=a.join(""),this.rawNode.path.v=this.vmlPath+" r0,0 e"):Array.prototype.push.apply(this.vmlPath,a)},setShape:function(){this.vmlPath=[];this.lastControl.type="";this.inherited(arguments);this.vmlPath=this.vmlPath.join("");this.rawNode.path.v=this.vmlPath+" r0,0 e";return this},_pathVmlToSvgMap:{m:"M",l:"L",t:"m",r:"l",c:"C",v:"c",qb:"Q",x:"z",e:""},
renderers:{M:"_moveToA",m:"_moveToR",L:"_lineToA",l:"_lineToR",H:"_hLineToA",h:"_hLineToR",V:"_vLineToA",v:"_vLineToR",C:"_curveToA",c:"_curveToR",S:"_smoothCurveToA",s:"_smoothCurveToR",Q:"_qCurveToA",q:"_qCurveToR",T:"_qSmoothCurveToA",t:"_qSmoothCurveToR",A:"_arcTo",a:"_arcTo",Z:"_closePath",z:"_closePath"},_addArgs:function(b,a,d,c){for(a=a instanceof Array?a:a.args;d<c;++d)b.push(" ",a[d].toFixed())},_adjustRelCrd:function(b,a,d){var a=a instanceof Array?a:a.args,c=a.length,h=Array(c),e=0,g=
b.x,b=b.y;typeof g!="number"&&(h[0]=g=a[0],h[1]=b=a[1],e=2);if(typeof d=="number"&&d!=2)for(var m=d;m<=c;){for(;e<m;e+=2)h[e]=g+a[e],h[e+1]=b+a[e+1];g=h[m-2];b=h[m-1];m+=d}else for(;e<c;e+=2)h[e]=g+=a[e],h[e+1]=b+=a[e+1];return h},_adjustRelPos:function(b,a){for(var d=a instanceof Array?a:a.args,c=d.length,h=Array(c),e=0;e<c;++e)h[e]=b+=d[e];return h},_moveToA:function(b){var a=[" m"],b=b instanceof Array?b:b.args,d=b.length;this._addArgs(a,b,0,2);d>2&&(a.push(" l"),this._addArgs(a,b,2,d));this.lastControl.type=
"";return a},_moveToR:function(b,a){return this._moveToA(this._adjustRelCrd(a,b))},_lineToA:function(b){var a=[" l"],b=b instanceof Array?b:b.args;this._addArgs(a,b,0,b.length);this.lastControl.type="";return a},_lineToR:function(b,a){return this._lineToA(this._adjustRelCrd(a,b))},_hLineToA:function(b,a){for(var d=[" l"],c=" "+a.y.toFixed(),h=b instanceof Array?b:b.args,e=h.length,g=0;g<e;++g)d.push(" ",h[g].toFixed(),c);this.lastControl.type="";return d},_hLineToR:function(b,a){return this._hLineToA(this._adjustRelPos(a.x,
b),a)},_vLineToA:function(b,a){for(var d=[" l"],c=" "+a.x.toFixed(),h=b instanceof Array?b:b.args,e=h.length,g=0;g<e;++g)d.push(c," ",h[g].toFixed());this.lastControl.type="";return d},_vLineToR:function(b,a){return this._vLineToA(this._adjustRelPos(a.y,b),a)},_curveToA:function(b){for(var a=[],b=b instanceof Array?b:b.args,d=b.length,c=this.lastControl,h=0;h<d;h+=6)a.push(" c"),this._addArgs(a,b,h,h+6);c.x=b[d-4];c.y=b[d-3];c.type="C";return a},_curveToR:function(b,a){return this._curveToA(this._adjustRelCrd(a,
b,6))},_smoothCurveToA:function(b,a){var d=[],c=b instanceof Array?b:b.args,h=c.length,e=this.lastControl,g=0;if(e.type!="C")d.push(" c"),this._addArgs(d,[a.x,a.y],0,2),this._addArgs(d,c,0,4),e.x=c[0],e.y=c[1],e.type="C",g=4;for(;g<h;g+=4)d.push(" c"),this._addArgs(d,[2*a.x-e.x,2*a.y-e.y],0,2),this._addArgs(d,c,g,g+4),e.x=c[g],e.y=c[g+1];return d},_smoothCurveToR:function(b,a){return this._smoothCurveToA(this._adjustRelCrd(a,b,4),a)},_qCurveToA:function(b){for(var a=[],b=b instanceof Array?b:b.args,
d=b.length,c=this.lastControl,h=0;h<d;h+=4)a.push(" qb"),this._addArgs(a,b,h,h+4);c.x=b[d-4];c.y=b[d-3];c.type="Q";return a},_qCurveToR:function(b,a){return this._qCurveToA(this._adjustRelCrd(a,b,4))},_qSmoothCurveToA:function(b,a){var d=[],c=b instanceof Array?b:b.args,h=c.length,e=this.lastControl,g=0;if(e.type!="Q")d.push(" qb"),this._addArgs(d,[e.x=a.x,e.y=a.y],0,2),e.type="Q",this._addArgs(d,c,0,2),g=2;for(;g<h;g+=2)d.push(" qb"),this._addArgs(d,[e.x=2*a.x-e.x,e.y=2*a.y-e.y],0,2),this._addArgs(d,
c,g,g+2);return d},_qSmoothCurveToR:function(b,a){return this._qSmoothCurveToA(this._adjustRelCrd(a,b,2),a)},_arcTo:function(b,a){for(var d=[],c=b.args,e=c.length,g=b.action=="a",m=0;m<e;m+=7){var p=c[m+5],i=c[m+6];g&&(p+=a.x,i+=a.y);for(var k=h.arcAsBezier(a,c[m],c[m+1],c[m+2],c[m+3]?1:0,c[m+4]?1:0,p,i),f=0;f<k.length;++f){d.push(" c");var j=k[f];this._addArgs(d,j,0,j.length);this._updateBBox(j[0],j[1]);this._updateBBox(j[2],j[3]);this._updateBBox(j[4],j[5])}a.x=p;a.y=i}this.lastControl.type="";
return d},_closePath:function(){this.lastControl.type="";return["x"]}});b.Path.nodeType="shape";l("dojox.gfx.vml.TextPath",[b.Path,q.TextPath],{constructor:function(b){b&&b.setAttribute("dojoGfxType","textpath");this.fontStyle=null;if(!("text"in this))this.text=f.clone(c.defaultTextPath);if(!("fontStyle"in this))this.fontStyle=f.clone(c.defaultFont)},setText:function(b){this.text=c.makeParameters(this.text,typeof b=="string"?{text:b}:b);this._setText();return this},setFont:function(b){this.fontStyle=
typeof b=="string"?c.splitFontString(b):c.makeParameters(c.defaultFont,b);this._setFont();return this},_setText:function(){this.bbox=null;for(var a=this.rawNode,d=this.text,c=null,h=null,e=a.childNodes,g=0;g<e.length;++g){var m=e[g].tagName;if(m=="path"){if(c=e[g],h)break}else if(m=="textpath"&&(h=e[g],c))break}c||(c=this.rawNode.ownerDocument.createElement("v:path"),a.appendChild(c));h||(h=this.rawNode.ownerDocument.createElement("v:textpath"),a.appendChild(h));c.textPathOk=!0;h.on=!0;a=b.text_alignment[d.align];
h.style["v-text-align"]=a?a:"left";h.style["text-decoration"]=d.decoration;h.style["v-rotate-letters"]=d.rotated;h.style["v-text-kern"]=d.kerning;h.string=d.text},_setFont:function(){for(var b=this.fontStyle,a=this.rawNode.childNodes,d=0;d<a.length;++d)if(a[d].tagName=="textpath"){a[d].style.font=c.makeFontString(b);break}}});b.TextPath.nodeType="shape";l("dojox.gfx.vml.Surface",n.Surface,{constructor:function(){n.Container._init.call(this)},setDimensions:function(b,a){this.width=c.normalizedLength(b);
this.height=c.normalizedLength(a);if(!this.rawNode)return this;var d=this.clipNode.style,h=this.rawNode,e=h.style,g=this.bgNode.style,m=this._parent.style;m.width=b;m.height=a;d.width=b;d.height=a;d.clip="rect(0px "+b+"px "+a+"px 0px)";e.width=b;e.height=a;h.coordsize=b+" "+a;g.width=b;g.height=a;for(d=0;d<this.children.length;++d)this.children[d]._setDimensions(b,a);return this},getDimensions:function(){var b=this.rawNode?{width:c.normalizedLength(this.rawNode.style.width),height:c.normalizedLength(this.rawNode.style.height)}:
null;if(b.width<=0)b.width=this.width;if(b.height<=0)b.height=this.height;return b}});b.createSurface=function(d,h,e){if(!h&&!e)var m=a.position(d),h=h||m.w,e=e||m.h;typeof h=="number"&&(h+="px");typeof e=="number"&&(e+="px");var m=new b.Surface,d=g.byId(d),p=m.clipNode=d.ownerDocument.createElement("div"),i=m.rawNode=d.ownerDocument.createElement("v:group"),f=p.style,j=i.style;if(k("ie")>7)j.display="inline-block";m._parent=d;m._nodes.push(p);d.style.width=h;d.style.height=e;f.position="absolute";
f.width=h;f.height=e;f.clip="rect(0px "+h+" "+e+" 0px)";j.position="absolute";j.width=h;j.height=e;i.coordsize=(h==="100%"?h:parseFloat(h))+" "+(e==="100%"?e:parseFloat(e));i.coordorigin="0 0";var f=m.bgNode=i.ownerDocument.createElement("v:rect"),n=f.style;n.left=n.top=0;n.width=j.width;n.height=j.height;f.filled=f.stroked="f";i.appendChild(f);p.appendChild(i);d.appendChild(p);m.width=c.normalizedLength(h);m.height=c.normalizedLength(e);return m};var w=n.Container,l={add:i.fixVmlAdd===!0?function(b){if(this!=
b.getParent()){var a=b.getParent();a&&a.remove(b);this.rawNode.appendChild(b.rawNode);w.add.apply(this,arguments);m(this,function(b){typeof b.getFont=="function"&&(b.setShape(b.getShape()),b.setFont(b.getFont()));typeof b.setFill=="function"&&(b.setFill(b.getFill()),b.setStroke(b.getStroke()))})}return this}:function(b){this!=b.getParent()&&(this.rawNode.appendChild(b.rawNode),b.getParent()||(b.setFill(b.getFill()),b.setStroke(b.getStroke())),w.add.apply(this,arguments));return this},remove:function(b){this==
b.getParent()&&(this.rawNode==b.rawNode.parentNode&&this.rawNode.removeChild(b.rawNode),w.remove.apply(this,arguments));return this},clear:function(){for(var b=this.rawNode;b.firstChild!=b.lastChild;)b.firstChild!=this.bgNode&&b.removeChild(b.firstChild),b.lastChild!=this.bgNode&&b.removeChild(b.lastChild);return w.clear.apply(this,arguments)},_moveChildToFront:w._moveChildToFront,_moveChildToBack:w._moveChildToBack},i={createGroup:function(){var a=this.createObject(b.Group,null),d=a.rawNode.ownerDocument.createElement("v:rect");
d.style.left=d.style.top=0;d.style.width=a.rawNode.style.width;d.style.height=a.rawNode.style.height;d.filled=d.stroked="f";a.rawNode.appendChild(d);a.bgNode=d;return a},createImage:function(a){if(!this.rawNode)return null;var d=new b.Image,c=this.rawNode.ownerDocument,h=c.createElement("v:rect");h.stroked="f";h.style.width=this.rawNode.style.width;h.style.height=this.rawNode.style.height;c=c.createElement("v:imagedata");h.appendChild(c);d.setRawNode(h);this.rawNode.appendChild(h);d.setShape(a);this.add(d);
return d},createRect:function(a){if(!this.rawNode)return null;var d=new b.Rect,c=this.rawNode.ownerDocument.createElement("v:roundrect");if(k("ie")>7)c.style.display="inline-block";d.setRawNode(c);this.rawNode.appendChild(c);d.setShape(a);this.add(d);return d},createObject:function(a,d){if(!this.rawNode)return null;var c=new a,h=this.rawNode.ownerDocument.createElement("v:"+a.nodeType);c.setRawNode(h);this.rawNode.appendChild(h);switch(a){case b.Group:case b.Line:case b.Polyline:case b.Image:case b.Text:case b.Path:case b.TextPath:this._overrideSize(h)}c.setShape(d);
this.add(c);return c},_overrideSize:function(b){var a=this.rawNode.style,d=a.width,a=a.height;b.style.width=d;b.style.height=a;b.coordsize=parseInt(d)+" "+parseInt(a)}};f.extend(b.Group,l);f.extend(b.Group,n.Creator);f.extend(b.Group,i);f.extend(b.Surface,l);f.extend(b.Surface,n.Creator);f.extend(b.Surface,i);b.fixTarget=function(b){if(!b.gfxTarget)b.gfxTarget=n.byId(b.target.__gfxObject__);return!0};return b})},"dojo/keys":function(){define("dojo/keys",["./_base/kernel","./_base/sniff"],function(f,
l){return f.keys={BACKSPACE:8,TAB:9,CLEAR:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,META:l("safari")?91:224,PAUSE:19,CAPS_LOCK:20,ESCAPE:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40,INSERT:45,DELETE:46,HELP:47,LEFT_WINDOW:91,RIGHT_WINDOW:92,SELECT:93,NUMPAD_0:96,NUMPAD_1:97,NUMPAD_2:98,NUMPAD_3:99,NUMPAD_4:100,NUMPAD_5:101,NUMPAD_6:102,NUMPAD_7:103,NUMPAD_8:104,NUMPAD_9:105,NUMPAD_MULTIPLY:106,NUMPAD_PLUS:107,NUMPAD_ENTER:108,NUMPAD_MINUS:109,
NUMPAD_PERIOD:110,NUMPAD_DIVIDE:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,F13:124,F14:125,F15:126,NUM_LOCK:144,SCROLL_LOCK:145,UP_DPAD:175,DOWN_DPAD:176,LEFT_DPAD:177,RIGHT_DPAD:178,copyKey:l("mac")&&!l("air")?l("safari")?91:224:17}})},"djeo/dojox/gfx/arc":function(){define("djeo/dojox/gfx/arc",["./_base","dojo/_base/lang","./matrix"],function(f,l,j){function o(a){var e=Math.cos(a),a=Math.sin(a),g={x:e+4/3*(1-e),y:a-4/3*e*(1-e)/a};return{s:{x:e,y:-a},
c1:{x:g.x,y:-g.y},c2:g,e:{x:e,y:a}}}var k=2*Math.PI,i=Math.PI/4,g=Math.PI/8,a=i+g,e=o(g);return f.arc={unitArcAsBezier:o,curvePI4:e,arcAsBezier:function(c,f,l,h,d,t,m,b){var d=Boolean(d),t=Boolean(t),p=j._degToRad(h),h=f*f,y=l*l,u=j.multiplyPoint(j.rotate(-p),{x:(c.x-m)/2,y:(c.y-b)/2}),w=u.x*u.x,r=u.y*u.y,h=Math.sqrt((h*y-h*r-y*w)/(h*r+y*w));isNaN(h)&&(h=0);h={x:h*f*u.y/l,y:-h*l*u.x/f};d==t&&(h={x:-h.x,y:-h.y});h=j.multiplyPoint([j.translate((c.x+m)/2,(c.y+b)/2),j.rotate(p)],h);f=j.normalize([j.translate(h.x,
h.y),j.rotate(p),j.scale(f,l)]);h=j.invert(f);c=j.multiplyPoint(h,c);b=j.multiplyPoint(h,m,b);m=Math.atan2(c.y,c.x);h=m-Math.atan2(b.y,b.x);t&&(h=-h);h<0?h+=k:h>k&&(h-=k);l=g;b=e;l=t?l:-l;c=[];for(d=h;d>0;d-=i)d<a&&(l=d/2,b=o(l),l=t?l:-l,d=0),u=j.normalize([f,j.rotate(m+l)]),t?(h=j.multiplyPoint(u,b.c1),p=j.multiplyPoint(u,b.c2),u=j.multiplyPoint(u,b.e)):(h=j.multiplyPoint(u,b.c2),p=j.multiplyPoint(u,b.c1),u=j.multiplyPoint(u,b.s)),c.push([h.x,h.y,p.x,p.y,u.x,u.y]),m+=2*l;return c}}})},"djeo/projection":function(){define("djeo/projection",
["dojo/_base/lang","dojo/_base/array","dojo/_base/kernel","./Map","./Placemark","./FeatureContainer","./util/_base","./util/bbox"],function(f,l,j,o,k,i,g,a){var e={},c,n={},q={},h=function(b,a,d){return c.transform(b,a,d)},d=function(b,a,d){return Proj4js.transform(b,a,d)},t=function(b,a,d){return n[b][a](d)},m=function(b,d,c,h,e,g,p){b==1?(d=g(h,e,{x:d[0],y:d[1]}),c.push(d.x,d.y),a.extend(p,[d.x,d.y])):l.forEach(d,function(a){var d=[];m(b-1,a,d,h,e,g,p);c.push(d)})};e.transform=function(b,a,e,g){var p=
e,i;c?(q[b]||(q[b]=new c.Proj(b)),q[a]||(q[a]=new c.Proj(a)),q[b].readyToUse&&q[b].readyToUse&&(b=q[b],a=q[a],i=h)):j.global.Proj4js&&(q[b]||(q[b]=new Proj4js.Proj(b)),q[a]||(q[a]=new Proj4js.Proj(a)),q[b].readyToUse&&q[b].readyToUse&&(b=q[b],a=q[a],i=d));!i&&n[b]&&n[b][a]&&(i=t);if(i)if(g){var p=[],k=[Infinity,Infinity,-Infinity,-Infinity],f=0;switch(g){case "Point":f=1;break;case "LineString":f=2;break;case "Polygon":f=3;break;case "MultiLineString":f=3;break;case "MultiPolygon":f=4}f&&m(f,e,p,
b,a,i,k)}else g=i(b,a,{x:e[0],y:e[1]}),b=i(b,a,{x:e[2],y:e[3]}),p=[g.x,g.y,b.x,b.y];return p};e.addTransform=function(b,a,d){n[b]||(n[b]={});n[b][a]=d};e.setProj4js=function(b){c||(c=b)};var b=k.prototype,p=b.getCoords;b.getCoords=function(){var b=this._coords;if(!b&&(b=p.call(this))){var a=this.getProjection(),d=this.map.projection;if(a&&d&&a!==d)this._coords=b=e.transform(a,d,b,this.getCoordsType())}return b};var b=o.prototype,y=b._get_center;b._get_center=function(){var b=y.call(this),a=this.appProjection||
this.dataProjection||this.projection;this.projection&&a!=this.projection&&(b=e.transform(this.projection,a,b,"Point"));return b};var u=b._get_extent;b._get_extent=function(){var b=u.call(this),a=this.appProjection||this.dataProjection||this.projection;this.projection&&a!=this.projection&&(b=e.transform(this.projection,a,b));return b};var w=b.containerPixelToCoords;b.containerPixelToCoords=function(b,a){var d=w.call(this,b,a),c=this.appProjection||this.dataProjection||this.projection;this.projection&&
c!=this.projection&&(d=e.transform(this.projection,c,d,"Point"));return d};f.extend(k,{getProjection:function(){return this.projection||this.parent.getProjection()},getBbox:function(){var b=this._bbox;if(!b&&this.bbox){var d=this.getProjection(),c=this.map.projection;d&&c&&d!==c&&(b=null)}b||(b=a.get(this));return b}});f.extend(i,{getProjection:function(){var b=this.projection||this._projection;if(!b)this._projection=b=this.parent.getProjection();return b}});f.extend(o,{getProjection:function(){return this.dataProjection||
this.projection},getCoords:function(b,a){var d=this.appProjection||this.dataProjection||this.projection;this.projection&&d!=this.projection&&(b=e.transform(d,this.projection,b,a||"Point"));return b}});e.addTransform("EPSG:4326","EPSG:3857",function(b){return{x:g.earthRadius*b.x*Math.PI/180,y:g.earthRadius*Math.log(Math.tan(Math.PI/4+b.y*Math.PI/360))}});e.addTransform("EPSG:3857","EPSG:4326",function(b){return{x:180*b.x/(Math.PI*g.earthRadius),y:360/Math.PI*Math.atan(Math.exp(b.y/g.earthRadius))-
90}});return e})},"djeo/djeo/Placemark":function(){define("djeo/djeo/Placemark",["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/has","../dojox/gfx","../dojox/gfx/matrix","../_base","../common/Placemark","../util/geometry","../gfx"],function(f,l,j,o,k,i,g,a,e,c){var n=function(a){k.renderer=="svg"&&!o("mozilla")&&a.rawNode.setAttribute("vector-effect","non-scaling-stroke");return a},q={family:1,size:1,weight:1,style:1,variant:1};return f([a],{multipleSymbolizers:!0,constructor:function(a){l.mixin(this,
a)},init:function(){this.group=this.engine.group;this.areas=this.group.createGroup();this.lines=this.group.createGroup();this.points=this.group.createGroup();this.text=this.group.createGroup()},prepare:function(){this.calculateLengthDenominator()},calculateLengthDenominator:function(){this.lengthDenominator=(this.group.getTransform()||{xx:1}).xx},getX:function(a){a-=this.engine.extent[0];this.engine.correctScale&&(a*=this.engine.correctionScale);return parseInt(a)},getY:function(a){a=this.engine.extent[3]-
a;this.engine.correctScale&&(a*=this.engine.correctionScale);return parseInt(a)},makePoint:function(){return null},makeLineString:function(a,d){return n(this.lines.createPath({path:this.makePathString(d,1)}))},makePolygon:function(a,d){return n(this.areas.createPath({path:this.makePathString(d,2)}))},makeMultiLineString:function(a,d){return n(this.lines.createPath({path:this.makePathString(d,2)}))},makeMultiPolygon:function(a,d){return n(this.areas.createPath({path:this.makePathString(d,3)}))},applyPointStyle:function(a,
d,c){var e=d.point,b=d.points,g=a.baseShapes,i=g.length;if(b){this._updateShapes(a,c,d,b,!0);var k=!1;j.forEach(b,function(b,f){var j=g[f];j&&k&&(this._removeShape(j,a),j=null);var n=this._applyPointStyle(c,d,e,b,a,j);j&&j!=n&&(k=!0,g[f]=n);f>=i&&g.push(n)},this)}else if(i>1)j.forEach(g,function(b,g){var p=this._applyPointStyle(c,d,e,null,a,b);if(i==0||p!=b)a.baseShapes[g]=p},this);else{var b=g[0],f=this._applyPointStyle(c,d,e,null,a,b);if(i==0||b!=f)a.baseShapes[0]=f}},_applyPointStyle:function(h,
d,e,m,b,p){var f=a.get("shape",d,e,m),k=a.getImgSrc(d,e,m),j,o,q,x=a.getScale(d,e,m),h=[i.translate(this.getX(h[0]),this.getY(h[1]))],A=!0,z=!p?!0:!1;if(f){if(!g.shapes[f])f=a.defaultShapeType;j=!0}else k&&(j=!1);j!==void 0&&(o=j?a.getSize(d,e,m):a.getImgSize(d,e,m));if(o)b.reg.size=[o[0],o[1]],b.reg.scale=x;else if(p&&(q=a.get("rScale",d,e,m),j!==void 0&&q!==void 0))o=b.reg.size,x=q*b.reg.scale;j?(j=g.shapes[f],k=f=="circle"?2:Math.max(j.size[0],j.size[1]),q=x/this.lengthDenominator/k,h.push(i.scale(q*
o[0],q*o[1])),f=="circle"?(p&&p.shape.type!="circle"&&(this._removeShape(p,b),z=!0,p=null),f={cx:0,cy:0,r:1},p?p.setShape(f):p=n(this.points.createCircle(f))):(p&&p.shape.type!="polyline"&&(this._removeShape(p,b),z=!0,p=null),p?p.setShape({points:j.points}):p=n(this.points.createPolyline(j.points))),c.applyFill(p,d,e,m),c.applyStroke(p,d,e,m,k/Math.max(o[0],o[1])/x)):j===!1?(p&&p.shape.type!="image"&&(this._removeShape(p,b),z=!0,p=null),d=a.getAnchor(d,e,m,o),o={type:"image",src:this._getImageUrl(k),
width:o[0],height:o[1],x:-d[0],y:-d[1]},p?p.setShape(o):p=this.points.createImage(o),h.push(i.scale(1/this.lengthDenominator*x))):p&&(p.shape.type!="image"&&c.applyFill(p,d,e,m),q!==void 0&&(p.applyRightTransform(i.scale(d.rScale)),A=!1));if(p){if(A){x=b.reg;o=x.heading;if(o===void 0){o=b.orientation;if(l.isObject(o))o=o.heading;x.heading=o}o!==void 0&&h.push(i.rotate(o));p.setTransform(h)}z&&this._connectEvents(p,b)}return p},applyLineStyle:function(a,d,c){var e=d.line,b=d.lines,g=a.baseShapes;b?
(this._updateShapes(a,c,d,b),j.forEach(b,function(b,a){this._applyLineStyle(g[a],d,e,b)},this)):j.forEach(g,function(b){this._applyLineStyle(b,d,e)},this)},_applyLineStyle:function(a,d,e,g){c.applyStroke(a,d,e,g,1/this.lengthDenominator)},applyPolygonStyle:function(a,d,c){this._updateShapes(a,c,d);this._applyPolygonStyle(a.baseShapes[0],d,d.area)},_applyPolygonStyle:function(a,d,e){c.applyFill(a,d,e);c.applyStroke(a,d,e,null,1/this.lengthDenominator)},_updateShapes:function(a,d,c,e,b){var c=a.baseShapes,
e=e?e.length:1,g=c.length;if(e>g){if(!b)for(b=g;b<e;b++)g=this.createShape(a,d),this._connectEvents(g,a),c.push(g)}else if(e<g)for(b=g-1;b>=e;b--)g=c.pop(),this._removeShape(g,a)},_connectEvents:function(a,d){var c=d.handles,e;for(e in c){var b=c[e][1],g=c[e][2],i=c[e][3];j.forEach(c[e][0],function(c,e){i[e].push([a,a.connect(c,this.engine.normalizeCallback(d,c,g,b))])},this)}},_removeShape:function(a,d){var c=d.handles;a.removeShape();for(var e in c){var b=c[e][3];j.forEach(c[e][0],function(d,c){a.disconnect(b[c].pop()[1])})}},
remove:function(a){a.visible&&j.forEach(a.baseShapes,function(d){this._removeShape(d,a)},this)},show:function(a,d){if(d){var c=a.reg.gfxContainer;delete a.reg.gfxContainer;j.forEach(a.baseShapes,function(a){c.add(a)},this)}else{if(a.baseShapes.length)a.reg.gfxContainer=a.baseShapes[0].getParent();j.forEach(a.baseShapes,function(a){a.removeShape()})}},makeText:function(c,d){if(k.renderer!="vml"){c.textShapes&&j.forEach(c.textShapes,function(b){b.removeShape()});var e;if(c.isPoint())e=d.point;else if(c.isArea())e=
d.area;if(e=a.get("text",d,e)){var g=e.label||this._getLabel(c,e);if(g)c.textShapes=[],c.reg.ts=e,e.haloFill&&e.haloRadius&&this._makeTextShape(c,g,null,{color:e.haloFill,width:2*e.haloRadius},e),this._makeTextShape(c,g,e.fill,null,e)}}},_makeTextShape:function(c,d,e,g,b){var i={},f=!0;if(c.isPoint()){if(b.hAlign)i.align=b.hAlign}else c.isArea()?i.align="middle":f=!1;if(f)i.text=d,d=this._calculateTextPosition(c,i),i=this.text.createText(i).setTransform(d),e&&i.setFill(e),this._makeFont(i,b,a.getScale(c.reg.cs)),
g&&i.setStroke(g),c.textShapes.push(i)},_calculateTextPosition:function(c,d,g){var m;m===void 0?g||(g=c.getCoords()):g=e.center(c);m=this.getX(g[0]);var g=this.getY(g[1]),b=c.reg.ts,f=a.getScale(c.reg.cs),c=[i.scaleAt(1/this.lengthDenominator,m,g)],k="dx"in b?f*b.dx:0,b="dy"in b?-f*b.dy:0;(k||b)&&c.push(i.translate(k,b));if(d)d.x=m,d.y=g;return c},_makeFont:function(a,d,c){var e,b;for(b in q)b in d&&(e||(e={}),e[b]=d[b]);e&&(e.size&&(e.size*=c),a.setFont(e))},setCoords:function(a,d){var c=d.baseShapes,
e=d.textShapes,b=d.getCoords(),g={dx:this.getX(a[0])-this.getX(b[0]),dy:this.getY(a[1])-this.getY(b[1])};j.forEach(c,function(b){b.applyLeftTransform(g)},this);e&&j.forEach(e,function(b){var c=b.getShape(),e=this._calculateTextPosition(d,c,a);b.setShape(c).setTransform(e)},this)},setOrientation:function(a,d){var c=d.reg;if(c.heading===void 0)c.heading=0;var e=-c.heading+a;j.forEach(d.baseShapes,function(b){b.applyRightTransform(i.rotate(e))},this);c.heading=a},makePathString:function(a,d){var c="";
if(d==1)for(var c="M"+this.getX(a[0][0])+","+this.getY(a[0][1]),e=1;e<a.length;e++)c+="L"+this.getX(a[e][0])+","+this.getY(a[e][1]);else j.forEach(a,function(b){c+=this.makePathString(b,d-1)},this);return c}})})},"djeo/WebTiles":function(){define("djeo/WebTiles",["dojo/_base/declare","dojo/_base/lang","./_base"],function(f,l,j){j.registerDependency("WebTiles");return f(null,{yFirst:!1,dependency:"WebTiles",constructor:function(f){l.mixin(this,f);f=f.paramStr?f.paramStr:this.url;if(l.isString(f)){var k=
f.indexOf("[");if(k>-1){var i=f.indexOf("]");parts=f.substring(k+1,i).split(",");this.url=[];for(var g=0;g<parts.length;g++)this.url[g]=f.substring(0,k)+parts[g]+f.substring(i+1)}else this.url=[f]}this.numUrls=this.url.length},startup:function(f){this.map=f;if(f=this.map.engine.getFactory("WebTiles"))l.mixin(this,f),this.init()}})})},"dojo/mouse":function(){define("dojo/mouse",["./_base/kernel","./on","./has","./dom","./_base/window"],function(f,l,j,o,k){function i(g,a){var e=function(c,e){return l(c,
g,function(g){if(!o.isDescendant(g.relatedTarget,a?g.target:c))return e.call(this,g)})};if(!a)e.bubble=i(g,!0);return e}j.add("dom-quirks",k.doc&&k.doc.compatMode=="BackCompat");j.add("events-mouseenter",k.doc&&"onmouseenter"in k.doc.createElement("div"));j=j("dom-quirks")||!j("dom-addeventlistener")?{LEFT:1,MIDDLE:4,RIGHT:2,isButton:function(g,a){return g.button&a},isLeft:function(g){return g.button&1},isMiddle:function(g){return g.button&4},isRight:function(g){return g.button&2}}:{LEFT:0,MIDDLE:1,
RIGHT:2,isButton:function(g,a){return g.button==a},isLeft:function(g){return g.button==0},isMiddle:function(g){return g.button==1},isRight:function(g){return g.button==2}};f.mouseButtons=j;return{enter:i("mouseover"),leave:i("mouseout"),isLeft:j.isLeft,isMiddle:j.isMiddle,isRight:j.isRight}})},"dojo/topic":function(){define("dojo/topic",["./Evented"],function(f){var l=new f;return{publish:function(){return l.emit.apply(l,arguments)},subscribe:function(){return l.on.apply(l,arguments)}}})},"djeo/dojox/gfx/matrix":function(){define("djeo/dojox/gfx/matrix",
["./_base","dojo/_base/lang"],function(f,l){var j=f.matrix={},o={};j._degToRad=function(f){return o[f]||(o[f]=Math.PI*f/180)};j._radToDeg=function(f){return f/Math.PI*180};j.Matrix2D=function(f){if(f)if(typeof f=="number")this.xx=this.yy=f;else if(f instanceof Array){if(f.length>0){for(var i=j.normalize(f[0]),g=1;g<f.length;++g){var a=i,e=j.normalize(f[g]),i=new j.Matrix2D;i.xx=a.xx*e.xx+a.xy*e.yx;i.xy=a.xx*e.xy+a.xy*e.yy;i.yx=a.yx*e.xx+a.yy*e.yx;i.yy=a.yx*e.xy+a.yy*e.yy;i.dx=a.xx*e.dx+a.xy*e.dy+
a.dx;i.dy=a.yx*e.dx+a.yy*e.dy+a.dy}l.mixin(this,i)}}else l.mixin(this,f)};l.extend(j.Matrix2D,{xx:1,xy:0,yx:0,yy:1,dx:0,dy:0});l.mixin(j,{identity:new j.Matrix2D,flipX:new j.Matrix2D({xx:-1}),flipY:new j.Matrix2D({yy:-1}),flipXY:new j.Matrix2D({xx:-1,yy:-1}),translate:function(f,i){if(arguments.length>1)return new j.Matrix2D({dx:f,dy:i});return new j.Matrix2D({dx:f.x,dy:f.y})},scale:function(f,i){if(arguments.length>1)return new j.Matrix2D({xx:f,yy:i});if(typeof f=="number")return new j.Matrix2D({xx:f,
yy:f});return new j.Matrix2D({xx:f.x,yy:f.y})},rotate:function(f){var i=Math.cos(f),f=Math.sin(f);return new j.Matrix2D({xx:i,xy:-f,yx:f,yy:i})},rotateg:function(f){return j.rotate(j._degToRad(f))},skewX:function(f){return new j.Matrix2D({xy:Math.tan(f)})},skewXg:function(f){return j.skewX(j._degToRad(f))},skewY:function(f){return new j.Matrix2D({yx:Math.tan(f)})},skewYg:function(f){return j.skewY(j._degToRad(f))},reflect:function(f,i){if(arguments.length==1)i=f.y,f=f.x;var g=f*f,a=i*i,e=g+a,c=2*
f*i/e;return new j.Matrix2D({xx:2*g/e-1,xy:c,yx:c,yy:2*a/e-1})},project:function(f,i){if(arguments.length==1)i=f.y,f=f.x;var g=f*f,a=i*i,e=g+a,c=f*i/e;return new j.Matrix2D({xx:g/e,xy:c,yx:c,yy:a/e})},normalize:function(f){return f instanceof j.Matrix2D?f:new j.Matrix2D(f)},clone:function(f){var i=new j.Matrix2D,g;for(g in f)typeof f[g]=="number"&&typeof i[g]=="number"&&i[g]!=f[g]&&(i[g]=f[g]);return i},invert:function(f){var f=j.normalize(f),i=f.xx*f.yy-f.xy*f.yx;return f=new j.Matrix2D({xx:f.yy/
i,xy:-f.xy/i,yx:-f.yx/i,yy:f.xx/i,dx:(f.xy*f.dy-f.yy*f.dx)/i,dy:(f.yx*f.dx-f.xx*f.dy)/i})},_multiplyPoint:function(f,i,g){return{x:f.xx*i+f.xy*g+f.dx,y:f.yx*i+f.yy*g+f.dy}},multiplyPoint:function(f,i,g){f=j.normalize(f);if(typeof i=="number"&&typeof g=="number")return j._multiplyPoint(f,i,g);return j._multiplyPoint(f,i.x,i.y)},multiply:function(f){for(var i=j.normalize(f),g=1;g<arguments.length;++g){var a=i,e=j.normalize(arguments[g]),i=new j.Matrix2D;i.xx=a.xx*e.xx+a.xy*e.yx;i.xy=a.xx*e.xy+a.xy*
e.yy;i.yx=a.yx*e.xx+a.yy*e.yx;i.yy=a.yx*e.xy+a.yy*e.yy;i.dx=a.xx*e.dx+a.xy*e.dy+a.dx;i.dy=a.yx*e.dx+a.yy*e.dy+a.dy}return i},_sandwich:function(f,i,g){return j.multiply(j.translate(i,g),f,j.translate(-i,-g))},scaleAt:function(f,i,g,a){switch(arguments.length){case 4:return j._sandwich(j.scale(f,i),g,a);case 3:if(typeof g=="number")return j._sandwich(j.scale(f),i,g);return j._sandwich(j.scale(f,i),g.x,g.y)}return j._sandwich(j.scale(f),i.x,i.y)},rotateAt:function(f,i,g){if(arguments.length>2)return j._sandwich(j.rotate(f),
i,g);return j._sandwich(j.rotate(f),i.x,i.y)},rotategAt:function(f,i,g){if(arguments.length>2)return j._sandwich(j.rotateg(f),i,g);return j._sandwich(j.rotateg(f),i.x,i.y)},skewXAt:function(f,i,g){if(arguments.length>2)return j._sandwich(j.skewX(f),i,g);return j._sandwich(j.skewX(f),i.x,i.y)},skewXgAt:function(f,i,g){if(arguments.length>2)return j._sandwich(j.skewXg(f),i,g);return j._sandwich(j.skewXg(f),i.x,i.y)},skewYAt:function(f,i,g){if(arguments.length>2)return j._sandwich(j.skewY(f),i,g);return j._sandwich(j.skewY(f),
i.x,i.y)},skewYgAt:function(f,i,g){if(arguments.length>2)return j._sandwich(j.skewYg(f),i,g);return j._sandwich(j.skewYg(f),i.x,i.y)}});f.Matrix2D=j.Matrix2D;return j})},"djeo/djeo/Navigation":function(){define("djeo/djeo/Navigation",["dojo/_base/declare","dojo/has","dojo/on","dojo/aspect","dojo/_base/lang","dojo/_base/event","dojo/dom-geometry","../dojox/gfx","./Moveable","dojo/_base/sniff"],function(f,l,j,o,k,i,g,a,e){return f(null,{moveable:null,enable:function(c){c===void 0&&(c=!0);c?(this.moveable=
new e(this.map.engine.container,this.map),this._onFirstMove=o.after(this.moveable,"onFirstMove",k.hitch(this,function(){this._moved=!0})),this._onMoveStop=o.after(this.moveable,"onMoveStop",k.hitch(this,function(){if(this._moved)this._moved=!1,this.map.engine.emit("extent_changed")})),a.renderer!="silverlight"&&this.enableZoom(!0)):(a.renderer!="silverlight"&&this.enableZoom(!1),this._onMoveStop.remove(),this._onFirstMove.remove(),this.moveable.destroy(),this.moveable=null)},enableZoom:function(a){if(a){var e=
this.map.engine,a=!l("mozilla")?"mousewheel":"DOMMouseScroll";this.wheelHandler=j(e.container,a,k.hitch(this,this._onWheel));this.dblclickHandler=j(e.container,"dblclick",k.hitch(this,function(a){this._onZoom(a,e.scaleFactor)}))}else this.dblclickHandler.remove(),this.wheelHandler.remove(),this.wheelHandler=this.dblclickHandler=null},_onWheel:function(a){var e=a[l("mozilla")?"detail":"wheelDelta"]/(l("mozilla")?-3:120);this._onZoom(a,Math.pow(this.map.engine.scaleFactor,e))},_onZoom:function(a,e){i.stop(a);
var f=this.map,h=f.engine,d=h._get_zoom();if(!(d>=0&&(d==f.minZoom&&e<1||d==f.maxZoom&&e>1))){for(var d=g.position(this.map.engine.container,!0),f=a.pageX-d.x,d=a.pageY-d.y,j=0;j<h.layers.length;j++)h.layers[j].doZoom(e,a);h.group.applyLeftTransform({xx:e,yy:e,dx:f*(1-e),dy:d*(1-e)});h.factories.Placemark.calculateLengthDenominator();h.resizeFeatures(this.map.document,1/e);h._infoWindow&&h._infoWindow._doZoom(e,f,d);h.onzoom_changed();h.emit("extent_changed")}}})})},"djeo/_tiles":function(){define("djeo/_tiles",
[],function(){var f=["WebTiles",{url:"http://[a,b,c].tile.openstreetmap.org"}];return{webtiles:["WebTiles",{}],roadmap:f,osm:f,openstreetmap:f,"osm.org":f,"openstreetmap.org":f,"mapquest-osm":["WebTiles",{url:"http://otile[1,2,3,4].mqcdn.com/tiles/1.0.0/osm"}],"mapquest-oa":["WebTiles",{url:"http://oatile[1,2,3,4].mqcdn.com/tiles/1.0.0/sat"}],arcgis_webtiles:["WebTiles",{}]}})},"djeo/dojox/gfx/renderer":function(){define("djeo/dojox/gfx/renderer",["./_base","dojo/_base/lang","dojo/_base/sniff","dojo/_base/window",
"dojo/_base/config"],function(f,l,j,o,k){var i=null;return{load:function(g,a,e){function c(){a(["./gfx/"+n],function(a){f.renderer=n;i=a;e(a)})}if(i&&g!="force")e(i);else{for(var n=k.forceGfxRenderer,g=!n&&(l.isString(k.gfxRenderer)?k.gfxRenderer:"svg,vml,canvas,silverlight").split(","),q,h;!n&&g.length;)switch(g.shift()){case "svg":"SVGAngle"in o.global&&(n="svg");break;case "vml":j("ie")&&(n="vml");break;case "silverlight":try{j("ie")?(q=new ActiveXObject("AgControl.AgControl"))&&q.IsVersionSupported("1.0")&&
(h=!0):navigator.plugins["Silverlight Plug-In"]&&(h=!0)}catch(d){h=!1}finally{q=null}h&&(n="silverlight");break;case "canvas":o.global.CanvasRenderingContext2D&&(n="canvas")}n==="canvas"&&k.canvasEvents!==!1&&(n="canvasWithEvents");n=="svg"&&typeof window.svgweb!="undefined"?window.svgweb.addOnLoad(c):c()}}}})},"djeo/dojox/gfx/_base":function(){define("djeo/dojox/gfx/_base",["dojo/_base/lang","dojo/_base/html","dojo/_base/Color","dojo/_base/sniff","dojo/_base/window","dojo/_base/array","dojo/dom",
"dojo/dom-construct","dojo/dom-geometry"],function(f,l,j,o,k,i,g,a,e){var c=f.getObject("dojox.gfx",!0),n=c._base={};c._hasClass=function(a,b){var d=a.getAttribute("className");return d&&(" "+d+" ").indexOf(" "+b+" ")>=0};c._addClass=function(a,b){var d=a.getAttribute("className")||"";if(!d||(" "+d+" ").indexOf(" "+b+" ")<0)a.setAttribute("className",d+(d?" ":"")+b)};c._removeClass=function(a,b){var d=a.getAttribute("className");d&&a.setAttribute("className",d.replace(RegExp("(^|\\s+)"+b+"(\\s+|$)"),
"$1$2"))};n._getFontMeasurements=function(){var d={"1em":0,"1ex":0,"100%":0,"12pt":0,"16px":0,"xx-small":0,"x-small":0,small:0,medium:0,large:0,"x-large":0,"xx-large":0},b;if(o("ie"))k.doc.documentElement.style.fontSize="100%";var c=a.create("div",{style:{position:"absolute",left:"0",top:"-100px",width:"30px",height:"1000em",borderWidth:"0",margin:"0",padding:"0",outline:"none",lineHeight:"1",overflow:"hidden"}},k.body());for(b in d)c.style.fontSize=b,d[b]=Math.round(c.offsetHeight*12/16)*16/12/1E3;
k.body().removeChild(c);return d};var q=null;n._getCachedFontMeasurements=function(a){if(a||!q)q=n._getFontMeasurements();return q};var h=null,d={};n._getTextBox=function(c,b,g){var f,i,j=arguments.length,n;h||(h=a.create("div",{style:{position:"absolute",top:"-10000px",left:"0"}},k.body()));f=h;f.className="";i=f.style;i.borderWidth="0";i.margin="0";i.padding="0";i.outline="0";if(j>1&&b)for(n in b)n in d||(i[n]=b[n]);if(j>2&&g)f.className=g;f.innerHTML=c;return f.getBoundingClientRect?(f=f.getBoundingClientRect(),
{l:f.left,t:f.top,w:f.width||f.right-f.left,h:f.height||f.bottom-f.top}):e.getMarginBox(f)};var t=0;n._getUniqueId=function(){var a;do a=dojo._scopeName+"xUnique"+ ++t;while(g.byId(a));return a};f.mixin(c,{defaultPath:{type:"path",path:""},defaultPolyline:{type:"polyline",points:[]},defaultRect:{type:"rect",x:0,y:0,width:100,height:100,r:0},defaultEllipse:{type:"ellipse",cx:0,cy:0,rx:200,ry:100},defaultCircle:{type:"circle",cx:0,cy:0,r:100},defaultLine:{type:"line",x1:0,y1:0,x2:100,y2:100},defaultImage:{type:"image",
x:0,y:0,width:0,height:0,src:""},defaultText:{type:"text",x:0,y:0,text:"",align:"start",decoration:"none",rotated:!1,kerning:!0},defaultTextPath:{type:"textpath",text:"",align:"start",decoration:"none",rotated:!1,kerning:!0},defaultStroke:{type:"stroke",color:"black",style:"solid",width:1,cap:"butt",join:4},defaultLinearGradient:{type:"linear",x1:0,y1:0,x2:100,y2:100,colors:[{offset:0,color:"black"},{offset:1,color:"white"}]},defaultRadialGradient:{type:"radial",cx:0,cy:0,r:100,colors:[{offset:0,
color:"black"},{offset:1,color:"white"}]},defaultPattern:{type:"pattern",x:0,y:0,width:0,height:0,src:""},defaultFont:{type:"font",style:"normal",variant:"normal",weight:"normal",size:"10pt",family:"serif"},getDefault:function(){var a={};return function(b){var d=a[b];if(d)return new d;d=a[b]=new Function;d.prototype=c["default"+b];return new d}}(),normalizeColor:function(a){return a instanceof j?a:new j(a)},normalizeParameters:function(a,b){var d;if(b){var c={};for(d in a)d in b&&!(d in c)&&(a[d]=
b[d])}return a},makeParameters:function(a,b){var d=null;if(!b)return f.delegate(a);var c={};for(d in a)d in c||(c[d]=f.clone(d in b?b[d]:a[d]));return c},formatNumber:function(a,b){var d=a.toString();if(d.indexOf("e")>=0)d=a.toFixed(4);else{var c=d.indexOf(".");c>=0&&d.length-c>5&&(d=a.toFixed(4))}if(a<0)return d;return b?" "+d:d},makeFontString:function(a){return a.style+" "+a.variant+" "+a.weight+" "+a.size+" "+a.family},splitFontString:function(a){var b=c.getDefault("Font"),a=a.split(/\s+/);if(!(a.length<
5)){b.style=a[0];b.variant=a[1];b.weight=a[2];var d=a[3].indexOf("/");b.size=d<0?a[3]:a[3].substring(0,d);var e=4;d<0&&(a[4]=="/"?e=6:a[4].charAt(0)=="/"&&(e=5));if(e<a.length)b.family=a.slice(e).join(" ")}return b},cm_in_pt:72/2.54,mm_in_pt:7.2/2.54,px_in_pt:function(){return c._base._getCachedFontMeasurements()["12pt"]/12},pt2px:function(a){return a*c.px_in_pt()},px2pt:function(a){return a/c.px_in_pt()},normalizedLength:function(a){if(a.length===0)return 0;if(a.length>2){var b=c.px_in_pt(),d=parseFloat(a);
switch(a.slice(-2)){case "px":return d;case "pt":return d*b;case "in":return d*72*b;case "pc":return d*12*b;case "mm":return d*c.mm_in_pt*b;case "cm":return d*c.cm_in_pt*b}}return parseFloat(a)},pathVmlRegExp:/([A-Za-z]+)|(\d+(\.\d+)?)|(\.\d+)|(-\d+(\.\d+)?)|(-\.\d+)/g,pathSvgRegExp:/([A-Za-z])|(\d+(\.\d+)?)|(\.\d+)|(-\d+(\.\d+)?)|(-\.\d+)/g,equalSources:function(a,b){return a&&b&&a===b},switchTo:function(a){var b=typeof a=="string"?c[a]:a;b&&i.forEach(["Group","Rect","Ellipse","Circle","Line","Polyline",
"Image","Text","Path","TextPath","Surface","createSurface","fixTarget"],function(a){c[a]=b[a]})}});return c})},"dojo/dom-class":function(){define("dojo/dom-class",["./_base/lang","./_base/array","./dom"],function(f,l,j){function o(a){if(typeof a=="string"||a instanceof String){if(a&&!i.test(a))return g[0]=a,g;a=a.split(i);a.length&&!a[0]&&a.shift();a.length&&!a[a.length-1]&&a.pop();return a}if(!a)return[];return l.filter(a,function(a){return a})}var k,i=/\s+/,g=[""],a={};return k={contains:function(a,
c){return(" "+j.byId(a).className+" ").indexOf(" "+c+" ")>=0},add:function(a,c){var a=j.byId(a),c=o(c),f=a.className,g,f=f?" "+f+" ":" ";g=f.length;for(var h=0,d=c.length,i;h<d;++h)(i=c[h])&&f.indexOf(" "+i+" ")<0&&(f+=i+" ");g<f.length&&(a.className=f.substr(1,f.length-2))},remove:function(a,c){var a=j.byId(a),g;if(c!==void 0){c=o(c);g=" "+a.className+" ";for(var i=0,h=c.length;i<h;++i)g=g.replace(" "+c[i]+" "," ");g=f.trim(g)}else g="";a.className!=g&&(a.className=g)},replace:function(e,c,f){e=
j.byId(e);a.className=e.className;k.remove(a,f);k.add(a,c);e.className!==a.className&&(e.className=a.className)},toggle:function(a,c,f){a=j.byId(a);if(f===void 0)for(var c=o(c),g=0,h=c.length,d;g<h;++g)d=c[g],k[k.contains(a,d)?"remove":"add"](a,d);else k[f?"add":"remove"](a,c);return f}}})},"djeo/dojox/gfx/shape":function(){define("djeo/dojox/gfx/shape",["./_base","dojo/_base/lang","dojo/_base/declare","dojo/_base/window","dojo/_base/sniff","dojo/_base/connect","dojo/_base/array","dojo/dom-construct",
"dojo/_base/Color","./matrix"],function(f,l,j,o,k,i,g,a,e,c){var n=f.shape={},q={},h={};n.register=function(a){var c=a.declaredClass.split(".").pop(),e=c in q?++q[c]:q[c]=0;c+=e;h[c]=a;return c};n.byId=function(a){return h[a]};n.dispose=function(a){delete h[a.getUID()]};j("dojox.gfx.shape.Shape",null,{constructor:function(){this.parentMatrix=this.parent=this.bbox=this.strokeStyle=this.fillStyle=this.matrix=this.shape=this.rawNode=null;var a=n.register(this);this.getUID=function(){return a}},getNode:function(){return this.rawNode},
getShape:function(){return this.shape},getTransform:function(){return this.matrix},getFill:function(){return this.fillStyle},getStroke:function(){return this.strokeStyle},getParent:function(){return this.parent},getBoundingBox:function(){return this.bbox},getTransformedBoundingBox:function(){var a=this.getBoundingBox();if(!a)return null;var e=this._getRealMatrix();return[c.multiplyPoint(e,a.x,a.y),c.multiplyPoint(e,a.x+a.width,a.y),c.multiplyPoint(e,a.x+a.width,a.y+a.height),c.multiplyPoint(e,a.x,
a.y+a.height)]},getEventSource:function(){return this.rawNode},setShape:function(a){this.shape=f.makeParameters(this.shape,a);this.bbox=null;return this},setFill:function(a){if(!a)return this.fillStyle=null,this;var c=null;if(typeof a=="object"&&"type"in a)switch(a.type){case "linear":c=f.makeParameters(f.defaultLinearGradient,a);break;case "radial":c=f.makeParameters(f.defaultRadialGradient,a);break;case "pattern":c=f.makeParameters(f.defaultPattern,a)}else c=f.normalizeColor(a);this.fillStyle=c;
return this},setStroke:function(a){if(!a)return this.strokeStyle=null,this;if(typeof a=="string"||l.isArray(a)||a instanceof e)a={color:a};a=this.strokeStyle=f.makeParameters(f.defaultStroke,a);a.color=f.normalizeColor(a.color);return this},setTransform:function(a){this.matrix=c.clone(a?c.normalize(a):c.identity);return this._applyTransform()},_applyTransform:function(){return this},moveToFront:function(){var a=this.getParent();a&&(a._moveChildToFront(this),this._moveToFront());return this},moveToBack:function(){var a=
this.getParent();a&&(a._moveChildToBack(this),this._moveToBack());return this},_moveToFront:function(){},_moveToBack:function(){},applyRightTransform:function(a){return a?this.setTransform([this.matrix,a]):this},applyLeftTransform:function(a){return a?this.setTransform([a,this.matrix]):this},applyTransform:function(a){return a?this.setTransform([this.matrix,a]):this},removeShape:function(a){this.parent&&this.parent.remove(this,a);return this},_setParent:function(a,c){this.parent=a;return this._updateParentMatrix(c)},
_updateParentMatrix:function(a){this.parentMatrix=a?c.clone(a):null;return this._applyTransform()},_getRealMatrix:function(){for(var a=this.matrix,e=this.parent;e;)e.matrix&&(a=c.multiply(e.matrix,a)),e=e.parent;return a}});n._eventsProcessing={connect:function(a,c,e){return i.connect(this.getEventSource(),a,n.fixCallback(this,f.fixTarget,c,e))},disconnect:function(a){i.disconnect(a)}};n.fixCallback=function(a,c,e,b){b||(b=e,e=null);if(l.isString(b)){e=e||o.global;if(!e[b])throw['dojox.gfx.shape.fixCallback: scope["',
b,'"] is null (scope="',e,'")'].join("");return function(f){return c(f,a)?e[b].apply(e,arguments||[]):void 0}}return!e?function(f){return c(f,a)?b.apply(e,arguments):void 0}:function(f){return c(f,a)?b.apply(e,arguments||[]):void 0}};l.extend(n.Shape,n._eventsProcessing);n.Container={_init:function(){this.children=[]},openBatch:function(){},closeBatch:function(){},add:function(a){var c=a.getParent();c&&c.remove(a,!0);this.children.push(a);return a._setParent(this,this._getRealMatrix())},remove:function(a,
c){for(var e=0;e<this.children.length;++e)if(this.children[e]==a){if(!c)a.parent=null,a.parentMatrix=null;this.children.splice(e,1);break}return this},clear:function(){for(var a,c=0;c<this.children.length;++c)a=this.children[c],a.parent=null,a.parentMatrix=null;this.children=[];return this},_moveChildToFront:function(a){for(var c=0;c<this.children.length;++c)if(this.children[c]==a){this.children.splice(c,1);this.children.push(a);break}return this},_moveChildToBack:function(a){for(var c=0;c<this.children.length;++c)if(this.children[c]==
a){this.children.splice(c,1);this.children.unshift(a);break}return this}};j("dojox.gfx.shape.Surface",null,{constructor:function(){this._parent=this.rawNode=null;this._nodes=[];this._events=[]},destroy:function(){g.forEach(this._nodes,a.destroy);this._nodes=[];g.forEach(this._events,i.disconnect);this._events=[];this.rawNode=null;if(k("ie"))for(;this._parent.lastChild;)a.destroy(this._parent.lastChild);else this._parent.innerHTML="";this._parent=null},getEventSource:function(){return this.rawNode},
_getRealMatrix:function(){return null},isLoaded:!0,onLoad:function(){},whenLoaded:function(a,c){var e=l.hitch(a,c);if(this.isLoaded)e(this);else var b=i.connect(this,"onLoad",function(a){i.disconnect(b);e(a)})}});l.extend(n.Surface,n._eventsProcessing);j("dojox.gfx.Point",null,{});j("dojox.gfx.Rectangle",null,{});j("dojox.gfx.shape.Rect",n.Shape,{constructor:function(a){this.shape=f.getDefault("Rect");this.rawNode=a},getBoundingBox:function(){return this.shape}});j("dojox.gfx.shape.Ellipse",n.Shape,
{constructor:function(a){this.shape=f.getDefault("Ellipse");this.rawNode=a},getBoundingBox:function(){if(!this.bbox){var a=this.shape;this.bbox={x:a.cx-a.rx,y:a.cy-a.ry,width:2*a.rx,height:2*a.ry}}return this.bbox}});j("dojox.gfx.shape.Circle",n.Shape,{constructor:function(a){this.shape=f.getDefault("Circle");this.rawNode=a},getBoundingBox:function(){if(!this.bbox){var a=this.shape;this.bbox={x:a.cx-a.r,y:a.cy-a.r,width:2*a.r,height:2*a.r}}return this.bbox}});j("dojox.gfx.shape.Line",n.Shape,{constructor:function(a){this.shape=
f.getDefault("Line");this.rawNode=a},getBoundingBox:function(){if(!this.bbox){var a=this.shape;this.bbox={x:Math.min(a.x1,a.x2),y:Math.min(a.y1,a.y2),width:Math.abs(a.x2-a.x1),height:Math.abs(a.y2-a.y1)}}return this.bbox}});j("dojox.gfx.shape.Polyline",n.Shape,{constructor:function(a){this.shape=f.getDefault("Polyline");this.rawNode=a},setShape:function(a,c){a&&a instanceof Array?(this.inherited(arguments,[{points:a}]),c&&this.shape.points.length&&this.shape.points.push(this.shape.points[0])):this.inherited(arguments,
[a]);return this},_normalizePoints:function(){var a=this.shape.points,c=a&&a.length;if(c&&typeof a[0]=="number"){for(var e=[],b=0;b<c;b+=2)e.push({x:a[b],y:a[b+1]});this.shape.points=e}},getBoundingBox:function(){if(!this.bbox&&this.shape.points.length){for(var a=this.shape.points,c=a.length,e=a[0],b={l:e.x,t:e.y,r:e.x,b:e.y},f=1;f<c;++f){e=a[f];if(b.l>e.x)b.l=e.x;if(b.r<e.x)b.r=e.x;if(b.t>e.y)b.t=e.y;if(b.b<e.y)b.b=e.y}this.bbox={x:b.l,y:b.t,width:b.r-b.l,height:b.b-b.t}}return this.bbox}});j("dojox.gfx.shape.Image",
n.Shape,{constructor:function(a){this.shape=f.getDefault("Image");this.rawNode=a},getBoundingBox:function(){return this.shape},setStroke:function(){return this},setFill:function(){return this}});j("dojox.gfx.shape.Text",n.Shape,{constructor:function(a){this.fontStyle=null;this.shape=f.getDefault("Text");this.rawNode=a},getFont:function(){return this.fontStyle},setFont:function(a){this.fontStyle=typeof a=="string"?f.splitFontString(a):f.makeParameters(f.defaultFont,a);this._setFont();return this}});
n.Creator={createShape:function(a){switch(a.type){case f.defaultPath.type:return this.createPath(a);case f.defaultRect.type:return this.createRect(a);case f.defaultCircle.type:return this.createCircle(a);case f.defaultEllipse.type:return this.createEllipse(a);case f.defaultLine.type:return this.createLine(a);case f.defaultPolyline.type:return this.createPolyline(a);case f.defaultImage.type:return this.createImage(a);case f.defaultText.type:return this.createText(a);case f.defaultTextPath.type:return this.createTextPath(a)}return null},
createGroup:function(){return this.createObject(f.Group)},createRect:function(a){return this.createObject(f.Rect,a)},createEllipse:function(a){return this.createObject(f.Ellipse,a)},createCircle:function(a){return this.createObject(f.Circle,a)},createLine:function(a){return this.createObject(f.Line,a)},createPolyline:function(a){return this.createObject(f.Polyline,a)},createImage:function(a){return this.createObject(f.Image,a)},createText:function(a){return this.createObject(f.Text,a)},createPath:function(a){return this.createObject(f.Path,
a)},createTextPath:function(a){return this.createObject(f.TextPath,{}).setText(a)},createObject:function(){return null}};return n})},"djeo/common/Placemark":function(){define("djeo/common/Placemark",["dojo/_base/declare","require","dojo/_base/lang","dojo/_base/array","../_base","../util/_base","../Style"],function(f,l,j,o,k,i){var g=f(null,{specificStyleIndex:-1,render:function(a,e,c){this._render(a,e,c)},_render:function(a,e,c){if(a.visible){var f=a.getCoords();if(f){if(c)for(var g=a.baseShapes.length-
1;g>=0;g--)this.map.engine.destroy(a.baseShapes.pop(),a);if(a.extraShapes)for(g=a.extraShapes.length-1;g>=0;g--)this.map.engine.destroy(a.extraShapes.pop(),a);g=k.calculateStyle(a,e);if(!e||e=="normal")a.reg.cs=g;e=a.isPoint()?"point":a.isArea()?"area":"line";c?(this.multipleSymbolizers&&g[e]?o.forEach(g[e],function(){var c=this.createShape(a,f);c&&a.baseShapes.push(c)},this):(c=this.createShape(a,f))&&a.baseShapes.push(c),this.applyStyle(a,g,e,f),o.forEach(a.baseShapes,function(c){this.map.engine.appendChild(c,
a)},this)):this.applyStyle(a,g,e,f);if(c=this.makeText(a,g)){if(!a.textShapes)a.textShapes=[];a.textShapes.push(c);this.map.engine.appendChild(c,a)}}else a.invalid=!0}},createShape:function(a,e){var c;switch(a.getCoordsType()){case "Point":c=this.makePoint(a,e);break;case "LineString":c=this.makeLineString(a,e);break;case "Polygon":c=this.makePolygon(a,e);break;case "MultiPolygon":c=this.makeMultiPolygon(a,e);break;case "MultiLineString":c=this.makeMultiLineString(a,e);break;case "MultiPoint":c=this.makeMultiPoint(a,
e)}return c},applyStyle:function(a,e,c,f){switch(c){case "point":this.applyPointStyle(a,e,f);break;case "line":this.applyLineStyle(a,e,f);break;case "area":this.applyPolygonStyle(a,e,f)}},_getLabel:function(a,e){return e.attr?a.get(e.attr):a.get("label")||a.get("name")},_getIconUrl:function(a,e,c){var f;e&&a?f=g.shapeIconsUrl+g.shapes[e]:c&&(f=i.isRelativeUrl(c)?i.baseUrl+this.map.iconBasePath+c:c);return f},_getImageUrl:function(a){return a&&i.isRelativeUrl(a)?i.baseUrl+this.map.iconBasePath+a:a}});
g.defaultShapeType="square";g.shapeIconsUrl=l.toUrl("../resources/icons/");g.shapes={circle:"circle.png",star:"star.png",cross:"cross.png",x:"x.png",square:"square.png",triangle:"triangle.png"};g.get=function(a,e,c,f){return f&&f[a]!==void 0?f[a]:c&&c[a]!==void 0?c[a]:e[a]};g.getSpecificShapeStyle=function(a,e){if(!a)return null;var c=a.length;return e>=0?e<c?a[e]:a[c-1]:e>=-c?a[c+e]:a[0]};g.getSize=function(a,e,c){a=g.get("size",a,e,c);a!==void 0&&!j.isArray(a)&&(a=[a,a]);return a};g.getScale=function(a,
e,c){(a=g.get("scale",a,e,c))||(a=1);return a};g.getAnchor=function(a,e,c,f){var i=g.get("img",a,e,c);return(a=j.isObject(i)&&i.anchor?i.anchor:g.get("anchor",a,e,c))?a:[f[0]/2,f[1]/2]};g.getImgSrc=function(a,e,c){a=g.get("img",a,e,c);return j.isObject(a)?a.src:a};g.getImgSize=function(a,e,c){var f=g.get("img",a,e,c);return j.isObject(f)&&f.size?f.size:g.getSize(a,e,c)};return g})},"dojo/_base/event":function(){define("dojo/_base/event",["./kernel","../on","../has","../dom-geometry"],function(f,l,
j,o){if(l._fixEvent){var k=l._fixEvent;l._fixEvent=function(f,g){(f=k(f,g))&&o.normalizeEvent(f);return f}}f.fixEvent=function(f,g){if(l._fixEvent)return l._fixEvent(f,g);return f};f.stopEvent=function(f){j("dom-addeventlistener")||f&&f.preventDefault?(f.preventDefault(),f.stopPropagation()):(f=f||window.event,f.cancelBubble=!0,l._preventDefault.call(f))};return{fix:f.fixEvent,stop:f.stopEvent}})},"djeo/dojox/gfx/svg":function(){define("djeo/dojox/gfx/svg",["dojo/_base/lang","dojo/_base/window","dojo/dom",
"dojo/_base/declare","dojo/_base/array","dojo/dom-geometry","dojo/_base/Color","./_base","./shape","./path"],function(f,l,j,o,k,i,g,a,e,c){function n(a,c){return l.doc.createElementNS?l.doc.createElementNS(a,c):l.doc.createElement(c)}function q(a){return h.useSvgWeb?l.doc.createTextNode(a,!0):l.doc.createTextNode(a)}var h=a.svg={};h.useSvgWeb=typeof window.svgweb!="undefined";var d=navigator.userAgent.toLowerCase(),t=d.search("iphone")>-1||d.search("ipad")>-1||d.search("ipod")>-1;h.xmlns={xlink:"http://www.w3.org/1999/xlink",
svg:"http://www.w3.org/2000/svg"};h.getRef=function(a){if(!a||a=="none")return null;if(a.match(/^url\(#.+\)$/))return j.byId(a.slice(5,-1));if(a.match(/^#dojoUnique\d+$/))return j.byId(a.slice(1));return null};h.dasharray={solid:"none",shortdash:[4,1],shortdot:[1,1],shortdashdot:[4,1,1,1],shortdashdotdot:[4,1,1,1,1,1],dot:[1,3],dash:[4,3],longdash:[8,3],dashdot:[4,3,1,3],longdashdot:[8,3,1,3],longdashdotdot:[8,3,1,3,1,3]};o("dojox.gfx.svg.Shape",e.Shape,{setFill:function(b){if(!b)return this.fillStyle=
null,this.rawNode.setAttribute("fill","none"),this.rawNode.setAttribute("fill-opacity",0),this;var c,d=function(a){this.setAttribute(a,c[a].toFixed(8))};if(typeof b=="object"&&"type"in b){switch(b.type){case "linear":c=a.makeParameters(a.defaultLinearGradient,b);b=this._setFillObject(c,"linearGradient");k.forEach(["x1","y1","x2","y2"],d,b);break;case "radial":c=a.makeParameters(a.defaultRadialGradient,b);b=this._setFillObject(c,"radialGradient");k.forEach(["cx","cy","r"],d,b);break;case "pattern":c=
a.makeParameters(a.defaultPattern,b),b=this._setFillObject(c,"pattern"),k.forEach(["x","y","width","height"],d,b)}this.fillStyle=c;return this}this.fillStyle=c=a.normalizeColor(b);this.rawNode.setAttribute("fill",c.toCss());this.rawNode.setAttribute("fill-opacity",c.a);this.rawNode.setAttribute("fill-rule","evenodd");return this},setStroke:function(b){var c=this.rawNode;if(!b)return this.strokeStyle=null,c.setAttribute("stroke","none"),c.setAttribute("stroke-opacity",0),this;if(typeof b=="string"||
f.isArray(b)||b instanceof g)b={color:b};b=this.strokeStyle=a.makeParameters(a.defaultStroke,b);b.color=a.normalizeColor(b.color);if(b){c.setAttribute("stroke",b.color.toCss());c.setAttribute("stroke-opacity",b.color.a);c.setAttribute("stroke-width",b.width);c.setAttribute("stroke-linecap",b.cap);typeof b.join=="number"?(c.setAttribute("stroke-linejoin","miter"),c.setAttribute("stroke-miterlimit",b.join)):c.setAttribute("stroke-linejoin",b.join);var d=b.style.toLowerCase();d in h.dasharray&&(d=h.dasharray[d]);
if(d instanceof Array){for(var d=f._toArray(d),e=0;e<d.length;++e)d[e]*=b.width;if(b.cap!="butt"){for(e=0;e<d.length;e+=2)d[e]-=b.width,d[e]<1&&(d[e]=1);for(e=1;e<d.length;e+=2)d[e]+=b.width}d=d.join(",")}c.setAttribute("stroke-dasharray",d);c.setAttribute("dojoGfxStrokeStyle",b.style)}return this},_getParentSurface:function(){for(var b=this.parent;b&&!(b instanceof a.Surface);b=b.parent);return b},_setFillObject:function(b,c){var d=h.xmlns.svg;this.fillStyle=b;var e=this._getParentSurface().defNode,
f=this.rawNode.getAttribute("fill");if(f=h.getRef(f))if(f.tagName.toLowerCase()!=c.toLowerCase()){var g=f.id;f.parentNode.removeChild(f);f=n(d,c);f.setAttribute("id",g);e.appendChild(f)}else for(;f.childNodes.length;)f.removeChild(f.lastChild);else f=n(d,c),f.setAttribute("id",a._base._getUniqueId()),e.appendChild(f);if(c=="pattern")f.setAttribute("patternUnits","userSpaceOnUse"),d=n(d,"image"),d.setAttribute("x",0),d.setAttribute("y",0),d.setAttribute("width",b.width.toFixed(8)),d.setAttribute("height",
b.height.toFixed(8)),d.setAttributeNS(h.xmlns.xlink,"xlink:href",b.src),f.appendChild(d);else{f.setAttribute("gradientUnits","userSpaceOnUse");for(e=0;e<b.colors.length;++e){var g=b.colors[e],i=n(d,"stop"),j=g.color=a.normalizeColor(g.color);i.setAttribute("offset",g.offset.toFixed(8));i.setAttribute("stop-color",j.toCss());i.setAttribute("stop-opacity",j.a);f.appendChild(i)}}this.rawNode.setAttribute("fill","url(#"+f.getAttribute("id")+")");this.rawNode.removeAttribute("fill-opacity");this.rawNode.setAttribute("fill-rule",
"evenodd");return f},_applyTransform:function(){if(this.matrix){var a=this.matrix;this.rawNode.setAttribute("transform","matrix("+a.xx.toFixed(8)+","+a.yx.toFixed(8)+","+a.xy.toFixed(8)+","+a.yy.toFixed(8)+","+a.dx.toFixed(8)+","+a.dy.toFixed(8)+")")}else this.rawNode.removeAttribute("transform");return this},setRawNode:function(a){a=this.rawNode=a;this.shape.type!="image"&&a.setAttribute("fill","none");a.setAttribute("fill-opacity",0);a.setAttribute("stroke","none");a.setAttribute("stroke-opacity",
0);a.setAttribute("stroke-width",1);a.setAttribute("stroke-linecap","butt");a.setAttribute("stroke-linejoin","miter");a.setAttribute("stroke-miterlimit",4);a.__gfxObject__=this.getUID()},setShape:function(b){this.shape=a.makeParameters(this.shape,b);for(var c in this.shape)c!="type"&&this.rawNode.setAttribute(c,this.shape[c]);this.bbox=null;return this},_moveToFront:function(){this.rawNode.parentNode.appendChild(this.rawNode);return this},_moveToBack:function(){this.rawNode.parentNode.insertBefore(this.rawNode,
this.rawNode.parentNode.firstChild);return this}});o("dojox.gfx.svg.Group",h.Shape,{constructor:function(){e.Container._init.call(this)},setRawNode:function(a){this.rawNode=a;this.rawNode.__gfxObject__=this.getUID()}});h.Group.nodeType="g";o("dojox.gfx.svg.Rect",[h.Shape,e.Rect],{setShape:function(b){this.shape=a.makeParameters(this.shape,b);this.bbox=null;for(var c in this.shape)c!="type"&&c!="r"&&this.rawNode.setAttribute(c,this.shape[c]);this.shape.r!=null&&(this.rawNode.setAttribute("ry",this.shape.r),
this.rawNode.setAttribute("rx",this.shape.r));return this}});h.Rect.nodeType="rect";o("dojox.gfx.svg.Ellipse",[h.Shape,e.Ellipse],{});h.Ellipse.nodeType="ellipse";o("dojox.gfx.svg.Circle",[h.Shape,e.Circle],{});h.Circle.nodeType="circle";o("dojox.gfx.svg.Line",[h.Shape,e.Line],{});h.Line.nodeType="line";o("dojox.gfx.svg.Polyline",[h.Shape,e.Polyline],{setShape:function(b,c){b&&b instanceof Array?(this.shape=a.makeParameters(this.shape,{points:b}),c&&this.shape.points.length&&this.shape.points.push(this.shape.points[0])):
this.shape=a.makeParameters(this.shape,b);this.bbox=null;this._normalizePoints();for(var d=[],e=this.shape.points,f=0;f<e.length;++f)d.push(e[f].x.toFixed(8),e[f].y.toFixed(8));this.rawNode.setAttribute("points",d.join(" "));return this}});h.Polyline.nodeType="polyline";o("dojox.gfx.svg.Image",[h.Shape,e.Image],{setShape:function(b){this.shape=a.makeParameters(this.shape,b);this.bbox=null;var b=this.rawNode,c;for(c in this.shape)c!="type"&&c!="src"&&b.setAttribute(c,this.shape[c]);b.setAttribute("preserveAspectRatio",
"none");b.setAttributeNS(h.xmlns.xlink,"xlink:href",this.shape.src);b.__gfxObject__=this.getUID();return this}});h.Image.nodeType="image";o("dojox.gfx.svg.Text",[h.Shape,e.Text],{setShape:function(b){this.shape=a.makeParameters(this.shape,b);this.bbox=null;var b=this.rawNode,c=this.shape;b.setAttribute("x",c.x);b.setAttribute("y",c.y);b.setAttribute("text-anchor",c.align);b.setAttribute("text-decoration",c.decoration);b.setAttribute("rotate",c.rotated?90:0);b.setAttribute("kerning",c.kerning?"auto":
0);b.setAttribute("text-rendering","optimizeLegibility");b.firstChild?b.firstChild.nodeValue=c.text:b.appendChild(q(c.text));return this},getTextWidth:function(){var a=this.rawNode,c=a.parentNode,a=a.cloneNode(!0);a.style.visibility="hidden";var d=0,e=a.firstChild.nodeValue;c.appendChild(a);if(e!="")for(;!d;)d=a.getBBox?parseInt(a.getBBox().width):68;c.removeChild(a);return d}});h.Text.nodeType="text";o("dojox.gfx.svg.Path",[h.Shape,c.Path],{_updateWithSegment:function(){this.inherited(arguments);
typeof this.shape.path=="string"&&this.rawNode.setAttribute("d",this.shape.path)},setShape:function(){this.inherited(arguments);this.shape.path?this.rawNode.setAttribute("d",this.shape.path):this.rawNode.removeAttribute("d");return this}});h.Path.nodeType="path";o("dojox.gfx.svg.TextPath",[h.Shape,c.TextPath],{_updateWithSegment:function(){this.inherited(arguments);this._setTextPath()},setShape:function(){this.inherited(arguments);this._setTextPath();return this},_setTextPath:function(){if(typeof this.shape.path==
"string"){var b=this.rawNode;if(!b.firstChild){var c=n(h.xmlns.svg,"textPath"),d=q("");c.appendChild(d);b.appendChild(c)}c=(c=b.firstChild.getAttributeNS(h.xmlns.xlink,"href"))&&h.getRef(c);if(!c&&(d=this._getParentSurface())){var d=d.defNode,c=n(h.xmlns.svg,"path"),e=a._base._getUniqueId();c.setAttribute("id",e);d.appendChild(c);b.firstChild.setAttributeNS(h.xmlns.xlink,"xlink:href","#"+e)}c&&c.setAttribute("d",this.shape.path)}},_setText:function(){var a=this.rawNode;if(!a.firstChild){var c=n(h.xmlns.svg,
"textPath"),d=q("");c.appendChild(d);a.appendChild(c)}a=a.firstChild;c=this.text;a.setAttribute("alignment-baseline","middle");switch(c.align){case "middle":a.setAttribute("text-anchor","middle");a.setAttribute("startOffset","50%");break;case "end":a.setAttribute("text-anchor","end");a.setAttribute("startOffset","100%");break;default:a.setAttribute("text-anchor","start"),a.setAttribute("startOffset","0%")}a.setAttribute("baseline-shift","0.5ex");a.setAttribute("text-decoration",c.decoration);a.setAttribute("rotate",
c.rotated?90:0);a.setAttribute("kerning",c.kerning?"auto":0);a.firstChild.data=c.text}});h.TextPath.nodeType="text";o("dojox.gfx.svg.Surface",e.Surface,{constructor:function(){e.Container._init.call(this)},destroy:function(){this.defNode=null;this.inherited(arguments)},setDimensions:function(a,c){if(!this.rawNode)return this;this.rawNode.setAttribute("width",a);this.rawNode.setAttribute("height",c);return this},getDimensions:function(){return this.rawNode?{width:a.normalizedLength(this.rawNode.getAttribute("width")),
height:a.normalizedLength(this.rawNode.getAttribute("height"))}:null}});h.createSurface=function(a,c,d){var e=new h.Surface;e.rawNode=n(h.xmlns.svg,"svg");e.rawNode.setAttribute("overflow","hidden");c&&e.rawNode.setAttribute("width",c);d&&e.rawNode.setAttribute("height",d);c=n(h.xmlns.svg,"defs");e.rawNode.appendChild(c);e.defNode=c;e._parent=j.byId(a);e._parent.appendChild(e.rawNode);return e};var o={_setFont:function(){var a=this.fontStyle;this.rawNode.setAttribute("font-style",a.style);this.rawNode.setAttribute("font-variant",
a.variant);this.rawNode.setAttribute("font-weight",a.weight);this.rawNode.setAttribute("font-size",a.size);this.rawNode.setAttribute("font-family",a.family)}},m=e.Container,c={openBatch:function(){this.fragment=h.useSvgWeb?l.doc.createDocumentFragment(!0):l.doc.createDocumentFragment()},closeBatch:function(){this.fragment&&(this.rawNode.appendChild(this.fragment),delete this.fragment)},add:function(a){this!=a.getParent()&&(this.fragment?this.fragment.appendChild(a.rawNode):this.rawNode.appendChild(a.rawNode),
m.add.apply(this,arguments));return this},remove:function(a){this==a.getParent()&&(this.rawNode==a.rawNode.parentNode&&this.rawNode.removeChild(a.rawNode),this.fragment&&this.fragment==a.rawNode.parentNode&&this.fragment.removeChild(a.rawNode),m.remove.apply(this,arguments));return this},clear:function(){for(var a=this.rawNode;a.lastChild;)a.removeChild(a.lastChild);var c=this.defNode;if(c){for(;c.lastChild;)c.removeChild(c.lastChild);a.appendChild(c)}return m.clear.apply(this,arguments)},_moveChildToFront:m._moveChildToFront,
_moveChildToBack:m._moveChildToBack},d={createObject:function(a,c){if(!this.rawNode)return null;var d=new a,e=n(h.xmlns.svg,a.nodeType);d.setRawNode(e);d.setShape(c);this.add(d);return d}};f.extend(h.Text,o);f.extend(h.TextPath,o);f.extend(h.Group,c);f.extend(h.Group,e.Creator);f.extend(h.Group,d);f.extend(h.Surface,c);f.extend(h.Surface,e.Creator);f.extend(h.Surface,d);h.fixTarget=function(a){if(!a.gfxTarget)a.gfxTarget=t&&a.target.wholeText?e.byId(a.target.parentElement.__gfxObject__):e.byId(a.target.__gfxObject__);
return!0};if(h.useSvgWeb)h.createSurface=function(b,c,d){var e=new h.Surface;if(!c||!d)var f=i.position(b),c=c||f.w,d=d||f.h;var b=j.byId(b),f=b.id?b.id+"_svgweb":a._base._getUniqueId(),g=n(h.xmlns.svg,"svg");g.id=f;g.setAttribute("width",c);g.setAttribute("height",d);svgweb.appendChild(g,b);g.addEventListener("SVGLoad",function(){e.rawNode=this;e.isLoaded=!0;var a=n(h.xmlns.svg,"defs");e.rawNode.appendChild(a);e.defNode=a;if(e.onLoad)e.onLoad(e)},!1);e.isLoaded=!1;return e},h.Surface.extend({destroy:function(){var a=
this.rawNode;svgweb.removeChild(a,a.parentNode)}}),o={connect:function(a,c,d){a.substring(0,2)==="on"&&(a=a.substring(2));d=arguments.length==2?c:f.hitch(c,d);this.getEventSource().addEventListener(a,d,!1);return[this,a,d]},disconnect:function(a){this.getEventSource().removeEventListener(a[1],a[2],!1);delete a[0]}},f.extend(h.Shape,o),f.extend(h.Surface,o);return h})},"djeo/djeo/WebTiles":function(){define("djeo/djeo/WebTiles",["dojo/_base/declare","dojo/_base/lang","dojo/dom-geometry","dojo/dom-style",
"dojo/dom-construct","../_base","tiles/BaseTileable","../util/_base","../projection"],function(f,l,j,o,k,i,g,a){return f(null,{zoom:3,_urlCounter:0,_lastUrlIndex:0,projection:"EPSG:3857",init:function(){var a=this.map;this.container=k.create("div",{style:{top:0,left:0,width:"100%",height:"100%",position:"absolute"}},a.engine.container,0);this.discreteScales=i.scales;this._lastUrlIndex=this.url.length-1;if(!a.dataProjection)a.dataProjection="EPSG:4326";a.engine.scaleFactor=2;this.tileable=new g({wrapHor:!0,
setTileContent:l.hitch(this,this.setTileContent),extraTiles:1},this.container);this.tileable._mixin();this.tileable._buildRendering()},zoomTo:function(a){var c=this.map,f=i.scales,g=[(a[2]+a[0])/2,(a[3]+a[1])/2],a=Math.min(c.width/(a[2]-a[0]),c.height/(a[3]-a[1])),h;if(a<=f[0])h=0;else if(c=f.length-1,a>f[c])h=c;else for(var d=0;d<c;d++)if(f[d]<a&&a<=f[d+1]){h=d;break}this._setCenterAndZoom(g,h)},_setCenterAndZoom:function(e,c){var f=this.tileable,g=Math.pow(2,c);f.extent=[0,0,f.tileSize[0]*g,f.tileSize[1]*
g];f._calculateTileBounds();var g=f.extent,h=e[0]/(2*Math.PI*a.earthRadius/g[2]),d=e[1]/(2*Math.PI*a.earthRadius/g[3]);h+=g[2]/2;d=-d+g[3]/2;f.center=[h,d];f.zoom=c;this.tileable.updateTileDivs();this.zoom=c},setCenter:function(a){this._setCenterAndZoom(a,this.zoom)},setZoom:function(a){this.tileable.doZoom(a);this.zoom=a},onMove:function(a,c){this.tileable.onTouchMove(a,c)},setStartPos:function(){this.tileable.startPos=this.tileable.getPos()},getScale:function(){return this.discreteScales[this.zoom]},
doZoom:function(a,c){var f=j.position(this.container,!0),g=c.pageX-f.x-o.get(this.container,"borderLeftWidth"),f=c.pageY-f.y-o.get(this.container,"borderTopWidth");this.zoom+=(a>1?a:-1/a)/2;this.tileable.doZoom(this.zoom,g,f)},setTileContent:function(a,c,f,g){a.img&&a.div.removeChild(a.img);c=k.create("img",{width:256,height:256,src:this.url[this._urlCounter]+"/"+c+"/"+(this.yFirst?g:f)+"/"+(this.yFirst?f:g)+".png"},a.div);a.img=c;this._urlCounter==this._lastUrlIndex?this._urlCounter=0:this._urlCounter++}})})},
"dojo/_base/connect":function(){define("dojo/_base/connect",["./kernel","../on","../topic","../aspect","./event","../mouse","./sniff","./lang","../keys"],function(f,l,j,o,k,i,g,a){function e(c,b,e,g,h){g=a.hitch(e,g);if(!c||!c.addEventListener&&!c.attachEvent)return o.after(c||f.global,b,g,!0);typeof b=="string"&&b.substring(0,2)=="on"&&(b=b.substring(2));if(!c)c=f.global;if(!h)switch(b){case "keypress":b=d;break;case "mouseenter":b=i.enter;break;case "mouseleave":b=i.leave}return l(c,b,g,h)}function c(a){a.keyChar=
a.charCode?String.fromCharCode(a.charCode):"";a.charOrCode=a.keyChar||a.keyCode}g.add("events-keypress-typed",function(){var a={charCode:0};try{a=document.createEvent("KeyboardEvent"),(a.initKeyboardEvent||a.initKeyEvent).call(a,"keypress",!0,!0,null,!1,!1,!1,!1,9,3)}catch(b){}return a.charCode==0&&!g("opera")});var n={106:42,111:47,186:59,187:43,188:44,189:45,190:46,191:47,192:96,219:91,220:92,221:93,222:39,229:113},q=g("mac")?"metaKey":"ctrlKey",h=function(d,b){var e=a.mixin({},d,b);c(e);e.preventDefault=
function(){d.preventDefault()};e.stopPropagation=function(){d.stopPropagation()};return e},d;d=g("events-keypress-typed")?function(a,b){var c=l(a,"keydown",function(a){var c=a.keyCode,d=(c!=13||g("ie")>=9&&!g("quirks"))&&c!=32&&(c!=27||!g("ie"))&&(c<48||c>90)&&(c<96||c>111)&&(c<186||c>192)&&(c<219||c>222)&&c!=229;if(d||a.ctrlKey){d=d?0:c;if(a.ctrlKey)if(c==3||c==13)return b.call(a.currentTarget,a);else d>95&&d<106?d-=48:!a.shiftKey&&d>=65&&d<=90?d+=32:d=n[d]||d;c=h(a,{type:"keypress",faux:!0,charCode:d});
b.call(a.currentTarget,c);if(g("ie"))try{a.keyCode=c.keyCode}catch(e){}}}),d=l(a,"keypress",function(a){var c=a.charCode,a=h(a,{charCode:c>=32?c:0,faux:!0});return b.call(this,a)});return{remove:function(){c.remove();d.remove()}}}:g("opera")?function(a,b){return l(a,"keypress",function(a){var c=a.which;c==3&&(c=99);c=c<32&&!a.shiftKey?0:c;a.ctrlKey&&!a.shiftKey&&c>=65&&c<=90&&(c+=32);return b.call(this,h(a,{charCode:c}))})}:function(a,b){return l(a,"keypress",function(a){c(a);return b.call(this,a)})};
var t={_keypress:d,connect:function(){var a=arguments,b=[],c=0;b.push(typeof a[0]=="string"?null:a[c++],a[c++]);var d=a[c+1];b.push(typeof d=="string"||typeof d=="function"?a[c++]:null,a[c++]);for(d=a.length;c<d;c++)b.push(a[c]);return e.apply(this,b)},disconnect:function(a){a&&a.remove()},subscribe:function(c,b,d){return j.subscribe(c,a.hitch(b,d))},publish:function(a,b){return j.publish.apply(j,[a].concat(b))},connectPublisher:function(a,b,c){var d=function(){t.publish(a,arguments)};return c?t.connect(b,
c,d):t.connect(b,d)},isCopyKey:function(a){return a[q]}};t.unsubscribe=t.disconnect;a.mixin(f,t);return t})}}});define("djeo/native",[],1);