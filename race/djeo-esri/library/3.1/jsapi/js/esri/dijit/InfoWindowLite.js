/*
 COPYRIGHT 2009 ESRI

 TRADE SECRETS: ESRI PROPRIETARY AND CONFIDENTIAL
 Unpublished material - all rights reserved under the
 Copyright Laws of the United States and applicable international
 laws, treaties, and conventions.

 For additional information, contact:
 Environmental Systems Research Institute, Inc.
 Attn: Contracts and Legal Services Department
 380 New York Street
 Redlands, California, 92373
 USA

 email: contracts@esri.com
 */
//>>built
define(["dijit","dojo","dojox","dojo/require!esri/InfoWindowBase,esri/utils"],function(_1,_2,_3){_2.provide("esri.dijit.InfoWindowLite");_2.require("esri.InfoWindowBase");_2.require("esri.utils");_2.declare("esri.dijit.InfoWindow",[esri.InfoWindowBase],{constructor:function(_4,_5){_2.mixin(this,_4);var _6=(this.domNode=_2.byId(_5));_6.id=this.id||_1.getUniqueId(this.declaredClass);_2.addClass(_6,"simpleInfoWindow");this._title=_2.create("div",{"class":"title"},_6);this._content=_2.create("div",{"class":"content"},_6);this._close=_2.create("div",{"class":"close"},_6);},domNode:null,anchor:"upperright",fixedAnchor:null,coords:null,isShowing:true,width:250,height:150,title:"Info Window",_bufferWidth:10,_bufferHeight:10,startup:function(){this._anchors=[esri.dijit.InfoWindow.ANCHOR_UPPERRIGHT,esri.dijit.InfoWindow.ANCHOR_LOWERRIGHT,esri.dijit.InfoWindow.ANCHOR_LOWERLEFT,esri.dijit.InfoWindow.ANCHOR_UPPERLEFT];this.resize(this.width,this.height);this.hide();this._closeConnect=_2.connect(this._close,"onclick",this,this.hide);},destroy:function(){if(this.isShowing){this.hide();}this.destroyDijits(this._title);this.destroyDijits(this._content);_2.disconnect(this._closeConnect);_2.destroy(this.domNode);this.domNode=this._title=this._content=this._anchors=this._closeConnect=null;},setTitle:function(_7){if(!_7){_2.addClass(this._title,"empty");}else{_2.removeClass(this._title,"empty");}this.destroyDijits(this._title);this.__setValue("_title",_7);return this;},setContent:function(_8){if(!_8){_2.addClass(this._title,"empty");}else{_2.removeClass(this._title,"empty");}this.destroyDijits(this._content);this.__setValue("_content",_8);return this;},setFixedAnchor:function(_9){if(_9&&_2.indexOf(this._anchors,_9)===-1){return;}this.fixedAnchor=_9;if(this.isShowing){this.show(this.mapCoords||this.coords,_9);}this.onAnchorChange(_9);},show:function(_a,_b){if(!_a){return;}if(_a.spatialReference){this.mapCoords=_a;_a=this.coords=this.map.toScreen(_a,true);}else{this.mapCoords=null;this.coords=_a;}if(!_b||_2.indexOf(this._anchors,_b)===-1){_b=this.map.getInfoWindowAnchor(_a);}_b=(this.anchor=this.fixedAnchor||_b);esri.show(this.domNode);this._adjustContentArea();this._adjustPosition(_a,_b);this.isShowing=true;if(!arguments[2]){this.onShow();}},hide:function(){esri.hide(this.domNode);this.isShowing=false;if(!arguments[1]){this.onHide();}},move:function(_c,_d){if(_d){_c=this.coords.offset(_c.x,_c.y);}else{this.coords=_c;if(this.mapCoords){this.mapCoords=this.map.toMap(_c);}}this._adjustPosition(_c,this.anchor);},resize:function(_e,_f){this.width=_e;this.height=_f;_2.style(this.domNode,{width:_e+"px",height:_f+"px"});_2.style(this._close,{left:(_e-2)+"px",top:"-12px"});this._adjustContentArea();if(this.coords){this._adjustPosition(this.coords,this.anchor);}this.onResize(_e,_f);},onShow:function(){this.__registerMapListeners();this.startupDijits(this._title);this.startupDijits(this._content);},onHide:function(){this.__unregisterMapListeners();},onResize:function(){},onAnchorChange:function(){},_adjustContentArea:function(){var box=_2.contentBox(this.domNode);var _10=_2.coords(this._title);var _11=_2.coords(this._content);var _12=_2.contentBox(this._content);var _13=_11.h-_12.h;_2.style(this._content,{height:(box.h-_10.h-_13)+"px"});},_adjustPosition:function(_14,_15){var _16=Math.round(_14.x),_17=Math.round(_14.y);var _18=this._bufferWidth,_19=this._bufferHeight;var _1a=_2.coords(this.domNode);switch(_15){case esri.dijit.InfoWindow.ANCHOR_UPPERLEFT:_16-=(_1a.w+_18);_17-=(_1a.h+_19);break;case esri.dijit.InfoWindow.ANCHOR_UPPERRIGHT:_16+=_18;_17-=(_1a.h+_19);break;case esri.dijit.InfoWindow.ANCHOR_LOWERRIGHT:_16+=_18;_17+=_19;break;case esri.dijit.InfoWindow.ANCHOR_LOWERLEFT:_16-=(_1a.w+_18);_17+=_19;break;}_2.style(this.domNode,{left:_16+"px",top:_17+"px"});}});_2.mixin(esri.dijit.InfoWindow,{ANCHOR_UPPERRIGHT:"upperright",ANCHOR_LOWERRIGHT:"lowerright",ANCHOR_LOWERLEFT:"lowerleft",ANCHOR_UPPERLEFT:"upperleft"});});