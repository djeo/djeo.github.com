//>>built
(function(b,l){var j,m,h=function(){},e=function(a){for(var d in a)return 0;return 1},o={}.toString,c=function(a){return o.call(a)=="[object Function]"},k=function(a){return o.call(a)=="[object String]"},a=function(a){return o.call(a)=="[object Array]"},p=function(a,d){if(a)for(var i=0;i<a.length;)d(a[i++])},n=function(a,d){for(var i in d)a[i]=d[i];return a},d=function(a,d){return n(Error(a),{src:"dojoLoader",info:d})},f=1,i=function(){return"_"+f++},q=function(a,d,i){return Ea(a,d,i,0,q)},y=this,
w=y.document,C=w&&w.createElement("DiV"),r=q.has=function(a){return c(s[a])?s[a]=s[a](y,w,C):s[a]},s=r.cache=l.hasCache;r.add=function(a,d,i,c){(s[a]===void 0||c)&&(s[a]=d);return i&&r(a)};for(var x in b.has)r.add(x,b.has[x],0,1);var t=0,N=[],Y=0,Z=h,fa=h,Q;q.isXdUrl=h;q.initSyncLoader=function(a,d,i){Y||(Y=a,Z=d,fa=i);return{sync:"sync",xd:"xd",arrived:2,nonmodule:3,executing:4,executed:5,syncExecStack:N,modules:D,execQ:G,getModule:R,injectModule:ga,setArrived:U,signal:J,finishExec:$,execModule:aa,
dojoRequirePlugin:Y,getLegacyMode:function(){return t},holdIdle:function(){P++},releaseIdle:function(){ba()}}};var Ra=location.protocol,u=location.host,A=!u;q.isXdUrl=function(a){if(A||/^\./.test(a))return!1;if(/^\/\//.test(a))return!0;return(a=a.match(/^([^\/\:]+\:)\/\/([^\/]+)/))&&(a[1]!=Ra||a[2]!=u)};r.add("dojo-force-activex-xhr",!w.addEventListener&&window.location.protocol=="file:");r.add("native-xhr",typeof XMLHttpRequest!="undefined");if(r("native-xhr")&&!r("dojo-force-activex-xhr"))Q=function(){return new XMLHttpRequest};
else{x=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"];var K;for(j=0;j<3;)try{if(K=x[j++],new ActiveXObject(K))break}catch(z){}Q=function(){return new ActiveXObject(K)}}q.getXhr=Q;r.add("dojo-gettext-api",1);q.getText=function(a,i,c){var f=Q();f.open("GET",ha(a),!1);f.send(null);if(f.status==200||!location.host&&!f.status)c&&c(f.responseText,i);else throw d("xhrFailed",f.status);return f.responseText};var E=new Function("return eval(arguments[0]);");q.eval=function(a,d){return E(a+"\r\n////@ sourceURL="+
d)};var L={},J=q.signal=function(d,i){var c=L[d];p(c&&c.slice(0),function(d){d.apply(null,a(i)?i:[i])})},V=q.on=function(a,d){var i=L[a]||(L[a]=[]);i.push(d);return{remove:function(){for(var a=0;a<i.length;a++)if(i[a]===d){i.splice(a,1);break}}}},W=[],M={},B=[],H={},v={},F=[],D={},ua="",T={},ia={};x={};var ja=function(a){var d,i,c,f;for(d in ia)i=ia[d],(c=d.match(/^url\:(.+)/))?T[Fa(c[1],a)]=i:d=="*now"?f=i:d!="*noref"&&(T[ca(d,a).mid]=i);f&&f(va(a));ia={}},wa=function(a,d,i){d.splice(0,d.length);
var c,f=0;for(c in a)d.push([c,a[c]]),a[c]==i&&(f=c);d.sort(function(a,d){return d[0].length-a[0].length});for(a=0;a<d.length;)i=d[a++],i[2]=RegExp("^"+i[0].replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,function(a){return"\\"+a})+"(/|$)"),i[3]=i[0].length+1;return f},Ga=function(a,d){var i=a.name;i||(i=a,a={name:i});a=n({main:"main",mapProg:[]},a);a.location=(d||"")+(a.location?a.location:i);a.reverseName=wa(a.packageMap,a.mapProg,i);if(!a.main.indexOf("./"))a.main=a.main.substring(2);n(M,a.paths);H[i]=
a;v[i]=i},ka=function(a,i){for(var d in a){if(d=="waitSeconds")q.waitms=(a[d]||0)*1E3;d=="cacheBust"&&(ua=a[d]?k(a[d])?a[d]:(new Date).getTime()+"":"");if(d=="baseUrl"||d=="combo")q[d]=a[d];if(d=="async"){var c=a[d];q.legacyMode=t=k(c)&&/sync|legacyAsync/.test(c)?c:!c?"sync":!1;q.async=!t}a[d]!==s&&(q.rawConfig[d]=a[d],d!="has"&&r.add("config-"+d,a[d],0,i))}if(!q.baseUrl)q.baseUrl="./";/\/$/.test(q.baseUrl)||(q.baseUrl+="/");for(d in a.has)r.add(d,a.has[d],0,i);p(a.packages,Ga);for(m in a.packagePaths)p(a.packagePaths[m],
function(a){Ga(a,m+"/")});wa(n(M,a.paths),B);p(a.aliases,function(a){k(a[0])&&(a[0]=RegExp("^"+a[0].replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,function(a){return"\\"+a})+"$"));W.push(a)});wa(n(v,a.packageMap),F);if(a.cache)ja(),ia=a.cache,a.cache["*noref"]&&ja();J("config",[a,q.rawConfig])};r("dojo-cdn");var O,la,xa,ma=w.getElementsByTagName("script");for(j=0;j<ma.length&&!xa;j++)if((la=ma[j].getAttribute("src"))&&(xa=la.match(/(.*)\/?dojo\.js(\W|$)/i)))b.baseUrl=O=b.baseUrl||l.baseUrl||xa[1],(la=ma[j].getAttribute("data-dojo-config")||
ma[j].getAttribute("djConfig"))&&(x=q.eval("({ "+la+" })","data-dojo-config"));q.rawConfig={};ka(l,1);ka(b,1);ka(x,1);if(r("dojo-cdn"))H.dojo.location=O,H.dijit.location=O+"../dijit/",H.dojox.location=O+"../dojox/";var da=function(a){P++;p(a.deps,ga);ba()},Ea=function(c,f,e,b,p){if(k(c)){if((f=R(c,b,!0))&&f.executed)return f.result;throw d("undefinedModule",c);}a(c)||(ka(c),c=f,f=e);if(a(c))if(c.length){for(var e="require*"+i(),j,o=[],m=0;m<c.length;){j=c[m++];if(j in{exports:1,module:1})throw d("illegalModuleId",
j);o.push(R(j,b))}f=n(na("",e,0,""),{injected:2,deps:o,def:f||h,require:b?b.require:q});D[f.mid]=f;da(f);c=P&&q.async;P++;aa(f,c);ba();f.executed||G.push(f);X()}else f&&f();return p},va=function(a){if(!a)return q;var d=a.require;if(!d)d=function(i,c,f){return Ea(i,c,f,a,d)},a.require=n(d,q),d.module=a,d.toUrl=function(d){return Fa(d,a)},d.toAbsMid=function(d){return ya(d,a)},d.syncLoadNls=function(d){var d=ca(d,a),i=D[d.mid];if(!i||!i.executed)if(S=T[d.mid]||T[d.cacheId])oa(S),i=D[d.mid];return i&&
i.executed&&i.result};return d},G=[],pa=[],I={},Sa=function(a){a.injected=1;I[a.mid]=1;a.url&&(I[a.url]=a.pack||1)},U=function(a){a.injected=2;delete I[a.mid];a.url&&delete I[a.url];e(I)&&(qa(),t=="xd"&&(t="sync"))},Ta=q.idle=function(){return!pa.length&&e(I)&&!G.length&&!P},za=function(a,d){for(var i=0;i<d.length;i++)if(d[i][2].test(a))return d[i];return 0},Ha=function(a){for(var d=[],i,c,a=a.replace(/\\/g,"/").split("/");a.length;)i=a.shift(),i==".."&&d.length&&c!=".."?(d.pop(),c=d[d.length-1]):
i!="."&&d.push(c=i);return d.join("/")},na=function(a,d,i,c,f){var e=q.isXdUrl(c);return{pid:a,mid:d,pack:i,url:c,executed:0,def:0,isXd:e,isAmd:!!(e||H[a]&&H[a].isAmd),cacheId:f}},Ia=function(a,i,f,e,k,q,n,b){var h,j,o,m=0;o=/^\./.test(a);if(/(^\/)|(\:)|(\.js$)/.test(a)||o&&!i)return na(0,a,0,a);else{a=Ha(o?i.mid+"/../"+a:a);if(/^\./.test(a))throw d("irrationalPath",a);if(o=(i=i&&i.pack&&i.pack.mapProg)&&za(a,i)||za(a,q)){i=o[1];a=a.substring(o[3]);h=f[i];if(!a)a=h.main;j=a;m=h.reverseName+"/"+a;
a=i+"/"+a}else i="";var Q=0;p(W,function(d){var i=a.match(d[0]);i&&i.length>0&&(Q=c(d[1])?a.replace(d[0],d[1]):d[1])});if(Q)return Ia(Q,0,f,e,k,q,n,b);if(f=e[a])return b?na(f.pid,f.mid,f.pack,f.url,m):e[a]}e=(o=za(a,n))?o[1]+a.substring(o[3]-1):i?h.location+"/"+j:r("config-tlmSiblingOfDojo")?"../"+a:a;/(^\/)|(\:)/.test(e)||(e=k+e);e+=".js";return na(i,a,h,Ha(e),m)},ca=function(a,d){return Ia(a,d,H,D,q.baseUrl,F,B)},Ja=function(a,d,i){return a.normalize?a.normalize(d,function(a){return ya(a,i)}):ya(d,
i)},Ka=0,R=function(a,d,i){var c,f;(c=a.match(/^(.+?)\!(.*)$/))?(f=R(c[1],d,i),t=="sync"&&!f.executed&&(ga(f),f.injected===2&&!f.executed&&(P++,aa(f),ba()),f.executed?ra(f):G.unshift(f)),f.executed===5&&!f.load&&ra(f),f.load?(c=Ja(f,c[2],d),a=f.mid+"!"+(f.dynamic?++Ka+"!":"")+c):(c=c[2],a=f.mid+"!"+ ++Ka+"!waitingForPlugin"),a={plugin:f,mid:a,req:va(d),prid:c}):a=ca(a,d);return D[a.mid]||!i&&(D[a.mid]=a)},ya=q.toAbsMid=function(a,d){return ca(a,d).mid},Fa=q.toUrl=function(a,d){var i=ca(a+"/x",d),
c=i.url;return ha(i.pid===0?a:c.substring(0,c.length-5))},La={injected:2,executed:5,def:3,result:3};O=function(a){return D[a]=n({mid:a},La)};var Ua=O("require"),Va=O("exports"),Wa=O("module"),sa={},Aa=0,ra=function(a){var d=a.result;a.dynamic=d.dynamic;a.normalize=d.normalize;a.load=d.load;return a},Xa=function(a){var d={};p(a.loadQ,function(i){var c=Ja(a,i.prid,i.req.module),f=a.dynamic?i.mid.replace(/waitingForPlugin$/,c):a.mid+"!"+c,c=n(n({},i),{mid:f,prid:c,injected:0});D[f]||Ma(D[f]=c);d[i.mid]=
D[f];U(i);delete D[i.mid]});a.loadQ=0;var i=function(a){for(var i=a.deps||[],c=0;c<i.length;c++)(a=d[i[c].mid])&&(i[c]=a)},c;for(c in D)i(D[c]);p(G,i)},$=function(a){q.trace("loader-finish-exec",[a.mid]);a.executed=5;a.defOrder=Aa++;p(a.provides,function(a){a()});a.loadQ&&(ra(a),Xa(a));for(j=0;j<G.length;)G[j]===a?G.splice(j,1):j++},Ya=[],aa=function(a,i){if(a.executed===4)return q.trace("loader-circular-dependency",[Ya.concat(f).join("->")]),!a.def||i?sa:a.cjs&&a.cjs.exports;if(!a.executed){if(!a.def)return sa;
var f=a.mid,e=a.deps||[],k,n=[],b=0;for(a.executed=4;b<e.length;){k=e[b++];k=k===Ua?va(a):k===Va?a.cjs.exports:k===Wa?a.cjs:aa(k,i);if(k===sa)return a.executed=0,q.trace("loader-exec-module",["abort",f]),sa;n.push(k)}q.trace("loader-run-factory",[a.mid]);var f=a.def,p;N.unshift(a);if(r("config-dojo-loader-catches"))try{p=c(f)?f.apply(null,n):f}catch(h){J("error",a.result=d("factoryThrew",[a,h]))}else p=c(f)?f.apply(null,n):f;a.result=p===void 0&&a.cjs?a.cjs.exports:p;N.shift(a);$(a)}return a.result},
P=0,X=function(){if(!P){P++;Z();for(var a,d,i=0;i<G.length;)a=Aa,d=G[i],aa(d),a!=Aa?(Z(),i=0):i++;ba()}},ba=function(){P--;Ta()&&J("idle",[])};r("dojo-loader-eval-hint-url")===void 0&&r.add("dojo-loader-eval-hint-url",1);var ha=function(a){a+="";return a+(ua?(/\?/.test(a)?"&":"?")+ua:"")},Ma=function(a){var d=a.plugin;d.executed===5&&!d.load&&ra(d);var i=function(d){a.result=d;U(a);$(a);X()};d.load?d.load(a.prid,a.req,i):d.loadQ?d.loadQ.push(a):(d.loadQ=[a],G.unshift(d),ga(d))},S=0,ea=0,Ba=0,oa=function(a,
i){Ba=1;if(r("config-dojo-loader-catches"))try{a===S?S.call(null):q.eval(a,r("dojo-loader-eval-hint-url")?i.url:i.mid)}catch(c){J("error",d("evalModuleThrew",i))}else a===S?S.call(null):q.eval(a,r("dojo-loader-eval-hint-url")?i.url:i.mid);Ba=0},ga=function(a){var i=a.mid,c=a.url;if(!a.executed&&!a.injected&&!(I[i]||a.url&&(a.pack&&I[a.url]===a.pack||I[a.url]==1)))if(Sa(a),a.plugin)Ma(a);else{var f=function(){Na(a);a.injected!==2&&(U(a),n(a,La));t?!N.length&&X():X()};if(S=T[i]||T[a.cacheId])q.trace("loader-inject",
["cache",a.mid,c]),oa(S,a),f();else{if(t)if(a.isXd)t=="sync"&&(t="xd");else if(!(a.isAmd&&t!="sync")){var e=function(d){if(t=="sync"){N.unshift(a);oa(d,a);N.shift();Na(a);a.cjs||(U(a),$(a));if(a.finish){var d=i+"*finish",e=a.finish;delete a.finish;Ca(d,["dojo",("dojo/require!"+e.join(",")).replace(/\./g,"/")],function(a){p(e,function(d){a.require(d)})});G.unshift(R(d))}f()}else(d=fa(a,d))?(oa(d,a),f()):(ea=a,q.injectUrl(ha(c),f,a),ea=0)};q.trace("loader-inject",["xhr",a.mid,c,t!="sync"]);if(r("config-dojo-loader-catches"))try{q.getText(c,
t!="sync",e)}catch(k){J("error",d("xhrInjectFailed",[a,k]))}else q.getText(c,t!="sync",e);return}q.trace("loader-inject",["script",a.mid,c]);ea=a;q.injectUrl(ha(c),f,a);ea=0}}},Da=function(a,i,f){q.trace("loader-define-module",[a.mid,i]);var e=a.mid;if(a.injected===2)return J("error",d("multipleDefine",a)),a;n(a,{deps:i,def:f,cjs:{id:a.mid,uri:a.url,exports:a.result={},setExports:function(d){a.cjs.exports=d}}});for(var k=0;k<i.length;k++)i[k]=R(i[k],a);t&&!I[e]&&(da(a),G.push(a),X());U(a);if(!c(f)&&
!i.length)a.result=f,$(a);return a},Na=function(a,d){for(var i=[],c,f;pa.length;)f=pa.shift(),d&&(f[0]=d.shift()),c=f[0]&&R(f[0])||a,i.push([c,f[1],f[2]]);ja(a);p(i,function(a){da(Da.apply(null,a))})},ta=0,qa=h,Oa=h,qa=function(){ta&&clearTimeout(ta);ta=0},Oa=function(){qa();q.waitms&&(ta=setTimeout(function(){qa();J("error",d("timeout",I))},q.waitms))};r.add("ie-event-behavior",w.attachEvent&&(typeof opera==="undefined"||opera.toString()!="[object Opera]"));var Pa=function(a,d,i,c){return r("ie-event-behavior")?
(a.attachEvent(i,c),function(){a.detachEvent(i,c)}):(a.addEventListener(d,c,!1),function(){a.removeEventListener(d,c,!1)})},Za=Pa(window,"load","onload",function(){q.pageLoaded=1;w.readyState!="complete"&&(w.readyState="complete");Za()}),Qa=w.getElementsByTagName("script")[0],$a=Qa.parentNode;q.injectUrl=function(a,d,i){Oa();var i=i.node=w.createElement("script"),c=Pa(i,"load","onreadystatechange",function(a){var a=a||window.event,i=a.target||a.srcElement;if(a.type==="load"||/complete|loaded/.test(i.readyState))c(),
d&&d()});i.type="text/javascript";i.charset="utf-8";i.src=a;$a.insertBefore(i,Qa);return i};q.log=function(){try{for(var a=0;a<arguments.length;a++);}catch(d){}};q.trace=h;var Ca=function(i,f,e){var k=arguments.length,n=0,b=["require","exports","module"];n||(n=k==1?[0,b,i]:k==2?a(i)?[0,i,f]:c(f)?[i,b,f]:[i,[],f]:[i,f,e]);q.trace("loader-define",n.slice(0,2));if((k=n[0]&&R(n[0]))&&!I[k.mid])da(Da(k,n[1],n[2]));else if(!r("ie-event-behavior")||Ba)pa.push(n);else{k=k||ea;if(!k)for(i in I)if((b=D[i])&&
b.node&&b.node.readyState==="interactive"){k=b;break}k?(ja(k),da(Da(k,n[1],n[2]))):J("error",d("ieDefineFailed",n[0]));X()}};Ca.amd={vendor:"dojotoolkit.org"};n(n(q,l.loaderPatch),b.loaderPatch);V("error",function(a){try{if(a instanceof Error)for(var d in a);}catch(i){}});n(q,{uid:i,cache:T,packs:H});y.define?J("error",d("defineAlreadyDefined",0)):(y.define=Ca,y.require=q);O=x.deps||b.deps||l.deps;x=x.callback||b.callback||l.callback;q.boot=O||x?[O||[],x]:0})(this.dojoConfig||this.djConfig||this.require||
{},{async:0,hasCache:{"config-selectorEngine":"lite","config-tlmSiblingOfDojo":1,"dojo-built":1,"dojo-loader":1,dom:1,"host-browser":1},packages:[{location:"../djeo",main:"Map",name:"djeo"},{location:"../djeo-demos",name:"djeo-demos"},{location:"../tiles",name:"tiles"},{location:"../xstyle",main:"css",name:"xstyle"},{location:"../djeo-esri",name:"djeo-esri"},{location:"../djeo-gmaps",name:"djeo-gmaps"},{location:"../dojox",name:"dojox"},{location:"../djeo-ge",name:"djeo-ge"},{location:"../dijit",
name:"dijit"},{location:".",name:"dojo"},{location:"../djeo-leaflet",name:"djeo-leaflet"},{location:"../djeo-ymaps",name:"djeo-ymaps"}]});
require({cache:{"dojo/dom-form":function(){define("dojo/dom-form",["./_base/lang","./dom","./io-query","./json"],function(b,l,j,m){var h={fieldToObject:function(e){var b=null;if(e=l.byId(e)){var c=e.name,k=(e.type||"").toLowerCase();if(c&&k&&!e.disabled)if(k=="radio"||k=="checkbox"){if(e.checked)b=e.value}else if(e.multiple){b=[];for(e=[e.firstChild];e.length;)for(c=e.pop();c;c=c.nextSibling)if(c.nodeType==1&&c.tagName.toLowerCase()=="option")c.selected&&b.push(c.value);else{c.nextSibling&&e.push(c.nextSibling);
c.firstChild&&e.push(c.firstChild);break}}else b=e.value}return b},toObject:function(e){for(var j={},e=l.byId(e).elements,c=0,k=e.length;c<k;++c){var a=e[c],p=a.name,n=(a.type||"").toLowerCase();if(p&&n&&"file|submit|image|reset|button".indexOf(n)<0&&!a.disabled){var d=j,f=p,a=h.fieldToObject(a);if(a!==null){var i=d[f];typeof i=="string"?d[f]=[i,a]:b.isArray(i)?i.push(a):d[f]=a}if(n=="image")j[p+".x"]=j[p+".y"]=j[p].x=j[p].y=0}}return j},toQuery:function(e){return j.objectToQuery(h.toObject(e))},
toJson:function(e,b){return m.stringify(h.toObject(e),null,b?4:0)}};return h})},"djeo/control/_Base":function(){define("djeo/control/_Base",["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/Evented","../util/_base"],function(b,l,j,m,h){return b([m],{features:null,id:null,enabled:!0,constructor:function(e,b){this.id=h.uid();this.handle=h.uid();this.map=e;b||(b={});l.mixin(this,b);var c=b.features?b.features:[e.document];l.isArray(c)||(c=[c]);this.features=[];j.forEach(c,function(c){l.isString(c)&&
(c=this.map.getFeatureById(c));c&&this.features.push(c)},this)},init:function(){},attachFactory:function(){var e=this.map.engine.getFactory(this._dependency);e&&l.mixin(this,e)},enable:function(e){e===void 0&&(e=!0);e?this._connectEvents():this._disconnectEvents();this.enabled=e},_connectEvents:function(){j.forEach(this.features,function(e){e.onForHandle(this.handle,{events:this.events,context:this,method:this.process,key:this.id,value:this})},this)},_disconnectEvents:function(){j.forEach(this.features,
function(e){e.disconnect(this.handle,this.id,!0)},this)},destroy:function(){this.enable(!1)}})})},"djeo/Style":function(){define("djeo/Style",["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","./_base","dojo/colors"],function(b,l,j,m){var h=["points","lines"],e={theme:1,name:1,legend:1},o={id:1,filter:1,styleClass:1,fid:1,composer:1,composerOptions:1,zoom:1},c=/\$(?:(\w+)|\[([^\]]+)\])/g,b=b(null,{def:null,_features:null,constructor:function(a,d){this.map=d;this._features={};this._setDef(a);
a.id&&(d.styleById[a.id]=this)},set:function(a){var d=this.map,c=this.styleClass||this.fid?{}:this._features;this.styleClass?j.forEach(this.styleClass,function(a){if(this.fid)j.forEach(this.fid,function(e){for(var k=d.styleByClassAndFid[a][e],b=k.length,n=0;n<b;n++)if(k[n]==this)break;if(n<b&&(k.splice(n,1),(e=d.getFeatureById(e))&&e.styleClass))for(n=0;n<e.styleClass.length;n++)if(a==e.styleClass[n]&&!c[e.id]){c[e.id]=e;break}},this);else{for(var e=d.styleByClass[a],k=e.length,b=0;b<k;b++)if(e[b]==
this)break;b<k&&(e.splice(b,1),(e=d.featuresByClass[a])&&j.forEach(e,function(a){c[a.id]||(c[a.id]=a)}))}},this):this.fid&&j.forEach(this.fid,function(a){for(var e=d.styleByFid[a],k=e.length,b=0;b<k;b++)if(e[b]==this)break;b<k&&(e.splice(b,1),(a=d.getFeatureById(a))&&!c[a.id]&&(c[a.id]=a))},this);delete this.styleClass;this._setDef(a);this.map.renderFeatures(c)},_setDef:function(a){var d=this.map;for(attr in a)attr in e&&(this[attr]=a[attr]);var f=a.filter;if(f)l.isString(f)&&(f=f.replace(c,function(a,
d,i){return"this.get('"+(d||i)+"')"}),f=eval("_=function(){return "+f+";}")),this.filter=f;if("zoom"in a&&(f=a.zoom,this.zoom=f=l.isArray(f)?f.length==0?[-Infinity,Infinity]:[f[0]===void 0?-Infinity:f[0],f[1]===void 0?Infinity:f[1]]:[f,f],!d._hasZoomStyle))d._hasZoomStyle=!0;var f=a.styleClass,i=a.fid;i&&!l.isArray(i)&&(i=[i]);f?(l.isArray(f)||(f=[f]),j.forEach(f,function(a){if(i){var c=d.styleByClassAndFid;j.forEach(i,function(d){c[a]||(c[a]={});c[a][d]||(c[a][d]=[]);c[a][d].push(this)},this)}else d.styleByClass[a]||
(d.styleByClass[a]=[]),d.styleByClass[a].push(this)},this)):i&&j.forEach(i,function(a){d.styleByFid[a]||(d.styleByFid[a]=[]);d.styleByFid[a].push(this)},this);if(f)this.styleClass=f;if(i)this.fid=i;if(f=a.composer)l.isString(f)&&(f=l.getObject(f)),this.composer=f,this._updated=(new Date).getTime(),this.composerOptions=a.composerOptions||a;if(f=a.handler)l.isString(f)&&(f=l.getObject(f)),this.handler=f;this.def={};for(attr in a)!(attr in e)&&!(attr in o)&&(this.def[attr]=a[attr])},destroy:function(){delete this.def}});
m.calculateStyle=function(a,d){var c=[],i=[],e=a;do i.push(e),e=e.parent;while(e!=a.map);for(e=i.length-1;e>=0;e--)k(i[e],c,d);for(var e=a.map.engine,i=e._get_zoom&&e._get_zoom(),b={},e=0,m=c.length;e<m;e++){var o=c[e],r=o.zoom;if(!r||i===void 0||r[0]<=i&&i<=r[1])if(o.filter?o.filter.call(a.map.useAttrs?a.attrs:a):1)p(b,o.def),o.composer&&o.composer(a,o.composerOptions,b,o._updated)}j.forEach(h,function(a){var d=b[a];d&&!l.isArray(d)&&(b[a]=[d])});return b};var k=function(c,d,f){var i=c.map;styleClass=
c.styleClass;fid=c.id;styleClass?j.forEach(styleClass,function(c){var e=i.styleByClassAndFid;e[c]&&e[c][fid]?a(e[c][fid],d,f):i.styleByClass[c]&&a(i.styleByClass[c],d,f)}):i.styleByFid[fid]&&a(i.styleByFid[fid],d,f);c.style&&a(c.style,d,f)},a=function(a,d,c){j.forEach(a,function(a){if((!a.theme||a.theme=="normal")&&(!c||c=="normal")||a.theme==c){if(a.def.reset)for(var e=d.length-1;e>=0;e--)d.pop();d.push(a)}})},p=function(a,d){for(attr in d)attr=="shape"&&a.img?delete a.img:attr=="img"&&a.shape&&
delete a.shape,a[attr]=d[attr];return a};return b})},"dojo/_base/kernel":function(){define(["../has","./config","require","module"],function(b,l,j,m){var h,e={},o={},c={config:l,global:this,dijit:e,dojox:o},e={dojo:["dojo",c],dijit:["dijit",e],dojox:["dojox",o]},m=j.packs&&j.packs[m.id.match(/[^\/]+/)[0]].packageMap||{};for(h in m)e[h]?e[h][0]=m[h]:e[h]=[m[h],{}];for(h in e)m=e[h],m[1]._scopeName=m[0],l.noGlobals||(this[m[0]]=m[1]);c.scopeMap=e;c.baseUrl=c.config.baseUrl=j.baseUrl;c.isAsync=j.async;
c.locale=l.locale;m="$Rev: 28982 $".match(/\d+/);c.version={major:1,minor:7,patch:3,flag:"",revision:m?+m[0]:NaN,toString:function(){var a=c.version;return a.major+"."+a.minor+"."+a.patch+a.flag+" ("+a.revision+")"}};c.eval=function(){};Function("d","d.eval = function(){return d.global.eval ? d.global.eval(arguments[0]) : eval(arguments[0]);}")(c);c.exit=function(){};typeof console!="undefined"||(console={});for(var e=["assert","count","debug","dir","dirxml","error","group","groupEnd","info","profile",
"profileEnd","time","timeEnd","trace","warn","log"],k,m=0;k=e[m++];)console[k]||function(){var a=k+"";console[a]="log"in console?function(){var c=Array.apply({},arguments);c.unshift(a+":");console.log(c.join(" "))}:function(){};console[a]._fake=!0}();b.add("dojo-debug-messages",!!l.isDebug);b("dojo-debug-messages")?(c.deprecated=function(){},c.experimental=function(){}):c.deprecated=c.experimental=function(){};if(l.modulePaths){c.deprecated("dojo.modulePaths","use paths configuration");b={};for(h in l.modulePaths)b[h.replace(/\./g,
"/")]=l.modulePaths[h];j({paths:b})}c.moduleUrl=function(a,e){c.deprecated("dojo.moduleUrl()","use require.toUrl","2.0");var k=null;a&&(k=j.toUrl(a.replace(/\./g,"/")+(e?"/"+e:"")+"/*.*").replace(/\/\*\.\*/,"")+(e?"":"/"));return k};c._hasResource={};return c})},"dojo/io-query":function(){define(["./_base/lang"],function(b){var l={};return{objectToQuery:function(j){var m=encodeURIComponent,h=[],e;for(e in j){var o=j[e];if(o!=l[e]){var c=m(e)+"=";if(b.isArray(o))for(var k=0,a=o.length;k<a;++k)h.push(c+
m(o[k]));else h.push(c+m(o))}}return h.join("&")},queryToObject:function(j){for(var m=decodeURIComponent,j=j.split("&"),h={},e,o,c=0,k=j.length;c<k;++c)if(o=j[c],o.length){var a=o.indexOf("=");a<0?(e=m(o),o=""):(e=m(o.slice(0,a)),o=m(o.slice(a+1)));typeof h[e]=="string"&&(h[e]=[h[e]]);b.isArray(h[e])?h[e].push(o):h[e]=o}return h}}})},"djeo-demos/race/util":function(){define("djeo-demos/race/util",["djeo/util/_base"],function(b){return{getInitialPositions:function(b,j,m){for(var h=0,e=b[h],o=b[b.length-
2],o=[[e,Math.atan2(e[0]-o[0],e[1]-o[1])]],c=1;c<j;c++){var k=this.movePointAlongTrack(e,m,b,h,!1),e=k[0],h=k[1];o.push([e,k[2]])}return o},movePointAlongTrack:function(l,j,m,h,e){for(var o=m.length,c;;){c=h;var h=e?h<o-1?h+1:1:h>0?h-1:o-2,k=m[h],a;a=l[0];var p=l[1],n=k[0],d=k[1];a=b.degToRad(a);p=b.degToRad(p);n=b.degToRad(n);d=b.degToRad(d);a=Math.pow(Math.sin((d-p)/2),2)+Math.cos(p)*Math.cos(d)*Math.pow(Math.sin((n-a)/2),2);a=6378137*2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a));if(a>=j)return j/=
a,l=[l[0]*(1-j)+k[0]*j,l[1]*(1-j)+k[1]*j],k=m[c],m=m[h],m=Math.atan2(m[0]-k[0],m[1]-k[1]),[l,c,e?m:m-Math.PI];else l=k,j-=a}}}})},"dojo/_base/Deferred":function(){define("dojo/_base/Deferred",["./kernel","./lang"],function(b,l){var j=function(){},m=Object.freeze||function(){};b.Deferred=function(h){function e(a){if(k)throw Error("This deferred has already been resolved");c=a;k=!0;o()}function o(){for(var d;!d&&n;){var f=n;n=n.next;if(d=f.progress==j)k=!1;var e=a?f.error:f.resolved;if(e)try{var b=
e(c);b&&typeof b.then==="function"?b.then(l.hitch(f.deferred,"resolve"),l.hitch(f.deferred,"reject"),l.hitch(f.deferred,"progress")):(e=d&&b===void 0,d&&!e&&(a=b instanceof Error),f.deferred[e&&a?"reject":"resolve"](e?c:b))}catch(h){f.deferred.reject(h)}else a?f.deferred.reject(c):f.deferred.resolve(c)}}var c,k,a,p,n,d=this.promise={};this.resolve=this.callback=function(a){this.fired=0;this.results=[a,null];e(a)};this.reject=this.errback=function(d){a=!0;this.fired=1;e(d);this.results=[null,d];if(!d||
d.log!==!1)(b.config.deferredOnError||function(){})(d)};this.progress=function(a){for(var d=n;d;){var c=d.progress;c&&c(a);d=d.next}};this.addCallbacks=function(a,d){this.then(a,d,j);return this};d.then=this.then=function(a,c,f){var e=f==j?this:new b.Deferred(d.cancel),a={resolved:a,error:c,progress:f,deferred:e};n?p=p.next=a:n=p=a;k&&o();return e.promise};var f=this;d.cancel=this.cancel=function(){if(!k){var a=h&&h(f);if(!k)a instanceof Error||(a=Error(a)),a.log=!1,f.reject(a)}};m(d)};l.extend(b.Deferred,
{addCallback:function(){return this.addCallbacks(l.hitch.apply(b,arguments))},addErrback:function(){return this.addCallbacks(null,l.hitch.apply(b,arguments))},addBoth:function(){var h=l.hitch.apply(b,arguments);return this.addCallbacks(h,h)},fired:-1});b.Deferred.when=b.when=function(b,e,j,c){if(b&&typeof b.then==="function")return b.then(e,j,c);return e?e(b):b};return b.Deferred})},"djeo/control/Navigation":function(){define("djeo/control/Navigation",["dojo/_base/declare","dojo/_base/lang","../_base"],
function(b,l,j){j.registerDependency("Navigation");return b(null,{constructor:function(b,h){this.map=b;var e=this.map.engine.getFactory("Navigation");e&&(l.mixin(this,e),h&&l.mixin(this,h),this.enable(!0))},enable:function(){},_onZoom:function(){this.map.engine.onzoom_changed()}})})},"dojo/has":function(){define(["require"],function(b){var l=b.has||function(){},b=navigator.userAgent;l.add("dom-addeventlistener",!!document.addEventListener);l.add("touch","ontouchstart"in document);l.add("device-width",
screen.availWidth||innerWidth);l.add("agent-ios",!!b.match(/iPhone|iP[ao]d/));l.add("agent-android",b.indexOf("android")>1);l.clearElement=function(b){b.innerHTML="";return b};l.normalize=function(b,m){var h=b.match(/[\?:]|[^:\?]*/g),e=0,o=function(c){var b=h[e++];if(b==":")return 0;else{if(h[e++]=="?")return!c&&l(b)?o():(o(!0),o(c));return b||0}};return(b=o())&&m(b)};l.load=function(b,m,h){b?m([b],h):h()};return l})},"dojo/json":function(){define(["./has"],function(b){var l=typeof JSON!="undefined";
b.add("json-parse",l);b.add("json-stringify",l&&JSON.stringify({a:0},function(b,h){return h||1})=='{"a":1}');if(b("json-stringify"))return JSON;else{var j=function(b){return('"'+b.replace(/(["\\])/g,"\\$1")+'"').replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r")};return{parse:b("json-parse")?JSON.parse:function(b,h){if(h&&!/^([\s\[\{]*(?:"(?:\\.|[^"])+"|-?\d[\d\.]*(?:[Ee][+-]?\d+)?|null|true|false|)[\s\]\}]*(?:,|:|$))+$/.test(b))throw new SyntaxError("Invalid characters in JSON");
return eval("("+b+")")},stringify:function(b,h,e){function o(b,a,p){h&&(b=h(p,b));var n;n=typeof b;if(n=="number")return isFinite(b)?b+"":"null";if(n=="boolean")return b+"";if(b===null)return"null";if(typeof b=="string")return j(b);if(n=="function"||n=="undefined")return c;if(typeof b.toJSON=="function")return o(b.toJSON(p),a,p);if(b instanceof Date)return'"{FullYear}-{Month+}-{Date}T{Hours}:{Minutes}:{Seconds}Z"'.replace(/\{(\w+)(\+)?\}/g,function(a,d,c){a=b["getUTC"+d]()+(c?1:0);return a<10?"0"+
a:a});if(b.valueOf()!==b)return o(b.valueOf(),a,p);var d=e?a+e:"",f=e?" ":"",i=e?"\n":"";if(b instanceof Array){for(var f=b.length,q=[],p=0;p<f;p++)n=o(b[p],d,p),typeof n!="string"&&(n="null"),q.push(i+d+n);return"["+q.join(",")+i+a+"]"}q=[];for(p in b){var m;if(typeof p=="number")m='"'+p+'"';else if(typeof p=="string")m=j(p);else continue;n=o(b[p],d,p);typeof n=="string"&&q.push(i+d+m+":"+f+n)}return"{"+q.join(",")+i+a+"}"}var c;typeof h=="string"&&(e=h,h=null);return o(b,"","")}}}})},"dojo/_base/declare":function(){define(["./kernel",
"../has","./lang"],function(b,l,j){function m(a,d){throw Error("declare"+(d?" "+d:"")+": "+a);}function h(a,d,c){var i,f,b,e,k,n,p,h=this._inherited=this._inherited||{};typeof a=="string"&&(i=a,a=d,d=c);c=0;e=a.callee;(i=i||e.nom)||m("can't deduce a name to call inherited()",this.declaredClass);k=this.constructor._meta;b=k.bases;p=h.p;if(i!=t){if(h.c!==e&&(p=0,n=b[0],k=n._meta,k.hidden[i]!==e)){(f=k.chains)&&typeof f[i]=="string"&&m("calling chained method with inherited: "+i,this.declaredClass);
do if(k=n._meta,f=n.prototype,k&&(f[i]===e&&f.hasOwnProperty(i)||k.hidden[i]===e))break;while(n=b[++p]);p=n?p:-1}if(n=b[++p])if(f=n.prototype,n._meta&&f.hasOwnProperty(i))c=f[i];else{e=C[i];do if(f=n.prototype,(c=f[i])&&(n._meta?f.hasOwnProperty(i):c!==e))break;while(n=b[++p])}c=n&&c||C[i]}else{if(h.c!==e&&(p=0,(k=b[0]._meta)&&k.ctor!==e)){f=k.chains;for((!f||f.constructor!=="manual")&&m("calling chained constructor with inherited",this.declaredClass);n=b[++p];)if((k=n._meta)&&k.ctor===e)break;p=
n?p:-1}for(;n=b[++p];)if(c=(k=n._meta)?k.ctor:n)break;c=n&&c}h.c=c;h.p=p;if(c)return d===!0?c:c.apply(this,d||a)}function e(a,d){if(typeof a=="string")return this.__inherited(a,d,!0);return this.__inherited(a,!0)}function o(a,d,c){var i=this.getInherited(a,d);if(i)return i.apply(this,c||d||a)}function c(a){for(var d=this.constructor._meta.bases,c=0,i=d.length;c<i;++c)if(d[c]===a)return!0;return this instanceof a}function k(a,d){for(var c in d)c!=t&&d.hasOwnProperty(c)&&(a[c]=d[c]);if(l("bug-for-in-skips-shadowed"))for(var i=
j._extraNames,f=i.length;f;)c=i[--f],c!=t&&d.hasOwnProperty(c)&&(a[c]=d[c])}function a(a){y.safeMixin(this.prototype,a);return this}function p(a,d){return function(){var u;var c=arguments,i=c,f=c[0],b,e;e=a.length;var k;if(!(this instanceof c.callee))return q(c);if(d&&(f&&f.preamble||this.preamble)){k=Array(a.length);k[0]=c;for(b=0;;){if(f=c[0])(f=f.preamble)&&(c=f.apply(this,c)||c);f=a[b].prototype;(f=f.hasOwnProperty("preamble")&&f.preamble)&&(c=f.apply(this,c)||c);if(++b==e)break;k[b]=c}}for(b=
e-1;b>=0;--b)f=a[b],(u=(e=f._meta)?e.ctor:f,f=u)&&f.apply(this,k?k[b]:c);(f=this.postscript)&&f.apply(this,i)}}function n(a,d){return function(){var c=arguments,i=c,f=c[0];if(!(this instanceof c.callee))return q(c);if(d){if(f)(f=f.preamble)&&(i=f.apply(this,i)||i);(f=this.preamble)&&f.apply(this,i)}a&&a.apply(this,c);(f=this.postscript)&&f.apply(this,c)}}function d(a){return function(){var u;var d=arguments,c=0,i,f;if(!(this instanceof d.callee))return q(d);for(;i=a[c];++c)if(u=(f=i._meta)?f.ctor:
i,i=u){i.apply(this,d);break}(i=this.postscript)&&i.apply(this,d)}}function f(a,d,c){return function(){var i,f,b=0,e=1;c&&(b=d.length-1,e=-1);for(;i=d[b];b+=e)f=i._meta,(i=(f?f.hidden:i.prototype)[a])&&i.apply(this,arguments)}}function i(a){s.prototype=a.prototype;a=new s;s.prototype=null;return a}function q(a){var d=a.callee,c=i(d);d.apply(c,a);return c}function y(b,q,o){typeof b!="string"&&(o=q,q=b,b="");var o=o||{},l,s,u,A,K,z,E,L=1,J=q;if(r.call(q)=="[object Array]"){L=b;u=[];A=[{cls:0,refs:[]}];
z={};for(var V=1,W=q.length,M=0,B,H,v,F;M<W;++M){(B=q[M])?r.call(B)!="[object Function]"&&m("mixin #"+M+" is not a callable constructor.",L):m("mixin #"+M+" is unknown. Did you use dojo.require to pull it in?",L);H=B._meta?B._meta.bases:[B];v=0;for(B=H.length-1;B>=0;--B){F=H[B].prototype;if(!F.hasOwnProperty("declaredClass"))F.declaredClass="uniqName_"+x++;F=F.declaredClass;z.hasOwnProperty(F)||(z[F]={count:0,refs:[],cls:H[B]},++V);F=z[F];v&&v!==F&&(F.refs.push(v),++v.count);v=F}++v.count;A[0].refs.push(v)}for(;A.length;){v=
A.pop();u.push(v.cls);for(--V;s=v.refs,s.length==1;){v=s[0];if(!v||--v.count){v=0;break}u.push(v.cls);--V}if(v){M=0;for(W=s.length;M<W;++M)v=s[M],--v.count||A.push(v)}}V&&m("can't build consistent linearization",L);B=q[0];u[0]=B?B._meta&&B===u[u.length-B._meta.bases.length]?B._meta.bases.length:1:0;z=u;u=z[0];L=z.length-u;q=z[L]}else z=[0],q?r.call(q)=="[object Function]"?(u=q._meta,z=z.concat(u?u.bases:q)):m("base class is not a callable constructor.",b):q!==null&&m("unknown base class. Did you use dojo.require to pull it in?",
b);if(q)for(s=L-1;;--s){l=i(q);if(!s)break;u=z[s];(u._meta?k:w)(l,u.prototype);A=new Function;A.superclass=q;A.prototype=l;q=l.constructor=A}else l={};y.safeMixin(l,o);u=o.constructor;if(u!==C.constructor)u.nom=t,l.constructor=u;for(s=L-1;s;--s)(u=z[s]._meta)&&u.chains&&(E=w(E||{},u.chains));l["-chains-"]&&(E=w(E||{},l["-chains-"]));u=!E||!E.hasOwnProperty(t);z[0]=A=E&&E.constructor==="manual"?d(z):z.length==1?n(o.constructor,u):p(z,u);A._meta={bases:z,hidden:o,chains:E,parents:J,ctor:o.constructor};
A.superclass=q&&q.prototype;A.extend=a;A.prototype=l;l.constructor=A;l.getInherited=e;l.isInstanceOf=c;l.inherited=N;l.__inherited=h;if(b)l.declaredClass=b,j.setObject(b,A);if(E)for(K in E)if(l[K]&&typeof E[K]=="string"&&K!=t)u=l[K]=f(K,z,E[K]==="after"),u.nom=K;return A}var w=j.mixin,C=Object.prototype,r=C.toString,s=new Function,x=0,t="constructor",N=b.config.isDebug?o:h;b.safeMixin=y.safeMixin=function(a,d){var c,i;for(c in d)if(i=d[c],(i!==C[c]||!(c in C))&&c!=t){if(r.call(i)=="[object Function]")i.nom=
c;a[c]=i}if(l("bug-for-in-skips-shadowed"))for(var f=j._extraNames,b=f.length;b;)if(c=f[--b],i=d[c],(i!==C[c]||!(c in C))&&c!=t){if(r.call(i)=="[object Function]")i.nom=c;a[c]=i}return a};return b.declare=y})},"djeo/_base":function(){define("djeo/_base",["dojo/_base/lang","dojo/_base/array"],function(b,l){function j(c,b,a){l.forEach(c.features,function(c){c.isContainer?j(c,b,a):b.call(a,c)})}var m={defaultLayerID:"ROADMAP",defaultEngine:"djeo",featureTypes:{},events:{mouseover:1,mouseout:1,click:1,
mousemove:1}},h={};m.dependencies=h;m.registerDependency=function(c,b){h[c]=b||1};m.defaultStyle=[{stroke:"black",strokeWidth:0.5,strokeOpacity:1,fill:"#B7B7B7",fillOpacity:0.8,shape:"square",size:10},{theme:"highlight",stroke:"orange",area:{strokeWidth:3},rScale:1.5}];m.getLayerClassId=function(c){var b=c.indexOf(":");return b>0?c.substring(0,b):c};m.getTraversedAttr=function(c,b){for(var a=c;a;){var e=a[b];if(e!==void 0)return e;a=a.parent}};m.forEach=function(c,e,a){b.isArray(c)||(c=[c]);l.forEach(c,
function(c){c.isContainer?j(c,e,a):e.call(a,c)})};for(var e=[1/156543.034],o=1;o<20;o++)e[o]=2*e[o-1];m.scales=e;return m})},"dojo/dom":function(){define(["./_base/sniff","./_base/lang","./_base/window"],function(b,l,j){try{document.execCommand("BackgroundImageCache",!1,!0)}catch(m){}var h={};h.byId=b("ie")?function(b,h){if(typeof b!="string")return b;var c=h||j.doc,k=b&&c.getElementById(b);if(k&&(k.attributes.id.value==b||k.id==b))return k;else{c=c.all[b];if(!c||c.nodeName)c=[c];for(var a=0;k=c[a++];)if(k.attributes&&
k.attributes.id&&k.attributes.id.value==b||k.id==b)return k}}:function(b,h){return(typeof b=="string"?(h||j.doc).getElementById(b):b)||null};h.isDescendant=function(b,j){try{b=h.byId(b);for(j=h.byId(j);b;){if(b==j)return!0;b=b.parentNode}}catch(c){}return!1};h.setSelectable=function(e,j){e=h.byId(e);if(b("mozilla"))e.style.MozUserSelect=j?"":"none";else if(b("khtml")||b("webkit"))e.style.KhtmlUserSelect=j?"auto":"none";else if(b("ie"))for(var c=e.unselectable=j?"":"on",k=e.getElementsByTagName("*"),
a=0,p=k.length;a<p;++a)k.item(a).unselectable=c};return h})},"djeo/control/Highlight":function(){define("djeo/control/Highlight",["dojo/_base/declare","../_base","./_PointerBase"],function(b,l,j){l.registerDependency("Highlight");return b([j],{constructor:function(){this.enabled&&this.enable()},pointeroverAction:function(b,h){h&&h.set("state",null);b.set("state","highlight")},pointeroutAction:function(b){b.set("state",null)}})})},"dojo/dom-style":function(){define(["./_base/sniff","./dom"],function(b,
l){function j(d,c,k){c=c.toLowerCase();if(b("ie")){if(k=="auto"){if(c=="height")return d.offsetHeight;if(c=="width")return d.offsetWidth}if(c=="fontweight")switch(k){case 700:return"bold";default:return"normal"}}c in a||(a[c]=p.test(c));return a[c]?e(d,k):k}var m,h={};m=b("webkit")?function(a){var d;if(a.nodeType==1){var c=a.ownerDocument.defaultView;d=c.getComputedStyle(a,null);if(!d&&a.style)a.style.display="",d=c.getComputedStyle(a,null)}return d||{}}:b("ie")&&(b("ie")<9||b("quirks"))?function(a){return a.nodeType==
1?a.currentStyle:{}}:function(a){return a.nodeType==1?a.ownerDocument.defaultView.getComputedStyle(a,null):{}};h.getComputedStyle=m;var e;e=b("ie")?function(a,d){if(!d)return 0;if(d=="medium")return 4;if(d.slice&&d.slice(-2)=="px")return parseFloat(d);var c=a.style,b=a.runtimeStyle,e=c.left,k=b.left;b.left=a.currentStyle.left;try{c.left=d,d=c.pixelLeft}catch(n){d=0}c.left=e;b.left=k;return d}:function(a,d){return parseFloat(d)||0};h.toPixelValue=e;var o=function(a,d){try{return a.filters.item("DXImageTransform.Microsoft.Alpha")}catch(c){return d?
{}:null}},c=b("ie")<9||b("ie")&&b("quirks")?function(a){try{return o(a).Opacity/100}catch(d){return 1}}:function(a){return m(a).opacity},k=b("ie")<9||b("ie")&&b("quirks")?function(a,d){var c=d*100,b=d==1;a.style.zoom=b?"":1;if(o(a))o(a,1).Opacity=c;else{if(b)return d;a.style.filter+=" progid:DXImageTransform.Microsoft.Alpha(Opacity="+c+")"}o(a,1).Enabled=!b;if(a.tagName.toLowerCase()=="tr")for(c=a.firstChild;c;c=c.nextSibling)c.tagName.toLowerCase()=="td"&&k(c,d);return d}:function(a,d){return a.style.opacity=
d},a={left:!0,top:!0},p=/margin|padding|width|height|max|min|offset/,n=b("ie")?"styleFloat":"cssFloat",d={cssFloat:n,styleFloat:n,"float":n};h.get=function(a,i){var b=l.byId(a),e=arguments.length;if(e==2&&i=="opacity")return c(b);var i=d[i]||i,k=h.getComputedStyle(b);return e==1?k:j(b,i,k[i]||b.style[i])};h.set=function(a,c,b){var e=l.byId(a),n=arguments.length,p=c=="opacity",c=d[c]||c;if(n==3)return p?k(e,b):e.style[c]=b;for(var j in c)h.set(a,j,c[j]);return h.getComputedStyle(e)};return h})},"dojo/dom-geometry":function(){define(["./_base/sniff",
"./_base/window","./dom","./dom-style"],function(b,l,j,m){function h(a,c,b,d,f,i){i=i||"px";a=a.style;if(!isNaN(c))a.left=c+i;if(!isNaN(b))a.top=b+i;if(d>=0)a.width=d+i;if(f>=0)a.height=f+i}function e(a){return a.tagName.toLowerCase()=="button"||a.tagName.toLowerCase()=="input"&&(a.getAttribute("type")||"").toLowerCase()=="button"}function o(a){return c.boxModel=="border-box"||a.tagName.toLowerCase()=="table"||e(a)}var c={boxModel:"content-box"};if(b("ie"))c.boxModel=document.compatMode=="BackCompat"?
"border-box":"content-box";c.getPadExtents=function(a,c){var a=j.byId(a),b=c||m.getComputedStyle(a),d=m.toPixelValue,f=d(a,b.paddingLeft),i=d(a,b.paddingTop),e=d(a,b.paddingRight),b=d(a,b.paddingBottom);return{l:f,t:i,r:e,b:b,w:f+e,h:i+b}};c.getBorderExtents=function(a,c){var a=j.byId(a),b=m.toPixelValue,d=c||m.getComputedStyle(a),f=d.borderLeftStyle!="none"?b(a,d.borderLeftWidth):0,i=d.borderTopStyle!="none"?b(a,d.borderTopWidth):0,e=d.borderRightStyle!="none"?b(a,d.borderRightWidth):0,b=d.borderBottomStyle!=
"none"?b(a,d.borderBottomWidth):0;return{l:f,t:i,r:e,b:b,w:f+e,h:i+b}};c.getPadBorderExtents=function(a,b){var a=j.byId(a),e=b||m.getComputedStyle(a),d=c.getPadExtents(a,e),e=c.getBorderExtents(a,e);return{l:d.l+e.l,t:d.t+e.t,r:d.r+e.r,b:d.b+e.b,w:d.w+e.w,h:d.h+e.h}};c.getMarginExtents=function(a,c){var a=j.byId(a),e=c||m.getComputedStyle(a),d=m.toPixelValue,f=d(a,e.marginLeft),i=d(a,e.marginTop),k=d(a,e.marginRight),d=d(a,e.marginBottom);b("webkit")&&e.position!="absolute"&&(k=f);return{l:f,t:i,
r:k,b:d,w:f+k,h:i+d}};c.getMarginBox=function(a,e){var a=j.byId(a),k=e||m.getComputedStyle(a),d=c.getMarginExtents(a,k),f=a.offsetLeft-d.l,i=a.offsetTop-d.t,h=a.parentNode,o=m.toPixelValue;if(b("mozilla")){var l=parseFloat(k.left),k=parseFloat(k.top);!isNaN(l)&&!isNaN(k)?(f=l,i=k):h&&h.style&&(h=m.getComputedStyle(h),h.overflow!="visible"&&(f+=h.borderLeftStyle!="none"?o(a,h.borderLeftWidth):0,i+=h.borderTopStyle!="none"?o(a,h.borderTopWidth):0))}else if((b("opera")||b("ie")==8&&!b("quirks"))&&h)h=
m.getComputedStyle(h),f-=h.borderLeftStyle!="none"?o(a,h.borderLeftWidth):0,i-=h.borderTopStyle!="none"?o(a,h.borderTopWidth):0;return{l:f,t:i,w:a.offsetWidth+d.w,h:a.offsetHeight+d.h}};c.getContentBox=function(a,e){var a=j.byId(a),k=e||m.getComputedStyle(a),d=a.clientWidth,f=c.getPadExtents(a,k),i=c.getBorderExtents(a,k);d?(k=a.clientHeight,i.w=i.h=0):(d=a.offsetWidth,k=a.offsetHeight);b("opera")&&(f.l+=i.l,f.t+=i.t);return{l:f.l,t:f.t,w:d-f.w-i.w,h:k-f.h-i.h}};c.setContentSize=function(a,b,e){var a=
j.byId(a),d=b.w,b=b.h;o(a)&&(e=c.getPadBorderExtents(a,e),d>=0&&(d+=e.w),b>=0&&(b+=e.h));h(a,NaN,NaN,d,b)};var k={l:0,t:0,w:0,h:0};c.setMarginBox=function(a,p,n){var a=j.byId(a),d=n||m.getComputedStyle(a),n=p.w,f=p.h,i=o(a)?k:c.getPadBorderExtents(a,d),d=c.getMarginExtents(a,d);if(b("webkit")&&e(a)){var q=a.style;if(n>=0&&!q.width)q.width="4px";if(f>=0&&!q.height)q.height="4px"}n>=0&&(n=Math.max(n-i.w-d.w,0));f>=0&&(f=Math.max(f-i.h-d.h,0));h(a,p.l,p.t,n,f)};c.isBodyLtr=function(){return(l.body().dir||
l.doc.documentElement.dir||"ltr").toLowerCase()=="ltr"};c.docScroll=function(){var a=l.doc.parentWindow||l.doc.defaultView;return"pageXOffset"in a?{x:a.pageXOffset,y:a.pageYOffset}:(a=b("quirks")?l.body():l.doc.documentElement,{x:c.fixIeBiDiScrollLeft(a.scrollLeft||0),y:a.scrollTop||0})};c.getIeDocumentElementOffset=function(){var a=l.doc.documentElement;if(b("ie")<8){var c=a.getBoundingClientRect(),e=c.left,c=c.top;b("ie")<7&&(e+=a.clientLeft,c+=a.clientTop);return{x:e<0?0:e,y:c<0?0:c}}else return{x:0,
y:0}};c.fixIeBiDiScrollLeft=function(a){var e=b("ie");if(e&&!c.isBodyLtr()){var k=b("quirks"),d=k?l.body():l.doc.documentElement;e==6&&!k&&l.global.frameElement&&d.scrollHeight>d.clientHeight&&(a+=d.clientLeft);return e<8||k?a+d.clientWidth-d.scrollWidth:-a}return a};c.position=function(a,e){var a=j.byId(a),k=l.body(),d=k.parentNode,f=a.getBoundingClientRect(),f={x:f.left,y:f.top,w:f.right-f.left,h:f.bottom-f.top};if(b("ie"))d=c.getIeDocumentElementOffset(),f.x-=d.x+(b("quirks")?k.clientLeft+k.offsetLeft:
0),f.y-=d.y+(b("quirks")?k.clientTop+k.offsetTop:0);else if(b("ff")==3){var k=m.getComputedStyle(d),i=m.toPixelValue;f.x-=i(d,k.marginLeft)+i(d,k.borderLeftWidth);f.y-=i(d,k.marginTop)+i(d,k.borderTopWidth)}e&&(d=c.docScroll(),f.x+=d.x,f.y+=d.y);return f};c.getMarginSize=function(a,b){var a=j.byId(a),e=c.getMarginExtents(a,b||m.getComputedStyle(a)),d=a.getBoundingClientRect();return{w:d.right-d.left+e.w,h:d.bottom-d.top+e.h}};c.normalizeEvent=function(a){if(!("layerX"in a))a.layerX=a.offsetX,a.layerY=
a.offsetY;if(!b("dom-addeventlistener")){var e=a.target,e=e&&e.ownerDocument||document,e=b("quirks")?e.body:e.documentElement,k=c.getIeDocumentElementOffset();a.pageX=a.clientX+c.fixIeBiDiScrollLeft(e.scrollLeft||0)-k.x;a.pageY=a.clientY+(e.scrollTop||0)-k.y}};return c})},"djeo/control/_PointerBase":function(){define("djeo/control/_PointerBase",["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","../util/_base","./_Base"],function(b,l,j,m,h){var e=m.uid();return b([h],{c:{timeoutId:null,feature:null},
_onpointeroutDelay:200,constructor:function(){this.handle=e;if(!this.c.handle)this.c.handle=e;this.events=["mouseover","mouseout"]},process:function(b){var c=b.feature;if(this.c.timeoutId)clearTimeout(this.c.timeoutId),this.c.timeoutId=null;if(b.type=="mouseover"){if(this.c.feature!=c){var b=c.handles[e][4],k;for(k in b)b[k].pointeroverAction(c,this.c.feature);this.c.feature=c}}else if(b.type=="mouseout")this.c.timeoutId=setTimeout(l.hitch(this,this._onpointerout),this._onpointeroutDelay)},_onpointerout:function(){var b=
this.c.feature;if(b){var c=b.handles[e][4],k;for(k in c)c[k].pointeroutAction(b);this.c.feature=null}}})})},"djeo-demos/race/RaceClient":function(){define("djeo-demos/race/RaceClient",["dojo/_base/declare","./Client"],function(b,l){return b([l],{process:function(b){var m=this.map.$(b.id);m.set("coords",b.coords);b.heading!=void 0&&m.set("orientation",b.heading)}})})},"djeo/Feature":function(){define("djeo/Feature",["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","./Style","./util/_base"],
function(b,l,j,m,h){return b(null,{id:null,visible:!0,bbox:null,style:null,parent:null,map:null,constructor:function(b,j){j&&l.mixin(this,j);b&&l.mixin(this,b);if(!this.id)this.id="_geo_"+h.uid();if(this.styleClass&&!l.isArray(this.styleClass))this.styleClass=[this.styleClass];if(b&&b.style)this.style=null,this.addStyle(b.style,!0)},setMap:function(b){this.map=b;this.styleClass&&j.forEach(this.styleClass,function(h){var c=b.featuresByClass;c[h]||(c[h]=[]);c[h].push(this)},this)},setParent:function(b){this.parent=
b},set:function(b,h){var c=this["_set_"+b];return c&&c.call(this,h)},get:function(b){var h=this["_get_"+b];return h?h.call(this):this.map.useAttrs?this.attrs&&this.attrs[b]!==void 0?this.attrs[b]:this[b]:this[b]},addStyle:function(b,h){l.isArray(b)||(b=[b]);j.forEach(b,function(c){c=new m(c,this.map);if(!c.styleClass&&!c.fid){c._features[this.id]=this;if(!this.style)this.style=[];this.style.push(c)}},this);h||this.render()},render:function(){},toggleVisibility:function(){this.show(!this.visible)},
getBbox:function(){return this.bbox},on:function(b,h,c){var k=this.map,a=this.onForHandle(null,{events:l.isString(b)?[b]:b,context:c,method:h});return{remove:function(c){c?c.disconnect(a):k.disconnect(a)}}},onForHandle:function(){},disconnect:function(){}})})},"djeo-demos/race/RaceServer":function(){define("djeo-demos/race/RaceServer",["dojo/_base/declare","dojo/_base/lang","./util"],function(b,l,j){return b(null,{timestamp:0,constructor:function(b){l.mixin(this,b);this.carPosition=this.trackCoords[0];
this.trackCoordIndex=0},poll:function(b){var h=[{data:[]}];if(this.timestamp==0)this.timestamp=(new Date).getTime();else for(var e=this.trackCoordIndex,l=this.carPosition,c=0;c<this.numCars;c++){var k=(new Date).getTime(),a=j.movePointAlongTrack(l,c?this.carDistance:this.speed*(k-this.timestamp)/1E3,this.trackCoords,e,!c);this.timestamp=k;l=a[0];e=a[1];h[0].data.push({id:c+1,coords:l,heading:a[2]});if(c==0)this.carPosition=l,this.trackCoordIndex=e}b.load(h)},getInitialCarPositions:function(){return j.getInitialPositions(this.trackCoords,
this.numCars,this.carDistance)}})})},"dojo/domReady":function(){define(["./has"],function(b){function l(a){o?a(1):c.push(a)}var j=this,m=document,h={loaded:1,complete:1},e=typeof m.readyState!="string",o=!!h[m.readyState];if(e)m.readyState="loading";if(!o){var c=[],k=[],a=function(a){a=a||j.event;if(!(o||a.type=="readystatechange"&&!h[m.readyState])){o=1;if(e)m.readyState="complete";for(;c.length;)c.shift()()}},p=function(d,b){d.addEventListener(b,a,!1);c.push(function(){d.removeEventListener(b,a,
!1)})};if(!b("dom-addeventlistener")){var p=function(d,b){b="on"+b;d.attachEvent(b,a);c.push(function(){d.detachEvent(b,a)})},n=m.createElement("div");try{n.doScroll&&j.frameElement===null&&k.push(function(){try{return n.doScroll("left"),1}catch(a){}})}catch(d){}}p(m,"DOMContentLoaded");p(j,"load");"onreadystatechange"in m?p(m,"readystatechange"):e||k.push(function(){return h[m.readyState]});if(k.length){var f=function(){if(!o){for(var c=k.length;c--;)if(k[c]()){a("poller");return}setTimeout(f,30)}};
f()}}l.load=function(a,c,d){l(d)};return l})},"dojo/_base/lang":function(){define(["./kernel","../has","./sniff"],function(b,l){l.add("bug-for-in-skips-shadowed",function(){for(var a in{toString:1})return 0;return 1});var j=l("bug-for-in-skips-shadowed")?"hasOwnProperty.valueOf.isPrototypeOf.propertyIsEnumerable.toLocaleString.toString.constructor".split("."):[],m=j.length,h=function(a){a||(a={});for(var c=1,d=arguments.length;c<d;c++)f._mixin(a,arguments[c]);return a},e=function(a,c,d){var f,e=0,
k=b.global;if(!d)if(a.length){f=a[e++];try{d=b.scopeMap[f]&&b.scopeMap[f][1]}catch(h){}d=d||(f in k?k[f]:c?k[f]={}:void 0)}else return k;for(;d&&(f=a[e++]);)d=f in d?d[f]:c?d[f]={}:void 0;return d},o=function(a,d,c){return e(a.split("."),d,c)},c=Object.prototype.toString,k=function(){function a(){}return function(d,c){a.prototype=d;var b=new a;a.prototype=null;c&&f._mixin(b,c);return b}}(),a=function(a,c,d){return(d||[]).concat(Array.prototype.slice.call(a,c||0))},p=l("ie")?function(){function c(a,
d,b){b=b||[];for(d=d||0;d<a.length;d++)b.push(a[d]);return b}return function(d){return(d.item?c:a).apply(this,arguments)}}():a,n=function(a){if(!a||typeof a!="object"||f.isFunction(a))return a;if(a.nodeType&&"cloneNode"in a)return a.cloneNode(!0);if(a instanceof Date)return new Date(a.getTime());if(a instanceof RegExp)return RegExp(a);var d,c,b;if(f.isArray(a)){d=[];c=0;for(b=a.length;c<b;++c)c in a&&d.push(n(a[c]))}else d=a.constructor?new a.constructor:{};return f._mixin(d,a,n)},d=/\{([^\}]+)\}/g,
f={_extraNames:j,_mixin:function(a,d,c){var b,f,e,k={};for(b in d)if(f=d[b],!(b in a)||a[b]!==f&&(!(b in k)||k[b]!==f))a[b]=c?c(f):f;if(l("bug-for-in-skips-shadowed")&&d)for(e=0;e<m;++e)if(b=j[e],f=d[b],!(b in a)||a[b]!==f&&(!(b in k)||k[b]!==f))a[b]=c?c(f):f;return a},mixin:h,setObject:function(a,d,c){var b=a.split("."),a=b.pop();return(c=e(b,!0,c))&&a?c[a]=d:void 0},getObject:o,exists:function(a,d){return f.getObject(a,!1,d)!==void 0},isString:function(a){return typeof a=="string"||a instanceof
String},isArray:function(a){return a&&(a instanceof Array||typeof a=="array")},isFunction:function(a){return c.call(a)==="[object Function]"},isObject:function(a){return a!==void 0&&(a===null||typeof a=="object"||f.isArray(a)||f.isFunction(a))},isArrayLike:function(a){return a&&a!==void 0&&!f.isString(a)&&!f.isFunction(a)&&!(a.tagName&&a.tagName.toLowerCase()=="form")&&(f.isArray(a)||isFinite(a.length))},isAlien:function(a){return a&&!f.isFunction(a)&&/\{\s*\[native code\]\s*\}/.test(String(a))},
extend:function(a){for(var d=1,c=arguments.length;d<c;d++)f._mixin(a.prototype,arguments[d]);return a},_hitchArgs:function(a,d){var c=p(arguments,2),e=f.isString(d);return function(){var f=p(arguments),k=e?(a||b.global)[d]:d;return k&&k.apply(a||this,c.concat(f))}},hitch:function(a,d){if(arguments.length>2)return f._hitchArgs.apply(b,arguments);d||(d=a,a=null);if(f.isString(d)){a=a||b.global;if(!a[d])throw['dojo.hitch: scope["',d,'"] is null (scope="',a,'")'].join("");return function(){return a[d].apply(a,
arguments||[])}}return!a?d:function(){return d.apply(a,arguments||[])}},delegate:k,_toArray:p,partial:function(){return f.hitch.apply(b,[null].concat(f._toArray(arguments)))},clone:n,trim:String.prototype.trim?function(a){return a.trim()}:function(a){return a.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},replace:function(a,c,b){return a.replace(b||d,f.isFunction(c)?c:function(a,d){return o(d,!1,c)})}};h(b,f);return f})},"dojo/Evented":function(){define(["./aspect","./on"],function(b,l){function j(){}
var m=b.after;j.prototype={on:function(b,e){return l.parse(this,b,e,function(b,c){return m(b,"on"+c,e,!0)})},emit:function(){var b=[this];b.push.apply(b,arguments);return l.emit.apply(l,b)}};return j})},"dojo/colors":function(){define(["./_base/kernel","./_base/lang","./_base/Color","./_base/array"],function(b,l,j,m){var h=l.getObject("dojo.colors",!0),e=function(c,b,a){a<0&&++a;a>1&&--a;var e=6*a;if(e<1)return c+(b-c)*e;if(2*a<1)return b;if(3*a<2)return c+(b-c)*(2/3-a)*6;return c};b.colorFromRgb=
j.fromRgb=function(c,b){var a=c.toLowerCase().match(/^(rgba?|hsla?)\(([\s\.\-,%0-9]+)\)/);if(a){var h=a[2].split(/\s*,\s*/),n=h.length,a=a[1];if(a=="rgb"&&n==3||a=="rgba"&&n==4){a=h[0];if(a.charAt(a.length-1)=="%")return a=m.map(h,function(a){return parseFloat(a)*2.56}),n==4&&(a[3]=h[3]),j.fromArray(a,b);return j.fromArray(h,b)}if(a=="hsl"&&n==3||a=="hsla"&&n==4){var a=(parseFloat(h[0])%360+360)%360/360,d=parseFloat(h[1])/100,f=parseFloat(h[2])/100,d=f<=0.5?f*(d+1):f+d-f*d,f=2*f-d,a=[e(f,d,a+1/3)*
256,e(f,d,a)*256,e(f,d,a-1/3)*256,1];n==4&&(a[3]=h[3]);return j.fromArray(a,b)}}return null};var o=function(c,b,a){c=Number(c);return isNaN(c)?a:c<b?b:c>a?a:c};j.prototype.sanitize=function(){this.r=Math.round(o(this.r,0,255));this.g=Math.round(o(this.g,0,255));this.b=Math.round(o(this.b,0,255));this.a=o(this.a,0,1);return this};h.makeGrey=j.makeGrey=function(c,b){return j.fromArray([c,c,c,b])};l.mixin(j.named,{aliceblue:[240,248,255],antiquewhite:[250,235,215],aquamarine:[127,255,212],azure:[240,
255,255],beige:[245,245,220],bisque:[255,228,196],blanchedalmond:[255,235,205],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],
darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],gainsboro:[220,220,220],ghostwhite:[248,248,255],
gold:[255,215,0],goldenrod:[218,165,32],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,
182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,
21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],oldlace:[253,245,230],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],rosybrown:[188,143,143],royalblue:[65,
105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],whitesmoke:[245,245,245],yellowgreen:[154,205,50]});return j})},"djeo/util/_base":function(){define("djeo/util/_base",
["dojo/has"],function(){var b={},l=0;b.earthRadius=6378137;var j=window.location,j=j.protocol+"//"+j.host+j.pathname;b.baseUrl=j.substring(0,j.lastIndexOf("/")+1);b.uid=function(){l+=1;return l};b.degToRad=function(b){return Math.PI*b/180};b.radToDeg=function(b){return b/Math.PI*180};b.isRelativeUrl=function(b){return b.substr(0,4)=="http"?!1:!0};return b})},"dojo/_base/xhr":function(){define(["./kernel","./sniff","require","../io-query","../dom","../dom-form","./Deferred","./json","./lang","./array",
"../on"],function(b,l,j,m,h,e,o,c,k,a,p){l.add("native-xhr",function(){return typeof XMLHttpRequest!=="undefined"});if(j.getXhr)b._xhrObj=j.getXhr;else if(l("native-xhr"))b._xhrObj=function(){try{return new XMLHttpRequest}catch(a){throw Error("XMLHTTP not available: "+a);}};else{for(var j=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],n,d=0;d<3;)try{if(n=j[d++],new ActiveXObject(n))break}catch(f){}b._xhrObj=function(){return new ActiveXObject(n)}}var i=b.config;b.objectToQuery=m.objectToQuery;
b.queryToObject=m.queryToObject;b.fieldToObject=e.fieldToObject;b.formToObject=e.toObject;b.formToQuery=e.toQuery;b.formToJson=e.toJson;b._blockAsync=!1;var q=b._contentHandlers=b.contentHandlers={text:function(a){return a.responseText},json:function(a){return c.fromJson(a.responseText||null)},"json-comment-filtered":function(a){var a=a.responseText,d=a.indexOf("/*"),b=a.lastIndexOf("*/");if(d==-1||b==-1)throw Error("JSON was not comment filtered");return c.fromJson(a.substring(d+2,b))},javascript:function(a){return b.eval(a.responseText)},
xml:function(d){var c=d.responseXML;if(l("ie")&&(!c||!c.documentElement)){var b=function(a){return"MSXML"+a+".DOMDocument"},b=["Microsoft.XMLDOM",b(6),b(4),b(3),b(2)];a.some(b,function(a){try{var b=new ActiveXObject(a);b.async=!1;b.loadXML(d.responseText);c=b}catch(f){return!1}return!0})}return c},"json-comment-optional":function(a){return a.responseText&&/^[^{\[]*\/\*/.test(a.responseText)?q["json-comment-filtered"](a):q.json(a)}};b._ioSetArgs=function(a,d,c,f){var j={args:a,url:a.url},n=null;if(a.form){var n=
h.byId(a.form),p=n.getAttributeNode("action");j.url=j.url||(p?p.value:null);n=e.toObject(n)}p=[{}];n&&p.push(n);a.content&&p.push(a.content);a.preventCache&&p.push({"dojo.preventCache":(new Date).valueOf()});j.query=m.objectToQuery(k.mixin.apply(null,p));j.handleAs=a.handleAs||"text";var l=new o(d);l.addCallbacks(c,function(a){return f(a,l)});var q=a.load;q&&k.isFunction(q)&&l.addCallback(function(d){return q.call(a,d,j)});var s=a.error;s&&k.isFunction(s)&&l.addErrback(function(d){return s.call(a,
d,j)});var t=a.handle;t&&k.isFunction(t)&&l.addBoth(function(d){return t.call(a,d,j)});i.ioPublish&&b.publish&&j.args.ioPublish!==!1&&(l.addCallbacks(function(a){b.publish("/dojo/io/load",[l,a]);return a},function(a){b.publish("/dojo/io/error",[l,a]);return a}),l.addBoth(function(a){b.publish("/dojo/io/done",[l,a]);return a}));l.ioArgs=j;return l};var y=function(a){a.canceled=!0;var d=a.ioArgs.xhr,c=typeof d.abort;(c=="function"||c=="object"||c=="unknown")&&d.abort();a=a.ioArgs.error;if(!a)a=Error("xhr cancelled"),
a.dojoType="cancel";return a},w=function(a){a=q[a.ioArgs.handleAs](a.ioArgs.xhr);return a===void 0?null:a},C=function(a){return a},r=null,s=[],x=0,t=function(a){x<=0&&(x=0,i.ioPublish&&b.publish&&(!a||a&&a.ioArgs.args.ioPublish!==!1)&&b.publish("/dojo/io/stop"))},N=function(){var a=(new Date).getTime();if(!b._blockAsync)for(var d=0,c;d<s.length&&(c=s[d]);d++){var f=c.dfd,e=function(){if(!f||f.canceled||!c.validCheck(f))s.splice(d--,1),x-=1;else if(c.ioCheck(f))s.splice(d--,1),c.resHandle(f),x-=1;
else if(f.startTime&&f.startTime+(f.ioArgs.args.timeout||0)<a){s.splice(d--,1);var b=Error("timeout exceeded");b.dojoType="timeout";f.errback(b);f.cancel();x-=1}};if(b.config.debugAtAllCosts)e.call(this);else try{e.call(this)}catch(k){f.errback(k)}}t(f);s.length||(clearInterval(r),r=null)};b._ioCancelAll=function(){try{a.forEach(s,function(a){try{a.dfd.cancel()}catch(d){}})}catch(d){}};l("ie")&&p(window,"unload",b._ioCancelAll);b._ioNotifyStart=function(a){i.ioPublish&&b.publish&&a.ioArgs.args.ioPublish!==
!1&&(x||b.publish("/dojo/io/start"),x+=1,b.publish("/dojo/io/send",[a]))};b._ioWatch=function(a,d,c,b){var f=a.ioArgs.args;if(f.timeout)a.startTime=(new Date).getTime();s.push({dfd:a,validCheck:d,ioCheck:c,resHandle:b});r||(r=setInterval(N,50));f.sync&&N()};var Y=function(a){return a.ioArgs.xhr.readyState},Z=function(a){return 4==a.ioArgs.xhr.readyState},fa=function(a){var d=a.ioArgs.xhr;if(b._isDocumentOk(d))a.callback(a);else{var c=Error("Unable to load "+a.ioArgs.url+" status:"+d.status);c.status=
d.status;c.responseText=d.responseText;c.xhr=d;a.errback(c)}};b._ioAddQueryToUrl=function(a){if(a.query.length)a.url+=(a.url.indexOf("?")==-1?"?":"&")+a.query,a.query=null};b.xhr=function(a,d,c){var f=b._ioSetArgs(d,y,w,C),e=f.ioArgs,k=e.xhr=b._xhrObj(e.args);if(!k)return f.cancel(),f;"postData"in d?e.query=d.postData:"putData"in d?e.query=d.putData:"rawBody"in d?e.query=d.rawBody:(arguments.length>2&&!c||"POST|PUT".indexOf(a.toUpperCase())==-1)&&b._ioAddQueryToUrl(e);k.open(a,e.url,d.sync!==!0,d.user||
void 0,d.password||void 0);if(d.headers)for(var i in d.headers)i.toLowerCase()==="content-type"&&!d.contentType?d.contentType=d.headers[i]:d.headers[i]&&k.setRequestHeader(i,d.headers[i]);d.contentType!==!1&&k.setRequestHeader("Content-Type",d.contentType||"application/x-www-form-urlencoded");(!d.headers||!("X-Requested-With"in d.headers))&&k.setRequestHeader("X-Requested-With","XMLHttpRequest");b._ioNotifyStart(f);if(b.config.debugAtAllCosts)k.send(e.query);else try{k.send(e.query)}catch(h){e.error=
h,f.cancel()}b._ioWatch(f,Y,Z,fa);return f};b.xhrGet=function(a){return b.xhr("GET",a)};b.rawXhrPost=b.xhrPost=function(a){return b.xhr("POST",a,!0)};b.rawXhrPut=b.xhrPut=function(a){return b.xhr("PUT",a,!0)};b.xhrDelete=function(a){return b.xhr("DELETE",a)};b._isDocumentOk=function(a){a=a.status||0;return a>=200&&a<300||a==304||a==1223||!a};b._getText=function(a){var d;b.xhrGet({url:a,sync:!0,load:function(a){d=a}});return d};k.mixin(b.xhr,{_xhrObj:b._xhrObj,fieldToObject:e.fieldToObject,formToObject:e.toObject,
objectToQuery:m.objectToQuery,formToQuery:e.toQuery,formToJson:e.toJson,queryToObject:m.queryToObject,contentHandlers:q,_ioSetArgs:b._ioSetArgs,_ioCancelAll:b._ioCancelAll,_ioNotifyStart:b._ioNotifyStart,_ioWatch:b._ioWatch,_ioAddQueryToUrl:b._ioAddQueryToUrl,_isDocumentOk:b._isDocumentOk,_getText:b._getText,get:b.xhrGet,post:b.xhrPost,put:b.xhrPut,del:b.xhrDelete});return b.xhr})},"dojo/_base/Color":function(){define(["./kernel","./lang","./array","./config"],function(b,l,j,m){var h=b.Color=function(b){b&&
this.setColor(b)};h.named={black:[0,0,0],silver:[192,192,192],gray:[128,128,128],white:[255,255,255],maroon:[128,0,0],red:[255,0,0],purple:[128,0,128],fuchsia:[255,0,255],green:[0,128,0],lime:[0,255,0],olive:[128,128,0],yellow:[255,255,0],navy:[0,0,128],blue:[0,0,255],teal:[0,128,128],aqua:[0,255,255],transparent:m.transparentColor||[0,0,0,0]};l.extend(h,{r:255,g:255,b:255,a:1,_set:function(b,h,c,k){this.r=b;this.g=h;this.b=c;this.a=k},setColor:function(b){l.isString(b)?h.fromString(b,this):l.isArray(b)?
h.fromArray(b,this):(this._set(b.r,b.g,b.b,b.a),b instanceof h||this.sanitize());return this},sanitize:function(){return this},toRgb:function(){return[this.r,this.g,this.b]},toRgba:function(){return[this.r,this.g,this.b,this.a]},toHex:function(){return"#"+j.map(["r","g","b"],function(b){b=this[b].toString(16);return b.length<2?"0"+b:b},this).join("")},toCss:function(b){var h=this.r+", "+this.g+", "+this.b;return(b?"rgba("+h+", "+this.a:"rgb("+h)+")"},toString:function(){return this.toCss(!0)}});h.blendColors=
b.blendColors=function(b,l,c,k){var a=k||new h;j.forEach(["r","g","b","a"],function(k){a[k]=b[k]+(l[k]-b[k])*c;k!="a"&&(a[k]=Math.round(a[k]))});return a.sanitize()};h.fromRgb=b.colorFromRgb=function(b,j){var c=b.toLowerCase().match(/^rgba?\(([\s\.,0-9]+)\)/);return c&&h.fromArray(c[1].split(/\s*,\s*/),j)};h.fromHex=b.colorFromHex=function(b,l){var c=l||new h,k=b.length==4?4:8,a=(1<<k)-1,b=Number("0x"+b.substr(1));if(isNaN(b))return null;j.forEach(["b","g","r"],function(h){var j=b&a;b>>=k;c[h]=k==
4?17*j:j});c.a=1;return c};h.fromArray=b.colorFromArray=function(b,j){var c=j||new h;c._set(Number(b[0]),Number(b[1]),Number(b[2]),Number(b[3]));if(isNaN(c.a))c.a=1;return c.sanitize()};h.fromString=b.colorFromString=function(b,j){var c=h.named[b];return c&&h.fromArray(c,j)||h.fromRgb(b,j)||h.fromHex(b,j)};return h})},"djeo/Map":function(){define("djeo/Map",["require","dojo/_base/declare","dojo/_base/lang","dojo/has","dojo/dom","dojo/_base/array","dojo/dom-geometry","dojo/_base/xhr","dojo/_base/kernel",
"dojo/_base/Deferred","./_base","./FeatureContainer","./Placemark"],function(b,l,j,m,h,e,o,c,k,a,p,n){return l(null,{engine:null,engineOptions:null,extent:null,minZoom:0,maxZoom:18,features:null,geometries:null,document:null,layers:null,useAttrs:!1,renderModels:!0,simulateOrientation:!1,iconBasePath:"",modelBasePath:"",styleById:null,styleByFid:null,styleByClass:null,styleByClassAndFid:null,featuresByClass:null,states:null,_ready:!1,constructor:function(a,c){this.styleById={};this.styleByFid={};this.styleByClass=
{};this.styleByClassAndFid={};this.featuresByClass={};this.states={highlight:"highlight",normal:null};this.engineOptions={};this.container=h.byId(a);c||(c={});j.mixin(this,c);this.features={};this.geometries={};c.geometries&&this.loadGeometries(c.geometries);this.document=new n(null,{map:this,parent:this});this.addStyle(p.defaultStyle,!0);c.style&&this.addStyle(c.style,!0);c.features&&this.addFeatures(c.features,!0,!0);this.setEngine(c.engine||k.global.dojoConfig&&k.global.dojoConfig.djeoEngine||
b.rawConfig.djeoEngine||p.defaultEngine)},ready:function(d){this._ready?d():(this._readyDeferred=new a,this._readyDeferred.then(d))},_onEngineReady:function(){var a=this.engine,c=[],k=p.dependencies,h;for(h in k)if(k[h]==1||k[h](this)){var n=a.matchModuleId(h);n&&c.push(n)}var l=this.layers,m=c.length;if(l){j.isString(l)&&(l=[l]);var o=[];e.forEach(l,function(b){if(j.isString(b)){if(a.isValidLayerId(b)){var e=a.getLayerModuleId(b);e&&c.push("djeo/"+e,a._require.toAbsMid("./"+e));o.push(b)}}else o.push(b)});
l=o}b(c,j.hitch(this,function(){if(l&&l.length&&!this._layerLoaded){var c=arguments;e.forEach(l,function(b){j.isString(b)&&a.getLayerModuleId(b)&&(a.setLayerConstructor(b,c[m]),m+=2);a.enableLayer(b,!0)})}var b=this.render(null,!0);b?b.then(j.hitch(this,function(){this._ready=!0;this._readyDeferred&&(this._readyDeferred.resolve(),delete this._readyDeferred)})):(this._ready=!0,this._readyDeferred&&(this._readyDeferred.resolve(),delete this._readyDeferred))}))},addFeatures:function(a,c,b){return this.document.addFeatures(a,
c,b)},removeFeatures:function(a){this.document.removeFeatures(a)},render:function(a,c){return this.engine.render(a,c)},renderFeatures:function(a,c,b){this.engine.renderFeatures(a,c,b)},show:function(a,c){if(a===void 0)a=this.document;if(c===void 0)a===!0||a===!1?(c=a,a=this.document):c=!0;j.isArray(a)||(a=[a]);e.forEach(a,function(a){j.isString(a)&&(a=this.getFeatureById(a));a&&a.show(c)},this)},_show:function(){},toggleVisibility:function(a){if(!a)a=this.document;j.isArray(a)||(a=[a]);e.forEach(a,
function(a){j.isString(a)&&(a=this.getFeatureById(a));a&&a.toggleVisibility()},this)},resize:function(){this._calculateViewport()},enableLayer:function(a,c){c===void 0&&(c=!0);this.engine.enableLayer(a,c)},getContainer:function(){return this.engine.getTopContainer()},_calculateViewport:function(){var a=o.getContentBox(this.container),c=o.position(this.container,!0);this.width=this.width||a.w||100;this.height=this.height||a.h||100;this.x=c.x;this.y=c.y},loadGeometries:function(a){j.isString(a)?c.get({url:a,
handleAs:"json",sync:!0,load:j.hitch(this,function(a){this.loadGeometries(a)})}):j.isArray(a)?e.forEach(a,function(a){a.id&&(this.geometries[a.id]=a)},this):this.geometries=a},addStyle:function(a,c){this.document.addStyle(a,c)},getGeometryById:function(a){return this.geometries[a]},getStyleById:function(a){return this.styleById[a]},registerFeature:function(a){a.id&&(this.features[a.id]=a)},getFeatureById:function(a){return this.features[a]},$:function(a){return this.getFeatureById(a)},on:function(a,
c,b){var e=this.engine;return e["_on_"+a]?e["_on_"+a](a,c,b):e.onForMap(a,c,b)},onForHandle:function(a,c){return this.document.onForHandle(a,c)},disconnect:function(a,c,b){this.document.disconnect(a,c,b)},setEngine:function(a,c){if(j.isString(a)){var e=a=="djeo"?"./djeo/Engine":"djeo-"+a+"/Engine";b(["require",a=="djeo"?"./native":"djeo-"+a+"/"+a],j.hitch(this,function(b){b([e],j.hitch(this,function(b){var e={};this.engineOptions[a]&&j.mixin(e,this.engineOptions[a]);c&&j.mixin(e,c);e.map=this;a=new b(e);
this._initializeEngine(a)}))}))}else a.initialized?(this.engine=a,this._onEngineReady()):this._initializeEngine(a)},_initializeEngine:function(a){this._calculateViewport();this.engine=a;a.initialize(j.hitch(this,function(){this._onEngineReady()}))},getBbox:function(){return this.document.getBbox()},destroy:function(){this.engine.destroy()},getCoords:function(a){return a},executeBatch:function(a){var c=this.engine;c.executeBatch?c.executeBatch(a):a()},zoomTo:function(a){var c;j.isArray(a)?j.isString(a[0])||
j.isObject(a[0])?(c=[Infinity,Infinity,-Infinity,-Infinity],e.forEach(a,function(b){j.isString(b)&&(b=this.getFeatureById(a));b&&g.util.bbox.extend(c,b.getBbox())},this)):c=a:j.isString(a)?(c=this.getFeatureById(a))&&(c=c.getBbox()):j.isObject(a)&&(c=a.getBbox());c&&this.engine.zoomTo(c)},set:function(a,c){var b="_set_"+a,e,k;if(this[b])e=this[b],k=this;else if(this.engine[b])e=this.engine[b],k=this.engine;return e&&e.call(k,c)},get:function(a){var c="_get_"+a,b,e;if(this[c])b=this[c],e=this;else if(this.engine[c])b=
this.engine[c],e=this.engine;c=b&&b.call(e);return c!==void 0?c:this[a]},_get_center:function(){return this.engine._get_center()},_get_extent:function(){return this.engine._get_extent()},containerPixelToCoords:function(a,c){return this.engine.containerPixelToCoords(a,c)},_appendDiv:function(a){this.engine._appendDiv(a)}})})},"djeo/util/bbox":function(){define("djeo/util/bbox",["dojo/_base/array"],function(b){var l={extend:function(b,h){h&&(h[0]<b[0]&&(b[0]=h[0]),h[1]<b[1]&&(b[1]=h[1]),h.length==4?
(h[2]>b[2]&&(b[2]=h[2]),h[3]>b[3]&&(b[3]=h[3])):(h[0]>b[2]&&(b[2]=h[0]),h[1]>b[3]&&(b[3]=h[1])));return b},get:function(b){var h=b.getCoords(),e,l=0;switch(b.getCoordsType()){case "Point":l=1;break;case "LineString":l=2;break;case "Polygon":l=3;break;case "MultiLineString":l=3;break;case "MultiPolygon":l=4}if(l)e=[Infinity,Infinity,-Infinity,-Infinity],j(l,h,e),b._bbox=e;return e}},j=function(m,h,e){m==1?l.extend(e,h):b.forEach(h,function(b){j(m-1,b,e)})};return l})},"djeo/Placemark":function(){define("djeo/Placemark",
["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","./_base","./Feature","./util/_base","./util/bbox"],function(b,l,j,m,h,e,o){b=b([h],{type:"",isPlacemark:!0,factory:null,handles:null,baseShapes:null,textShapes:null,reg:null,constructor:function(){this.handles={};this.baseShapes=[];this.reg={}},getType:function(){var c;if(this.coords)c=this.type;else{var b=this.map.getGeometryById(this.geometryId||this.id);if(b)c=b.type}return c},getCoordsType:function(){return this.getType()},isPoint:function(){return this.getCoordsType()==
"Point"},isArea:function(){var c=this.getCoordsType();return c=="Polygon"||c=="MultiPolygon"},isLine:function(){var c=this.getCoordsType();return c=="LineString"||c=="MultiLineString"},getCoords:function(){return this._getCoords()},_getCoords:function(){var c=this.coords;if(!c){var b=this.map.getGeometryById(this.geometryId||this.id);if(b)c=b.coords}return c},_set_coords:function(c){var b=this.map.getCoords(c);this.map.engine.factories.Placemark.setCoords(b,this);delete this._bb;this.coords=c;this._coords=
b},_get_coords:function(){return this.getCoords()},render:function(c,b){!c&&this.state&&(c=this.map.states[this.state]);this.map.engine.factories.Placemark.render(this,c,b)},_render:function(c,b){b&&this.parent._show(this,!0,!0);this.map.engine.factories.Placemark._render(this,c,b)},remove:function(){this.map.engine.factories.Placemark.remove(this)},show:function(c){c===void 0&&(c=!0);this.visible!=c&&this.parent._show(this,c)},_show:function(c){this.map.engine.factories.Placemark.show(this,c);this.visible=
c},getBbox:function(){var c=this._bbox||this.bbox;c||(c=o.get(this));return c},onForHandle:function(c,b){if(this.invalid)return c;var a=this.handles[c];if(!a||!b.key){var h=b.events,h=l.isString(h)?[h]:h;if(a){var n=a[3];j.forEach(n,function(a){a&&this.map.engine.disconnect(a)},this)}var n=[],a=[h,b.context,b.method,n],d=0;j.forEach(h,function(a){m.events[a]?(n.push(this.map.engine.onForFeature(this,a,b.method,b.context)),d++):n.push(null)},this);if(!d)return c;c=c||e.uid();this.handles[c]||(this.handles[c]=
a)}if(b.key)a.length==4&&(a[4]={}),a[4][b.key]=b.value;return c},disconnect:function(b,e,a){var h=this.handles[b];if(h){var n=!0;if(e){if(h.length==4)return;delete h[4][e];if(a)for(var d in h[4]){n=!1;break}}n&&(j.forEach(h[3],function(a){this.map.engine.disconnect(a)},this),delete this.handles[b])}},_set_state:function(b){this.state=b;this.render()},_set_orientation:function(b){var e=this.map.engine.factories.Placemark,b=l.isObject(b)?b.heading:b;if(b!==void 0)e.setOrientation(b,this),this.orientation=
b}});h=m.featureTypes;h.Placemark=b;h.Point=b;h.LineString=b;h.Polygon=b;h.MultiLineString=b;return h.MultiPolygon=b})},"dojo/on":function(){define(["./has!dom-addeventlistener?:./aspect","./_base/kernel","./has"],function(b,l,j){function m(a,b,d,e,f){if(e=b.match(/(.*):(.*)/))return b=e[2],e=e[1],c.selector(e,b).call(f,a,d);j("touch")&&(k.test(b)&&(d=r(d)),!j("event-orientationchange")&&b=="orientationchange"&&(b="resize",a=window,d=r(d)));if(a.addEventListener){var h=b in n;a.addEventListener(h?
n[b]:b,d,h);return{remove:function(){a.removeEventListener(b,d,h)}}}b="on"+b;if(i&&a.attachEvent)return i(a,b,d);throw Error("Target must be an event emitter");}function h(){this.cancelable=!1}function e(){this.bubbles=!1}var o=window.ScriptEngineMajorVersion;j.add("jscript",o&&o()+ScriptEngineMinorVersion()/10);j.add("event-orientationchange",j("touch")&&!j("android"));var c=function(a,b,d,e){if(a.on)return a.on(b,d);return c.parse(a,b,d,m,e,this)};c.pausable=function(a,b,d,e){var f,a=c(a,b,function(){if(!f)return d.apply(this,
arguments)},e);a.pause=function(){f=!0};a.resume=function(){f=!1};return a};c.once=function(a,b,d){var e=c(a,b,function(){e.remove();return d.apply(this,arguments)});return e};c.parse=function(a,b,c,d,e,f){if(b.call)return b.call(f,a,c);if(b.indexOf(",")>-1){for(var b=b.split(/\s*,\s*/),k=[],i=0,h;h=b[i++];)k.push(d(a,h,c,e,f));k.remove=function(){for(var a=0;a<k.length;a++)k[a].remove()};return k}return d(a,b,c,e,f)};var k=/^touch/;c.selector=function(a,b,d){return function(e,f){var k=this,i=b.bubble;
i?b=i:d!==!1&&(d=!0);return c(e,b,function(b){var c=b.target;for(k=k&&k.matches?k:l.query;!k.matches(c,a,e);)if(c==e||!d||!(c=c.parentNode))return;return f.call(c,b)})}};var a=[].slice,p=c.emit=function(b,c,d){var f=a.call(arguments,2),k="on"+c;if("parentNode"in b){var i=f[0]={},j;for(j in d)i[j]=d[j];i.preventDefault=h;i.stopPropagation=e;i.target=b;i.type=c;d=i}do b[k]&&b[k].apply(b,f);while(d&&d.bubbles&&(b=b.parentNode));return d&&d.cancelable&&d},n={};if(j("dom-addeventlistener")){n={focusin:"focus",
focusout:"blur"};if(j("opera"))n.keydown="keypress";c.emit=function(a,b,d){if(a.dispatchEvent&&document.createEvent){var e=document.createEvent("HTMLEvents");e.initEvent(b,!!d.bubbles,!!d.cancelable);for(var f in d)f in e||(e[f]=d[f]);return a.dispatchEvent(e)&&e}return p.apply(c,arguments)}}else{c._fixEvent=function(a,b){if(!a)a=(b&&(b.ownerDocument||b.document||b).parentWindow||window).event;if(!a)return a;if(!a.target){a.target=a.srcElement;a.currentTarget=b||a.srcElement;if(a.type=="mouseover")a.relatedTarget=
a.fromElement;if(a.type=="mouseout")a.relatedTarget=a.toElement;if(!a.stopPropagation)a.stopPropagation=q,a.preventDefault=y;switch(a.type){case "keypress":var c="charCode"in a?a.charCode:a.keyCode;c==10?(c=0,a.keyCode=13):c==13||c==27?c=0:c==3&&(c=99);a.charCode=c;c=a;c.keyChar=c.charCode?String.fromCharCode(c.charCode):"";c.charOrCode=c.keyChar||c.keyCode}}return a};var d=function(a){this.handle=a};d.prototype.remove=function(){delete _dojoIEListeners_[this.handle]};var f=function(a){return function(b){b=
c._fixEvent(b,this);return a.call(this,b)}},i=function(a,c,e){e=f(e);if(((a.ownerDocument?a.ownerDocument.parentWindow:a.parentWindow||a.window||window)!=top||j("jscript")<5.8)&&!j("config-_allow_leaks")){typeof _dojoIEListeners_=="undefined"&&(_dojoIEListeners_=[]);var k=a[c];if(!k||!k.listeners){var i=k;a[c]=k=Function("event","var callee = arguments.callee; for(var i = 0; i<callee.listeners.length; i++){var listener = _dojoIEListeners_[callee.listeners[i]]; if(listener){listener.call(this,event);}}");
k.listeners=[];k.global=this;i&&k.listeners.push(_dojoIEListeners_.push(i)-1)}k.listeners.push(a=k.global._dojoIEListeners_.push(e)-1);return new d(a)}return b.after(a,c,e,!0)},q=function(){this.cancelBubble=!0},y=c._preventDefault=function(){this.bubbledKeyCode=this.keyCode;if(this.ctrlKey)try{this.keyCode=0}catch(a){}this.returnValue=!1}}if(j("touch"))var w=function(){},C=window.orientation,r=function(a){return function(b){var c=b.corrected;if(!c){var d=b.type;try{delete b.type}catch(e){}b.type?
(w.prototype=b,c=new w,c.preventDefault=function(){b.preventDefault()},c.stopPropagation=function(){b.stopPropagation()}):(c=b,c.type=d);b.corrected=c;if(d=="resize"){if(C==window.orientation)return null;C=window.orientation;c.type="orientationchange";return a.call(this,c)}if(!("rotation"in c))c.rotation=0,c.scale=1;var d=c.changedTouches[0],f;for(f in d)delete c[f],c[f]=d[f]}return a.call(this,c)}};return c})},"dojo/_base/sniff":function(){define(["./kernel","../has"],function(b,l){b.isBrowser=!0;
b._name="browser";var j=l.add,m=navigator,h=m.userAgent,e=m.appVersion,o=parseFloat(e),c,k,a,p,n,d,f,i,q,y,w,C,r;h.indexOf("AdobeAIR")>=0&&(k=1);a=e.indexOf("Konqueror")>=0?o:0;p=parseFloat(h.split("WebKit/")[1])||void 0;n=parseFloat(h.split("Chrome/")[1])||void 0;d=e.indexOf("Macintosh")>=0;C=/iPhone|iPod|iPad/.test(h);r=parseFloat(h.split("Android ")[1])||void 0;var s=Math.max(e.indexOf("WebKit"),e.indexOf("Safari"),0);if(s&&!n&&(f=parseFloat(e.split("Version/")[1]),!f||parseFloat(e.substr(s+7))<=
419.3))f=2;if(!l("dojo-webkit")&&(h.indexOf("Opera")>=0&&(c=o,c>=9.8&&(c=parseFloat(h.split("Version/")[1])||o)),h.indexOf("Gecko")>=0&&!a&&!p&&(i=q=o),q&&(w=parseFloat(h.split("Firefox/")[1]||h.split("Minefield/")[1])||void 0),document.all&&!c))y=parseFloat(e.split("MSIE ")[1])||void 0,(h=document.documentMode)&&h!=5&&Math.floor(y)!=h&&(y=h);h=document.compatMode=="BackCompat";j("opera",b.isOpera=c);j("air",b.isAIR=k);j("khtml",b.isKhtml=a);j("webkit",b.isWebKit=p);j("chrome",b.isChrome=n);j("mac",
b.isMac=d);j("safari",b.isSafari=f);j("mozilla",b.isMozilla=b.isMoz=i);j("ie",b.isIE=y);j("ff",b.isFF=w);j("quirks",b.isQuirks=h);j("ios",b.isIos=C);j("android",b.isAndroid=r);b.locale=b.locale||(y?m.userLanguage:m.language).toLowerCase();return l})},"djeo-demos/race/Client":function(){define("djeo-demos/race/Client",["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/aspect"],function(b,l,j,m){var h=0;return b(null,{running:!0,pollInterval:500,server:null,intervalHandle:null,lastTimestamp:0,
constructor:function(b){l.mixin(this,b);m.after(this.map,"destroy",l.hitch(this,function(){this.stop();delete this.map}));h++;this.id=h;this.running&&this.start()},start:function(){this.intervalHandle=setTimeout(l.hitch(this,this.poll),this.pollInterval);this.running=!0},stop:function(){this.running=!1},poll:function(){this.running&&(this.map?this.map.executeBatch(l.hitch(this,this._poll)):this._poll())},_poll:function(){this._pollTime=(new Date).getTime();this.server.poll({lastTimestamp:this.lastTimestamp,
load:l.hitch(this,function(b){var h=b.length;if(h)j.forEach(b,function(b){j.forEach(b.data,function(b){this.process(b)},this)},this),this.lastTimestamp=b[h-1].timestamp;this._schedulePoll()})})},_schedulePoll:function(){var b=(new Date).getTime()-this._pollTime;setTimeout(l.hitch(this,this.poll),b>=this.pollInterval?50:this.pollInterval-b)},process:function(){}})})},"dojo/_base/array":function(){define("dojo/_base/array",["./kernel","../has","./lang"],function(b,l,j){function m(a){return o[a]=new Function("item",
"index","array",a)}function h(a){var b=!a;return function(c,d,e){var k=0,h=c&&c.length||0,j;h&&typeof c=="string"&&(c=c.split(""));typeof d=="string"&&(d=o[d]||m(d));if(e)for(;k<h;++k){if(j=!d.call(e,c[k],k,c),a^j)return!j}else for(;k<h;++k)if(j=!d(c[k],k,c),a^j)return!j;return b}}function e(a){var b=1,e=0,d=0;a||(b=e=d=-1);return function(f,h,j,l){if(l&&b>0)return k.lastIndexOf(f,h,j);var l=f&&f.length||0,m=a?l+d:e;j===c?j=a?e:l+d:j<0?(j=l+j,j<0&&(j=e)):j=j>=l?l+d:j;for(l&&typeof f=="string"&&(f=
f.split(""));j!=m;j+=b)if(f[j]==h)return j;return-1}}var o={},c,k;k={every:h(!1),some:h(!0),indexOf:e(!0),lastIndexOf:e(!1),forEach:function(a,b,c){var d=0,e=a&&a.length||0;e&&typeof a=="string"&&(a=a.split(""));typeof b=="string"&&(b=o[b]||m(b));if(c)for(;d<e;++d)b.call(c,a[d],d,a);else for(;d<e;++d)b(a[d],d,a)},map:function(a,b,c,d){var e=0,k=a&&a.length||0,d=new (d||Array)(k);k&&typeof a=="string"&&(a=a.split(""));typeof b=="string"&&(b=o[b]||m(b));if(c)for(;e<k;++e)d[e]=b.call(c,a[e],e,a);else for(;e<
k;++e)d[e]=b(a[e],e,a);return d},filter:function(a,b,c){var d=0,e=a&&a.length||0,k=[],h;e&&typeof a=="string"&&(a=a.split(""));typeof b=="string"&&(b=o[b]||m(b));if(c)for(;d<e;++d)h=a[d],b.call(c,h,d,a)&&k.push(h);else for(;d<e;++d)h=a[d],b(h,d,a)&&k.push(h);return k},clearCache:function(){o={}}};j.mixin(b,k);return k})},"dojo/_base/json":function(){define(["./kernel","../json"],function(b,l){b.fromJson=function(b){return eval("("+b+")")};b._escapeString=l.stringify;b.toJsonIndentStr="\t";b.toJson=
function(j,m){return l.stringify(j,function(b,e){if(e){var j=e.__json__||e.json;if(typeof j=="function")return j.call(e)}return e},m&&b.toJsonIndentStr)};return b})},"djeo/Engine":function(){define("djeo/Engine",["dojo/_base/declare","dojo/has","dojo/_base/lang","dojo/on","dojo/_base/array","dojo/Evented","./_base"],function(b,l,j,m,h,e,o){var c=[0,0];return b([e],{type:"",factories:null,initialized:!1,canRenderModels:!1,_require:null,ignoredDependencies:null,_layerCtrs:null,constructor:function(b){j.mixin(this,
b);this.factories={};this.ignoredDependencies={};this.layers=[];this._layerCtrs={};this._layerReg={}},initialize:function(){},_initBasicFactories:function(b){var a=this.factories;a.Placemark=b;a.Point=b;a.LineString=b;a.Polygon=b;a.MultiLineString=b;a.MultiPolygon=b},matchModuleId:function(b){if(this.ignoredDependencies[b])return null;var a=this._require.toAbsMid("./");a.length>5&&a.substr(a.length-5,5)=="/main"&&(a=a.substring(0,a.length-4));a+=b;return a},createContainer:function(){},appendChild:function(){},
prepare:function(){},_initCamera:function(){var b=this.map,a=b.extent,e,h=!0;this._renderingDisabled=!0;if(a)b=this.map.getCoords([a[0],a[1]]),a=this.map.getCoords([a[2],a[3]]),this.zoomTo([b[0],b[1],a[0],a[1]]);else{var a=b.center||b.lookAt&&b.lookAt.coords,d;if(!a||!("zoom"in b))d=b.getBbox();if("zoom"in b)e=b.zoom,a||(d?(a=[(d[2]+d[0])/2,(d[3]+d[1])/2],h=!1):a=[c[0],c[1]]);else if(a||!d)e=3,d||(a=[c[0],c[1]]);a&&h&&(a=b.getCoords(a));a?this._setCamera({center:a,zoom:e}):this.zoomTo(d)}this._renderingDisabled=
!1},getFactory:function(b){if(!b||this.ignoredDependencies[b])return null;var a=this.factories;if(!a[b]){var c=this.matchModuleId(b);c&&(c=require(c),a[b]=new c({engine:this}))}return a[b]},getTopContainer:function(){},connect:function(){},normalizeCallback:function(b,a,c,e){return function(d){c.call(e,{type:a,nativeEvent:d,feature:b})}},render:function(b,a){var c=this.map;c._calculateViewport();this.prepare();this._initCamera();return c.document.render(b,a)},renderFeatures:function(b,a,c){j.isString(b)&&
(b=[b]);if(j.isArray(b))h.forEach(b,function(b){j.isString(b)&&(b=this.getFeatureById(b));b&&b._render(a,c)},this);else for(var e in b)b[e]._render(a,c)},renderContainer:function(b,a,c){if(c)b.numVisibleFeatures=0;this._renderContainer(b,a,c)},_renderContainer:function(b,a,c){b.visible&&(b.features.length==0&&c&&b.parent.numVisibleFeatures++,h.forEach(b.features,function(b){(b.isContainer||b.visible)&&b._render(a,c)}))},enableLayer:function(b,a){a===void 0&&(a=!0);if(a)if(j.isString(b)){var c=b.indexOf(":"),
e=c>0?b.substring(0,c):b,e=e.toLowerCase(),b=c>0?e+":"+b.substring(c+1):e;if(!this._layerReg[b]&&this._supportedLayers[e]){var d=this._supportedLayers[e],f=d[1];if(c>0)f.paramStr=b.substring(c+1);this._layerCtrs[e]?this._createLayer(b,this._layerCtrs[e],f):this._require(["djeo/"+d[0],"./"+d[0]],j.hitch(this,function(a){this._layerCtrs[e]=a;this._createLayer(b,a,f)}))}}else{for(c=0;c<this.layers.length;c++)if(this.layers[c]===b)return;b.startup(this.map);this._checkLayerProjection(b);this.layers.push(b)}},
_createLayer:function(b,a,c){c||(c={});a=new a(c);a.startup(this.map);this._checkLayerProjection(a);this.layers.push(a);this._layerReg[b]=a},_checkLayerProjection:function(b){if(this.layers.length==0&&b.projection)this.map.projection=b.projection},isValidLayerId:function(b){return o.getLayerClassId(b.toLowerCase())in this._supportedLayers},getLayerModuleId:function(b){return this._supportedLayers[o.getLayerClassId(b.toLowerCase())][0]},setLayerConstructor:function(b,a){this._layerCtrs[o.getLayerClassId(b.toLowerCase())]=
a},onzoom_changed:function(){!this._renderingDisabled&&this.map._hasZoomStyle&&this.map.document.render()},_appendDiv:function(b){this.map.container.appendChild(b)}})})},"djeo/Model":function(){define("djeo/Model",["dojo/_base/declare","dojo/_base/lang","./Placemark","./_base"],function(b,l,j,m){m.registerDependency("Model",function(b){return b.engine.canRenderModels});b=b([j],{constructor:function(b,e){l.mixin(this,e);if(!l.isObject(this.orientation)){var j=this.orientation;this.orientation={heading:j===
void 0?0:j,tilt:0,roll:0}}},getCoordsType:function(){return this.coordsType||"Point"},_render:function(){if(!this.factory){var b=this.map;this.factory=b.engine.canRenderModels&&b.renderModels?b.engine.getFactory("Model"):this.map.engine.factories.Placemark}if(this.map.engine.canRenderModels&&this.map.renderModels)return this.factory.render(this);else this.inherited(arguments)},_set_coords:function(b){var e=this.map.getCoords(b);this.factory.setCoords(e,this);this.coords=b;this._coords=e},_set_orientation:function(b){var e=
this.map;e.engine.canRenderModels&&e.renderModels?(l.isObject(b)||(b={heading:b}),this.factory.setOrientation(b,this),l.mixin(this.orientation,b)):this.inherited(arguments)}});return m.featureTypes.Model=b})},"dojo/_base/window":function(){define(["./kernel","../has","./sniff"],function(b,l){b.doc=this.document||null;b.body=function(){return b.doc.body||b.doc.getElementsByTagName("body")[0]};b.setContext=function(l,h){b.global=j.global=l;b.doc=j.doc=h};b.withGlobal=function(l,h,e,o){var c=b.global;
try{return b.global=j.global=l,b.withDoc.call(null,l.document,h,e,o)}finally{b.global=j.global=c}};b.withDoc=function(m,h,e,o){var c=b.doc,k=b.isQuirks,a=b.isIE,p,n,d;try{b.doc=j.doc=m;b.isQuirks=l.add("quirks",b.doc.compatMode=="BackCompat",!0,!0);if(l("ie")&&(d=m.parentWindow)&&d.navigator)p=parseFloat(d.navigator.appVersion.split("MSIE ")[1])||void 0,(n=m.documentMode)&&n!=5&&Math.floor(p)!=n&&(p=n),b.isIE=l.add("ie",p,!0,!0);e&&typeof h=="string"&&(h=e[h]);return h.apply(e,o||[])}finally{b.doc=
j.doc=c,b.isQuirks=l.add("quirks",k,!0,!0),b.isIE=l.add("ie",a,!0,!0)}};var j={global:b.global,doc:b.doc,body:b.body,setContext:b.setContext,withGlobal:b.withGlobal,withDoc:b.withDoc};return j})},"djeo/FeatureContainer":function(){define("djeo/FeatureContainer",["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","./_base","./Feature","./util/_base","./util/bbox"],function(b,l,j,m,h,e,o){b=b([h],{type:"FeatureContainer",isContainer:!0,features:null,handles:null,numVisibleFeatures:0,constructor:function(){if(this.features){var b=
this.features;this.features=[];this.addFeatures(b,!0,!0)}else this.features=[];this.handles={}},show:function(b){b===void 0&&(b=!0);this.features.length==0&&this.parent._show(this,b,!0);j.forEach(this.features,function(e){e.show(b)},this);if(this.visible!=b)this.visible=b},_show:function(b,e,a){if(e){this.numVisibleFeatures++;if(!this.visible)this.visible=!0;this.numVisibleFeatures==1&&this.parent._show(this,!0,!0)}else this.numVisibleFeatures--,this.numVisibleFeatures==0&&this.parent._show(this,
!1,!0);a||b._show(e)},addFeatures:function(b,e,a){l.isArray(b)||(b=[b]);var h=[];j.forEach(b,function(a){if(a.declaredClass)a.setMap(this.map),a.setParent(this),this.features.push(a);else{var b=m.featureTypes[a.type?a.type:a.features?"FeatureContainer":"Placemark"];b&&(a=new b(a,{map:this.map,parent:this}),this.features.push(a))}a.declaredClass&&(a.setMap(this.map),a.setParent(this),this.map.registerFeature(a),h.push(a))},this);a||(this.map.renderFeatures(h),e||j.forEach(h,function(a){for(var b in this.handles){var c=
this.handles[b];if(c.keys)for(var e in c.keys)a.onForHandle(b,{events:c.events,method:c.method,context:c.context,key:e,value:c.keys[e]});else a.onForHandle(b,{events:c.events,method:c.method,context:c.context})}},this));return h},removeFeatures:function(b){l.isArray(b)||(b=[b]);j.forEach(b,function(b){(b=b.declaredClass?b:this.map.getFeatureById(b))&&b.remove()},this);return[]},remove:function(){this.removeFeatures(this.features)},getBbox:function(){if(this.features.length==0)return null;var b=[Infinity,
Infinity,-Infinity,-Infinity];j.forEach(this.features,function(e){o.extend(b,e.getBbox())},this);return b},render:function(b,e){return this.map.engine.renderContainer(this,b,e)},_render:function(b,e){return this.map.engine._renderContainer(this,b,e)},getContainer:function(){if(!this.container)this.container=this.map.engine.createContainer(this);return this.container},onForHandle:function(b,h){if(!this.features.length)return b;if(h.events)h.events=l.isString(h.events)?[h.events]:h.events;b=b||e.uid();
j.forEach(this.features,function(a){a.onForHandle(b,h)});var a=this.handles,m=a[b];m||(m={events:h.events,method:h.method,context:h.context},a[b]=m);if(a=h.key){if(!m.keys)m.keys={};m.keys[a]=h.value}return b},disconnect:function(b,e,a){var h=!0;j.forEach(this.features,function(d){d.disconnect(b,e,a);a&&d.handles[b]&&(h=!1)});if(h)delete this.handles[b];else{var l=this.handles[b];l&&l.keys&&delete l.keys[e]}}});m.featureTypes.FeatureContainer=b;return m.featureTypes.FeatureCollection=b})},"dojo/_base/config":function(){define(["../has",
"require"],function(b,l){var j={},m=l.rawConfig,h;for(h in m)j[h]=m[h];return j})},"dojo/aspect":function(){define([],function(){function b(b,h,e,l){var c=b[h],k=h=="around",a;if(k){var p=e(function(){return c.advice(this,arguments)});a={remove:function(){a.cancelled=!0},advice:function(b,d){return a.cancelled?c.advice(b,d):p.apply(b,d)}}}else a={remove:function(){var c=a.previous,d=a.next;if(!d&&!c)delete b[h];else if(c?c.next=d:b[h]=d,d)d.previous=c},id:j++,advice:e,receiveArguments:l};if(c&&!k)if(h==
"after"){for(e=c;e;)c=e,e=e.next;c.next=a;a.previous=c}else{if(h=="before")b[h]=a,a.next=c,c.previous=a}else b[h]=a;return a}function l(l){return function(h,e,o,c){var k=h[e],a;if(!k||k.target!=h){h[e]=a=function(){for(var b=j,c=arguments,d=a.before;d;)c=d.advice.apply(this,c)||c,d=d.next;if(a.around)var e=a.around.advice(this,c);for(d=a.after;d&&d.id<b;)e=d.receiveArguments?d.advice.apply(this,c)||e:d.advice.call(this,e),d=d.next;return e};if(k)a.around={advice:function(a,b){return k.apply(a,b)}};
a.target=h}h=b(a||k,l,o,c);o=null;return h}}var j=0;return{before:l("before"),around:l("around"),after:l("after")}})}}});(function(){var b=this.require;b({cache:{}});!b.async&&b(["dojo"]);b.boot&&b.apply(null,b.boot)})();