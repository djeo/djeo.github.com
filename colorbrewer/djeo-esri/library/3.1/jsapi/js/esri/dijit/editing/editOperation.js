/*
 COPYRIGHT 2009 ESRI

 TRADE SECRETS: ESRI PROPRIETARY AND CONFIDENTIAL
 Unpublished material - all rights reserved under the
 Copyright Laws of the United States and applicable international
 laws, treaties, and conventions.

 For additional information, contact:
 Environmental Systems Research Institute, Inc.
 Attn: Contracts and Legal Services Department
 380 New York Street
 Redlands, California, 92373
 USA

 email: contracts@esri.com
 */
//>>built
define(["dijit","dojo","dojox","dojo/require!esri/undoManager"],function(_1,_2,_3){_2.provide("esri.dijit.editing.editOperation");_2.require("esri.undoManager");_2.declare("esri.dijit.editing.Add",esri.OperationBase,{type:"edit",label:"Add Features",constructor:function(_4){_4=_4||{};if(!_4.featureLayer){console.error("In constructor of 'esri.dijit.editing.Add', featureLayer is not provided");return;}this._featureLayer=_4.featureLayer;if(!_4.addedGraphics){console.error("In constructor of 'esri.dijit.editing.Add', no graphics provided");return;}this._addedGraphics=_4.addedGraphics;},performUndo:function(){this._featureLayer.applyEdits(null,null,this._addedGraphics);},performRedo:function(){this._featureLayer.applyEdits(this._addedGraphics,null,null);}});_2.declare("esri.dijit.editing.Delete",esri.OperationBase,{type:"edit",label:"Delete Features",constructor:function(_5){_5=_5||{};this._add=new esri.dijit.editing.Add({featureLayer:_5.featureLayer,addedGraphics:_5.deletedGraphics});},performUndo:function(){this._add.performRedo();},performRedo:function(){this._add.performUndo();}});_2.declare("esri.dijit.editing.Update",esri.OperationBase,{type:"edit",label:"Update Features",constructor:function(_6){_6=_6||{};if(!_6.featureLayer){console.error("In constructor of 'esri.dijit.editing.Update', featureLayer not provided");return;}this._featureLayer=_6.featureLayer;if(!_6.preUpdatedGraphics){console.error("In constructor of 'esri.dijit.editing.Update', preUpdatedGraphics not provided");return;}this._preUpdatedGraphicsGeometries=[];this._preUpdatedGraphicsAttributes=[];for(var i=0;i<_6.preUpdatedGraphics.length;i++){this._preUpdatedGraphicsGeometries.push(_6.preUpdatedGraphics[i].geometry.toJson());this._preUpdatedGraphicsAttributes.push(_6.preUpdatedGraphics[i].attributes);}if(!_6.postUpdatedGraphics){console.error("In constructor of 'esri.dijit.editing.Update', postUpdatedGraphics not provided");return;}this._postUpdatedGraphics=_6.postUpdatedGraphics;this._postUpdatedGraphicsGeometries=[];this._postUpdatedGraphicsAttributes=[];for(i=0;i<_6.postUpdatedGraphics.length;i++){this._postUpdatedGraphicsGeometries.push(_6.postUpdatedGraphics[i].geometry.toJson());this._postUpdatedGraphicsAttributes.push(_2.clone(_6.postUpdatedGraphics[i].attributes));}},performUndo:function(){for(var i=0;i<this._postUpdatedGraphics.length;i++){this._postUpdatedGraphics[i].setGeometry(esri.geometry.fromJson(this._preUpdatedGraphicsGeometries[i]));this._postUpdatedGraphics[i].setAttributes(this._preUpdatedGraphicsAttributes[i]);}this._featureLayer.applyEdits(null,this._postUpdatedGraphics,null);},performRedo:function(){for(var i=0;i<this._postUpdatedGraphics.length;i++){this._postUpdatedGraphics[i].setGeometry(esri.geometry.fromJson(this._postUpdatedGraphicsGeometries[i]));this._postUpdatedGraphics[i].setAttributes(this._postUpdatedGraphicsAttributes[i]);}this._featureLayer.applyEdits(null,this._postUpdatedGraphics,null);}});_2.declare("esri.dijit.editing.Cut",esri.OperationBase,{type:"edit",label:"Cut Features",constructor:function(_7){_7=_7||{};if(!_7.featureLayer){console.error("In constructor of 'esri.dijit.editing.Cut', featureLayer not provided");return;}this._featureLayer=_7.featureLayer;if(!_7.addedGraphics){console.error("In constructor of 'esri.dijit.editing.Cut', addedGraphics for cut not provided");return;}this._addedGraphics=_7.addedGraphics;if(!_7.preUpdatedGraphics){console.error("In constructor of 'esri.dijit.editing.Cut', preUpdatedGraphics not provided");return;}this._preUpdatedGraphicsGeometries=[];this._preUpdatedGraphicsAttributes=[];for(var i=0;i<_7.preUpdatedGraphics.length;i++){this._preUpdatedGraphicsGeometries.push(_7.preUpdatedGraphics[i].geometry.toJson());this._preUpdatedGraphicsAttributes.push(_7.preUpdatedGraphics[i].attributes);}if(!_7.postUpdatedGraphics){console.error("In constructor of 'esri.dijit.editing.Cut', postUpdatedGraphics not provided");return;}this._postUpdatedGraphics=_7.postUpdatedGraphics;this._postUpdatedGraphicsGeometries=[];this._postUpdatedGraphicsAttributes=[];for(i=0;i<_7.postUpdatedGraphics.length;i++){this._postUpdatedGraphicsGeometries.push(_7.postUpdatedGraphics[i].geometry.toJson());this._postUpdatedGraphicsAttributes.push(_2.clone(_7.postUpdatedGraphics[i].attributes));}},performUndo:function(){for(var i=0;i<this._postUpdatedGraphics.length;i++){this._postUpdatedGraphics[i].setGeometry(esri.geometry.fromJson(this._preUpdatedGraphicsGeometries[i]));this._postUpdatedGraphics[i].setAttributes(this._preUpdatedGraphicsAttributes[i]);}this._featureLayer.applyEdits(null,this._postUpdatedGraphics,this._addedGraphics);},performRedo:function(){for(var i=0;i<this._postUpdatedGraphics.length;i++){this._postUpdatedGraphics[i].setGeometry(esri.geometry.fromJson(this._postUpdatedGraphicsGeometries[i]));this._postUpdatedGraphics[i].setAttributes(this._postUpdatedGraphicsAttributes[i]);}this._featureLayer.applyEdits(this._addedGraphics,this._postUpdatedGraphics,null);}});_2.declare("esri.dijit.editing.Union",esri.OperationBase,{type:"edit",label:"Union Features",constructor:function(_8){_8=_8||{};this._cut=new esri.dijit.editing.Cut({featureLayer:_8.featureLayer,addedGraphics:_8.deletedGraphics,preUpdatedGraphics:_8.preUpdatedGraphics,postUpdatedGraphics:_8.postUpdatedGraphics});},performUndo:function(){this._cut.performRedo();},performRedo:function(){this._cut.performUndo();}});});