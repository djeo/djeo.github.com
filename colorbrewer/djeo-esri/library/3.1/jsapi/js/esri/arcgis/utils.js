/*
 COPYRIGHT 2009 ESRI

 TRADE SECRETS: ESRI PROPRIETARY AND CONFIDENTIAL
 Unpublished material - all rights reserved under the
 Copyright Laws of the United States and applicable international
 laws, treaties, and conventions.

 For additional information, contact:
 Environmental Systems Research Institute, Inc.
 Attn: Contracts and Legal Services Department
 380 New York Street
 Redlands, California, 92373
 USA

 email: contracts@esri.com
 */
//>>built
require({cache:{"dojox/charting/plot2d/Lines":function(){define("dojox/charting/plot2d/Lines",["dojo/_base/declare","./Default"],function(_1,_2){return _1("dojox.charting.plot2d.Lines",_2,{constructor:function(){this.opt.lines=true;}});});},"dojox/charting/plot2d/ClusteredBars":function(){define("dojox/charting/plot2d/ClusteredBars",["dojo/_base/lang","dojo/_base/array","dojo/_base/declare","./Bars","./common","dojox/lang/functional","dojox/lang/functional/reversed","dojox/lang/utils"],function(_3,_4,_5,_6,dc,df,_7,du){var _8=_7.lambda("item.purgeGroup()");return _5("dojox.charting.plot2d.ClusteredBars",_6,{render:function(_9,_a){if(this.zoom&&!this.isDataDirty()){return this.performZoom(_9,_a);}this.resetEvents();this.dirty=this.isDirty();if(this.dirty){_4.forEach(this.series,_8);this._eventSeries={};this.cleanGroup();var s=this.group;df.forEachRev(this.series,function(_b){_b.cleanGroup(s);});}var t=this.chart.theme,f,_c,_d,_e,ht=this._hScaler.scaler.getTransformerFromModel(this._hScaler),vt=this._vScaler.scaler.getTransformerFromModel(this._vScaler),_f=Math.max(0,this._hScaler.bounds.lower),_10=ht(_f),_11=this.events();f=dc.calculateBarSize(this._vScaler.bounds.scale,this.opt,this.series.length);_c=f.gap;_d=_e=f.size;for(var i=this.series.length-1;i>=0;--i){var run=this.series[i],_12=_e*(this.series.length-i-1);if(!this.dirty&&!run.dirty){t.skip();this._reconnectEvents(run.name);continue;}run.cleanGroup();var _13=t.next("bar",[this.opt,run]),s=run.group,_14=new Array(run.data.length);for(var j=0;j<run.data.length;++j){var _15=run.data[j];if(_15!==null){var v=typeof _15=="number"?_15:_15.y,hv=ht(v),_16=hv-_10,w=Math.abs(_16),_17=typeof _15!="number"?t.addMixin(_13,"bar",_15,true):t.post(_13,"bar");if(w>=0&&_d>=1){var _18={x:_a.l+(v<_f?hv:_10),y:_9.height-_a.b-vt(j+1.5)+_c+_12,width:w,height:_d};var _19=this._plotFill(_17.series.fill,_9,_a);_19=this._shapeFill(_19,_18);var _1a=s.createRect(_18).setFill(_19).setStroke(_17.series.stroke);run.dyn.fill=_1a.getFill();run.dyn.stroke=_1a.getStroke();if(_11){var o={element:"bar",index:j,run:run,shape:_1a,x:v,y:j+1.5};this._connectEvents(o);_14[j]=o;}if(this.animate){this._animateBar(_1a,_a.l+_10,-_16);}}}}this._eventSeries[run.name]=_14;run.dirty=false;}this.dirty=false;return this;}});});},"dojox/gfx/utils":function(){define("dojox/gfx/utils",["dojo/_base/kernel","dojo/_base/lang","./_base","dojo/_base/html","dojo/_base/array","dojo/_base/window","dojo/_base/json","dojo/_base/Deferred","dojo/_base/sniff","require","dojo/_base/config"],function(_1b,_1c,g,_1d,arr,win,_1e,_1f,has,_20,_21){var gu=g.utils={};_1c.mixin(gu,{forEach:function(_22,f,o){o=o||win.global;f.call(o,_22);if(_22 instanceof g.Surface||_22 instanceof g.Group){arr.forEach(_22.children,function(_23){gu.forEach(_23,f,o);});}},serialize:function(_24){var t={},v,_25=_24 instanceof g.Surface;if(_25||_24 instanceof g.Group){t.children=arr.map(_24.children,gu.serialize);if(_25){return t.children;}}else{t.shape=_24.getShape();}if(_24.getTransform){v=_24.getTransform();if(v){t.transform=v;}}if(_24.getStroke){v=_24.getStroke();if(v){t.stroke=v;}}if(_24.getFill){v=_24.getFill();if(v){t.fill=v;}}if(_24.getFont){v=_24.getFont();if(v){t.font=v;}}return t;},toJson:function(_26,_27){return _1e.toJson(gu.serialize(_26),_27);},deserialize:function(_28,_29){if(_29 instanceof Array){return arr.map(_29,_1c.hitch(null,gu.deserialize,_28));}var _2a=("shape" in _29)?_28.createShape(_29.shape):_28.createGroup();if("transform" in _29){_2a.setTransform(_29.transform);}if("stroke" in _29){_2a.setStroke(_29.stroke);}if("fill" in _29){_2a.setFill(_29.fill);}if("font" in _29){_2a.setFont(_29.font);}if("children" in _29){arr.forEach(_29.children,_1c.hitch(null,gu.deserialize,_2a));}return _2a;},fromJson:function(_2b,_2c){return gu.deserialize(_2b,_1e.fromJson(_2c));},toSvg:function(_2d){var _2e=new _1f();if(g.renderer==="svg"){try{var svg=gu._cleanSvg(gu._innerXML(_2d.rawNode));_2e.callback(svg);}catch(e){_2e.errback(e);}}else{if(!gu._initSvgSerializerDeferred){gu._initSvgSerializer();}var _2f=gu.toJson(_2d);var _30=function(){try{var _31=_2d.getDimensions();var _32=_31.width;var _33=_31.height;var _34=gu._gfxSvgProxy.document.createElement("div");gu._gfxSvgProxy.document.body.appendChild(_34);win.withDoc(gu._gfxSvgProxy.document,function(){_1d.style(_34,"width",_32);_1d.style(_34,"height",_33);},this);var ts=gu._gfxSvgProxy[dojox._scopeName].gfx.createSurface(_34,_32,_33);var _35=function(_36){try{gu._gfxSvgProxy[dojox._scopeName].gfx.utils.fromJson(_36,_2f);var svg=gu._cleanSvg(_34.innerHTML);_36.clear();_36.destroy();gu._gfxSvgProxy.document.body.removeChild(_34);_2e.callback(svg);}catch(e){_2e.errback(e);}};ts.whenLoaded(null,_35);}catch(ex){_2e.errback(ex);}};if(gu._initSvgSerializerDeferred.fired>0){_30();}else{gu._initSvgSerializerDeferred.addCallback(_30);}}return _2e;},_gfxSvgProxy:null,_initSvgSerializerDeferred:null,_svgSerializerInitialized:function(){gu._initSvgSerializerDeferred.callback(true);},_initSvgSerializer:function(){if(!gu._initSvgSerializerDeferred){gu._initSvgSerializerDeferred=new _1f();var f=win.doc.createElement("iframe");_1d.style(f,{display:"none",position:"absolute",width:"1em",height:"1em",top:"-10000px"});var _37;if(has("ie")){f.onreadystatechange=function(){if(f.contentWindow.document.readyState=="complete"){f.onreadystatechange=function(){};_37=setInterval(function(){if(f.contentWindow[_1b.scopeMap["dojo"][1]._scopeName]&&f.contentWindow[_1b.scopeMap["dojox"][1]._scopeName].gfx&&f.contentWindow[_1b.scopeMap["dojox"][1]._scopeName].gfx.utils){clearInterval(_37);f.contentWindow.parent[_1b.scopeMap["dojox"][1]._scopeName].gfx.utils._gfxSvgProxy=f.contentWindow;f.contentWindow.parent[_1b.scopeMap["dojox"][1]._scopeName].gfx.utils._svgSerializerInitialized();}},50);}};}else{f.onload=function(){f.onload=function(){};_37=setInterval(function(){if(f.contentWindow[_1b.scopeMap["dojo"][1]._scopeName]&&f.contentWindow[_1b.scopeMap["dojox"][1]._scopeName].gfx&&f.contentWindow[_1b.scopeMap["dojox"][1]._scopeName].gfx.utils){clearInterval(_37);f.contentWindow.parent[_1b.scopeMap["dojox"][1]._scopeName].gfx.utils._gfxSvgProxy=f.contentWindow;f.contentWindow.parent[_1b.scopeMap["dojox"][1]._scopeName].gfx.utils._svgSerializerInitialized();}},50);};}var uri=(_21["dojoxGfxSvgProxyFrameUrl"]||_20.toUrl("dojox/gfx/resources/gfxSvgProxyFrame.html"));f.setAttribute("src",uri.toString());win.body().appendChild(f);}},_innerXML:function(_38){if(_38.innerXML){return _38.innerXML;}else{if(_38.xml){return _38.xml;}else{if(typeof XMLSerializer!="undefined"){return (new XMLSerializer()).serializeToString(_38);}}}return null;},_cleanSvg:function(svg){if(svg){if(svg.indexOf("xmlns=\"http://www.w3.org/2000/svg\"")==-1){svg=svg.substring(4,svg.length);svg="<svg xmlns=\"http://www.w3.org/2000/svg\""+svg;}if(svg.indexOf("xmlns:xlink=\"http://www.w3.org/1999/xlink\"")==-1){svg=svg.substring(4,svg.length);svg="<svg xmlns:xlink=\"http://www.w3.org/1999/xlink\""+svg;}if(svg.indexOf("xlink:href")===-1){svg=svg.replace(/href\s*=/g,"xlink:href=");}svg=svg.replace(/\bdojoGfx\w*\s*=\s*(['"])\w*\1/g,"");svg=svg.replace(/\b__gfxObject__\s*=\s*(['"])\w*\1/g,"");svg=svg.replace(/[=]([^"']+?)(\s|>)/g,"=\"$1\"$2");}return svg;}});return gu;});},"dojox/charting/plot2d/Areas":function(){define("dojox/charting/plot2d/Areas",["dojo/_base/declare","./Default"],function(_39,_3a){return _39("dojox.charting.plot2d.Areas",_3a,{constructor:function(){this.opt.lines=true;this.opt.areas=true;}});});},"dojox/lang/functional/array":function(){define("dojox/lang/functional/array",["dojo/_base/kernel","dojo/_base/lang","dojo/_base/array","dojo/_base/window","./lambda"],function(_3b,_3c,arr,win,df){var _3d={};_3c.mixin(df,{filter:function(a,f,o){if(typeof a=="string"){a=a.split("");}o=o||win.global;f=df.lambda(f);var t=[],v,i,n;if(_3c.isArray(a)){for(i=0,n=a.length;i<n;++i){v=a[i];if(f.call(o,v,i,a)){t.push(v);}}}else{if(typeof a.hasNext=="function"&&typeof a.next=="function"){for(i=0;a.hasNext();){v=a.next();if(f.call(o,v,i++,a)){t.push(v);}}}else{for(i in a){if(!(i in _3d)){v=a[i];if(f.call(o,v,i,a)){t.push(v);}}}}}return t;},forEach:function(a,f,o){if(typeof a=="string"){a=a.split("");}o=o||win.global;f=df.lambda(f);var i,n;if(_3c.isArray(a)){for(i=0,n=a.length;i<n;f.call(o,a[i],i,a),++i){}}else{if(typeof a.hasNext=="function"&&typeof a.next=="function"){for(i=0;a.hasNext();f.call(o,a.next(),i++,a)){}}else{for(i in a){if(!(i in _3d)){f.call(o,a[i],i,a);}}}}return o;},map:function(a,f,o){if(typeof a=="string"){a=a.split("");}o=o||win.global;f=df.lambda(f);var t,n,i;if(_3c.isArray(a)){t=new Array(n=a.length);for(i=0;i<n;t[i]=f.call(o,a[i],i,a),++i){}}else{if(typeof a.hasNext=="function"&&typeof a.next=="function"){t=[];for(i=0;a.hasNext();t.push(f.call(o,a.next(),i++,a))){}}else{t=[];for(i in a){if(!(i in _3d)){t.push(f.call(o,a[i],i,a));}}}}return t;},every:function(a,f,o){if(typeof a=="string"){a=a.split("");}o=o||win.global;f=df.lambda(f);var i,n;if(_3c.isArray(a)){for(i=0,n=a.length;i<n;++i){if(!f.call(o,a[i],i,a)){return false;}}}else{if(typeof a.hasNext=="function"&&typeof a.next=="function"){for(i=0;a.hasNext();){if(!f.call(o,a.next(),i++,a)){return false;}}}else{for(i in a){if(!(i in _3d)){if(!f.call(o,a[i],i,a)){return false;}}}}}return true;},some:function(a,f,o){if(typeof a=="string"){a=a.split("");}o=o||win.global;f=df.lambda(f);var i,n;if(_3c.isArray(a)){for(i=0,n=a.length;i<n;++i){if(f.call(o,a[i],i,a)){return true;}}}else{if(typeof a.hasNext=="function"&&typeof a.next=="function"){for(i=0;a.hasNext();){if(f.call(o,a.next(),i++,a)){return true;}}}else{for(i in a){if(!(i in _3d)){if(f.call(o,a[i],i,a)){return true;}}}}}return false;}});return df;});},"dojox/charting/Chart2D":function(){define("dojox/charting/Chart2D",["dojo/_base/kernel","dojox","./Chart","./axis2d/Default","./axis2d/Invisible","./plot2d/Default","./plot2d/Lines","./plot2d/Areas","./plot2d/Markers","./plot2d/MarkersOnly","./plot2d/Scatter","./plot2d/Stacked","./plot2d/StackedLines","./plot2d/StackedAreas","./plot2d/Columns","./plot2d/StackedColumns","./plot2d/ClusteredColumns","./plot2d/Bars","./plot2d/StackedBars","./plot2d/ClusteredBars","./plot2d/Grid","./plot2d/Pie","./plot2d/Bubble","./plot2d/Candlesticks","./plot2d/OHLC","./plot2d/Spider"],function(_3e,_3f,_40){_3e.deprecated("dojox.charting.Chart2D","Use dojo.charting.Chart instead and require all other components explicitly","2.0");return _3f.charting.Chart2D=_40;});},"dojox/charting/Series":function(){define("dojox/charting/Series",["dojo/_base/lang","dojo/_base/declare","./Element"],function(_41,_42,_43){return _42("dojox.charting.Series",_43,{constructor:function(_44,_45,_46){_41.mixin(this,_46);if(typeof this.plot!="string"){this.plot="default";}this.update(_45);},clear:function(){this.dyn={};},update:function(_47){if(_41.isArray(_47)){this.data=_47;}else{this.source=_47;this.data=this.source.data;if(this.source.setSeriesObject){this.source.setSeriesObject(this);}}this.dirty=true;this.clear();}});});},"esri/layers/osm":function(){define(["dijit","dojo","dojox","dojo/require!esri/layers/tiled"],function(_48,_49,_4a){_49.provide("esri.layers.osm");_49.require("esri.layers.tiled");_49.declare("esri.layers.OpenStreetMapLayer",esri.layers.TiledMapServiceLayer,{constructor:function(_4b){this.spatialReference=new esri.SpatialReference({wkid:102100});this.tileInfo=new esri.layers.TileInfo({rows:256,cols:256,dpi:96,format:"PNG8",compressionQuality:0,origin:{x:-20037508.342787,y:20037508.342787},spatialReference:{wkid:102100},lods:[{level:0,scale:591657527.591555,resolution:156543.033928},{level:1,scale:295828763.795777,resolution:78271.5169639999},{level:2,scale:147914381.897889,resolution:39135.7584820001},{level:3,scale:73957190.948944,resolution:19567.8792409999},{level:4,scale:36978595.474472,resolution:9783.93962049996},{level:5,scale:18489297.737236,resolution:4891.96981024998},{level:6,scale:9244648.868618,resolution:2445.98490512499},{level:7,scale:4622324.434309,resolution:1222.99245256249},{level:8,scale:2311162.217155,resolution:611.49622628138},{level:9,scale:1155581.108577,resolution:305.748113140558},{level:10,scale:577790.554289,resolution:152.874056570411},{level:11,scale:288895.277144,resolution:76.4370282850732},{level:12,scale:144447.638572,resolution:38.2185141425366},{level:13,scale:72223.819286,resolution:19.1092570712683},{level:14,scale:36111.909643,resolution:9.55462853563415},{level:15,scale:18055.954822,resolution:4.77731426794937},{level:16,scale:9027.977411,resolution:2.38865713397468},{level:17,scale:4513.988705,resolution:1.19432856685505},{level:18,scale:2256.994353,resolution:0.597164283559817}]});this.fullExtent=new esri.geometry.Extent({xmin:-20037508.34,ymin:-20037508.34,xmax:20037508.34,ymax:20037508.34,spatialReference:{wkid:102100}});this.initialExtent=new esri.geometry.Extent({xmin:-20037508.34,ymin:-20037508.34,xmax:20037508.34,ymax:20037508.34,spatialReference:{wkid:102100}});this.tileServers=(_4b&&_4b.tileServers)||["http://a.tile.openstreetmap.org","http://b.tile.openstreetmap.org","http://c.tile.openstreetmap.org"];this.serversLength=this.tileServers.length;this._displayLevels=_4b?_4b.displayLevels:null;this.copyright=(_4b&&_4b.copyright)||"Map data &copy; OpenStreetMap contributors, CC-BY-SA";this.loaded=true;this.onLoad(this);var _4c=_4b&&_4b.loadCallback;if(_4c){_4c(this);}},getTileUrl:function(_4d,row,col){return esri._getProxiedUrl(this.tileServers[row%this.serversLength]+"/"+_4d+"/"+col+"/"+row+".png");}});});},"esri/layers/KMLLayer":function(){define(["dijit","dojo","dojox","dojo/require!esri/utils,esri/layers/layer,esri/layers/MapImageLayer,esri/layers/FeatureLayer,esri/dijit/Popup"],function(_4e,_4f,_50){_4f.provide("esri.layers.KMLLayer");_4f.require("esri.utils");_4f.require("esri.layers.layer");_4f.require("esri.layers.MapImageLayer");_4f.require("esri.layers.FeatureLayer");_4f.require("esri.dijit.Popup");_4f.declare("esri.layers.KMLLayer",[esri.layers.Layer],{serviceUrl:"http://utility.arcgis.com/sharing/kml",constructor:function(url,_51){if(!url){console.log("KMLLayer:constructor - please provide url for the KML file");}this._outSR=(_51&&_51.outSR)||new esri.SpatialReference({wkid:4326});this._options=_51;if(esri.config.defaults.kmlService){this.serviceUrl=esri.config.defaults.kmlService;}var _52=(this.linkInfo=_51&&_51.linkInfo);if(_52){this.visible=!!_52.visibility;this._waitingForMap=!!_52.viewFormat;}if(!_52||(_52&&_52.visibility&&!this._waitingForMap)){this._parseKml();}this.refresh=_4f.hitch(this,this.refresh);},getFeature:function(_53){if(!_53){return;}var _54=_53.type,id=_53.id,_55,i,len;switch(_54){case "esriGeometryPoint":case "esriGeometryPolyline":case "esriGeometryPolygon":var _56=this["_"+_54];if(_56){_55=_4f.getObject("_mode._featureMap."+id,false,_56);}break;case "GroundOverlay":var _57=this._groundLyr;if(_57){var _58=_57.getImages();len=_58.length;for(i=0;i<len;i++){if(_58[i].id===id){_55=_58[i];break;}}}break;case "ScreenOverlay":break;case "NetworkLink":_4f.some(this._links,function(_59){if(_59.linkInfo&&_59.linkInfo.id===id){_55=_59;return true;}else{return false;}});break;case "Folder":var _5a=this.folders;len=_5a?_5a.length:0;for(i=0;i<len;i++){if(_5a[i].id===id){_55=_5a[i];break;}}break;default:console.log("KMLLayer:getFeature - unknown feature type");break;}return _55;},getLayers:function(){var _5b=[];if(this._groundLyr){_5b.push(this._groundLyr);}if(this._fLayers){_5b=_5b.concat(this._fLayers);}if(this._links){_4f.forEach(this._links,function(_5c){if(_5c.declaredClass){_5b.push(_5c);}});}return _5b;},setFolderVisibility:function(_5d,_5e){if(!_5d){return;}this._fireUpdateStart();_5d.visible=_5e;if(_5e){_5e=this._areLocalAncestorsVisible(_5d);}this._setState(_5d,_5e);this._fireUpdateEnd();},onRefresh:function(){},_parseKml:function(map){var _5f=this;this._fireUpdateStart();this._io=esri.request({url:this.serviceUrl,content:{url:this._url.path+this._getQueryParameters(map),model:"simple",folders:"",refresh:this.loaded?true:undefined,outSR:_4f.toJson(this._outSR.toJson())},callbackParamName:"callback",load:function(_60){_5f._io=null;_5f._initLayer(_60);},error:function(err){_5f._io=null;err=_4f.mixin(new Error(),err);err.message="Unable to load KML: "+_5f.url+" "+(err.message||"");_5f._fireUpdateEnd(err);_5f.onError(err);}});},_initLayer:function(_61){if(this.loaded){this._removeInternalLayers();}this.name=_61.name;this.description=_61.description;this.snippet=_61.snippet;this.visibility=_61.visibility;this.featureInfos=_61.featureInfos;var i,len;var _62=(this.folders=_61.folders),_63=[],_64;if(_62){len=_62.length;for(i=0;i<len;i++){_64=(_62[i]=new esri.layers.KMLFolder(_62[i]));if(_64.parentFolderId===-1){_63.push(_64);}}}var _65=(this._links=_61.networkLinks),_66;len=_65?_65.length:0;for(i=0;i<len;i++){if(_65[i].viewRefreshMode&&_65[i].viewRefreshMode.toLowerCase().indexOf("onregion")!==-1){continue;}_66=_4f.mixin({},this._options);_66.linkInfo=_65[i];if(_66.id){_66.id=_66.id+"_"+i;}_65[i]=new esri.layers.KMLLayer(_65[i].href,_66);_65[i]._parentLayer=this;_65[i]._parentFolderId=this._getLinkParentId(_65[i].linkInfo.id);}var _67=_61.groundOverlays;if(_67&&_67.length>0){_66=_4f.mixin({},this._options);if(_66.id){_66.id=_66.id+"_"+"mapImage";}var _68=(this._groundLyr=new esri.layers.MapImageLayer(_66));len=_67.length;for(i=0;i<len;i++){_68.addImage(new esri.layers.KMLGroundOverlay(_67[i]));}}var _69=_4f.getObject("featureCollection.layers",false,_61);if(_69&&_69.length>0){this._fLayers=[];_4f.forEach(_69,function(_6a,i){var _6b=_4f.getObject("featureSet.features",false,_6a),_6c;if(_6b&&_6b.length>0){_66=_4f.mixin({outFields:["*"],infoTemplate:_6a.popupInfo?new esri.dijit.PopupTemplate(_6a.popupInfo):null,editable:false},this._options);if(_66.id){_66.id=_66.id+"_"+i;}_6a.layerDefinition.capabilities="Query,Data";_6c=new esri.layers.FeatureLayer(_6a,_66);if(_6c.geometryType){this["_"+_6c.geometryType]=_6c;}this._fLayers.push(_6c);}},this);if(this._fLayers.length===0){delete this._fLayers;}}len=_63.length;for(i=0;i<len;i++){_64=_63[i];this._setState(_64,_64.visible);}this._fireUpdateEnd();if(this.loaded){this._addInternalLayers();this.onRefresh();}else{this.loaded=true;this.onLoad(this);}},_addInternalLayers:function(){var map=this._map;this._fireUpdateStart();if(this._links){_4f.forEach(this._links,function(_6d){if(_6d.declaredClass){map.addLayer(_6d);if(_6d._waitingForMap){_6d._waitingForMap=null;if(_6d.visible){_6d._parseKml(map);}else{_6d._wMap=map;}}}});}var _6e=map.spatialReference,_6f=this._outSR,_70,_71;if(_6e.wkid){_70=(_6e._isWebMercator()&&_6f._isWebMercator())||(_6e.wkid===_6f.wkid);}else{if(_6e.wkt){_70=(_6e.wkt===_6f.wkt);}else{console.log("KMLLayer:_setMap - map has invalid spatial reference");return;}}if(!_70){if(_6e._isWebMercator()&&_6f.wkid===4326){_71=esri.geometry.geographicToWebMercator;}else{if(_6f._isWebMercator()&&_6e.wkid===4326){_71=esri.geometry.webMercatorToGeographic;}else{console.log("KMLLayer:_setMap - unsupported workflow. Spatial reference of the map and kml layer do not match, and the conversion cannot be done on the client.");return;}}}if(this._groundLyr){if(_71){_4f.forEach(this._groundLyr.getImages(),function(_72){_72.extent=_71(_72.extent);});}map.addLayer(this._groundLyr);}var _73=this._fLayers;if(_73&&_73.length>0){_4f.forEach(_73,function(_74){if(_71){var _75=_74.graphics,i,_76,len=_75?_75.length:0;for(i=0;i<len;i++){_76=_75[i].geometry;if(_76){_75[i].setGeometry(_71(_76));}}}map.addLayer(_74);});}this.onVisibilityChange(this.visible);},_removeInternalLayers:function(){var map=this._map;if(this._links){_4f.forEach(this._links,function(_77){if(_77.declaredClass&&_77._io){_77._io.cancel();}});}if(map){_4f.forEach(this.getLayers(),map.removeLayer,map);}},_setState:function(_78,_79){var _7a=_78.featureInfos,_7b,_7c,i,len=_7a?_7a.length:0,_7d=_79?"show":"hide";for(i=0;i<len;i++){_7b=_7a[i];_7c=this.getFeature(_7b);if(!_7c){continue;}if(_7b.type==="Folder"){this._setState(_7c,_79&&_7c.visible);}else{if(_7b.type==="NetworkLink"){this._setInternalVisibility(_7c,_79);}else{_7c[_7d]();}}}},_areLocalAncestorsVisible:function(_7e){var _7f=_7e.parentFolderId,_80=_7e.visible;while(_80&&_7f!==-1){var _81=this.getFeature({type:"Folder",id:_7f});_80=_80&&_81.visible;_7f=_81.parentFolderId;}return _80;},_setInternalVisibility:function(_82,_83){var _84=_82._parentLayer,_85=_82._parentFolderId;_83=_83&&_82.visible;while(_83&&_84){_83=_83&&_84.visible;if(_85>-1){_83=_83&&_84._areLocalAncestorsVisible(_84.getFeature({type:"Folder",id:_85}));}_85=_84._parentFolderId;_84=_84._parentLayer;}this._setIntState(_82,_83);},_setIntState:function(_86,_87){if(!_86){return;}_4f.forEach(_86.getLayers(),function(_88){if(_88.linkInfo){_86._setIntState(_88,_87&&_88.visible&&_86._areLocalAncestorsVisible(_86.getFeature({type:"Folder",id:_88._parentFolderId})));}else{_88.setVisibility(_87);}});},_getLinkParentId:function(id){var _89=-1;if(this.folders){_4f.some(this.folders,function(_8a){if(_8a.networkLinkIds&&_4f.indexOf(_8a.networkLinkIds,id)!==-1){_89=_8a.id;return true;}return false;});}return _89;},_checkAutoRefresh:function(){var _8b=this.linkInfo;if(_8b){if(this.visible){if(this.loaded&&this._map){var _8c=_8b.refreshMode,_8d=_8b.refreshInterval,_8e=_8b.viewRefreshMode,_8f=_8b.viewRefreshTime;if(_8c&&_8c.toLowerCase().indexOf("oninterval")!==-1&&_8d>0){this._stopAutoRefresh();this._timeoutHandle=setTimeout(this.refresh,_8d*1000);}if(_8e&&_8e.toLowerCase().indexOf("onstop")!==-1&&_8f>0){if(!this._extChgHandle){this._extChgHandle=_4f.connect(this._map,"onExtentChange",this,this._extentChanged);}}}}else{this._stopAutoRefresh();_4f.disconnect(this._extChgHandle);delete this._extChgHandle;}}},_stopAutoRefresh:function(){clearTimeout(this._timeoutHandle);this._timeoutHandle=null;},_getQueryParameters:function(map){map=map||this._map;var _90={},_91=this.linkInfo,_92=map&&map.extent,_93;if(this._url.query){_4f.mixin(_90,this._url.query);_93=!!this._url.query.token;}if(esri.id&&!_93){var _94=esri.id.findCredential(this._url.path);if(_94){_90.token=_94.token;}}if(_91){var _95=_91.viewFormat,_96=_91.httpQuery,_97=_91.viewBoundScale;if(_92&&_95){var _98=_92,_99=_92,sr=_92.spatialReference;if(sr){if(sr._isWebMercator()){_98=esri.geometry.webMercatorToGeographic(_92);}else{if(sr.wkid===4326){_99=esri.geometry.geographicToWebMercator(_92);}}}var _9a=_98.getCenter(),_9b=Math.max(_99.getWidth(),_99.getHeight());if(_97){_98=_98.expand(_97);}_95=_95.replace(/\[bboxWest\]/ig,_98.xmin).replace(/\[bboxEast\]/ig,_98.xmax).replace(/\[bboxSouth\]/ig,_98.ymin).replace(/\[bboxNorth\]/ig,_98.ymax).replace(/\[lookatLon\]/ig,_9a.x).replace(/\[lookatLat\]/ig,_9a.y).replace(/\[lookatRange\]/ig,_9b).replace(/\[lookatTilt\]/ig,0).replace(/\[lookatHeading\]/ig,0).replace(/\[lookatTerrainLon\]/ig,_9a.x).replace(/\[lookatTerrainLat\]/ig,_9a.y).replace(/\[lookatTerrainAlt\]/ig,0).replace(/\[cameraLon\]/ig,_9a.x).replace(/\[cameraLat\]/ig,_9a.y).replace(/\[cameraAlt\]/ig,_9b).replace(/\[horizFov\]/ig,60).replace(/\[vertFov\]/ig,60).replace(/\[horizPixels\]/ig,map.width).replace(/\[vertPixels\]/ig,map.height).replace(/\[terrainEnabled\]/ig,0);_4f.mixin(_90,_4f.queryToObject(_95));}if(_96){_96=_96.replace(/\[clientVersion\]/ig,esri.version).replace(/\[kmlVersion\]/ig,2.2).replace(/\[clientName\]/ig,"ArcGIS API for JavaScript").replace(/\[language\]/ig,_4f.locale);_4f.mixin(_90,_4f.queryToObject(_96));}}var _9c=[],_9d;for(_9d in _90){if(esri._isDefined(_90[_9d])){_9c.push(_9d+"="+_90[_9d]);}}_9c=_9c.join("&");return _9c?("?"+_9c):"";},_setMap:function(map,_9e){this._map=map;var div=this._div=_4f.create("div",null,_9e);_4f.style(div,"position","absolute");this._addInternalLayers();return div;},_unsetMap:function(map,_9f){if(this._io){this._io.cancel();}this._stopAutoRefresh();_4f.disconnect(this._extChgHandle);delete this._extChgHandle;this._removeInternalLayers();var div=this._div;if(div){_9f.removeChild(div);_4f.destroy(div);}this._map=this._wMap=this._div=null;},onVisibilityChange:function(_a0){if(!this.loaded){if(this.linkInfo&&_a0){if(!this._waitingForMap){this._parseKml(this._wMap);}}return;}this._fireUpdateStart();this._setInternalVisibility(this,_a0);this._checkAutoRefresh();this._fireUpdateEnd();},refresh:function(){if(!this.loaded||!this._map||this._io){return;}this._parseKml();},_extentChanged:function(){this._stopAutoRefresh();this._timeoutHandle=setTimeout(this.refresh,this.linkInfo.viewRefreshTime*1000);}});_4f.declare("esri.layers.KMLGroundOverlay",[esri.layers.MapImage],{constructor:function(_a1){if(esri._isDefined(this.visibility)){this.visible=!!this.visibility;}}});_4f.declare("esri.layers.KMLFolder",null,{constructor:function(_a2){_4f.mixin(this,_a2);if(esri._isDefined(this.visibility)){this.visible=!!this.visibility;}}});});},"dojox/charting/plot2d/Spider":function(){define("dojox/charting/plot2d/Spider",["dojo/_base/lang","dojo/_base/declare","dojo/_base/connect","dojo/_base/html","dojo/_base/array","dojo/dom-geometry","dojo/_base/fx","dojo/fx","dojo/_base/sniff","../Element","./_PlotEvents","dojo/_base/Color","dojox/color/_base","./common","../axis2d/common","../scaler/primitive","dojox/gfx","dojox/gfx/matrix","dojox/gfx/fx","dojox/lang/functional","dojox/lang/utils","dojo/fx/easing"],function(_a3,_a4,hub,_a5,arr,_a6,_a7,_a8,has,_a9,_aa,_ab,_ac,dc,da,_ad,g,m,_ae,df,du,_af){var _b0=0.2;var _b1=_a4("dojox.charting.plot2d.Spider",[_a9,_aa],{defaultParams:{labels:true,ticks:false,fixed:true,precision:1,labelOffset:-10,labelStyle:"default",htmlLabels:true,startAngle:-90,divisions:3,axisColor:"",axisWidth:0,spiderColor:"",spiderWidth:0,seriesWidth:0,seriesFillAlpha:0.2,spiderOrigin:0.16,markerSize:3,spiderType:"polygon",animationType:_af.backOut,axisTickFont:"",axisTickFontColor:"",axisFont:"",axisFontColor:""},optionalParams:{radius:0,font:"",fontColor:""},constructor:function(_b2,_b3){this.opt=_a3.clone(this.defaultParams);du.updateWithObject(this.opt,_b3);du.updateWithPattern(this.opt,_b3,this.optionalParams);this.series=[];this.dyn=[];this.datas={};this.labelKey=[];this.oldSeriePoints={};this.animations={};},clear:function(){this.dirty=true;this.dyn=[];this.series=[];this.datas={};this.labelKey=[];this.oldSeriePoints={};this.animations={};return this;},setAxis:function(_b4){return this;},addSeries:function(run){var _b5=false;this.series.push(run);for(var key in run.data){var val=run.data[key],_b6=this.datas[key];if(_b6){_b6.vlist.push(val);_b6.min=Math.min(_b6.min,val);_b6.max=Math.max(_b6.max,val);}else{this.datas[key]={min:val,max:val,vlist:[val]};}}if(this.labelKey.length<=0){for(var key in run.data){this.labelKey.push(key);}}return this;},getSeriesStats:function(){return dc.collectSimpleStats(this.series);},calculateAxes:function(dim){this.initializeScalers(dim,this.getSeriesStats());return this;},getRequiredColors:function(){return this.series.length;},initializeScalers:function(dim,_b7){if(this._hAxis){if(!this._hAxis.initialized()){this._hAxis.calculate(_b7.hmin,_b7.hmax,dim.width);}this._hScaler=this._hAxis.getScaler();}else{this._hScaler=_ad.buildScaler(_b7.hmin,_b7.hmax,dim.width);}if(this._vAxis){if(!this._vAxis.initialized()){this._vAxis.calculate(_b7.vmin,_b7.vmax,dim.height);}this._vScaler=this._vAxis.getScaler();}else{this._vScaler=_ad.buildScaler(_b7.vmin,_b7.vmax,dim.height);}return this;},render:function(dim,_b8){if(!this.dirty){return this;}this.dirty=false;this.cleanGroup();var s=this.group,t=this.chart.theme;this.resetEvents();if(!this.series||!this.series.length){return this;}var o=this.opt,ta=t.axis,rx=(dim.width-_b8.l-_b8.r)/2,ry=(dim.height-_b8.t-_b8.b)/2,r=Math.min(rx,ry),_b9=o.font||(ta.majorTick&&ta.majorTick.font)||(ta.tick&&ta.tick.font)||"normal normal normal 7pt Tahoma",_ba=o.axisFont||(ta.tick&&ta.tick.titleFont)||"normal normal normal 11pt Tahoma",_bb=o.axisTickFontColor||(ta.majorTick&&ta.majorTick.fontColor)||(ta.tick&&ta.tick.fontColor)||"silver",_bc=o.axisFontColor||(ta.tick&&ta.tick.titleFontColor)||"black",_bd=o.axisColor||(ta.tick&&ta.tick.axisColor)||"silver",_be=o.spiderColor||(ta.tick&&ta.tick.spiderColor)||"silver",_bf=o.axisWidth||(ta.stroke&&ta.stroke.width)||2,_c0=o.spiderWidth||(ta.stroke&&ta.stroke.width)||2,_c1=o.seriesWidth||(ta.stroke&&ta.stroke.width)||2,_c2=g.normalizedLength(g.splitFontString(_ba).size),_c3=m._degToRad(o.startAngle),_c4=_c3,_c5,_c6,_c7,_c8,_c9,_ca,_cb,_cc,_cd,_ce,_cf,ro=o.spiderOrigin,dv=o.divisions>=3?o.divisions:3,ms=o.markerSize,spt=o.spiderType,at=o.animationType,_d0=o.labelOffset<-10?o.labelOffset:-10,_d1=0.2;if(o.labels){_c8=arr.map(this.series,function(s){return s.name;},this);_c9=df.foldl1(df.map(_c8,function(_d2,i){var _d3=t.series.font;return g._base._getTextBox(_d2,{font:_d3}).w;},this),"Math.max(a, b)")/2;r=Math.min(rx-2*_c9,ry-_c2)+_d0;_ca=r-_d0;}if("radius" in o){r=o.radius;_ca=r-_d0;}r/=(1+_d1);var _d4={cx:_b8.l+rx,cy:_b8.t+ry,r:r};for(var i=this.series.length-1;i>=0;i--){var _d5=this.series[i];if(!this.dirty&&!_d5.dirty){t.skip();continue;}_d5.cleanGroup();var run=_d5.data;if(run!==null){var len=this._getObjectLength(run);if(!_cb||_cb.length<=0){_cb=[],_cc=[],_cf=[];this._buildPoints(_cb,len,_d4,r,_c4,true);this._buildPoints(_cc,len,_d4,r*ro,_c4,true);this._buildPoints(_cf,len,_d4,_ca,_c4);if(dv>2){_cd=[],_ce=[];for(var j=0;j<dv-2;j++){_cd[j]=[];this._buildPoints(_cd[j],len,_d4,r*(ro+(1-ro)*(j+1)/(dv-1)),_c4,true);_ce[j]=r*(ro+(1-ro)*(j+1)/(dv-1));}}}}}var _d6=s.createGroup(),_d7={color:_bd,width:_bf},_d8={color:_be,width:_c0};for(var j=_cb.length-1;j>=0;--j){var _d9=_cb[j],st={x:_d9.x+(_d9.x-_d4.cx)*_d1,y:_d9.y+(_d9.y-_d4.cy)*_d1},nd={x:_d9.x+(_d9.x-_d4.cx)*_d1/2,y:_d9.y+(_d9.y-_d4.cy)*_d1/2};_d6.createLine({x1:_d4.cx,y1:_d4.cy,x2:st.x,y2:st.y}).setStroke(_d7);this._drawArrow(_d6,st,nd,_d7);}var _da=s.createGroup();for(var j=_cf.length-1;j>=0;--j){var _d9=_cf[j],_db=g._base._getTextBox(this.labelKey[j],{font:_ba}).w||0,_dc=this.opt.htmlLabels&&g.renderer!="vml"?"html":"gfx",_dd=da.createText[_dc](this.chart,_da,(!_a6.isBodyLtr()&&_dc=="html")?(_d9.x+_db-dim.width):_d9.x,_d9.y,"middle",this.labelKey[j],_ba,_bc);if(this.opt.htmlLabels){this.htmlElements.push(_dd);}}var _de=s.createGroup();if(spt=="polygon"){_de.createPolyline(_cb).setStroke(_d8);_de.createPolyline(_cc).setStroke(_d8);if(_cd.length>0){for(var j=_cd.length-1;j>=0;--j){_de.createPolyline(_cd[j]).setStroke(_d8);}}}else{var _df=this._getObjectLength(this.datas);_de.createCircle({cx:_d4.cx,cy:_d4.cy,r:r}).setStroke(_d8);_de.createCircle({cx:_d4.cx,cy:_d4.cy,r:r*ro}).setStroke(_d8);if(_ce.length>0){for(var j=_ce.length-1;j>=0;--j){_de.createCircle({cx:_d4.cx,cy:_d4.cy,r:_ce[j]}).setStroke(_d8);}}}var _e0=s.createGroup(),len=this._getObjectLength(this.datas),k=0;for(var key in this.datas){var _e1=this.datas[key],min=_e1.min,max=_e1.max,_e2=max-min,end=_c4+2*Math.PI*k/len;for(var i=0;i<dv;i++){var _e3=min+_e2*i/(dv-1),_d9=this._getCoordinate(_d4,r*(ro+(1-ro)*i/(dv-1)),end);_e3=this._getLabel(_e3);var _db=g._base._getTextBox(_e3,{font:_b9}).w||0,_dc=this.opt.htmlLabels&&g.renderer!="vml"?"html":"gfx";if(this.opt.htmlLabels){this.htmlElements.push(da.createText[_dc](this.chart,_e0,(!_a6.isBodyLtr()&&_dc=="html")?(_d9.x+_db-dim.width):_d9.x,_d9.y,"start",_e3,_b9,_bb));}}k++;}this.chart.seriesShapes={};var _e4=[];for(var i=this.series.length-1;i>=0;i--){var _d5=this.series[i],run=_d5.data;if(run!==null){var _e5=[],k=0,_e6=[];for(var key in run){var _e1=this.datas[key],min=_e1.min,max=_e1.max,_e2=max-min,_e7=run[key],end=_c4+2*Math.PI*k/len,_d9=this._getCoordinate(_d4,r*(ro+(1-ro)*(_e7-min)/_e2),end);_e5.push(_d9);_e6.push({sname:_d5.name,key:key,data:_e7});k++;}_e5[_e5.length]=_e5[0];_e6[_e6.length]=_e6[0];var _e8=this._getBoundary(_e5),_e9=t.next("spider",[o,_d5]),ts=_d5.group,f=g.normalizeColor(_e9.series.fill),sk={color:_e9.series.fill,width:_c1};f.a=o.seriesFillAlpha;_d5.dyn={fill:f,stroke:sk};var _ea=this.oldSeriePoints[_d5.name];var cs=this._createSeriesEntry(ts,(_ea||_cc),_e5,f,sk,r,ro,ms,at);this.chart.seriesShapes[_d5.name]=cs;this.oldSeriePoints[_d5.name]=_e5;var po={element:"spider_poly",index:i,id:"spider_poly_"+_d5.name,run:_d5,plot:this,shape:cs.poly,parent:ts,brect:_e8,cx:_d4.cx,cy:_d4.cy,cr:r,f:f,s:s};this._connectEvents(po);var so={element:"spider_plot",index:i,id:"spider_plot_"+_d5.name,run:_d5,plot:this,shape:_d5.group};this._connectEvents(so);arr.forEach(cs.circles,function(c,i){var _eb=c.getShape(),co={element:"spider_circle",index:i,id:"spider_circle_"+_d5.name+i,run:_d5,plot:this,shape:c,parent:ts,tdata:_e6[i],cx:_e5[i].x,cy:_e5[i].y,f:f,s:s};this._connectEvents(co);},this);}}return this;},_createSeriesEntry:function(ts,_ec,sps,f,sk,r,ro,ms,at){var _ed=ts.createPolyline(_ec).setFill(f).setStroke(sk),_ee=[];for(var j=0;j<_ec.length;j++){var _ef=_ec[j],cr=ms;var _f0=ts.createCircle({cx:_ef.x,cy:_ef.y,r:cr}).setFill(f).setStroke(sk);_ee.push(_f0);}var _f1=arr.map(sps,function(np,j){var sp=_ec[j],_f2=new _a7.Animation({duration:1000,easing:at,curve:[sp.y,np.y]});var spl=_ed,sc=_ee[j];hub.connect(_f2,"onAnimate",function(y){var _f3=spl.getShape();_f3.points[j].y=y;spl.setShape(_f3);var _f4=sc.getShape();_f4.cy=y;sc.setShape(_f4);});return _f2;});var _f5=arr.map(sps,function(np,j){var sp=_ec[j],_f6=new _a7.Animation({duration:1000,easing:at,curve:[sp.x,np.x]});var spl=_ed,sc=_ee[j];hub.connect(_f6,"onAnimate",function(x){var _f7=spl.getShape();_f7.points[j].x=x;spl.setShape(_f7);var _f8=sc.getShape();_f8.cx=x;sc.setShape(_f8);});return _f6;});var _f9=_a8.combine(_f1.concat(_f5));_f9.play();return {group:ts,poly:_ed,circles:_ee};},plotEvent:function(o){var _fa=o.id?o.id:"default",a;if(_fa in this.animations){a=this.animations[_fa];a.anim&&a.anim.stop(true);}else{a=this.animations[_fa]={};}if(o.element=="spider_poly"){if(!a.color){var _fb=o.shape.getFill();if(!_fb||!(_fb instanceof _ab)){return;}a.color={start:_fb,end:_fc(_fb)};}var _fd=a.color.start,end=a.color.end;if(o.type=="onmouseout"){var t=_fd;_fd=end;end=t;}a.anim=_ae.animateFill({shape:o.shape,duration:800,easing:_af.backOut,color:{start:_fd,end:end}});a.anim.play();}else{if(o.element=="spider_circle"){var _fe,_ff,_100=1.5;if(o.type=="onmouseover"){_fe=m.identity;_ff=_100;var _101={type:"rect"};_101.x=o.cx;_101.y=o.cy;_101.width=_101.height=1;var lt=_a5.coords(this.chart.node,true);_101.x+=lt.x;_101.y+=lt.y;_101.x=Math.round(_101.x);_101.y=Math.round(_101.y);_101.width=Math.ceil(_101.width);_101.height=Math.ceil(_101.height);this.aroundRect=_101;var _102=["after","before"];dc.doIfLoaded("dijit/Tooltip",dojo.hitch(this,function(_103){_103.show(o.tdata.sname+"<br/>"+o.tdata.key+"<br/>"+o.tdata.data,this.aroundRect,_102);}));}else{_fe=m.scaleAt(_100,o.cx,o.cy);_ff=1/_100;dc.doIfLoaded("dijit/Tooltip",dojo.hitch(this,function(_104){this.aroundRect&&_104.hide(this.aroundRect);}));}var cs=o.shape.getShape(),_fe=m.scaleAt(_100,cs.cx,cs.cy),_105={shape:o.shape,duration:200,easing:_af.backOut,transform:[{name:"scaleAt",start:[1,cs.cx,cs.cy],end:[_ff,cs.cx,cs.cy]},_fe]};a.anim=_ae.animateTransform(_105);a.anim.play();}else{if(o.element=="spider_plot"){if(o.type=="onmouseover"&&!has("ie")){o.shape.moveToFront();}}}}},_getBoundary:function(_106){var xmax=_106[0].x,xmin=_106[0].x,ymax=_106[0].y,ymin=_106[0].y;for(var i=0;i<_106.length;i++){var _107=_106[i];xmax=Math.max(_107.x,xmax);ymax=Math.max(_107.y,ymax);xmin=Math.min(_107.x,xmin);ymin=Math.min(_107.y,ymin);}return {x:xmin,y:ymin,width:xmax-xmin,height:ymax-ymin};},_drawArrow:function(s,_108,end,_109){var len=Math.sqrt(Math.pow(end.x-_108.x,2)+Math.pow(end.y-_108.y,2)),sin=(end.y-_108.y)/len,cos=(end.x-_108.x)/len,_10a={x:end.x+(len/3)*(-sin),y:end.y+(len/3)*cos},_10b={x:end.x+(len/3)*sin,y:end.y+(len/3)*(-cos)};s.createPolyline([_108,_10a,_10b]).setFill(_109.color).setStroke(_109);},_buildPoints:function(_10c,_10d,_10e,_10f,_110,_111){for(var i=0;i<_10d;i++){var end=_110+2*Math.PI*i/_10d;_10c.push(this._getCoordinate(_10e,_10f,end));}if(_111){_10c.push(this._getCoordinate(_10e,_10f,_110+2*Math.PI));}},_getCoordinate:function(_112,_113,_114){return {x:_112.cx+_113*Math.cos(_114),y:_112.cy+_113*Math.sin(_114)};},_getObjectLength:function(obj){var _115=0;if(_a3.isObject(obj)){for(var key in obj){_115++;}}return _115;},_getLabel:function(_116){return dc.getLabel(_116,this.opt.fixed,this.opt.precision);}});function _fc(_117){var a=new _ac.Color(_117),x=a.toHsl();if(x.s==0){x.l=x.l<50?100:0;}else{x.s=100;if(x.l<50){x.l=75;}else{if(x.l>75){x.l=50;}else{x.l=x.l-50>75-x.l?50:75;}}}var _117=_ac.fromHsl(x);_117.a=0.7;return _117;};return _b1;});},"dojox/charting/Theme":function(){define("dojox/charting/Theme",["dojo/_base/lang","dojo/_base/array","dojo/_base/declare","dojo/_base/Color","dojox/color/_base","dojox/color/Palette","dojox/lang/utils","dojox/gfx/gradutils"],function(lang,arr,_118,_119,_11a,_11b,dlu,dgg){var _11c=_118("dojox.charting.Theme",null,{shapeSpaces:{shape:1,shapeX:1,shapeY:1},constructor:function(_11d){_11d=_11d||{};var def=_11c.defaultTheme;arr.forEach(["chart","plotarea","axis","series","marker","indicator"],function(name){this[name]=lang.delegate(def[name],_11d[name]);},this);if(_11d.seriesThemes&&_11d.seriesThemes.length){this.colors=null;this.seriesThemes=_11d.seriesThemes.slice(0);}else{this.seriesThemes=null;this.colors=(_11d.colors||_11c.defaultColors).slice(0);}this.markerThemes=null;if(_11d.markerThemes&&_11d.markerThemes.length){this.markerThemes=_11d.markerThemes.slice(0);}this.markers=_11d.markers?lang.clone(_11d.markers):lang.delegate(_11c.defaultMarkers);this.noGradConv=_11d.noGradConv;this.noRadialConv=_11d.noRadialConv;if(_11d.reverseFills){this.reverseFills();}this._current=0;this._buildMarkerArray();},clone:function(){var _11e=new _11c({chart:this.chart,plotarea:this.plotarea,axis:this.axis,series:this.series,marker:this.marker,colors:this.colors,markers:this.markers,indicator:this.indicator,seriesThemes:this.seriesThemes,markerThemes:this.markerThemes,noGradConv:this.noGradConv,noRadialConv:this.noRadialConv});arr.forEach(["clone","clear","next","skip","addMixin","post","getTick"],function(name){if(this.hasOwnProperty(name)){_11e[name]=this[name];}},this);return _11e;},clear:function(){this._current=0;},next:function(_11f,_120,_121){var _122=dlu.merge,_123,_124;if(this.colors){_123=lang.delegate(this.series);_124=lang.delegate(this.marker);var _125=new _119(this.colors[this._current%this.colors.length]),old;if(_123.stroke&&_123.stroke.color){_123.stroke=lang.delegate(_123.stroke);old=new _119(_123.stroke.color);_123.stroke.color=new _119(_125);_123.stroke.color.a=old.a;}else{_123.stroke={color:_125};}if(_124.stroke&&_124.stroke.color){_124.stroke=lang.delegate(_124.stroke);old=new _119(_124.stroke.color);_124.stroke.color=new _119(_125);_124.stroke.color.a=old.a;}else{_124.stroke={color:_125};}if(!_123.fill||_123.fill.type){_123.fill=_125;}else{old=new _119(_123.fill);_123.fill=new _119(_125);_123.fill.a=old.a;}if(!_124.fill||_124.fill.type){_124.fill=_125;}else{old=new _119(_124.fill);_124.fill=new _119(_125);_124.fill.a=old.a;}}else{_123=this.seriesThemes?_122(this.series,this.seriesThemes[this._current%this.seriesThemes.length]):this.series;_124=this.markerThemes?_122(this.marker,this.markerThemes[this._current%this.markerThemes.length]):_123;}var _126=_124&&_124.symbol||this._markers[this._current%this._markers.length];var _127={series:_123,marker:_124,symbol:_126};++this._current;if(_120){_127=this.addMixin(_127,_11f,_120);}if(_121){_127=this.post(_127,_11f);}return _127;},skip:function(){++this._current;},addMixin:function(_128,_129,_12a,_12b){if(lang.isArray(_12a)){arr.forEach(_12a,function(m){_128=this.addMixin(_128,_129,m);},this);}else{var t={};if("color" in _12a){if(_129=="line"||_129=="area"){lang.setObject("series.stroke.color",_12a.color,t);lang.setObject("marker.stroke.color",_12a.color,t);}else{lang.setObject("series.fill",_12a.color,t);}}arr.forEach(["stroke","outline","shadow","fill","font","fontColor","labelWiring"],function(name){var _12c="marker"+name.charAt(0).toUpperCase()+name.substr(1),b=_12c in _12a;if(name in _12a){lang.setObject("series."+name,_12a[name],t);if(!b){lang.setObject("marker."+name,_12a[name],t);}}if(b){lang.setObject("marker."+name,_12a[_12c],t);}});if("marker" in _12a){t.symbol=_12a.marker;}_128=dlu.merge(_128,t);}if(_12b){_128=this.post(_128,_129);}return _128;},post:function(_12d,_12e){var fill=_12d.series.fill,t;if(!this.noGradConv&&this.shapeSpaces[fill.space]&&fill.type=="linear"){if(_12e=="bar"){t={x1:fill.y1,y1:fill.x1,x2:fill.y2,y2:fill.x2};}else{if(!this.noRadialConv&&fill.space=="shape"&&(_12e=="slice"||_12e=="circle")){t={type:"radial",cx:0,cy:0,r:100};}}if(t){return dlu.merge(_12d,{series:{fill:t}});}}return _12d;},getTick:function(name,_12f){var tick=this.axis.tick,_130=name+"Tick",_131=dlu.merge;if(tick){if(this.axis[_130]){tick=_131(tick,this.axis[_130]);}}else{tick=this.axis[_130];}if(_12f){if(tick){if(_12f[_130]){tick=_131(tick,_12f[_130]);}}else{tick=_12f[_130];}}return tick;},inspectObjects:function(f){arr.forEach(["chart","plotarea","axis","series","marker","indicator"],function(name){f(this[name]);},this);if(this.seriesThemes){arr.forEach(this.seriesThemes,f);}if(this.markerThemes){arr.forEach(this.markerThemes,f);}},reverseFills:function(){this.inspectObjects(function(o){if(o&&o.fill){o.fill=dgg.reverse(o.fill);}});},addMarker:function(name,_132){this.markers[name]=_132;this._buildMarkerArray();},setMarkers:function(obj){this.markers=obj;this._buildMarkerArray();},_buildMarkerArray:function(){this._markers=[];for(var p in this.markers){this._markers.push(this.markers[p]);}}});lang.mixin(_11c,{defaultMarkers:{CIRCLE:"m-3,0 c0,-4 6,-4 6,0 m-6,0 c0,4 6,4 6,0",SQUARE:"m-3,-3 l0,6 6,0 0,-6 z",DIAMOND:"m0,-3 l3,3 -3,3 -3,-3 z",CROSS:"m0,-3 l0,6 m-3,-3 l6,0",X:"m-3,-3 l6,6 m0,-6 l-6,6",TRIANGLE:"m-3,3 l3,-6 3,6 z",TRIANGLE_INVERTED:"m-3,-3 l3,6 3,-6 z"},defaultColors:["#54544c","#858e94","#6e767a","#948585","#474747"],defaultTheme:{chart:{stroke:null,fill:"white",pageStyle:null,titleGap:20,titlePos:"top",titleFont:"normal normal bold 14pt Tahoma",titleFontColor:"#333"},plotarea:{stroke:null,fill:"white"},axis:{stroke:{color:"#333",width:1},tick:{color:"#666",position:"center",font:"normal normal normal 7pt Tahoma",fontColor:"#333",titleGap:15,titleFont:"normal normal normal 11pt Tahoma",titleFontColor:"#333",titleOrientation:"axis"},majorTick:{width:1,length:6},minorTick:{width:0.8,length:3},microTick:{width:0.5,length:1}},series:{stroke:{width:1.5,color:"#333"},outline:{width:0.1,color:"#ccc"},shadow:null,fill:"#ccc",font:"normal normal normal 8pt Tahoma",fontColor:"#000",labelWiring:{width:1,color:"#ccc"}},marker:{stroke:{width:1.5,color:"#333"},outline:{width:0.1,color:"#ccc"},shadow:null,fill:"#ccc",font:"normal normal normal 8pt Tahoma",fontColor:"#000"},indicator:{lineStroke:{width:1.5,color:"#333"},lineOutline:{width:0.1,color:"#ccc"},lineShadow:null,stroke:{width:1.5,color:"#333"},outline:{width:0.1,color:"#ccc"},shadow:null,fill:"#ccc",radius:3,font:"normal normal normal 10pt Tahoma",fontColor:"#000",markerFill:"#ccc",markerSymbol:"m-3,0 c0,-4 6,-4 6,0 m-6,0 c0,4 6,4 6,0",markerStroke:{width:1.5,color:"#333"},markerOutline:{width:0.1,color:"#ccc"},markerShadow:null}},defineColors:function(_133){_133=_133||{};var l,c=[],n=_133.num||5;if(_133.colors){l=_133.colors.length;for(var i=0;i<n;i++){c.push(_133.colors[i%l]);}return c;}if(_133.hue){var s=_133.saturation||100,st=_133.low||30,end=_133.high||90;l=(end+st)/2;return _11a.Palette.generate(_11a.fromHsv(_133.hue,s,l),"monochromatic").colors;}if(_133.generator){return _11a.Palette.generate(_133.base,_133.generator).colors;}return c;},generateGradient:function(_134,_135,_136){var fill=lang.delegate(_134);fill.colors=[{offset:0,color:_135},{offset:1,color:_136}];return fill;},generateHslColor:function(_137,_138){_137=new _119(_137);var hsl=_137.toHsl(),_139=_11a.fromHsl(hsl.h,hsl.s,_138);_139.a=_137.a;return _139;},generateHslGradient:function(_13a,_13b,_13c,_13d){_13a=new _119(_13a);var hsl=_13a.toHsl(),_13e=_11a.fromHsl(hsl.h,hsl.s,_13c),_13f=_11a.fromHsl(hsl.h,hsl.s,_13d);_13e.a=_13f.a=_13a.a;return _11c.generateGradient(_13b,_13e,_13f);}});return _11c;});},"dojox/charting/axis2d/Invisible":function(){define("dojox/charting/axis2d/Invisible",["dojo/_base/lang","dojo/_base/declare","./Base","../scaler/linear","dojox/gfx","dojox/lang/utils","dojox/lang/functional","dojo/string"],function(lang,_140,Base,lin,g,du,df,_141){var _142=du.merge,_143=4,_144=45;return _140("dojox.charting.axis2d.Invisible",Base,{defaultParams:{vertical:false,fixUpper:"none",fixLower:"none",natural:false,leftBottom:true,includeZero:false,fixed:true,majorLabels:true,minorTicks:true,minorLabels:true,microTicks:false,rotation:0},optionalParams:{min:0,max:1,from:0,to:1,majorTickStep:4,minorTickStep:2,microTickStep:1,labels:[],labelFunc:null,maxLabelSize:0,maxLabelCharCount:0,trailingSymbol:null},constructor:function(_145,_146){this.opt=lang.clone(this.defaultParams);du.updateWithObject(this.opt,_146);du.updateWithPattern(this.opt,_146,this.optionalParams);},dependOnData:function(){return !("min" in this.opt)||!("max" in this.opt);},clear:function(){delete this.scaler;delete this.ticks;this.dirty=true;return this;},initialized:function(){return "scaler" in this&&!(this.dirty&&this.dependOnData());},setWindow:function(_147,_148){this.scale=_147;this.offset=_148;return this.clear();},getWindowScale:function(){return "scale" in this?this.scale:1;},getWindowOffset:function(){return "offset" in this?this.offset:0;},_groupLabelWidth:function(_149,font,_14a){if(!_149.length){return 0;}if(lang.isObject(_149[0])){_149=df.map(_149,function(_14b){return _14b.text;});}if(_14a){_149=df.map(_149,function(_14c){return lang.trim(_14c).length==0?"":_14c.substring(0,_14a)+this.trailingSymbol;},this);}var s=_149.join("<br>");return g._base._getTextBox(s,{font:font}).w||0;},calculate:function(min,max,span,_14d){if(this.initialized()){return this;}var o=this.opt;this.labels="labels" in o?o.labels:_14d;this.scaler=lin.buildScaler(min,max,span,o);var tsb=this.scaler.bounds;if("scale" in this){o.from=tsb.lower+this.offset;o.to=(tsb.upper-tsb.lower)/this.scale+o.from;if(!isFinite(o.from)||isNaN(o.from)||!isFinite(o.to)||isNaN(o.to)||o.to-o.from>=tsb.upper-tsb.lower){delete o.from;delete o.to;delete this.scale;delete this.offset;}else{if(o.from<tsb.lower){o.to+=tsb.lower-o.from;o.from=tsb.lower;}else{if(o.to>tsb.upper){o.from+=tsb.upper-o.to;o.to=tsb.upper;}}this.offset=o.from-tsb.lower;}this.scaler=lin.buildScaler(min,max,span,o);tsb=this.scaler.bounds;if(this.scale==1&&this.offset==0){delete this.scale;delete this.offset;}}var ta=this.chart.theme.axis,_14e=0,_14f=o.rotation%360,_150=o.font||(ta.majorTick&&ta.majorTick.font)||(ta.tick&&ta.tick.font),size=_150?g.normalizedLength(g.splitFontString(_150).size):0,cosr=Math.abs(Math.cos(_14f*Math.PI/180)),sinr=Math.abs(Math.sin(_14f*Math.PI/180));if(_14f<0){_14f+=360;}if(size){if(this.vertical?_14f!=0&&_14f!=180:_14f!=90&&_14f!=270){if(this.labels){_14e=this._groupLabelWidth(this.labels,_150,o.maxLabelCharCount);}else{var _151=Math.ceil(Math.log(Math.max(Math.abs(tsb.from),Math.abs(tsb.to)))/Math.LN10),t=[];if(tsb.from<0||tsb.to<0){t.push("-");}t.push(_141.rep("9",_151));var _152=Math.floor(Math.log(tsb.to-tsb.from)/Math.LN10);if(_152>0){t.push(".");t.push(_141.rep("9",_152));}_14e=g._base._getTextBox(t.join(""),{font:_150}).w;}_14e=o.maxLabelSize?Math.min(o.maxLabelSize,_14e):_14e;}else{_14e=size;}switch(_14f){case 0:case 90:case 180:case 270:break;default:var gap1=Math.sqrt(_14e*_14e+size*size),gap2=this.vertical?size*cosr+_14e*sinr:_14e*cosr+size*sinr;_14e=Math.min(gap1,gap2);break;}}this.scaler.minMinorStep=_14e+_143;this.ticks=lin.buildTicks(this.scaler,o);return this;},getScaler:function(){return this.scaler;},getTicks:function(){return this.ticks;}});});},"esri/layers/MapImageLayer":function(){define(["dijit","dojo","dojox","dojo/require!esri/utils,esri/layers/layer,esri/geometry"],function(_153,dojo,_154){dojo.provide("esri.layers.MapImageLayer");dojo.require("esri.utils");dojo.require("esri.layers.layer");dojo.require("esri.geometry");dojo.declare("esri.layers.MapImageLayer",[esri.layers.Layer],{"-chains-":{constructor:"manual"},constructor:function(_155){this.inherited(arguments,[null,_155]);this._mapImages=[];var _156=dojo.hitch;this._panStart=_156(this,this._panStart);this._pan=_156(this,this._pan);this._extentChange=_156(this,this._extentChange);this._zoom=_156(this,this._zoom);this._zoomStart=_156(this,this._zoomStart);this._scale=_156(this,this._scale);this._resize=_156(this,this._resize);this.loaded=true;this.onLoad(this);},opacity:1,_transform:esri._getDOMAccessor("transform"),addImage:function(_157){var _158=this._mapImages.push(_157);_158=_158-1;_157._idx=_158;_157._layer=this;if(this._div){this._createImage(_157,_158);}},removeImage:function(_159){if(_159){var idx=_159._idx,_15a=this._mapImages;if(_15a[idx]===_159){delete _15a[idx];var node=_159._node;if(node){this._clearEvents(node);node.e_idx=node.e_bl=node.e_tr=node.e_l=node.e_t=node.e_w=node.e_h=null;if(node.parentNode){node.parentNode.removeChild(node);dojo.destroy(node);}}_159._node=_159._idx=_159._layer=null;}}},removeAllImages:function(){var _15b=this._mapImages,i,len=_15b.length;for(i=0;i<len;i++){var _15c=_15b[i];if(_15c){this.removeImage(_15c);}}this._mapImages=[];},getImages:function(){var _15d=this._mapImages,_15e=[],i,len=_15d.length;for(i=0;i<len;i++){if(_15d[i]){_15e.push(_15d[i]);}}return _15e;},setOpacity:function(_15f){if(this.opacity!=_15f){this.onOpacityChange(this.opacity=_15f);}},onOpacityChange:function(_160){var div=this._div,i,len,_161;if(div){if(!dojo.isIE||dojo.isIE>8){dojo.style(div,"opacity",_160);}else{_161=div.childNodes;len=_161.length;for(i=0;i<len;i++){dojo.style(_161[i],"opacity",_160);}}}},_createImage:function(_162,idx){var node=dojo.create("img");dojo.style(node,{position:"absolute"});if(dojo.isIE<=8){dojo.style(node,"opacity",this.opacity);}if(_162.rotation){var _163="rotate("+(360-_162.rotation)+"deg)";if(dojo.isIE<9){}else{dojo.style(node,this._transform,_163);dojo.style(node,"transform",_163);}}_162._node=node;node.e_idx=idx;node.e_layer=this;node.e_load=dojo.connect(node,"onload",esri.layers.MapImageLayer.prototype._imageLoaded);node.e_error=dojo.connect(node,"onerror",esri.layers.MapImageLayer.prototype._imageError);node.e_abort=dojo.connect(node,"onabort",esri.layers.MapImageLayer.prototype._imageError);node.src=_162.href;},_imageLoaded:function(evt,img){var node=img||evt.target||evt.currentTarget,self=node.e_layer,_164=self._mapImages[node.e_idx];if(self._map&&(self._map.__zooming||self._map.__panning)){self._standby.push(node);return;}self._clearEvents(node);if(!_164||_164._node!==node){return;}if(self._map){self._attach(_164);}},_imageError:function(evt){var node=evt.target||evt.currentTarget,self=node.e_layer,_165=self._mapImages[node.e_idx];self._clearEvents(node);if(_165){_165._node=null;}},_clearEvents:function(node){var _166=dojo.disconnect;_166(node.e_load);_166(node.e_error);_166(node.e_abort);node.e_load=node.e_error=node.e_abort=node.e_layer=null;},_attach:function(_167){var _168=_167.extent,_169,_16a=_168.spatialReference,_16b=this._sr,div=this._div,node=_167._node,_16c=new esri.geometry.Point({x:_168.xmin,y:_168.ymin}),_16d=new esri.geometry.Point({x:_168.xmax,y:_168.ymax});if(_16b.wkid){_169=(_16b._isWebMercator()&&_16a._isWebMercator())||(_16b.wkid===_16a.wkid);}else{if(_16b.wkt){_169=(_16b.wkt===_16a.wkt);}}if(!_169){if(_16b._isWebMercator()&&_16a.wkid===4326){_16c=esri.geometry.geographicToWebMercator(_16c);_16d=esri.geometry.geographicToWebMercator(_16d);}else{if(_16a._isWebMercator()&&_16b.wkid===4326){_16c=esri.geometry.webMercatorToGeographic(_16c);_16d=esri.geometry.webMercatorToGeographic(_16d);}}}node.e_bl=_16c;node.e_tr=_16d;if(_167.visible){this._setPos(node,div._left,div._top);(this._active||div).appendChild(node);}},_setPos:function(node,_16e,_16f){var _170=node.e_bl,_171=node.e_tr,map=this._map;_170=map.toScreen(_170);_171=map.toScreen(_171);var left=_170.x-_16e,top=_171.y-_16f,_172=Math.abs(_171.x-_170.x),_173=Math.abs(_170.y-_171.y),css={width:_172+"px",height:_173+"px"},_174=this._mapImages[node.e_idx];if(map.navigationMode==="css-transforms"){css[esri._css.names.transform]=esri._css.translate(left,top)+(_174.rotation?(" "+esri._css.rotate(360-_174.rotation)):"");}else{css.left=left+"px";css.top=top+"px";}dojo.style(node,css);node.e_l=left;node.e_t=top;node.e_w=_172;node.e_h=_173;},_setMap:function(map,_175){this._map=map;this._sr=map.spatialReference;var div=this._div=dojo.create("div",null,_175),_176=esri._css.names,css={position:"absolute"},vd=map.__visibleDelta;if(!dojo.isIE||dojo.isIE>8){css.opacity=this.opacity;}if(map.navigationMode==="css-transforms"){css[_176.transform]=esri._css.translate(vd.x,vd.y);dojo.style(div,css);div._left=vd.x;div._top=vd.y;css={position:"absolute",width:map.width+"px",height:map.height+"px",overflow:"visible"};this._active=dojo.create("div",null,div);dojo.style(this._active,css);this._passive=dojo.create("div",null,div);dojo.style(this._passive,css);}else{div._left=0;div._top=0;dojo.style(div,css);}this._standby=[];var _177=this._mapImages,i,len=_177.length;for(i=0;i<len;i++){var _178=_177[i],node=_178._node;if(!node){this._createImage(_178,_178._idx);}}this.onVisibilityChange(this.visible);return div;},_unsetMap:function(map,_179){this._disconnect();var div=this._div;if(div){var _17a=this._mapImages,i,len=_17a.length;for(i=0;i<len;i++){var _17b=_17a[i];if(_17b){var node=_17b._node;if(node){this._clearEvents(node);node.e_idx=node.e_bl=node.e_tr=node.e_l=node.e_t=node.e_w=node.e_h=null;}_17b._node=null;}}_179.removeChild(div);dojo.destroy(div);}this._map=this._div=this._sr=this._active=this._passive=this._standby=null;},onVisibilityChange:function(_17c){var div=this._div;if(div){if(_17c){this._redraw();this._connect(this._map);esri.show(div);}else{this._disconnect();esri.hide(div);}}},_connect:function(map){if(!this._connections){var _17d=dojo.connect,_17e=(map.navigationMode==="css-transforms");this._connections=[_17d(map,"onPanStart",this._panStart),_17d(map,"onPan",this._pan),_17d(map,"onExtentChange",this._extentChange),_17e&&_17d(map,"onZoomStart",this._zoomStart),_17e?_17d(map,"onScale",this._scale):_17d(map,"onZoom",this._zoom),_17e&&_17d(map,"onResize",this._resize)];}},_disconnect:function(){if(this._connections){dojo.forEach(this._connections,dojo.disconnect);this._connections=null;}},_panStart:function(){this._panL=this._div._left;this._panT=this._div._top;},_pan:function(_17f,_180){var div=this._div;div._left=this._panL+_180.x;div._top=this._panT+_180.y;if(this._map.navigationMode==="css-transforms"){dojo.style(div,esri._css.names.transform,esri._css.translate(div._left,div._top));}else{dojo.style(div,{left:div._left+"px",top:div._top+"px"});}},_extentChange:function(_181,_182,_183){if(_183){this._redraw(this._map.navigationMode==="css-transforms");}else{if(_182){this._pan(_181,_182);}}var i,_184=this._standby;if(_184&&_184.length){for(i=_184.length-1;i>=0;i--){this._imageLoaded(null,_184[i]);_184.splice(i,1);}}},_redraw:function(_185){if(_185){var _186=this._passive,_187=esri._css.names;dojo.style(_186,_187.transition,"none");this._moveImages(_186,this._active);dojo.style(_186,_187.transform,"none");}var div=this._active||this._div,_188=this._div._left,_189=this._div._top,i,len=div.childNodes.length,node;for(i=0;i<len;i++){node=div.childNodes[i];this._setPos(node,_188,_189);}},_zoom:function(_18a,_18b,_18c){var div=this._div,_18d=div._left,_18e=div._top,i,len=div.childNodes.length,node;for(i=0;i<len;i++){node=div.childNodes[i];var _18f=node.e_w*_18b,_190=node.e_h*_18b,_191=(_18c.x-_18d-node.e_l)*(_18f-node.e_w)/node.e_w,_192=(_18c.y-_18e-node.e_t)*(_190-node.e_h)/node.e_h;_191=isNaN(_191)?0:_191;_192=isNaN(_192)?0:_192;dojo.style(node,{left:(node.e_l-_191)+"px",top:(node.e_t-_192)+"px",width:_18f+"px",height:_190+"px"});}},_zoomStart:function(){this._moveImages(this._active,this._passive);},_moveImages:function(_193,dest){var _194=_193.childNodes,i,len=_194.length;if(len>0){for(i=len-1;i>=0;i--){dest.appendChild(_194[i]);}}},_scale:function(mtx,_195){var css={},_196=esri._css.names,_197=this._passive;dojo.style(_197,_196.transition,_195?"none":(_196.transformName+" "+esri.config.defaults.map.zoomDuration+"ms ease"));css[_196.transform]=esri._css.matrix(mtx);dojo.style(_197,_196.transform,esri._css.matrix(mtx));},_resize:function(_198,_199,_19a){dojo.style(this._active,{width:_199+"px",height:_19a+"px"});dojo.style(this._passive,{width:_199+"px",height:_19a+"px"});}});dojo.extend(esri.layers.MapImage,{visible:true,getLayer:function(){return this._layer;},getNode:function(){return this._node;},show:function(){if(!this.visible){this.visible=true;var node=this._node,_19b=this._layer,div;if(node){div=_19b&&_19b._div;if(div){_19b._setPos(node,div._left,div._top);(_19b._active||div).appendChild(node);}esri.show(node);}}},hide:function(){if(this.visible){this.visible=false;var node=this._node;if(node){esri.hide(node);if(node.parentNode){node.parentNode.removeChild(node);}}}}});});},"dojox/charting/plot2d/common":function(){define("dojox/charting/plot2d/common",["dojo/_base/lang","dojo/_base/array","dojo/_base/Color","dojox/gfx","dojox/lang/functional","../scaler/common"],function(lang,arr,_19c,g,df,sc){var _19d=lang.getObject("dojox.charting.plot2d.common",true);return lang.mixin(_19d,{doIfLoaded:sc.doIfLoaded,makeStroke:function(_19e){if(!_19e){return _19e;}if(typeof _19e=="string"||_19e instanceof _19c){_19e={color:_19e};}return g.makeParameters(g.defaultStroke,_19e);},augmentColor:function(_19f,_1a0){var t=new _19c(_19f),c=new _19c(_1a0);c.a=t.a;return c;},augmentStroke:function(_1a1,_1a2){var s=_19d.makeStroke(_1a1);if(s){s.color=_19d.augmentColor(s.color,_1a2);}return s;},augmentFill:function(fill,_1a3){var fc,c=new _19c(_1a3);if(typeof fill=="string"||fill instanceof _19c){return _19d.augmentColor(fill,_1a3);}return fill;},defaultStats:{vmin:Number.POSITIVE_INFINITY,vmax:Number.NEGATIVE_INFINITY,hmin:Number.POSITIVE_INFINITY,hmax:Number.NEGATIVE_INFINITY},collectSimpleStats:function(_1a4){var _1a5=lang.delegate(_19d.defaultStats);for(var i=0;i<_1a4.length;++i){var run=_1a4[i];for(var j=0;j<run.data.length;j++){if(run.data[j]!==null){if(typeof run.data[j]=="number"){var _1a6=_1a5.vmin,_1a7=_1a5.vmax;if(!("ymin" in run)||!("ymax" in run)){arr.forEach(run.data,function(val,i){if(val!==null){var x=i+1,y=val;if(isNaN(y)){y=0;}_1a5.hmin=Math.min(_1a5.hmin,x);_1a5.hmax=Math.max(_1a5.hmax,x);_1a5.vmin=Math.min(_1a5.vmin,y);_1a5.vmax=Math.max(_1a5.vmax,y);}});}if("ymin" in run){_1a5.vmin=Math.min(_1a6,run.ymin);}if("ymax" in run){_1a5.vmax=Math.max(_1a7,run.ymax);}}else{var _1a8=_1a5.hmin,_1a9=_1a5.hmax,_1a6=_1a5.vmin,_1a7=_1a5.vmax;if(!("xmin" in run)||!("xmax" in run)||!("ymin" in run)||!("ymax" in run)){arr.forEach(run.data,function(val,i){if(val!==null){var x="x" in val?val.x:i+1,y=val.y;if(isNaN(x)){x=0;}if(isNaN(y)){y=0;}_1a5.hmin=Math.min(_1a5.hmin,x);_1a5.hmax=Math.max(_1a5.hmax,x);_1a5.vmin=Math.min(_1a5.vmin,y);_1a5.vmax=Math.max(_1a5.vmax,y);}});}if("xmin" in run){_1a5.hmin=Math.min(_1a8,run.xmin);}if("xmax" in run){_1a5.hmax=Math.max(_1a9,run.xmax);}if("ymin" in run){_1a5.vmin=Math.min(_1a6,run.ymin);}if("ymax" in run){_1a5.vmax=Math.max(_1a7,run.ymax);}}break;}}}return _1a5;},calculateBarSize:function(_1aa,opt,_1ab){if(!_1ab){_1ab=1;}var gap=opt.gap,size=(_1aa-2*gap)/_1ab;if("minBarSize" in opt){size=Math.max(size,opt.minBarSize);}if("maxBarSize" in opt){size=Math.min(size,opt.maxBarSize);}size=Math.max(size,1);gap=(_1aa-size*_1ab)/2;return {size:size,gap:gap};},collectStackedStats:function(_1ac){var _1ad=lang.clone(_19d.defaultStats);if(_1ac.length){_1ad.hmin=Math.min(_1ad.hmin,1);_1ad.hmax=df.foldl(_1ac,"seed, run -> Math.max(seed, run.data.length)",_1ad.hmax);for(var i=0;i<_1ad.hmax;++i){var v=_1ac[0].data[i];v=v&&(typeof v=="number"?v:v.y);if(isNaN(v)){v=0;}_1ad.vmin=Math.min(_1ad.vmin,v);for(var j=1;j<_1ac.length;++j){var t=_1ac[j].data[i];t=t&&(typeof t=="number"?t:t.y);if(isNaN(t)){t=0;}v+=t;}_1ad.vmax=Math.max(_1ad.vmax,v);}}return _1ad;},curve:function(a,_1ae){var _1af=a.slice(0);if(_1ae=="x"){_1af[_1af.length]=arr[0];}var p=arr.map(_1af,function(item,i){if(i==0){return "M"+item.x+","+item.y;}if(!isNaN(_1ae)){var dx=item.x-_1af[i-1].x,dy=_1af[i-1].y;return "C"+(item.x-(_1ae-1)*(dx/_1ae))+","+dy+" "+(item.x-(dx/_1ae))+","+item.y+" "+item.x+","+item.y;}else{if(_1ae=="X"||_1ae=="x"||_1ae=="S"){var p0,p1=_1af[i-1],p2=_1af[i],p3;var bz1x,bz1y,bz2x,bz2y;var f=1/6;if(i==1){if(_1ae=="x"){p0=_1af[_1af.length-2];}else{p0=p1;}f=1/3;}else{p0=_1af[i-2];}if(i==(_1af.length-1)){if(_1ae=="x"){p3=_1af[1];}else{p3=p2;}f=1/3;}else{p3=_1af[i+1];}var p1p2=Math.sqrt((p2.x-p1.x)*(p2.x-p1.x)+(p2.y-p1.y)*(p2.y-p1.y));var p0p2=Math.sqrt((p2.x-p0.x)*(p2.x-p0.x)+(p2.y-p0.y)*(p2.y-p0.y));var p1p3=Math.sqrt((p3.x-p1.x)*(p3.x-p1.x)+(p3.y-p1.y)*(p3.y-p1.y));var _1b0=p0p2*f;var _1b1=p1p3*f;if(_1b0>p1p2/2&&_1b1>p1p2/2){_1b0=p1p2/2;_1b1=p1p2/2;}else{if(_1b0>p1p2/2){_1b0=p1p2/2;_1b1=p1p2/2*p1p3/p0p2;}else{if(_1b1>p1p2/2){_1b1=p1p2/2;_1b0=p1p2/2*p0p2/p1p3;}}}if(_1ae=="S"){if(p0==p1){_1b0=0;}if(p2==p3){_1b1=0;}}bz1x=p1.x+_1b0*(p2.x-p0.x)/p0p2;bz1y=p1.y+_1b0*(p2.y-p0.y)/p0p2;bz2x=p2.x-_1b1*(p3.x-p1.x)/p1p3;bz2y=p2.y-_1b1*(p3.y-p1.y)/p1p3;}}return "C"+(bz1x+","+bz1y+" "+bz2x+","+bz2y+" "+p2.x+","+p2.y);});return p.join(" ");},getLabel:function(_1b2,_1b3,_1b4){return sc.doIfLoaded("dojo/number",function(_1b5){return (_1b3?_1b5.format(_1b2,{places:_1b4}):_1b5.format(_1b2))||"";},function(){return _1b3?_1b2.toFixed(_1b4):_1b2.toString();});}});});},"dojox/gfx/shape":function(){define("dojox/gfx/shape",["./_base","dojo/_base/lang","dojo/_base/declare","dojo/_base/window","dojo/_base/sniff","dojo/_base/connect","dojo/_base/array","dojo/dom-construct","dojo/_base/Color","./matrix"],function(g,lang,_1b6,win,has,_1b7,arr,_1b8,_1b9,_1ba){var _1bb=g.shape={};var _1bc={};var _1bd={};_1bb.register=function(_1be){var t=_1be.declaredClass.split(".").pop();var i=t in _1bc?++_1bc[t]:((_1bc[t]=0));var uid=t+i;_1bd[uid]=_1be;return uid;};_1bb.byId=function(id){return _1bd[id];};_1bb.dispose=function(_1bf){delete _1bd[_1bf.getUID()];};_1b6("dojox.gfx.shape.Shape",null,{constructor:function(){this.rawNode=null;this.shape=null;this.matrix=null;this.fillStyle=null;this.strokeStyle=null;this.bbox=null;this.parent=null;this.parentMatrix=null;var uid=_1bb.register(this);this.getUID=function(){return uid;};},getNode:function(){return this.rawNode;},getShape:function(){return this.shape;},getTransform:function(){return this.matrix;},getFill:function(){return this.fillStyle;},getStroke:function(){return this.strokeStyle;},getParent:function(){return this.parent;},getBoundingBox:function(){return this.bbox;},getTransformedBoundingBox:function(){var b=this.getBoundingBox();if(!b){return null;}var m=this._getRealMatrix(),gm=_1ba;return [gm.multiplyPoint(m,b.x,b.y),gm.multiplyPoint(m,b.x+b.width,b.y),gm.multiplyPoint(m,b.x+b.width,b.y+b.height),gm.multiplyPoint(m,b.x,b.y+b.height)];},getEventSource:function(){return this.rawNode;},setShape:function(_1c0){this.shape=g.makeParameters(this.shape,_1c0);this.bbox=null;return this;},setFill:function(fill){if(!fill){this.fillStyle=null;return this;}var f=null;if(typeof (fill)=="object"&&"type" in fill){switch(fill.type){case "linear":f=g.makeParameters(g.defaultLinearGradient,fill);break;case "radial":f=g.makeParameters(g.defaultRadialGradient,fill);break;case "pattern":f=g.makeParameters(g.defaultPattern,fill);break;}}else{f=g.normalizeColor(fill);}this.fillStyle=f;return this;},setStroke:function(_1c1){if(!_1c1){this.strokeStyle=null;return this;}if(typeof _1c1=="string"||lang.isArray(_1c1)||_1c1 instanceof _1b9){_1c1={color:_1c1};}var s=this.strokeStyle=g.makeParameters(g.defaultStroke,_1c1);s.color=g.normalizeColor(s.color);return this;},setTransform:function(_1c2){this.matrix=_1ba.clone(_1c2?_1ba.normalize(_1c2):_1ba.identity);return this._applyTransform();},_applyTransform:function(){return this;},moveToFront:function(){var p=this.getParent();if(p){p._moveChildToFront(this);this._moveToFront();}return this;},moveToBack:function(){var p=this.getParent();if(p){p._moveChildToBack(this);this._moveToBack();}return this;},_moveToFront:function(){},_moveToBack:function(){},applyRightTransform:function(_1c3){return _1c3?this.setTransform([this.matrix,_1c3]):this;},applyLeftTransform:function(_1c4){return _1c4?this.setTransform([_1c4,this.matrix]):this;},applyTransform:function(_1c5){return _1c5?this.setTransform([this.matrix,_1c5]):this;},removeShape:function(_1c6){if(this.parent){this.parent.remove(this,_1c6);}return this;},_setParent:function(_1c7,_1c8){this.parent=_1c7;return this._updateParentMatrix(_1c8);},_updateParentMatrix:function(_1c9){this.parentMatrix=_1c9?_1ba.clone(_1c9):null;return this._applyTransform();},_getRealMatrix:function(){var m=this.matrix;var p=this.parent;while(p){if(p.matrix){m=_1ba.multiply(p.matrix,m);}p=p.parent;}return m;}});_1bb._eventsProcessing={connect:function(name,_1ca,_1cb){return _1b7.connect(this.getEventSource(),name,_1bb.fixCallback(this,g.fixTarget,_1ca,_1cb));},disconnect:function(_1cc){_1b7.disconnect(_1cc);}};_1bb.fixCallback=function(_1cd,_1ce,_1cf,_1d0){if(!_1d0){_1d0=_1cf;_1cf=null;}if(lang.isString(_1d0)){_1cf=_1cf||win.global;if(!_1cf[_1d0]){throw (["dojox.gfx.shape.fixCallback: scope[\"",_1d0,"\"] is null (scope=\"",_1cf,"\")"].join(""));}return function(e){return _1ce(e,_1cd)?_1cf[_1d0].apply(_1cf,arguments||[]):undefined;};}return !_1cf?function(e){return _1ce(e,_1cd)?_1d0.apply(_1cf,arguments):undefined;}:function(e){return _1ce(e,_1cd)?_1d0.apply(_1cf,arguments||[]):undefined;};};lang.extend(_1bb.Shape,_1bb._eventsProcessing);_1bb.Container={_init:function(){this.children=[];},openBatch:function(){},closeBatch:function(){},add:function(_1d1){var _1d2=_1d1.getParent();if(_1d2){_1d2.remove(_1d1,true);}this.children.push(_1d1);return _1d1._setParent(this,this._getRealMatrix());},remove:function(_1d3,_1d4){for(var i=0;i<this.children.length;++i){if(this.children[i]==_1d3){if(_1d4){}else{_1d3.parent=null;_1d3.parentMatrix=null;}this.children.splice(i,1);break;}}return this;},clear:function(){var _1d5;for(var i=0;i<this.children.length;++i){_1d5=this.children[i];_1d5.parent=null;_1d5.parentMatrix=null;}this.children=[];return this;},_moveChildToFront:function(_1d6){for(var i=0;i<this.children.length;++i){if(this.children[i]==_1d6){this.children.splice(i,1);this.children.push(_1d6);break;}}return this;},_moveChildToBack:function(_1d7){for(var i=0;i<this.children.length;++i){if(this.children[i]==_1d7){this.children.splice(i,1);this.children.unshift(_1d7);break;}}return this;}};_1b6("dojox.gfx.shape.Surface",null,{constructor:function(){this.rawNode=null;this._parent=null;this._nodes=[];this._events=[];},destroy:function(){arr.forEach(this._nodes,_1b8.destroy);this._nodes=[];arr.forEach(this._events,_1b7.disconnect);this._events=[];this.rawNode=null;if(has("ie")){while(this._parent.lastChild){_1b8.destroy(this._parent.lastChild);}}else{this._parent.innerHTML="";}this._parent=null;},getEventSource:function(){return this.rawNode;},_getRealMatrix:function(){return null;},isLoaded:true,onLoad:function(_1d8){},whenLoaded:function(_1d9,_1da){var f=lang.hitch(_1d9,_1da);if(this.isLoaded){f(this);}else{var h=_1b7.connect(this,"onLoad",function(_1db){_1b7.disconnect(h);f(_1db);});}}});lang.extend(_1bb.Surface,_1bb._eventsProcessing);_1b6("dojox.gfx.Point",null,{});_1b6("dojox.gfx.Rectangle",null,{});_1b6("dojox.gfx.shape.Rect",_1bb.Shape,{constructor:function(_1dc){this.shape=g.getDefault("Rect");this.rawNode=_1dc;},getBoundingBox:function(){return this.shape;}});_1b6("dojox.gfx.shape.Ellipse",_1bb.Shape,{constructor:function(_1dd){this.shape=g.getDefault("Ellipse");this.rawNode=_1dd;},getBoundingBox:function(){if(!this.bbox){var _1de=this.shape;this.bbox={x:_1de.cx-_1de.rx,y:_1de.cy-_1de.ry,width:2*_1de.rx,height:2*_1de.ry};}return this.bbox;}});_1b6("dojox.gfx.shape.Circle",_1bb.Shape,{constructor:function(_1df){this.shape=g.getDefault("Circle");this.rawNode=_1df;},getBoundingBox:function(){if(!this.bbox){var _1e0=this.shape;this.bbox={x:_1e0.cx-_1e0.r,y:_1e0.cy-_1e0.r,width:2*_1e0.r,height:2*_1e0.r};}return this.bbox;}});_1b6("dojox.gfx.shape.Line",_1bb.Shape,{constructor:function(_1e1){this.shape=g.getDefault("Line");this.rawNode=_1e1;},getBoundingBox:function(){if(!this.bbox){var _1e2=this.shape;this.bbox={x:Math.min(_1e2.x1,_1e2.x2),y:Math.min(_1e2.y1,_1e2.y2),width:Math.abs(_1e2.x2-_1e2.x1),height:Math.abs(_1e2.y2-_1e2.y1)};}return this.bbox;}});_1b6("dojox.gfx.shape.Polyline",_1bb.Shape,{constructor:function(_1e3){this.shape=g.getDefault("Polyline");this.rawNode=_1e3;},setShape:function(_1e4,_1e5){if(_1e4&&_1e4 instanceof Array){this.inherited(arguments,[{points:_1e4}]);if(_1e5&&this.shape.points.length){this.shape.points.push(this.shape.points[0]);}}else{this.inherited(arguments,[_1e4]);}return this;},_normalizePoints:function(){var p=this.shape.points,l=p&&p.length;if(l&&typeof p[0]=="number"){var _1e6=[];for(var i=0;i<l;i+=2){_1e6.push({x:p[i],y:p[i+1]});}this.shape.points=_1e6;}},getBoundingBox:function(){if(!this.bbox&&this.shape.points.length){var p=this.shape.points;var l=p.length;var t=p[0];var bbox={l:t.x,t:t.y,r:t.x,b:t.y};for(var i=1;i<l;++i){t=p[i];if(bbox.l>t.x){bbox.l=t.x;}if(bbox.r<t.x){bbox.r=t.x;}if(bbox.t>t.y){bbox.t=t.y;}if(bbox.b<t.y){bbox.b=t.y;}}this.bbox={x:bbox.l,y:bbox.t,width:bbox.r-bbox.l,height:bbox.b-bbox.t};}return this.bbox;}});_1b6("dojox.gfx.shape.Image",_1bb.Shape,{constructor:function(_1e7){this.shape=g.getDefault("Image");this.rawNode=_1e7;},getBoundingBox:function(){return this.shape;},setStroke:function(){return this;},setFill:function(){return this;}});_1b6("dojox.gfx.shape.Text",_1bb.Shape,{constructor:function(_1e8){this.fontStyle=null;this.shape=g.getDefault("Text");this.rawNode=_1e8;},getFont:function(){return this.fontStyle;},setFont:function(_1e9){this.fontStyle=typeof _1e9=="string"?g.splitFontString(_1e9):g.makeParameters(g.defaultFont,_1e9);this._setFont();return this;}});_1bb.Creator={createShape:function(_1ea){switch(_1ea.type){case g.defaultPath.type:return this.createPath(_1ea);case g.defaultRect.type:return this.createRect(_1ea);case g.defaultCircle.type:return this.createCircle(_1ea);case g.defaultEllipse.type:return this.createEllipse(_1ea);case g.defaultLine.type:return this.createLine(_1ea);case g.defaultPolyline.type:return this.createPolyline(_1ea);case g.defaultImage.type:return this.createImage(_1ea);case g.defaultText.type:return this.createText(_1ea);case g.defaultTextPath.type:return this.createTextPath(_1ea);}return null;},createGroup:function(){return this.createObject(g.Group);},createRect:function(rect){return this.createObject(g.Rect,rect);},createEllipse:function(_1eb){return this.createObject(g.Ellipse,_1eb);},createCircle:function(_1ec){return this.createObject(g.Circle,_1ec);},createLine:function(line){return this.createObject(g.Line,line);},createPolyline:function(_1ed){return this.createObject(g.Polyline,_1ed);},createImage:function(_1ee){return this.createObject(g.Image,_1ee);},createText:function(text){return this.createObject(g.Text,text);},createPath:function(path){return this.createObject(g.Path,path);},createTextPath:function(text){return this.createObject(g.TextPath,{}).setText(text);},createObject:function(_1ef,_1f0){return null;}};return _1bb;});},"dojox/charting/action2d/Tooltip":function(){define("dojox/charting/action2d/Tooltip",["dojo/_base/kernel","dijit/Tooltip","dojo/_base/lang","dojo/_base/html","dojo/_base/declare","./PlotAction","dojox/gfx/matrix","dojox/lang/functional","dojox/lang/functional/scan","dojox/lang/functional/fold"],function(dojo,_1f1,lang,html,_1f2,_1f3,m,df,dfs,dff){var _1f4=function(o){var t=o.run&&o.run.data&&o.run.data[o.index];if(t&&typeof t!="number"&&(t.tooltip||t.text)){return t.tooltip||t.text;}if(o.element=="candlestick"){return "<table cellpadding=\"1\" cellspacing=\"0\" border=\"0\" style=\"font-size:0.9em;\">"+"<tr><td>Open:</td><td align=\"right\"><strong>"+o.data.open+"</strong></td></tr>"+"<tr><td>High:</td><td align=\"right\"><strong>"+o.data.high+"</strong></td></tr>"+"<tr><td>Low:</td><td align=\"right\"><strong>"+o.data.low+"</strong></td></tr>"+"<tr><td>Close:</td><td align=\"right\"><strong>"+o.data.close+"</strong></td></tr>"+(o.data.mid!==undefined?"<tr><td>Mid:</td><td align=\"right\"><strong>"+o.data.mid+"</strong></td></tr>":"")+"</table>";}return o.element=="bar"?o.x:o.y;};var pi4=Math.PI/4,pi2=Math.PI/2;return _1f2("dojox.charting.action2d.Tooltip",_1f3,{defaultParams:{text:_1f4},optionalParams:{},constructor:function(_1f5,plot,_1f6){this.text=_1f6&&_1f6.text?_1f6.text:_1f4;this.connect();},process:function(o){if(o.type==="onplotreset"||o.type==="onmouseout"){_1f1.hide(this.aroundRect);this.aroundRect=null;if(o.type==="onplotreset"){delete this.angles;}return;}if(!o.shape||o.type!=="onmouseover"){return;}var _1f7={type:"rect"},_1f8=["after","before"];switch(o.element){case "marker":_1f7.x=o.cx;_1f7.y=o.cy;_1f7.w=_1f7.h=1;break;case "circle":_1f7.x=o.cx-o.cr;_1f7.y=o.cy-o.cr;_1f7.w=_1f7.h=2*o.cr;break;case "column":_1f8=["above","below"];case "bar":_1f7=lang.clone(o.shape.getShape());_1f7.w=_1f7.width;_1f7.h=_1f7.height;break;case "candlestick":_1f7.x=o.x;_1f7.y=o.y;_1f7.w=o.width;_1f7.h=o.height;break;default:if(!this.angles){if(typeof o.run.data[0]=="number"){this.angles=df.map(df.scanl(o.run.data,"+",0),"* 2 * Math.PI / this",df.foldl(o.run.data,"+",0));}else{this.angles=df.map(df.scanl(o.run.data,"a + b.y",0),"* 2 * Math.PI / this",df.foldl(o.run.data,"a + b.y",0));}}var _1f9=m._degToRad(o.plot.opt.startAngle),_1fa=(this.angles[o.index]+this.angles[o.index+1])/2+_1f9;_1f7.x=o.cx+o.cr*Math.cos(_1fa);_1f7.y=o.cy+o.cr*Math.sin(_1fa);_1f7.w=_1f7.h=1;if(_1fa<pi4){}else{if(_1fa<pi2+pi4){_1f8=["below","above"];}else{if(_1fa<Math.PI+pi4){_1f8=["before","after"];}else{if(_1fa<2*Math.PI-pi4){_1f8=["above","below"];}}}}break;}var lt=this.chart.getCoords();_1f7.x+=lt.x;_1f7.y+=lt.y;_1f7.x=Math.round(_1f7.x);_1f7.y=Math.round(_1f7.y);_1f7.w=Math.ceil(_1f7.w);_1f7.h=Math.ceil(_1f7.h);this.aroundRect=_1f7;var _1fb=this.text(o);if(this.chart.getTextDir){var _1fc=(html.style(this.chart.node,"direction")=="rtl");var _1fd=(this.chart.getTextDir(_1fb)=="rtl");}if(_1fb){if(_1fd&&!_1fc){_1f1.show("<span dir = 'rtl'>"+_1fb+"</span>",this.aroundRect,_1f8);}else{if(!_1fd&&_1fc){_1f1.show("<span dir = 'ltr'>"+_1fb+"</span>",this.aroundRect,_1f8);}else{_1f1.show(_1fb,this.aroundRect,_1f8);}}}}});});},"dojox/charting/plot2d/Grid":function(){define("dojox/charting/plot2d/Grid",["dojo/_base/lang","dojo/_base/declare","dojo/_base/connect","dojo/_base/array","../Element","./common","dojox/lang/utils","dojox/gfx/fx"],function(lang,_1fe,hub,arr,_1ff,dc,du,fx){return _1fe("dojox.charting.plot2d.Grid",_1ff,{defaultParams:{hAxis:"x",vAxis:"y",hMajorLines:true,hMinorLines:false,vMajorLines:true,vMinorLines:false,hStripes:"none",vStripes:"none",animate:null,enableCache:false},optionalParams:{},constructor:function(_200,_201){this.opt=lang.clone(this.defaultParams);du.updateWithObject(this.opt,_201);this.hAxis=this.opt.hAxis;this.vAxis=this.opt.vAxis;this.dirty=true;this.animate=this.opt.animate;this.zoom=null,this.zoomQueue=[];this.lastWindow={vscale:1,hscale:1,xoffset:0,yoffset:0};if(this.opt.enableCache){this._lineFreePool=[];this._lineUsePool=[];}},clear:function(){this._hAxis=null;this._vAxis=null;this.dirty=true;return this;},setAxis:function(axis){if(axis){this[axis.vertical?"_vAxis":"_hAxis"]=axis;}return this;},addSeries:function(run){return this;},getSeriesStats:function(){return lang.delegate(dc.defaultStats);},initializeScalers:function(){return this;},isDirty:function(){return this.dirty||this._hAxis&&this._hAxis.dirty||this._vAxis&&this._vAxis.dirty;},performZoom:function(dim,_202){var vs=this._vAxis.scale||1,hs=this._hAxis.scale||1,_203=dim.height-_202.b,_204=this._hAxis.getScaler().bounds,_205=(_204.from-_204.lower)*_204.scale,_206=this._vAxis.getScaler().bounds,_207=(_206.from-_206.lower)*_206.scale,_208=vs/this.lastWindow.vscale,_209=hs/this.lastWindow.hscale,_20a=(this.lastWindow.xoffset-_205)/((this.lastWindow.hscale==1)?hs:this.lastWindow.hscale),_20b=(_207-this.lastWindow.yoffset)/((this.lastWindow.vscale==1)?vs:this.lastWindow.vscale),_20c=this.group,anim=fx.animateTransform(lang.delegate({shape:_20c,duration:1200,transform:[{name:"translate",start:[0,0],end:[_202.l*(1-_209),_203*(1-_208)]},{name:"scale",start:[1,1],end:[_209,_208]},{name:"original"},{name:"translate",start:[0,0],end:[_20a,_20b]}]},this.zoom));lang.mixin(this.lastWindow,{vscale:vs,hscale:hs,xoffset:_205,yoffset:_207});this.zoomQueue.push(anim);hub.connect(anim,"onEnd",this,function(){this.zoom=null;this.zoomQueue.shift();if(this.zoomQueue.length>0){this.zoomQueue[0].play();}});if(this.zoomQueue.length==1){this.zoomQueue[0].play();}return this;},getRequiredColors:function(){return 0;},cleanGroup:function(){this.inherited(arguments);if(this.opt.enableCache){this._lineFreePool=this._lineFreePool.concat(this._lineUsePool);this._lineUsePool=[];}},createLine:function(_20d,_20e){var line;if(this.opt.enableCache&&this._lineFreePool.length>0){line=this._lineFreePool.pop();line.setShape(_20e);_20d.add(line);}else{line=_20d.createLine(_20e);}if(this.opt.enableCache){this._lineUsePool.push(line);}return line;},render:function(dim,_20f){if(this.zoom){return this.performZoom(dim,_20f);}this.dirty=this.isDirty();if(!this.dirty){return this;}this.cleanGroup();var s=this.group,ta=this.chart.theme.axis;try{var _210=this._vAxis.getScaler(),vt=_210.scaler.getTransformerFromModel(_210),_211=this._vAxis.getTicks();if(_211!=null){if(this.opt.hMinorLines){arr.forEach(_211.minor,function(tick){var y=dim.height-_20f.b-vt(tick.value);var _212=this.createLine(s,{x1:_20f.l,y1:y,x2:dim.width-_20f.r,y2:y}).setStroke(ta.minorTick);if(this.animate){this._animateGrid(_212,"h",_20f.l,_20f.r+_20f.l-dim.width);}},this);}if(this.opt.hMajorLines){arr.forEach(_211.major,function(tick){var y=dim.height-_20f.b-vt(tick.value);var _213=this.createLine(s,{x1:_20f.l,y1:y,x2:dim.width-_20f.r,y2:y}).setStroke(ta.majorTick);if(this.animate){this._animateGrid(_213,"h",_20f.l,_20f.r+_20f.l-dim.width);}},this);}}}catch(e){}try{var _214=this._hAxis.getScaler(),ht=_214.scaler.getTransformerFromModel(_214),_211=this._hAxis.getTicks();if(this!=null){if(_211&&this.opt.vMinorLines){arr.forEach(_211.minor,function(tick){var x=_20f.l+ht(tick.value);var _215=this.createLine(s,{x1:x,y1:_20f.t,x2:x,y2:dim.height-_20f.b}).setStroke(ta.minorTick);if(this.animate){this._animateGrid(_215,"v",dim.height-_20f.b,dim.height-_20f.b-_20f.t);}},this);}if(_211&&this.opt.vMajorLines){arr.forEach(_211.major,function(tick){var x=_20f.l+ht(tick.value);var _216=this.createLine(s,{x1:x,y1:_20f.t,x2:x,y2:dim.height-_20f.b}).setStroke(ta.majorTick);if(this.animate){this._animateGrid(_216,"v",dim.height-_20f.b,dim.height-_20f.b-_20f.t);}},this);}}}catch(e){}this.dirty=false;return this;},_animateGrid:function(_217,type,_218,size){var _219=type=="h"?[_218,0]:[0,_218];var _21a=type=="h"?[1/size,1]:[1,1/size];fx.animateTransform(lang.delegate({shape:_217,duration:1200,transform:[{name:"translate",start:_219,end:[0,0]},{name:"scale",start:_21a,end:[1,1]},{name:"original"}]},this.animate)).play();}});});},"dojox/charting/plot2d/Markers":function(){define("dojox/charting/plot2d/Markers",["dojo/_base/declare","./Default"],function(_21b,_21c){return _21b("dojox.charting.plot2d.Markers",_21c,{constructor:function(){this.opt.markers=true;}});});},"dojox/lang/functional/sequence":function(){define("dojox/lang/functional/sequence",["dojo/_base/lang","./lambda"],function(lang,df){lang.mixin(df,{repeat:function(n,f,z,o){o=o||dojo.global;f=df.lambda(f);var t=new Array(n),i=1;t[0]=z;for(;i<n;t[i]=z=f.call(o,z),++i){}return t;},until:function(pr,f,z,o){o=o||dojo.global;f=df.lambda(f);pr=df.lambda(pr);var t=[];for(;!pr.call(o,z);t.push(z),z=f.call(o,z)){}return t;}});return df;});},"dojox/lang/utils":function(){define("dojox/lang/utils",["..","dojo/_base/lang"],function(_21d,lang){var du=lang.getObject("lang.utils",true,_21d);var _21e={},opts=Object.prototype.toString;var _21f=function(o){if(o){switch(opts.call(o)){case "[object Array]":return o.slice(0);case "[object Object]":return lang.delegate(o);}}return o;};lang.mixin(du,{coerceType:function(_220,_221){switch(typeof _220){case "number":return Number(eval("("+_221+")"));case "string":return String(_221);case "boolean":return Boolean(eval("("+_221+")"));}return eval("("+_221+")");},updateWithObject:function(_222,_223,conv){if(!_223){return _222;}for(var x in _222){if(x in _223&&!(x in _21e)){var t=_222[x];if(t&&typeof t=="object"){du.updateWithObject(t,_223[x],conv);}else{_222[x]=conv?du.coerceType(t,_223[x]):_21f(_223[x]);}}}return _222;},updateWithPattern:function(_224,_225,_226,conv){if(!_225||!_226){return _224;}for(var x in _226){if(x in _225&&!(x in _21e)){_224[x]=conv?du.coerceType(_226[x],_225[x]):_21f(_225[x]);}}return _224;},merge:function(_227,_228){if(_228){var _229=opts.call(_227),_22a=opts.call(_228),t,i,l,m;switch(_22a){case "[object Array]":if(_22a==_229){t=new Array(Math.max(_227.length,_228.length));for(i=0,l=t.length;i<l;++i){t[i]=du.merge(_227[i],_228[i]);}return t;}return _228.slice(0);case "[object Object]":if(_22a==_229&&_227){t=lang.delegate(_227);for(i in _228){if(i in _227){l=_227[i];m=_228[i];if(m!==l){t[i]=du.merge(l,m);}}else{t[i]=lang.clone(_228[i]);}}return t;}return lang.clone(_228);}}return _228;}});return du;});},"dojox/charting/plot2d/Columns":function(){define("dojox/charting/plot2d/Columns",["dojo/_base/lang","dojo/_base/array","dojo/_base/declare","./Base","./common","dojox/lang/functional","dojox/lang/functional/reversed","dojox/lang/utils","dojox/gfx/fx"],function(lang,arr,_22b,Base,dc,df,dfr,du,fx){var _22c=dfr.lambda("item.purgeGroup()");return _22b("dojox.charting.plot2d.Columns",Base,{defaultParams:{hAxis:"x",vAxis:"y",gap:0,animate:null,enableCache:false},optionalParams:{minBarSize:1,maxBarSize:1,stroke:{},outline:{},shadow:{},fill:{},font:"",fontColor:""},constructor:function(_22d,_22e){this.opt=lang.clone(this.defaultParams);du.updateWithObject(this.opt,_22e);du.updateWithPattern(this.opt,_22e,this.optionalParams);this.series=[];this.hAxis=this.opt.hAxis;this.vAxis=this.opt.vAxis;this.animate=this.opt.animate;},getSeriesStats:function(){var _22f=dc.collectSimpleStats(this.series);_22f.hmin-=0.5;_22f.hmax+=0.5;return _22f;},createRect:function(run,_230,_231){var rect;if(this.opt.enableCache&&run._rectFreePool.length>0){rect=run._rectFreePool.pop();rect.setShape(_231);_230.add(rect);}else{rect=_230.createRect(_231);}if(this.opt.enableCache){run._rectUsePool.push(rect);}return rect;},render:function(dim,_232){if(this.zoom&&!this.isDataDirty()){return this.performZoom(dim,_232);}var t=this.getSeriesStats();this.resetEvents();this.dirty=this.isDirty();if(this.dirty){arr.forEach(this.series,_22c);this._eventSeries={};this.cleanGroup();var s=this.group;df.forEachRev(this.series,function(item){item.cleanGroup(s);});}var t=this.chart.theme,f,gap,_233,ht=this._hScaler.scaler.getTransformerFromModel(this._hScaler),vt=this._vScaler.scaler.getTransformerFromModel(this._vScaler),_234=Math.max(0,this._vScaler.bounds.lower),_235=vt(_234),min=Math.max(0,Math.floor(this._hScaler.bounds.from-1)),max=Math.ceil(this._hScaler.bounds.to),_236=this.events();f=dc.calculateBarSize(this._hScaler.bounds.scale,this.opt);gap=f.gap;_233=f.size;for(var i=this.series.length-1;i>=0;--i){var run=this.series[i];if(!this.dirty&&!run.dirty){t.skip();this._reconnectEvents(run.name);continue;}run.cleanGroup();if(this.opt.enableCache){run._rectFreePool=(run._rectFreePool?run._rectFreePool:[]).concat(run._rectUsePool?run._rectUsePool:[]);run._rectUsePool=[];}var _237=t.next("column",[this.opt,run]),s=run.group,_238=new Array(run.data.length);var l=Math.min(run.data.length,max);for(var j=min;j<l;++j){var _239=run.data[j];if(_239!==null){var v=typeof _239=="number"?_239:_239.y,vv=vt(v),_23a=vv-_235,h=Math.abs(_23a),_23b=typeof _239!="number"?t.addMixin(_237,"column",_239,true):t.post(_237,"column");if(_233>=1&&h>=0){var rect={x:_232.l+ht(j+0.5)+gap,y:dim.height-_232.b-(v>_234?vv:_235),width:_233,height:h};var _23c=this._plotFill(_23b.series.fill,dim,_232);_23c=this._shapeFill(_23c,rect);var _23d=this.createRect(run,s,rect).setFill(_23c).setStroke(_23b.series.stroke);run.dyn.fill=_23d.getFill();run.dyn.stroke=_23d.getStroke();if(_236){var o={element:"column",index:j,run:run,shape:_23d,x:j+0.5,y:v};this._connectEvents(o);_238[j]=o;}if(this.animate){this._animateColumn(_23d,dim.height-_232.b-_235,h);}}}}this._eventSeries[run.name]=_238;run.dirty=false;}this.dirty=false;return this;},_animateColumn:function(_23e,_23f,_240){fx.animateTransform(lang.delegate({shape:_23e,duration:1200,transform:[{name:"translate",start:[0,_23f-(_23f/_240)],end:[0,0]},{name:"scale",start:[1,1/_240],end:[1,1]},{name:"original"}]},this.animate)).play();}});});},"dojox/lang/functional":function(){define("dojox/lang/functional",["./functional/lambda","./functional/array","./functional/object"],function(df){return df;});},"dojox/charting/plot2d/StackedBars":function(){define("dojox/charting/plot2d/StackedBars",["dojo/_base/lang","dojo/_base/array","dojo/_base/declare","./Bars","./common","dojox/lang/functional","dojox/lang/functional/reversed","dojox/lang/functional/sequence"],function(lang,arr,_241,Bars,dc,df,dfr,dfs){var _242=dfr.lambda("item.purgeGroup()");return _241("dojox.charting.plot2d.StackedBars",Bars,{getSeriesStats:function(){var _243=dc.collectStackedStats(this.series),t;this._maxRunLength=_243.hmax;_243.hmin-=0.5;_243.hmax+=0.5;t=_243.hmin,_243.hmin=_243.vmin,_243.vmin=t;t=_243.hmax,_243.hmax=_243.vmax,_243.vmax=t;return _243;},render:function(dim,_244){if(this._maxRunLength<=0){return this;}var acc=df.repeat(this._maxRunLength,"-> 0",0);for(var i=0;i<this.series.length;++i){var run=this.series[i];for(var j=0;j<run.data.length;++j){var _245=run.data[j];if(_245!==null){var v=typeof _245=="number"?_245:_245.y;if(isNaN(v)){v=0;}acc[j]+=v;}}}if(this.zoom&&!this.isDataDirty()){return this.performZoom(dim,_244);}this.resetEvents();this.dirty=this.isDirty();if(this.dirty){arr.forEach(this.series,_242);this._eventSeries={};this.cleanGroup();var s=this.group;df.forEachRev(this.series,function(item){item.cleanGroup(s);});}var t=this.chart.theme,f,gap,_246,ht=this._hScaler.scaler.getTransformerFromModel(this._hScaler),vt=this._vScaler.scaler.getTransformerFromModel(this._vScaler),_247=this.events();f=dc.calculateBarSize(this._vScaler.bounds.scale,this.opt);gap=f.gap;_246=f.size;for(var i=this.series.length-1;i>=0;--i){var run=this.series[i];if(!this.dirty&&!run.dirty){t.skip();this._reconnectEvents(run.name);continue;}run.cleanGroup();var _248=t.next("bar",[this.opt,run]),s=run.group,_249=new Array(acc.length);for(var j=0;j<acc.length;++j){var _245=run.data[j];if(_245!==null){var v=acc[j],_24a=ht(v),_24b=typeof _245!="number"?t.addMixin(_248,"bar",_245,true):t.post(_248,"bar");if(_24a>=0&&_246>=1){var rect={x:_244.l,y:dim.height-_244.b-vt(j+1.5)+gap,width:_24a,height:_246};var _24c=this._plotFill(_24b.series.fill,dim,_244);_24c=this._shapeFill(_24c,rect);var _24d=s.createRect(rect).setFill(_24c).setStroke(_24b.series.stroke);run.dyn.fill=_24d.getFill();run.dyn.stroke=_24d.getStroke();if(_247){var o={element:"bar",index:j,run:run,shape:_24d,x:v,y:j+1.5};this._connectEvents(o);_249[j]=o;}if(this.animate){this._animateBar(_24d,_244.l,-_24a);}}}}this._eventSeries[run.name]=_249;run.dirty=false;for(var j=0;j<run.data.length;++j){var _245=run.data[j];if(_245!==null){var v=typeof _245=="number"?_245:_245.y;if(isNaN(v)){v=0;}acc[j]-=v;}}}this.dirty=false;return this;}});});},"dijit/Tooltip":function(){require({cache:{"url:dijit/templates/Tooltip.html":"<div class=\"dijitTooltip dijitTooltipLeft\" id=\"dojoTooltip\"\r\n\t><div class=\"dijitTooltipContainer dijitTooltipContents\" data-dojo-attach-point=\"containerNode\" role='alert'></div\r\n\t><div class=\"dijitTooltipConnector\" data-dojo-attach-point=\"connectorNode\"></div\r\n></div>\r\n"}});define("dijit/Tooltip",["dojo/_base/array","dojo/_base/declare","dojo/_base/fx","dojo/dom","dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojo/_base/lang","dojo/_base/sniff","dojo/_base/window","./_base/manager","./place","./_Widget","./_TemplatedMixin","./BackgroundIframe","dojo/text!./templates/Tooltip.html","."],function(_24e,_24f,fx,dom,_250,_251,_252,lang,has,win,_253,_254,_255,_256,_257,_258,_259){var _25a=_24f("dijit._MasterTooltip",[_255,_256],{duration:_253.defaultDuration,templateString:_258,postCreate:function(){win.body().appendChild(this.domNode);this.bgIframe=new _257(this.domNode);this.fadeIn=fx.fadeIn({node:this.domNode,duration:this.duration,onEnd:lang.hitch(this,"_onShow")});this.fadeOut=fx.fadeOut({node:this.domNode,duration:this.duration,onEnd:lang.hitch(this,"_onHide")});},show:function(_25b,_25c,_25d,rtl,_25e){if(this.aroundNode&&this.aroundNode===_25c&&this.containerNode.innerHTML==_25b){return;}this.domNode.width="auto";if(this.fadeOut.status()=="playing"){this._onDeck=arguments;return;}this.containerNode.innerHTML=_25b;this.set("textDir",_25e);this.containerNode.align=rtl?"right":"left";var pos=_254.around(this.domNode,_25c,_25d&&_25d.length?_25d:_25f.defaultPosition,!rtl,lang.hitch(this,"orient"));var _260=pos.aroundNodePos;if(pos.corner.charAt(0)=="M"&&pos.aroundCorner.charAt(0)=="M"){this.connectorNode.style.top=_260.y+((_260.h-this.connectorNode.offsetHeight)>>1)-pos.y+"px";this.connectorNode.style.left="";}else{if(pos.corner.charAt(1)=="M"&&pos.aroundCorner.charAt(1)=="M"){this.connectorNode.style.left=_260.x+((_260.w-this.connectorNode.offsetWidth)>>1)-pos.x+"px";}}_252.set(this.domNode,"opacity",0);this.fadeIn.play();this.isShowingNow=true;this.aroundNode=_25c;},orient:function(node,_261,_262,_263,_264){this.connectorNode.style.top="";var _265=_263.w-this.connectorNode.offsetWidth;node.className="dijitTooltip "+{"MR-ML":"dijitTooltipRight","ML-MR":"dijitTooltipLeft","TM-BM":"dijitTooltipAbove","BM-TM":"dijitTooltipBelow","BL-TL":"dijitTooltipBelow dijitTooltipABLeft","TL-BL":"dijitTooltipAbove dijitTooltipABLeft","BR-TR":"dijitTooltipBelow dijitTooltipABRight","TR-BR":"dijitTooltipAbove dijitTooltipABRight","BR-BL":"dijitTooltipRight","BL-BR":"dijitTooltipLeft"}[_261+"-"+_262];this.domNode.style.width="auto";var size=_251.getContentBox(this.domNode);var _266=Math.min((Math.max(_265,1)),size.w);var _267=_266<size.w;this.domNode.style.width=_266+"px";if(_267){this.containerNode.style.overflow="auto";var _268=this.containerNode.scrollWidth;this.containerNode.style.overflow="visible";if(_268>_266){_268=_268+_252.get(this.domNode,"paddingLeft")+_252.get(this.domNode,"paddingRight");this.domNode.style.width=_268+"px";}}if(_262.charAt(0)=="B"&&_261.charAt(0)=="B"){var mb=_251.getMarginBox(node);var _269=this.connectorNode.offsetHeight;if(mb.h>_263.h){var _26a=_263.h-((_264.h+_269)>>1);this.connectorNode.style.top=_26a+"px";this.connectorNode.style.bottom="";}else{this.connectorNode.style.bottom=Math.min(Math.max(_264.h/2-_269/2,0),mb.h-_269)+"px";this.connectorNode.style.top="";}}else{this.connectorNode.style.top="";this.connectorNode.style.bottom="";}return Math.max(0,size.w-_265);},_onShow:function(){if(has("ie")){this.domNode.style.filter="";}},hide:function(_26b){if(this._onDeck&&this._onDeck[1]==_26b){this._onDeck=null;}else{if(this.aroundNode===_26b){this.fadeIn.stop();this.isShowingNow=false;this.aroundNode=null;this.fadeOut.play();}else{}}},_onHide:function(){this.domNode.style.cssText="";this.containerNode.innerHTML="";if(this._onDeck){this.show.apply(this,this._onDeck);this._onDeck=null;}},_setAutoTextDir:function(node){this.applyTextDir(node,has("ie")?node.outerText:node.textContent);_24e.forEach(node.children,function(_26c){this._setAutoTextDir(_26c);},this);},_setTextDirAttr:function(_26d){this._set("textDir",typeof _26d!="undefined"?_26d:"");if(_26d=="auto"){this._setAutoTextDir(this.containerNode);}else{this.containerNode.dir=this.textDir;}}});_259.showTooltip=function(_26e,_26f,_270,rtl,_271){if(_270){_270=_24e.map(_270,function(val){return {after:"after-centered",before:"before-centered"}[val]||val;});}if(!_25f._masterTT){_259._masterTT=_25f._masterTT=new _25a();}return _25f._masterTT.show(_26e,_26f,_270,rtl,_271);};_259.hideTooltip=function(_272){return _25f._masterTT&&_25f._masterTT.hide(_272);};var _25f=_24f("dijit.Tooltip",_255,{label:"",showDelay:400,connectId:[],position:[],_setConnectIdAttr:function(_273){_24e.forEach(this._connections||[],function(_274){_24e.forEach(_274,lang.hitch(this,"disconnect"));},this);this._connectIds=_24e.filter(lang.isArrayLike(_273)?_273:(_273?[_273]:[]),function(id){return dom.byId(id);});this._connections=_24e.map(this._connectIds,function(id){var node=dom.byId(id);return [this.connect(node,"onmouseenter","_onHover"),this.connect(node,"onmouseleave","_onUnHover"),this.connect(node,"onfocus","_onHover"),this.connect(node,"onblur","_onUnHover")];},this);this._set("connectId",_273);},addTarget:function(node){var id=node.id||node;if(_24e.indexOf(this._connectIds,id)==-1){this.set("connectId",this._connectIds.concat(id));}},removeTarget:function(node){var id=node.id||node,idx=_24e.indexOf(this._connectIds,id);if(idx>=0){this._connectIds.splice(idx,1);this.set("connectId",this._connectIds);}},buildRendering:function(){this.inherited(arguments);_250.add(this.domNode,"dijitTooltipData");},startup:function(){this.inherited(arguments);var ids=this.connectId;_24e.forEach(lang.isArrayLike(ids)?ids:[ids],this.addTarget,this);},_onHover:function(e){if(!this._showTimer){var _275=e.target;this._showTimer=setTimeout(lang.hitch(this,function(){this.open(_275);}),this.showDelay);}},_onUnHover:function(){if(this._focus){return;}if(this._showTimer){clearTimeout(this._showTimer);delete this._showTimer;}this.close();},open:function(_276){if(this._showTimer){clearTimeout(this._showTimer);delete this._showTimer;}_25f.show(this.label||this.domNode.innerHTML,_276,this.position,!this.isLeftToRight(),this.textDir);this._connectNode=_276;this.onShow(_276,this.position);},close:function(){if(this._connectNode){_25f.hide(this._connectNode);delete this._connectNode;this.onHide();}if(this._showTimer){clearTimeout(this._showTimer);delete this._showTimer;}},onShow:function(){},onHide:function(){},uninitialize:function(){this.close();this.inherited(arguments);}});_25f._MasterTooltip=_25a;_25f.show=_259.showTooltip;_25f.hide=_259.hideTooltip;_25f.defaultPosition=["after-centered","before-centered"];return _25f;});},"dojox/charting/action2d/Base":function(){define("dojox/charting/action2d/Base",["dojo/_base/lang","dojo/_base/declare"],function(lang,_277){return _277("dojox.charting.action2d.Base",null,{constructor:function(_278,plot){this.chart=_278;this.plot=plot?(lang.isString(plot)?this.chart.getPlot(plot):plot):this.chart.getPlot("default");},connect:function(){},disconnect:function(){},destroy:function(){this.disconnect();}});});},"dojox/charting/plot2d/Stacked":function(){define("dojox/charting/plot2d/Stacked",["dojo/_base/lang","dojo/_base/declare","dojo/_base/array","./Default","./common","dojox/lang/functional","dojox/lang/functional/reversed","dojox/lang/functional/sequence"],function(lang,_279,arr,_27a,dc,df,dfr,dfs){var _27b=dfr.lambda("item.purgeGroup()");return _279("dojox.charting.plot2d.Stacked",_27a,{getSeriesStats:function(){var _27c=dc.collectStackedStats(this.series);this._maxRunLength=_27c.hmax;return _27c;},render:function(dim,_27d){if(this._maxRunLength<=0){return this;}var acc=df.repeat(this._maxRunLength,"-> 0",0);for(var i=0;i<this.series.length;++i){var run=this.series[i];for(var j=0;j<run.data.length;++j){var v=run.data[j];if(v!==null){if(isNaN(v)){v=0;}acc[j]+=v;}}}if(this.zoom&&!this.isDataDirty()){return this.performZoom(dim,_27d);}this.resetEvents();this.dirty=this.isDirty();if(this.dirty){arr.forEach(this.series,_27b);this._eventSeries={};this.cleanGroup();var s=this.group;df.forEachRev(this.series,function(item){item.cleanGroup(s);});}var t=this.chart.theme,_27e=this.events(),ht=this._hScaler.scaler.getTransformerFromModel(this._hScaler),vt=this._vScaler.scaler.getTransformerFromModel(this._vScaler);for(var i=this.series.length-1;i>=0;--i){var run=this.series[i];if(!this.dirty&&!run.dirty){t.skip();this._reconnectEvents(run.name);continue;}run.cleanGroup();var _27f=t.next(this.opt.areas?"area":"line",[this.opt,run],true),s=run.group,_280,_281=arr.map(acc,function(v,i){return {x:ht(i+1)+_27d.l,y:dim.height-_27d.b-vt(v)};},this);var _282=this.opt.tension?dc.curve(_281,this.opt.tension):"";if(this.opt.areas){var _283=lang.clone(_281);if(this.opt.tension){var p=dc.curve(_283,this.opt.tension);p+=" L"+_281[_281.length-1].x+","+(dim.height-_27d.b)+" L"+_281[0].x+","+(dim.height-_27d.b)+" L"+_281[0].x+","+_281[0].y;run.dyn.fill=s.createPath(p).setFill(_27f.series.fill).getFill();}else{_283.push({x:_281[_281.length-1].x,y:dim.height-_27d.b});_283.push({x:_281[0].x,y:dim.height-_27d.b});_283.push(_281[0]);run.dyn.fill=s.createPolyline(_283).setFill(_27f.series.fill).getFill();}}if(this.opt.lines||this.opt.markers){if(_27f.series.outline){_280=dc.makeStroke(_27f.series.outline);_280.width=2*_280.width+_27f.series.stroke.width;}}if(this.opt.markers){run.dyn.marker=_27f.symbol;}var _284,_285,_286;if(_27f.series.shadow&&_27f.series.stroke){var _287=_27f.series.shadow,_288=arr.map(_281,function(c){return {x:c.x+_287.dx,y:c.y+_287.dy};});if(this.opt.lines){if(this.opt.tension){run.dyn.shadow=s.createPath(dc.curve(_288,this.opt.tension)).setStroke(_287).getStroke();}else{run.dyn.shadow=s.createPolyline(_288).setStroke(_287).getStroke();}}if(this.opt.markers){_287=_27f.marker.shadow;_286=arr.map(_288,function(c){return s.createPath("M"+c.x+" "+c.y+" "+_27f.symbol).setStroke(_287).setFill(_287.color);},this);}}if(this.opt.lines){if(_280){if(this.opt.tension){run.dyn.outline=s.createPath(_282).setStroke(_280).getStroke();}else{run.dyn.outline=s.createPolyline(_281).setStroke(_280).getStroke();}}if(this.opt.tension){run.dyn.stroke=s.createPath(_282).setStroke(_27f.series.stroke).getStroke();}else{run.dyn.stroke=s.createPolyline(_281).setStroke(_27f.series.stroke).getStroke();}}if(this.opt.markers){_284=new Array(_281.length);_285=new Array(_281.length);_280=null;if(_27f.marker.outline){_280=dc.makeStroke(_27f.marker.outline);_280.width=2*_280.width+(_27f.marker.stroke?_27f.marker.stroke.width:0);}arr.forEach(_281,function(c,i){var path="M"+c.x+" "+c.y+" "+_27f.symbol;if(_280){_285[i]=s.createPath(path).setStroke(_280);}_284[i]=s.createPath(path).setStroke(_27f.marker.stroke).setFill(_27f.marker.fill);},this);if(_27e){var _289=new Array(_284.length);arr.forEach(_284,function(s,i){var o={element:"marker",index:i,run:run,shape:s,outline:_285[i]||null,shadow:_286&&_286[i]||null,cx:_281[i].x,cy:_281[i].y,x:i+1,y:run.data[i]};this._connectEvents(o);_289[i]=o;},this);this._eventSeries[run.name]=_289;}else{delete this._eventSeries[run.name];}}run.dirty=false;for(var j=0;j<run.data.length;++j){var v=run.data[j];if(v!==null){if(isNaN(v)){v=0;}acc[j]-=v;}}}this.dirty=false;return this;}});});},"dojox/charting/plot2d/Pie":function(){define("dojox/charting/plot2d/Pie",["dojo/_base/lang","dojo/_base/array","dojo/_base/declare","../Element","./_PlotEvents","./common","../axis2d/common","dojox/gfx","dojox/gfx/matrix","dojox/lang/functional","dojox/lang/utils"],function(lang,arr,_28a,_28b,_28c,dc,da,g,m,df,du){var _28d=0.2;return _28a("dojox.charting.plot2d.Pie",[_28b,_28c],{defaultParams:{labels:true,ticks:false,fixed:true,precision:1,labelOffset:20,labelStyle:"default",htmlLabels:true,radGrad:"native",fanSize:5,startAngle:0},optionalParams:{radius:0,stroke:{},outline:{},shadow:{},fill:{},font:"",fontColor:"",labelWiring:{}},constructor:function(_28e,_28f){this.opt=lang.clone(this.defaultParams);du.updateWithObject(this.opt,_28f);du.updateWithPattern(this.opt,_28f,this.optionalParams);this.run=null;this.dyn=[];},clear:function(){this.dirty=true;this.dyn=[];this.run=null;return this;},setAxis:function(axis){return this;},addSeries:function(run){this.run=run;return this;},getSeriesStats:function(){return lang.delegate(dc.defaultStats);},initializeScalers:function(){return this;},getRequiredColors:function(){return this.run?this.run.data.length:0;},render:function(dim,_290){if(!this.dirty){return this;}this.resetEvents();this.dirty=false;this._eventSeries={};this.cleanGroup();var s=this.group,t=this.chart.theme;if(!this.run||!this.run.data.length){return this;}var rx=(dim.width-_290.l-_290.r)/2,ry=(dim.height-_290.t-_290.b)/2,r=Math.min(rx,ry),_291="font" in this.opt?this.opt.font:t.axis.font,size=_291?g.normalizedLength(g.splitFontString(_291).size):0,_292="fontColor" in this.opt?this.opt.fontColor:t.axis.fontColor,_293=m._degToRad(this.opt.startAngle),_294=_293,step,_295,_296,_297,_298,_299,run=this.run.data,_29a=this.events();if(typeof run[0]=="number"){_295=df.map(run,"x ? Math.max(x, 0) : 0");if(df.every(_295,"<= 0")){return this;}_296=df.map(_295,"/this",df.foldl(_295,"+",0));if(this.opt.labels){_297=arr.map(_296,function(x){return x>0?this._getLabel(x*100)+"%":"";},this);}}else{_295=df.map(run,"x ? Math.max(x.y, 0) : 0");if(df.every(_295,"<= 0")){return this;}_296=df.map(_295,"/this",df.foldl(_295,"+",0));if(this.opt.labels){_297=arr.map(_296,function(x,i){if(x<=0){return "";}var v=run[i];return "text" in v?v.text:this._getLabel(x*100)+"%";},this);}}var _29b=df.map(run,function(v,i){if(v===null||typeof v=="number"){return t.next("slice",[this.opt,this.run],true);}return t.next("slice",[this.opt,this.run,v],true);},this);if(this.opt.labels){_298=df.foldl1(df.map(_297,function(_29c,i){var font=_29b[i].series.font;return g._base._getTextBox(_29c,{font:font}).w;},this),"Math.max(a, b)")/2;if(this.opt.labelOffset<0){r=Math.min(rx-2*_298,ry-size)+this.opt.labelOffset;}_299=r-this.opt.labelOffset;}if("radius" in this.opt){r=this.opt.radius;_299=r-this.opt.labelOffset;}var _29d={cx:_290.l+rx,cy:_290.t+ry,r:r};this.dyn=[];var _29e=new Array(_296.length);arr.some(_296,function(_29f,i){if(_29f<0){return false;}if(_29f==0){this.dyn.push({fill:null,stroke:null});return false;}var v=run[i],_2a0=_29b[i],_2a1;if(_29f>=1){_2a1=this._plotFill(_2a0.series.fill,dim,_290);_2a1=this._shapeFill(_2a1,{x:_29d.cx-_29d.r,y:_29d.cy-_29d.r,width:2*_29d.r,height:2*_29d.r});_2a1=this._pseudoRadialFill(_2a1,{x:_29d.cx,y:_29d.cy},_29d.r);var _2a2=s.createCircle(_29d).setFill(_2a1).setStroke(_2a0.series.stroke);this.dyn.push({fill:_2a1,stroke:_2a0.series.stroke});if(_29a){var o={element:"slice",index:i,run:this.run,shape:_2a2,x:i,y:typeof v=="number"?v:v.y,cx:_29d.cx,cy:_29d.cy,cr:r};this._connectEvents(o);_29e[i]=o;}return true;}var end=_294+_29f*2*Math.PI;if(i+1==_296.length){end=_293+2*Math.PI;}var step=end-_294,x1=_29d.cx+r*Math.cos(_294),y1=_29d.cy+r*Math.sin(_294),x2=_29d.cx+r*Math.cos(end),y2=_29d.cy+r*Math.sin(end);var _2a3=m._degToRad(this.opt.fanSize);if(_2a0.series.fill&&_2a0.series.fill.type==="radial"&&this.opt.radGrad==="fan"&&step>_2a3){var _2a4=s.createGroup(),_2a5=Math.ceil(step/_2a3),_2a6=step/_2a5;_2a1=this._shapeFill(_2a0.series.fill,{x:_29d.cx-_29d.r,y:_29d.cy-_29d.r,width:2*_29d.r,height:2*_29d.r});for(var j=0;j<_2a5;++j){var _2a7=j==0?x1:_29d.cx+r*Math.cos(_294+(j-_28d)*_2a6),_2a8=j==0?y1:_29d.cy+r*Math.sin(_294+(j-_28d)*_2a6),_2a9=j==_2a5-1?x2:_29d.cx+r*Math.cos(_294+(j+1+_28d)*_2a6),_2aa=j==_2a5-1?y2:_29d.cy+r*Math.sin(_294+(j+1+_28d)*_2a6),fan=_2a4.createPath().moveTo(_29d.cx,_29d.cy).lineTo(_2a7,_2a8).arcTo(r,r,0,_2a6>Math.PI,true,_2a9,_2aa).lineTo(_29d.cx,_29d.cy).closePath().setFill(this._pseudoRadialFill(_2a1,{x:_29d.cx,y:_29d.cy},r,_294+(j+0.5)*_2a6,_294+(j+0.5)*_2a6));}_2a4.createPath().moveTo(_29d.cx,_29d.cy).lineTo(x1,y1).arcTo(r,r,0,step>Math.PI,true,x2,y2).lineTo(_29d.cx,_29d.cy).closePath().setStroke(_2a0.series.stroke);_2a2=_2a4;}else{_2a2=s.createPath().moveTo(_29d.cx,_29d.cy).lineTo(x1,y1).arcTo(r,r,0,step>Math.PI,true,x2,y2).lineTo(_29d.cx,_29d.cy).closePath().setStroke(_2a0.series.stroke);var _2a1=_2a0.series.fill;if(_2a1&&_2a1.type==="radial"){_2a1=this._shapeFill(_2a1,{x:_29d.cx-_29d.r,y:_29d.cy-_29d.r,width:2*_29d.r,height:2*_29d.r});if(this.opt.radGrad==="linear"){_2a1=this._pseudoRadialFill(_2a1,{x:_29d.cx,y:_29d.cy},r,_294,end);}}else{if(_2a1&&_2a1.type==="linear"){_2a1=this._plotFill(_2a1,dim,_290);_2a1=this._shapeFill(_2a1,_2a2.getBoundingBox());}}_2a2.setFill(_2a1);}this.dyn.push({fill:_2a1,stroke:_2a0.series.stroke});if(_29a){var o={element:"slice",index:i,run:this.run,shape:_2a2,x:i,y:typeof v=="number"?v:v.y,cx:_29d.cx,cy:_29d.cy,cr:r};this._connectEvents(o);_29e[i]=o;}_294=end;return false;},this);if(this.opt.labels){if(this.opt.labelStyle=="default"){_294=_293;arr.some(_296,function(_2ab,i){if(_2ab<=0){return false;}var _2ac=_29b[i];if(_2ab>=1){var v=run[i],elem=da.createText[this.opt.htmlLabels&&g.renderer!="vml"?"html":"gfx"](this.chart,s,_29d.cx,_29d.cy+size/2,"middle",_297[i],_2ac.series.font,_2ac.series.fontColor);if(this.opt.htmlLabels){this.htmlElements.push(elem);}return true;}var end=_294+_2ab*2*Math.PI,v=run[i];if(i+1==_296.length){end=_293+2*Math.PI;}var _2ad=(_294+end)/2,x=_29d.cx+_299*Math.cos(_2ad),y=_29d.cy+_299*Math.sin(_2ad)+size/2;var elem=da.createText[this.opt.htmlLabels&&g.renderer!="vml"?"html":"gfx"](this.chart,s,x,y,"middle",_297[i],_2ac.series.font,_2ac.series.fontColor);if(this.opt.htmlLabels){this.htmlElements.push(elem);}_294=end;return false;},this);}else{if(this.opt.labelStyle=="columns"){_294=_293;var _2ae=[];arr.forEach(_296,function(_2af,i){var end=_294+_2af*2*Math.PI;if(i+1==_296.length){end=_293+2*Math.PI;}var _2b0=(_294+end)/2;_2ae.push({angle:_2b0,left:Math.cos(_2b0)<0,theme:_29b[i],index:i,omit:end-_294<0.001});_294=end;});var _2b1=g._base._getTextBox("a",{font:_291}).h;this._getProperLabelRadius(_2ae,_2b1,_29d.r*1.1);arr.forEach(_2ae,function(_2b2,i){if(!_2b2.omit){var _2b3=_29d.cx-_29d.r*2,_2b4=_29d.cx+_29d.r*2,_2b5=g._base._getTextBox(_297[i],{font:_291}).w,x=_29d.cx+_2b2.labelR*Math.cos(_2b2.angle),y=_29d.cy+_2b2.labelR*Math.sin(_2b2.angle),_2b6=(_2b2.left)?(_2b3+_2b5):(_2b4-_2b5),_2b7=(_2b2.left)?_2b3:_2b6;var _2b8=s.createPath().moveTo(_29d.cx+_29d.r*Math.cos(_2b2.angle),_29d.cy+_29d.r*Math.sin(_2b2.angle));if(Math.abs(_2b2.labelR*Math.cos(_2b2.angle))<_29d.r*2-_2b5){_2b8.lineTo(x,y);}_2b8.lineTo(_2b6,y).setStroke(_2b2.theme.series.labelWiring);var elem=da.createText[this.opt.htmlLabels&&g.renderer!="vml"?"html":"gfx"](this.chart,s,_2b7,y,"left",_297[i],_2b2.theme.series.font,_2b2.theme.series.fontColor);if(this.opt.htmlLabels){this.htmlElements.push(elem);}}},this);}}}var esi=0;this._eventSeries[this.run.name]=df.map(run,function(v){return v<=0?null:_29e[esi++];});return this;},_getProperLabelRadius:function(_2b9,_2ba,_2bb){var _2bc={},_2bd={},_2be=1,_2bf=1;if(_2b9.length==1){_2b9[0].labelR=_2bb;return;}for(var i=0;i<_2b9.length;i++){var _2c0=Math.abs(Math.sin(_2b9[i].angle));if(_2b9[i].left){if(_2be>=_2c0){_2be=_2c0;_2bc=_2b9[i];}}else{if(_2bf>=_2c0){_2bf=_2c0;_2bd=_2b9[i];}}}_2bc.labelR=_2bd.labelR=_2bb;this._calculateLabelR(_2bc,_2b9,_2ba);this._calculateLabelR(_2bd,_2b9,_2ba);},_calculateLabelR:function(_2c1,_2c2,_2c3){var i=_2c1.index,_2c4=_2c2.length,_2c5=_2c1.labelR;while(!(_2c2[i%_2c4].left^_2c2[(i+1)%_2c4].left)){if(!_2c2[(i+1)%_2c4].omit){var _2c6=(Math.sin(_2c2[i%_2c4].angle)*_2c5+((_2c2[i%_2c4].left)?(-_2c3):_2c3))/Math.sin(_2c2[(i+1)%_2c4].angle);_2c5=(_2c6<_2c1.labelR)?_2c1.labelR:_2c6;_2c2[(i+1)%_2c4].labelR=_2c5;}i++;}i=_2c1.index;var j=(i==0)?_2c4-1:i-1;while(!(_2c2[i].left^_2c2[j].left)){if(!_2c2[j].omit){var _2c6=(Math.sin(_2c2[i].angle)*_2c5+((_2c2[i].left)?_2c3:(-_2c3)))/Math.sin(_2c2[j].angle);_2c5=(_2c6<_2c1.labelR)?_2c1.labelR:_2c6;_2c2[j].labelR=_2c5;}i--;j--;i=(i<0)?i+_2c2.length:i;j=(j<0)?j+_2c2.length:j;}},_getLabel:function(_2c7){return dc.getLabel(_2c7,this.opt.fixed,this.opt.precision);}});});},"dojox/color/_base":function(){define("dojox/color/_base",["dojo/_base/kernel","../main","dojo/_base/lang","dojo/_base/Color","dojo/colors"],function(dojo,_2c8,lang,_2c9,_2ca){var cx=lang.getObject("dojox.color",true);cx.Color=_2c9;cx.blend=_2c9.blendColors;cx.fromRgb=_2c9.fromRgb;cx.fromHex=_2c9.fromHex;cx.fromArray=_2c9.fromArray;cx.fromString=_2c9.fromString;cx.greyscale=_2ca.makeGrey;lang.mixin(cx,{fromCmy:function(cyan,_2cb,_2cc){if(lang.isArray(cyan)){_2cb=cyan[1],_2cc=cyan[2],cyan=cyan[0];}else{if(lang.isObject(cyan)){_2cb=cyan.m,_2cc=cyan.y,cyan=cyan.c;}}cyan/=100,_2cb/=100,_2cc/=100;var r=1-cyan,g=1-_2cb,b=1-_2cc;return new _2c9({r:Math.round(r*255),g:Math.round(g*255),b:Math.round(b*255)});},fromCmyk:function(cyan,_2cd,_2ce,_2cf){if(lang.isArray(cyan)){_2cd=cyan[1],_2ce=cyan[2],_2cf=cyan[3],cyan=cyan[0];}else{if(lang.isObject(cyan)){_2cd=cyan.m,_2ce=cyan.y,_2cf=cyan.b,cyan=cyan.c;}}cyan/=100,_2cd/=100,_2ce/=100,_2cf/=100;var r,g,b;r=1-Math.min(1,cyan*(1-_2cf)+_2cf);g=1-Math.min(1,_2cd*(1-_2cf)+_2cf);b=1-Math.min(1,_2ce*(1-_2cf)+_2cf);return new _2c9({r:Math.round(r*255),g:Math.round(g*255),b:Math.round(b*255)});},fromHsl:function(hue,_2d0,_2d1){if(lang.isArray(hue)){_2d0=hue[1],_2d1=hue[2],hue=hue[0];}else{if(lang.isObject(hue)){_2d0=hue.s,_2d1=hue.l,hue=hue.h;}}_2d0/=100;_2d1/=100;while(hue<0){hue+=360;}while(hue>=360){hue-=360;}var r,g,b;if(hue<120){r=(120-hue)/60,g=hue/60,b=0;}else{if(hue<240){r=0,g=(240-hue)/60,b=(hue-120)/60;}else{r=(hue-240)/60,g=0,b=(360-hue)/60;}}r=2*_2d0*Math.min(r,1)+(1-_2d0);g=2*_2d0*Math.min(g,1)+(1-_2d0);b=2*_2d0*Math.min(b,1)+(1-_2d0);if(_2d1<0.5){r*=_2d1,g*=_2d1,b*=_2d1;}else{r=(1-_2d1)*r+2*_2d1-1;g=(1-_2d1)*g+2*_2d1-1;b=(1-_2d1)*b+2*_2d1-1;}return new _2c9({r:Math.round(r*255),g:Math.round(g*255),b:Math.round(b*255)});}});cx.fromHsv=function(hue,_2d2,_2d3){if(lang.isArray(hue)){_2d2=hue[1],_2d3=hue[2],hue=hue[0];}else{if(lang.isObject(hue)){_2d2=hue.s,_2d3=hue.v,hue=hue.h;}}if(hue==360){hue=0;}_2d2/=100;_2d3/=100;var r,g,b;if(_2d2==0){r=_2d3,b=_2d3,g=_2d3;}else{var _2d4=hue/60,i=Math.floor(_2d4),f=_2d4-i;var p=_2d3*(1-_2d2);var q=_2d3*(1-(_2d2*f));var t=_2d3*(1-(_2d2*(1-f)));switch(i){case 0:r=_2d3,g=t,b=p;break;case 1:r=q,g=_2d3,b=p;break;case 2:r=p,g=_2d3,b=t;break;case 3:r=p,g=q,b=_2d3;break;case 4:r=t,g=p,b=_2d3;break;case 5:r=_2d3,g=p,b=q;break;}}return new _2c9({r:Math.round(r*255),g:Math.round(g*255),b:Math.round(b*255)});};lang.extend(_2c9,{toCmy:function(){var cyan=1-(this.r/255),_2d5=1-(this.g/255),_2d6=1-(this.b/255);return {c:Math.round(cyan*100),m:Math.round(_2d5*100),y:Math.round(_2d6*100)};},toCmyk:function(){var cyan,_2d7,_2d8,_2d9;var r=this.r/255,g=this.g/255,b=this.b/255;_2d9=Math.min(1-r,1-g,1-b);cyan=(1-r-_2d9)/(1-_2d9);_2d7=(1-g-_2d9)/(1-_2d9);_2d8=(1-b-_2d9)/(1-_2d9);return {c:Math.round(cyan*100),m:Math.round(_2d7*100),y:Math.round(_2d8*100),b:Math.round(_2d9*100)};},toHsl:function(){var r=this.r/255,g=this.g/255,b=this.b/255;var min=Math.min(r,b,g),max=Math.max(r,g,b);var _2da=max-min;var h=0,s=0,l=(min+max)/2;if(l>0&&l<1){s=_2da/((l<0.5)?(2*l):(2-2*l));}if(_2da>0){if(max==r&&max!=g){h+=(g-b)/_2da;}if(max==g&&max!=b){h+=(2+(b-r)/_2da);}if(max==b&&max!=r){h+=(4+(r-g)/_2da);}h*=60;}return {h:h,s:Math.round(s*100),l:Math.round(l*100)};},toHsv:function(){var r=this.r/255,g=this.g/255,b=this.b/255;var min=Math.min(r,b,g),max=Math.max(r,g,b);var _2db=max-min;var h=null,s=(max==0)?0:(_2db/max);if(s==0){h=0;}else{if(r==max){h=60*(g-b)/_2db;}else{if(g==max){h=120+60*(b-r)/_2db;}else{h=240+60*(r-g)/_2db;}}if(h<0){h+=360;}}return {h:h,s:Math.round(s*100),v:Math.round(max*100)};}});return cx;});},"dojox/charting/action2d/PlotAction":function(){define("dojox/charting/action2d/PlotAction",["dojo/_base/connect","dojo/_base/declare","./Base","dojo/fx/easing","dojox/lang/functional","dojox/lang/functional/object"],function(hub,_2dc,Base,dfe,df,dlfo){var _2dd=400,_2de=dfe.backOut;return _2dc("dojox.charting.action2d.PlotAction",Base,{overOutEvents:{onmouseover:1,onmouseout:1},constructor:function(_2df,plot,_2e0){this.anim={};if(!_2e0){_2e0={};}this.duration=_2e0.duration?_2e0.duration:_2dd;this.easing=_2e0.easing?_2e0.easing:_2de;},connect:function(){this.handle=this.chart.connectToPlot(this.plot.name,this,"process");},disconnect:function(){if(this.handle){hub.disconnect(this.handle);this.handle=null;}},reset:function(){},destroy:function(){this.inherited(arguments);df.forIn(this.anim,function(o){df.forIn(o,function(anim){anim.action.stop(true);});});this.anim={};}});});},"dojox/lang/functional/fold":function(){define("dojox/lang/functional/fold",["dojo/_base/lang","dojo/_base/array","dojo/_base/window","./lambda"],function(lang,arr,win,df){var _2e1={};lang.mixin(df,{foldl:function(a,f,z,o){if(typeof a=="string"){a=a.split("");}o=o||win.global;f=df.lambda(f);var i,n;if(lang.isArray(a)){for(i=0,n=a.length;i<n;z=f.call(o,z,a[i],i,a),++i){}}else{if(typeof a.hasNext=="function"&&typeof a.next=="function"){for(i=0;a.hasNext();z=f.call(o,z,a.next(),i++,a)){}}else{for(i in a){if(!(i in _2e1)){z=f.call(o,z,a[i],i,a);}}}}return z;},foldl1:function(a,f,o){if(typeof a=="string"){a=a.split("");}o=o||win.global;f=df.lambda(f);var z,i,n;if(lang.isArray(a)){z=a[0];for(i=1,n=a.length;i<n;z=f.call(o,z,a[i],i,a),++i){}}else{if(typeof a.hasNext=="function"&&typeof a.next=="function"){if(a.hasNext()){z=a.next();for(i=1;a.hasNext();z=f.call(o,z,a.next(),i++,a)){}}}else{var _2e2=true;for(i in a){if(!(i in _2e1)){if(_2e2){z=a[i];_2e2=false;}else{z=f.call(o,z,a[i],i,a);}}}}}return z;},foldr:function(a,f,z,o){if(typeof a=="string"){a=a.split("");}o=o||win.global;f=df.lambda(f);for(var i=a.length;i>0;--i,z=f.call(o,z,a[i],i,a)){}return z;},foldr1:function(a,f,o){if(typeof a=="string"){a=a.split("");}o=o||win.global;f=df.lambda(f);var n=a.length,z=a[n-1],i=n-1;for(;i>0;--i,z=f.call(o,z,a[i],i,a)){}return z;},reduce:function(a,f,z){return arguments.length<3?df.foldl1(a,f):df.foldl(a,f,z);},reduceRight:function(a,f,z){return arguments.length<3?df.foldr1(a,f):df.foldr(a,f,z);},unfold:function(pr,f,g,z,o){o=o||win.global;f=df.lambda(f);g=df.lambda(g);pr=df.lambda(pr);var t=[];for(;!pr.call(o,z);t.push(f.call(o,z)),z=g.call(o,z)){}return t;}});});},"dojox/charting/plot2d/Bars":function(){define("dojox/charting/plot2d/Bars",["dojo/_base/kernel","dojo/_base/lang","dojo/_base/array","dojo/_base/declare","./Base","./common","dojox/gfx/fx","dojox/lang/utils","dojox/lang/functional","dojox/lang/functional/reversed"],function(dojo,lang,arr,_2e3,Base,dc,fx,du,df,dfr){var _2e4=dfr.lambda("item.purgeGroup()");return _2e3("dojox.charting.plot2d.Bars",Base,{defaultParams:{hAxis:"x",vAxis:"y",gap:0,animate:null,enableCache:false},optionalParams:{minBarSize:1,maxBarSize:1,stroke:{},outline:{},shadow:{},fill:{},font:"",fontColor:""},constructor:function(_2e5,_2e6){this.opt=lang.clone(this.defaultParams);du.updateWithObject(this.opt,_2e6);du.updateWithPattern(this.opt,_2e6,this.optionalParams);this.series=[];this.hAxis=this.opt.hAxis;this.vAxis=this.opt.vAxis;this.animate=this.opt.animate;},getSeriesStats:function(){var _2e7=dc.collectSimpleStats(this.series),t;_2e7.hmin-=0.5;_2e7.hmax+=0.5;t=_2e7.hmin,_2e7.hmin=_2e7.vmin,_2e7.vmin=t;t=_2e7.hmax,_2e7.hmax=_2e7.vmax,_2e7.vmax=t;return _2e7;},createRect:function(run,_2e8,_2e9){var rect;if(this.opt.enableCache&&run._rectFreePool.length>0){rect=run._rectFreePool.pop();rect.setShape(_2e9);_2e8.add(rect);}else{rect=_2e8.createRect(_2e9);}if(this.opt.enableCache){run._rectUsePool.push(rect);}return rect;},render:function(dim,_2ea){if(this.zoom&&!this.isDataDirty()){return this.performZoom(dim,_2ea);}this.dirty=this.isDirty();this.resetEvents();if(this.dirty){arr.forEach(this.series,_2e4);this._eventSeries={};this.cleanGroup();var s=this.group;df.forEachRev(this.series,function(item){item.cleanGroup(s);});}var t=this.chart.theme,f,gap,_2eb,ht=this._hScaler.scaler.getTransformerFromModel(this._hScaler),vt=this._vScaler.scaler.getTransformerFromModel(this._vScaler),_2ec=Math.max(0,this._hScaler.bounds.lower),_2ed=ht(_2ec),_2ee=this.events();f=dc.calculateBarSize(this._vScaler.bounds.scale,this.opt);gap=f.gap;_2eb=f.size;for(var i=this.series.length-1;i>=0;--i){var run=this.series[i];if(!this.dirty&&!run.dirty){t.skip();this._reconnectEvents(run.name);continue;}run.cleanGroup();if(this.opt.enableCache){run._rectFreePool=(run._rectFreePool?run._rectFreePool:[]).concat(run._rectUsePool?run._rectUsePool:[]);run._rectUsePool=[];}var _2ef=t.next("bar",[this.opt,run]),s=run.group,_2f0=new Array(run.data.length);for(var j=0;j<run.data.length;++j){var _2f1=run.data[j];if(_2f1!==null){var v=typeof _2f1=="number"?_2f1:_2f1.y,hv=ht(v),_2f2=hv-_2ed,w=Math.abs(_2f2),_2f3=typeof _2f1!="number"?t.addMixin(_2ef,"bar",_2f1,true):t.post(_2ef,"bar");if(w>=0&&_2eb>=1){var rect={x:_2ea.l+(v<_2ec?hv:_2ed),y:dim.height-_2ea.b-vt(j+1.5)+gap,width:w,height:_2eb};var _2f4=this._plotFill(_2f3.series.fill,dim,_2ea);_2f4=this._shapeFill(_2f4,rect);var _2f5=this.createRect(run,s,rect).setFill(_2f4).setStroke(_2f3.series.stroke);run.dyn.fill=_2f5.getFill();run.dyn.stroke=_2f5.getStroke();if(_2ee){var o={element:"bar",index:j,run:run,shape:_2f5,x:v,y:j+1.5};this._connectEvents(o);_2f0[j]=o;}if(this.animate){this._animateBar(_2f5,_2ea.l+_2ed,-w);}}}}this._eventSeries[run.name]=_2f0;run.dirty=false;}this.dirty=false;return this;},_animateBar:function(_2f6,_2f7,_2f8){fx.animateTransform(lang.delegate({shape:_2f6,duration:1200,transform:[{name:"translate",start:[_2f7-(_2f7/_2f8),0],end:[0,0]},{name:"scale",start:[1/_2f8,1],end:[1,1]},{name:"original"}]},this.animate)).play();}});});},"dojox/lang/functional/object":function(){define("dojox/lang/functional/object",["dojo/_base/kernel","dojo/_base/lang","dojo/_base/window","./lambda"],function(dojo,lang,win,df){var _2f9={};lang.mixin(df,{keys:function(obj){var t=[];for(var i in obj){if(!(i in _2f9)){t.push(i);}}return t;},values:function(obj){var t=[];for(var i in obj){if(!(i in _2f9)){t.push(obj[i]);}}return t;},filterIn:function(obj,f,o){o=o||win.global;f=df.lambda(f);var t={},v,i;for(i in obj){if(!(i in _2f9)){v=obj[i];if(f.call(o,v,i,obj)){t[i]=v;}}}return t;},forIn:function(obj,f,o){o=o||win.global;f=df.lambda(f);for(var i in obj){if(!(i in _2f9)){f.call(o,obj[i],i,obj);}}return o;},mapIn:function(obj,f,o){o=o||win.global;f=df.lambda(f);var t={},i;for(i in obj){if(!(i in _2f9)){t[i]=f.call(o,obj[i],i,obj);}}return t;}});return df;});},"esri/arcgis/csv":function(){define(["dijit","dojo","dojox","dojo/require!dojox/data/CsvStore"],function(_2fa,dojo,_2fb){dojo.provide("esri.arcgis.csv");dojo.require("dojox.data.CsvStore");(function(){var EAC=esri.arcgis.csv;EAC.latFieldStrings=["lat","latitude","y","ycenter","latitude83","latdecdeg","POINT-Y"];EAC.longFieldStrings=["lon","lng","long","longitude","x","xcenter","longitude83","longdecdeg","POINT-X"];EAC.buildCSVFeatureCollection=function(_2fc){var _2fd=new dojo.Deferred();var _2fe=function(_2ff){_2fd.callback(_2ff);};var _300=esri.request({url:_2fc.url,handleAs:"text",load:function(_301){EAC._processCsvData(_301,_2fc,dojo.hitch(this,_2fe));},error:function(_302){console.error("error: "+_302);}},{usePost:false});return _2fd;};EAC.projectFeatureCollection=function(_303,_304){var _305=new dojo.Deferred();var _306=function(_307){_305.callback(_307);};EAC._projectFeatureSet(_303,new esri.SpatialReference({wkid:4326}),_304,dojo.hitch(this,_306));return _305;};EAC.generateDefaultPopupInfo=function(_308){var _309=_308.layerDefinition.fields;var _30a={"esriFieldTypeDouble":1,"esriFieldTypeSingle":1};var _30b={"esriFieldTypeInteger":1,"esriFieldTypeSmallInteger":1};var dt={"esriFieldTypeDate":1};var _30c=null;var _30d=dojo.map(_309,dojo.hitch(this,function(item){if(item.name.toUpperCase()==="NAME"){_30c=item.name;}var _30e=(item.type!=="esriFieldTypeOID"&&item.type!=="esriFieldTypeGlobalID"&&item.type!=="esriFieldTypeGeometry");var _30f=null;if(_30e){var f=item.name.toLowerCase();var _310=",stretched value,fnode_,tnode_,lpoly_,rpoly_,poly_,subclass,subclass_,rings_ok,rings_nok,";if(_310.indexOf(","+f+",")>-1||f.indexOf("area")>-1||f.indexOf("length")>-1||f.indexOf("shape")>-1||f.indexOf("perimeter")>-1||f.indexOf("objectid")>-1||f.indexOf("_")===f.length-1||(f.indexOf("_i")===f.length-2&&f.length>1)){_30e=false;}if(item.type in _30b){_30f={places:0,digitSeparator:true};}else{if(item.type in _30a){_30f={places:2,digitSeparator:true};}else{if(item.type in dt){_30f={dateFormat:"shortDateShortTime"};}}}}return dojo.mixin({},{fieldName:item.name,label:item.alias,isEditable:true,tooltip:"",visible:_30e,format:_30f,stringFieldOption:"textbox"});}));var _311={title:_30c?"{"+_30c+"}":"",fieldInfos:_30d,description:null,showAttachments:false,mediaInfos:[]};return _311;};EAC._processCsvData=function(data,_312,_313){var _314=data.indexOf("\n");var _315=dojo.trim(data.substr(0,_314));var _316=_312.columnDelimiter;if(!_316){_316=EAC._getSeparator(_315);}var _317=new _2fb.data.CsvStore({data:data,separator:_316});var _318=(dojo.isIE<9)?750:1001;_317.fetch({start:0,count:_318,onComplete:function(_319,_31a){var _31b=0;var _31c={"layerDefinition":_312.layerDefinition,"featureSet":{"features":[],"geometryType":"esriGeometryPoint"}};var _31d=_31c.layerDefinition.objectIdField;if(!_31d){if(!dojo.some(_31c.layerDefinition.fields,function(_31e){if(_31e.type=="esriFieldTypeOID"){_31d=_31e.name;return true;}return false;})){_31c.layerDefinition.fields.push({"name":"__OBJECTID","alias":"__OBJECTID","type":"esriFieldTypeOID","editable":false,"domain":null});_31d="__OBJECTID";}}var _31f,_320;var _321=_317._attributes;var _322=[];var _323=[];dojo.forEach(_31c.layerDefinition.fields,function(_324,_325){if(_324.type==="esriFieldTypeDate"){_322.push(_324.name);}else{if(_324.type==="esriFieldTypeDouble"||_324.type==="esriFieldTypeInteger"){_323.push(_324.name);}}});if(_312.locationInfo&&_312.locationInfo.locationType==="coordinates"){_31f=_312.locationInfo.latitudeFieldName;_320=_312.locationInfo.longitudeFieldName;}else{dojo.forEach(_321,function(_326){var _327;_327=dojo.indexOf(EAC.latFieldStrings,_326.toLowerCase());if(_327!==-1){_31f=_326;}_327=dojo.indexOf(EAC.longFieldStrings,_326.toLowerCase());if(_327!==-1){_320=_326;}},this);}if(!_31f||!_320){setTimeout(function(){console.error("File does not seem to contain fields with point coordinates.");},1);return;}var i=0,il=_319.length;for(i;i<il;i++){if(_31c.featureSet.features.length>=1000){setTimeout(function(){console.error("1000 feature limit reached. Unable to load any more data.");},1);break;}var item=_319[i];var _328=_317.getAttributes(item),_329={};dojo.forEach(_328,function(attr,_32a){if(attr){var _32b=attr;if(attr.length===0){dojo.forEach(_31c.layerDefinition.fields,function(_32c,idx){if(_32c.name==="attribute_"+(idx-1)){attr="attribute_"+(idx-1);}});}if(dojo.some(_322,function(a){return a===attr;})){var val=_317.getValue(item,_32b),date=new Date(val);_329[attr]=EAC._isValidDate(date,val)?date.getTime():null;}else{if(dojo.some(_323,function(a){return a===attr;})){var _32d=dojo.number.parse(_317.getValue(item,_32b));if((attr==_31f||attr==_320)&&(isNaN(_32d)||Math.abs(_32d)>181)){_32d=parseFloat(_317.getValue(item,_32b));if(isNaN(_32d)){_329[attr]=null;}else{_329[attr]=_32d;}}else{if(isNaN(_32d)){_329[attr]=null;}else{_329[attr]=_32d;}}}else{_329[attr]=_317.getValue(item,_32b);}}}});_329[_31d]=_31b;_31b++;var _32e=_329[_31f];var _32f=_329[_320];if(_32f==null||_32e==null||isNaN(_32e)||isNaN(_32f)){continue;}var _330=new esri.geometry.Point(_32f,_32e,new esri.SpatialReference({wkid:4326}));var _331={"geometry":_330.toJson(),"attributes":_329};_31c.featureSet.features.push(_331);}_31c.layerDefinition.name="csv";if(_313){_313(_31c);}},onError:function(_332){console.error("Error fetching items from CSV store: ",_332);}});return true;};EAC._getSeparator=function(_333){var _334=[","," ",";","|","\t"];var _335=0;var _336="";dojo.forEach(_334,function(_337){var _338=_333.split(_337).length;if(_338>_335){_335=_338;_336=_337;}});return _336;};EAC._isValidDate=function(d,_339){if(!d||Object.prototype.toString.call(d)!=="[object Date]"||isNaN(d.getTime())){return false;}var _33a=true;if(dojo.isChrome&&/\d+\W*$/.test(_339)){var _33b=_339.match(/[a-zA-Z]{2,}/);if(_33b){var _33c=false,i=0,len=_33b.length,_33d=/^((jan(uary)?)|(feb(ruary)?)|(mar(ch)?)|(apr(il)?)|(may)|(jun(e)?)|(jul(y)?)|(aug(ust)?)|(sep(tember)?)|(oct(ober)?)|(nov(ember)?)|(dec(ember)?)|(am)|(pm)|(gmt)|(utc))$/i;while(!_33c&&(i<=len)&&!(_33c=!_33d.test(_33b[i]))){i++;}_33a=!_33c;}}return _33a;};EAC._projectFeatureSet=function(_33e,_33f,_340,_341){if(!_33e.featureSet||_33e.featureSet.length===0){return;}if(EAC._sameSpatialReference(_340,_33f)){_341(_33e);return;}var _342=function(_343){var _344=[];dojo.forEach(_33e.featureSet.features,function(_345,i){if(_343[i]){_345.geometry=_343[i];_344.push(_345);}},this);_341(_33e);};var _346=function(_347,args){console.error("error projecting featureSet ("+_33e.layerDefinition.name+"). Try one more time.");EAC._projectGeometries(_348,_33e.featureSet.geometryType,_33f,_340,dojo.hitch(this,_342),dojo.hitch(this,_349));};var _349=function(_34a,args){console.error("error projecting featureSet ("+_33e.layerDefinition.name+"). Final try.");_341(_33e);};if(_33e.featureSet.features&&_33e.featureSet.features.length>0){var _348=[];dojo.forEach(_33e.featureSet.features,function(_34b){_348.push(_34b.geometry);});EAC._projectGeometries(_348,_33e.featureSet.geometryType,_33f,_340,dojo.hitch(this,_342),dojo.hitch(this,_346));}else{_341(_33e);}};EAC._projectGeometries=function(_34c,_34d,inSR,_34e,_34f,_350){if(_34c.length===0){_34f(null);}var _351=esri.geometry.getGeometryType(_34d);var _352=[];dojo.forEach(_34c,function(_353){var _354=new _351(_353);_354.spatialReference=inSR;_352.push(_354);},this);var _355=[102113,102100,3857];if(inSR.wkid&&inSR.wkid===4326&&_34e.wkid&&dojo.indexOf(_355,_34e.wkid)>-1){dojo.forEach(_352,function(_356){if(_356.xmin){_356.xmin=Math.max(_356.xmin,-180);_356.xmax=Math.min(_356.xmax,180);_356.ymin=Math.max(_356.ymin,-89.99);_356.ymax=Math.min(_356.ymax,89.99);}else{if(_356.rings){dojo.forEach(_356.rings,function(ring){dojo.forEach(ring,function(_357){_357[0]=Math.min(Math.max(_357[0],-180),180);_357[1]=Math.min(Math.max(_357[1],-89.99),89.99);},this);},this);}else{if(_356.paths){dojo.forEach(_356.paths,function(path){dojo.forEach(path,function(_358){_358[0]=Math.min(Math.max(_358[0],-180),180);_358[1]=Math.min(Math.max(_358[1],-89.99),89.99);},this);},this);}else{if(_356.x){_356.x=Math.min(Math.max(_356.x,-180),180);_356.y=Math.min(Math.max(_356.y,-89.99),89.99);}}}}},this);_34c=[];dojo.forEach(_352,function(_359){var _35a=esri.geometry.geographicToWebMercator(_359);if(_34e.wkid!==102100){_35a.spatialReference=_34e;}_34c.push(_35a.toJson());},this);_34f(_34c);}else{if(inSR.wkid!==null&&dojo.indexOf(_355,inSR.wkid)>-1&&_34e.wkid!==null&&_34e.wkid===4326){_34c=[];dojo.forEach(_352,function(_35b){_34c.push(esri.geometry.webMercatorToGeographic(_35b).toJson());},this);_34f(_34c);}else{var _35c=function(_35d,args){if(_35d&&_35d.length===_34c.length){_34c=[];dojo.forEach(_35d,function(_35e){if(_35e&&((_35e.rings&&_35e.rings.length>0&&_35e.rings[0].length>0&&_35e.rings[0][0].length>0&&!isNaN(_35e.rings[0][0][0])&&!isNaN(_35e.rings[0][0][1]))||(_35e.paths&&_35e.paths.length>0&&_35e.paths[0].length>0&&_35e.paths[0][0].length>0&&!isNaN(_35e.paths[0][0][0])&&!isNaN(_35e.paths[0][0][1]))||(_35e.xmin&&!isNaN(_35e.xmin)&&_35e.ymin&&!isNaN(_35e.ymin))||(_35e.x&&!isNaN(_35e.x)&&_35e.y&&!isNaN(_35e.y)))){_34c.push(_35e.toJson());}else{_34c.push(null);}},this);_34f(_34c);}else{_350(_35d,args);}};if(esri.config.defaults.geometryService){esri.config.defaults.geometryService.project(_352,_34e,dojo.hitch(this,_35c),_350);}else{_34f(null);}}}};EAC._sameSpatialReference=function(sp1,sp2){var _35f=[102113,102100,3857];if(sp1&&sp2&&sp1.wkid===sp2.wkid&&sp1.wkt===sp2.wkt){return true;}else{if(sp1&&sp2&&sp1.wkid&&sp2.wkid&&dojo.indexOf(_35f,sp1.wkid)>-1&&dojo.indexOf(_35f,sp2.wkid)>-1){return true;}}return false;};}());});},"dojox/charting/scaler/linear":function(){define("dojox/charting/scaler/linear",["dojo/_base/lang","./common"],function(lang,_360){var _361=lang.getObject("dojox.charting.scaler.linear",true);var _362=3,_363=_360.findString,_364=_360.getNumericLabel;var _365=function(min,max,_366,_367,_368,_369,span){_366=lang.delegate(_366);if(!_367){if(_366.fixUpper=="major"){_366.fixUpper="minor";}if(_366.fixLower=="major"){_366.fixLower="minor";}}if(!_368){if(_366.fixUpper=="minor"){_366.fixUpper="micro";}if(_366.fixLower=="minor"){_366.fixLower="micro";}}if(!_369){if(_366.fixUpper=="micro"){_366.fixUpper="none";}if(_366.fixLower=="micro"){_366.fixLower="none";}}var _36a=_363(_366.fixLower,["major"])?Math.floor(_366.min/_367)*_367:_363(_366.fixLower,["minor"])?Math.floor(_366.min/_368)*_368:_363(_366.fixLower,["micro"])?Math.floor(_366.min/_369)*_369:_366.min,_36b=_363(_366.fixUpper,["major"])?Math.ceil(_366.max/_367)*_367:_363(_366.fixUpper,["minor"])?Math.ceil(_366.max/_368)*_368:_363(_366.fixUpper,["micro"])?Math.ceil(_366.max/_369)*_369:_366.max;if(_366.useMin){min=_36a;}if(_366.useMax){max=_36b;}var _36c=(!_367||_366.useMin&&_363(_366.fixLower,["major"]))?min:Math.ceil(min/_367)*_367,_36d=(!_368||_366.useMin&&_363(_366.fixLower,["major","minor"]))?min:Math.ceil(min/_368)*_368,_36e=(!_369||_366.useMin&&_363(_366.fixLower,["major","minor","micro"]))?min:Math.ceil(min/_369)*_369,_36f=!_367?0:(_366.useMax&&_363(_366.fixUpper,["major"])?Math.round((max-_36c)/_367):Math.floor((max-_36c)/_367))+1,_370=!_368?0:(_366.useMax&&_363(_366.fixUpper,["major","minor"])?Math.round((max-_36d)/_368):Math.floor((max-_36d)/_368))+1,_371=!_369?0:(_366.useMax&&_363(_366.fixUpper,["major","minor","micro"])?Math.round((max-_36e)/_369):Math.floor((max-_36e)/_369))+1,_372=_368?Math.round(_367/_368):0,_373=_369?Math.round(_368/_369):0,_374=_367?Math.floor(Math.log(_367)/Math.LN10):0,_375=_368?Math.floor(Math.log(_368)/Math.LN10):0,_376=span/(max-min);if(!isFinite(_376)){_376=1;}return {bounds:{lower:_36a,upper:_36b,from:min,to:max,scale:_376,span:span},major:{tick:_367,start:_36c,count:_36f,prec:_374},minor:{tick:_368,start:_36d,count:_370,prec:_375},micro:{tick:_369,start:_36e,count:_371,prec:0},minorPerMajor:_372,microPerMinor:_373,scaler:_361};};return lang.mixin(_361,{buildScaler:function(min,max,span,_377){var h={fixUpper:"none",fixLower:"none",natural:false};if(_377){if("fixUpper" in _377){h.fixUpper=String(_377.fixUpper);}if("fixLower" in _377){h.fixLower=String(_377.fixLower);}if("natural" in _377){h.natural=Boolean(_377.natural);}}if("min" in _377){min=_377.min;}if("max" in _377){max=_377.max;}if(_377.includeZero){if(min>0){min=0;}if(max<0){max=0;}}h.min=min;h.useMin=true;h.max=max;h.useMax=true;if("from" in _377){min=_377.from;h.useMin=false;}if("to" in _377){max=_377.to;h.useMax=false;}if(max<=min){return _365(min,max,h,0,0,0,span);}var mag=Math.floor(Math.log(max-min)/Math.LN10),_378=_377&&("majorTickStep" in _377)?_377.majorTickStep:Math.pow(10,mag),_379=0,_37a=0,_37b;if(_377&&("minorTickStep" in _377)){_379=_377.minorTickStep;}else{do{_379=_378/10;if(!h.natural||_379>0.9){_37b=_365(min,max,h,_378,_379,0,span);if(_37b.bounds.scale*_37b.minor.tick>_362){break;}}_379=_378/5;if(!h.natural||_379>0.9){_37b=_365(min,max,h,_378,_379,0,span);if(_37b.bounds.scale*_37b.minor.tick>_362){break;}}_379=_378/2;if(!h.natural||_379>0.9){_37b=_365(min,max,h,_378,_379,0,span);if(_37b.bounds.scale*_37b.minor.tick>_362){break;}}return _365(min,max,h,_378,0,0,span);}while(false);}if(_377&&("microTickStep" in _377)){_37a=_377.microTickStep;_37b=_365(min,max,h,_378,_379,_37a,span);}else{do{_37a=_379/10;if(!h.natural||_37a>0.9){_37b=_365(min,max,h,_378,_379,_37a,span);if(_37b.bounds.scale*_37b.micro.tick>_362){break;}}_37a=_379/5;if(!h.natural||_37a>0.9){_37b=_365(min,max,h,_378,_379,_37a,span);if(_37b.bounds.scale*_37b.micro.tick>_362){break;}}_37a=_379/2;if(!h.natural||_37a>0.9){_37b=_365(min,max,h,_378,_379,_37a,span);if(_37b.bounds.scale*_37b.micro.tick>_362){break;}}_37a=0;}while(false);}return _37a?_37b:_365(min,max,h,_378,_379,0,span);},buildTicks:function(_37c,_37d){var step,next,tick,_37e=_37c.major.start,_37f=_37c.minor.start,_380=_37c.micro.start;if(_37d.microTicks&&_37c.micro.tick){step=_37c.micro.tick,next=_380;}else{if(_37d.minorTicks&&_37c.minor.tick){step=_37c.minor.tick,next=_37f;}else{if(_37c.major.tick){step=_37c.major.tick,next=_37e;}else{return null;}}}var _381=1/_37c.bounds.scale;if(_37c.bounds.to<=_37c.bounds.from||isNaN(_381)||!isFinite(_381)||step<=0||isNaN(step)||!isFinite(step)){return null;}var _382=[],_383=[],_384=[];while(next<=_37c.bounds.to+_381){if(Math.abs(_37e-next)<step/2){tick={value:_37e};if(_37d.majorLabels){tick.label=_364(_37e,_37c.major.prec,_37d);}_382.push(tick);_37e+=_37c.major.tick;_37f+=_37c.minor.tick;_380+=_37c.micro.tick;}else{if(Math.abs(_37f-next)<step/2){if(_37d.minorTicks){tick={value:_37f};if(_37d.minorLabels&&(_37c.minMinorStep<=_37c.minor.tick*_37c.bounds.scale)){tick.label=_364(_37f,_37c.minor.prec,_37d);}_383.push(tick);}_37f+=_37c.minor.tick;_380+=_37c.micro.tick;}else{if(_37d.microTicks){_384.push({value:_380});}_380+=_37c.micro.tick;}}next+=step;}return {major:_382,minor:_383,micro:_384};},getTransformerFromModel:function(_385){var _386=_385.bounds.from,_387=_385.bounds.scale;return function(x){return (x-_386)*_387;};},getTransformerFromPlot:function(_388){var _389=_388.bounds.from,_38a=_388.bounds.scale;return function(x){return x/_38a+_389;};}});});},"dojox/gfx/gradutils":function(){define("dojox/gfx/gradutils",["./_base","dojo/_base/lang","./matrix","dojo/_base/Color"],function(g,lang,m,_38b){var _38c=g.gradutils={};function _38d(o,c){if(o<=0){return c[0].color;}var len=c.length;if(o>=1){return c[len-1].color;}for(var i=0;i<len;++i){var stop=c[i];if(stop.offset>=o){if(i){var prev=c[i-1];return _38b.blendColors(new _38b(prev.color),new _38b(stop.color),(o-prev.offset)/(stop.offset-prev.offset));}return stop.color;}}return c[len-1].color;};_38c.getColor=function(fill,pt){var o;if(fill){switch(fill.type){case "linear":var _38e=Math.atan2(fill.y2-fill.y1,fill.x2-fill.x1),_38f=m.rotate(-_38e),_390=m.project(fill.x2-fill.x1,fill.y2-fill.y1),p=m.multiplyPoint(_390,pt),pf1=m.multiplyPoint(_390,fill.x1,fill.y1),pf2=m.multiplyPoint(_390,fill.x2,fill.y2),_391=m.multiplyPoint(_38f,pf2.x-pf1.x,pf2.y-pf1.y).x;o=m.multiplyPoint(_38f,p.x-pf1.x,p.y-pf1.y).x/_391;break;case "radial":var dx=pt.x-fill.cx,dy=pt.y-fill.cy;o=Math.sqrt(dx*dx+dy*dy)/fill.r;break;}return _38d(o,fill.colors);}return new _38b(fill||[0,0,0,0]);};_38c.reverse=function(fill){if(fill){switch(fill.type){case "linear":case "radial":fill=lang.delegate(fill);if(fill.colors){var c=fill.colors,l=c.length,i=0,stop,n=fill.colors=new Array(c.length);for(;i<l;++i){stop=c[i];n[i]={offset:1-stop.offset,color:stop.color};}n.sort(function(a,b){return a.offset-b.offset;});}break;}}return fill;};return _38c;});},"dojox/charting/plot2d/Base":function(){define("dojox/charting/plot2d/Base",["dojo/_base/lang","dojo/_base/declare","dojo/_base/connect","../Element","./_PlotEvents","dojo/_base/array","../scaler/primitive","./common","dojox/gfx/fx"],function(lang,_392,hub,_393,_394,arr,_395,_396,fx){return _392("dojox.charting.plot2d.Base",[_393,_394],{constructor:function(_397,_398){this.zoom=null,this.zoomQueue=[];this.lastWindow={vscale:1,hscale:1,xoffset:0,yoffset:0};},clear:function(){this.series=[];this._hAxis=null;this._vAxis=null;this.dirty=true;return this;},setAxis:function(axis){if(axis){this[axis.vertical?"_vAxis":"_hAxis"]=axis;}return this;},toPage:function(_399){var ah=this._hAxis,av=this._vAxis,sh=ah.getScaler(),sv=av.getScaler(),th=sh.scaler.getTransformerFromModel(sh),tv=sv.scaler.getTransformerFromModel(sv),c=this.chart.getCoords(),o=this.chart.offsets,dim=this.chart.dim;var t=function(_39a){var r={};r.x=th(_39a[ah.name])+c.x+o.l;r.y=c.y+dim.height-o.b-tv(_39a[av.name]);return r;};return _399?t(_399):t;},toData:function(_39b){var ah=this._hAxis,av=this._vAxis,sh=ah.getScaler(),sv=av.getScaler(),th=sh.scaler.getTransformerFromPlot(sh),tv=sv.scaler.getTransformerFromPlot(sv),c=this.chart.getCoords(),o=this.chart.offsets,dim=this.chart.dim;var t=function(_39c){var r={};r[ah.name]=th(_39c.x-c.x-o.l);r[av.name]=tv(c.y+dim.height-_39c.y-o.b);return r;};return _39b?t(_39b):t;},addSeries:function(run){this.series.push(run);return this;},getSeriesStats:function(){return _396.collectSimpleStats(this.series);},calculateAxes:function(dim){this.initializeScalers(dim,this.getSeriesStats());return this;},isDirty:function(){return this.dirty||this._hAxis&&this._hAxis.dirty||this._vAxis&&this._vAxis.dirty;},isDataDirty:function(){return arr.some(this.series,function(item){return item.dirty;});},performZoom:function(dim,_39d){var vs=this._vAxis.scale||1,hs=this._hAxis.scale||1,_39e=dim.height-_39d.b,_39f=this._hScaler.bounds,_3a0=(_39f.from-_39f.lower)*_39f.scale,_3a1=this._vScaler.bounds,_3a2=(_3a1.from-_3a1.lower)*_3a1.scale,_3a3=vs/this.lastWindow.vscale,_3a4=hs/this.lastWindow.hscale,_3a5=(this.lastWindow.xoffset-_3a0)/((this.lastWindow.hscale==1)?hs:this.lastWindow.hscale),_3a6=(_3a2-this.lastWindow.yoffset)/((this.lastWindow.vscale==1)?vs:this.lastWindow.vscale),_3a7=this.group,anim=fx.animateTransform(lang.delegate({shape:_3a7,duration:1200,transform:[{name:"translate",start:[0,0],end:[_39d.l*(1-_3a4),_39e*(1-_3a3)]},{name:"scale",start:[1,1],end:[_3a4,_3a3]},{name:"original"},{name:"translate",start:[0,0],end:[_3a5,_3a6]}]},this.zoom));lang.mixin(this.lastWindow,{vscale:vs,hscale:hs,xoffset:_3a0,yoffset:_3a2});this.zoomQueue.push(anim);hub.connect(anim,"onEnd",this,function(){this.zoom=null;this.zoomQueue.shift();if(this.zoomQueue.length>0){this.zoomQueue[0].play();}});if(this.zoomQueue.length==1){this.zoomQueue[0].play();}return this;},render:function(dim,_3a8){return this;},getRequiredColors:function(){return this.series.length;},initializeScalers:function(dim,_3a9){if(this._hAxis){if(!this._hAxis.initialized()){this._hAxis.calculate(_3a9.hmin,_3a9.hmax,dim.width);}this._hScaler=this._hAxis.getScaler();}else{this._hScaler=_395.buildScaler(_3a9.hmin,_3a9.hmax,dim.width);}if(this._vAxis){if(!this._vAxis.initialized()){this._vAxis.calculate(_3a9.vmin,_3a9.vmax,dim.height);}this._vScaler=this._vAxis.getScaler();}else{this._vScaler=_395.buildScaler(_3a9.vmin,_3a9.vmax,dim.height);}return this;}});});},"dojox/charting/plot2d/Default":function(){define("dojox/charting/plot2d/Default",["dojo/_base/lang","dojo/_base/declare","dojo/_base/array","./Base","./common","dojox/lang/functional","dojox/lang/functional/reversed","dojox/lang/utils","dojox/gfx/fx"],function(lang,_3aa,arr,Base,dc,df,dfr,du,fx){var _3ab=dfr.lambda("item.purgeGroup()");var _3ac=1200;return _3aa("dojox.charting.plot2d.Default",Base,{defaultParams:{hAxis:"x",vAxis:"y",lines:true,areas:false,markers:false,tension:"",animate:false,enableCache:false},optionalParams:{stroke:{},outline:{},shadow:{},fill:{},font:"",fontColor:"",markerStroke:{},markerOutline:{},markerShadow:{},markerFill:{},markerFont:"",markerFontColor:""},constructor:function(_3ad,_3ae){this.opt=lang.clone(this.defaultParams);du.updateWithObject(this.opt,_3ae);du.updateWithPattern(this.opt,_3ae,this.optionalParams);this.series=[];this.hAxis=this.opt.hAxis;this.vAxis=this.opt.vAxis;this.animate=this.opt.animate;},createPath:function(run,_3af,_3b0){var path;if(this.opt.enableCache&&run._pathFreePool.length>0){path=run._pathFreePool.pop();path.setShape(_3b0);_3af.add(path);}else{path=_3af.createPath(_3b0);}if(this.opt.enableCache){run._pathUsePool.push(path);}return path;},render:function(dim,_3b1){if(this.zoom&&!this.isDataDirty()){return this.performZoom(dim,_3b1);}this.resetEvents();this.dirty=this.isDirty();if(this.dirty){arr.forEach(this.series,_3ab);this._eventSeries={};this.cleanGroup();this.group.setTransform(null);var s=this.group;df.forEachRev(this.series,function(item){item.cleanGroup(s);});}var t=this.chart.theme,_3b2,_3b3,_3b4,_3b5=this.events();for(var i=this.series.length-1;i>=0;--i){var run=this.series[i];if(!this.dirty&&!run.dirty){t.skip();this._reconnectEvents(run.name);continue;}run.cleanGroup();if(this.opt.enableCache){run._pathFreePool=(run._pathFreePool?run._pathFreePool:[]).concat(run._pathUsePool?run._pathUsePool:[]);run._pathUsePool=[];}if(!run.data.length){run.dirty=false;t.skip();continue;}var _3b6=t.next(this.opt.areas?"area":"line",[this.opt,run],true),s=run.group,_3b7=[],_3b8=[],rseg=null,_3b9,ht=this._hScaler.scaler.getTransformerFromModel(this._hScaler),vt=this._vScaler.scaler.getTransformerFromModel(this._vScaler),_3ba=this._eventSeries[run.name]=new Array(run.data.length);var _3bb=typeof run.data[0]=="number";var min=_3bb?Math.max(0,Math.floor(this._hScaler.bounds.from-1)):0,max=_3bb?Math.min(run.data.length,Math.ceil(this._hScaler.bounds.to)):run.data.length;for(var j=min;j<max;j++){if(run.data[j]!=null){if(!rseg){rseg=[];_3b8.push(j);_3b7.push(rseg);}rseg.push(run.data[j]);}else{rseg=null;}}for(var seg=0;seg<_3b7.length;seg++){if(typeof _3b7[seg][0]=="number"){_3b9=arr.map(_3b7[seg],function(v,i){return {x:ht(i+_3b8[seg]+1)+_3b1.l,y:dim.height-_3b1.b-vt(v)};},this);}else{_3b9=arr.map(_3b7[seg],function(v,i){return {x:ht(v.x)+_3b1.l,y:dim.height-_3b1.b-vt(v.y)};},this);}var _3bc=this.opt.tension?dc.curve(_3b9,this.opt.tension):"";if(this.opt.areas&&_3b9.length>1){var fill=_3b6.series.fill;var _3bd=lang.clone(_3b9);if(this.opt.tension){var _3be="L"+_3bd[_3bd.length-1].x+","+(dim.height-_3b1.b)+" L"+_3bd[0].x+","+(dim.height-_3b1.b)+" L"+_3bd[0].x+","+_3bd[0].y;run.dyn.fill=s.createPath(_3bc+" "+_3be).setFill(fill).getFill();}else{_3bd.push({x:_3b9[_3b9.length-1].x,y:dim.height-_3b1.b});_3bd.push({x:_3b9[0].x,y:dim.height-_3b1.b});_3bd.push(_3b9[0]);run.dyn.fill=s.createPolyline(_3bd).setFill(fill).getFill();}}if(this.opt.lines||this.opt.markers){_3b2=_3b6.series.stroke;if(_3b6.series.outline){_3b3=run.dyn.outline=dc.makeStroke(_3b6.series.outline);_3b3.width=2*_3b3.width+_3b2.width;}}if(this.opt.markers){run.dyn.marker=_3b6.symbol;}var _3bf=null,_3c0=null,_3c1=null;if(_3b2&&_3b6.series.shadow&&_3b9.length>1){var _3c2=_3b6.series.shadow,_3c3=arr.map(_3b9,function(c){return {x:c.x+_3c2.dx,y:c.y+_3c2.dy};});if(this.opt.lines){if(this.opt.tension){run.dyn.shadow=s.createPath(dc.curve(_3c3,this.opt.tension)).setStroke(_3c2).getStroke();}else{run.dyn.shadow=s.createPolyline(_3c3).setStroke(_3c2).getStroke();}}if(this.opt.markers&&_3b6.marker.shadow){_3c2=_3b6.marker.shadow;_3c1=arr.map(_3c3,function(c){return this.createPath(run,s,"M"+c.x+" "+c.y+" "+_3b6.symbol).setStroke(_3c2).setFill(_3c2.color);},this);}}if(this.opt.lines&&_3b9.length>1){if(_3b3){if(this.opt.tension){run.dyn.outline=s.createPath(_3bc).setStroke(_3b3).getStroke();}else{run.dyn.outline=s.createPolyline(_3b9).setStroke(_3b3).getStroke();}}if(this.opt.tension){run.dyn.stroke=s.createPath(_3bc).setStroke(_3b2).getStroke();}else{run.dyn.stroke=s.createPolyline(_3b9).setStroke(_3b2).getStroke();}}if(this.opt.markers){_3bf=new Array(_3b9.length);_3c0=new Array(_3b9.length);_3b3=null;if(_3b6.marker.outline){_3b3=dc.makeStroke(_3b6.marker.outline);_3b3.width=2*_3b3.width+(_3b6.marker.stroke?_3b6.marker.stroke.width:0);}arr.forEach(_3b9,function(c,i){var path="M"+c.x+" "+c.y+" "+_3b6.symbol;if(_3b3){_3c0[i]=this.createPath(run,s,path).setStroke(_3b3);}_3bf[i]=this.createPath(run,s,path).setStroke(_3b6.marker.stroke).setFill(_3b6.marker.fill);},this);run.dyn.markerFill=_3b6.marker.fill;run.dyn.markerStroke=_3b6.marker.stroke;if(_3b5){arr.forEach(_3bf,function(s,i){var o={element:"marker",index:i+_3b8[seg],run:run,shape:s,outline:_3c0[i]||null,shadow:_3c1&&_3c1[i]||null,cx:_3b9[i].x,cy:_3b9[i].y};if(typeof _3b7[seg][0]=="number"){o.x=i+_3b8[seg]+1;o.y=_3b7[seg][i];}else{o.x=_3b7[seg][i].x;o.y=_3b7[seg][i].y;}this._connectEvents(o);_3ba[i+_3b8[seg]]=o;},this);}else{delete this._eventSeries[run.name];}}}run.dirty=false;}if(this.animate){var _3c4=this.group;fx.animateTransform(lang.delegate({shape:_3c4,duration:_3ac,transform:[{name:"translate",start:[0,dim.height-_3b1.b],end:[0,0]},{name:"scale",start:[1,0],end:[1,1]},{name:"original"}]},this.animate)).play();}this.dirty=false;return this;}});});},"dojox/charting/plot2d/StackedLines":function(){define("dojox/charting/plot2d/StackedLines",["dojo/_base/declare","./Stacked"],function(_3c5,_3c6){return _3c5("dojox.charting.plot2d.StackedLines",_3c6,{constructor:function(){this.opt.lines=true;}});});},"dojox/color/Palette":function(){define("dojox/color/Palette",["dojo/_base/kernel","../main","dojo/_base/lang","dojo/_base/array","./_base"],function(dojo,_3c7,lang,arr,dxc){dxc.Palette=function(base){this.colors=[];if(base instanceof dxc.Palette){this.colors=base.colors.slice(0);}else{if(base instanceof dxc.Color){this.colors=[null,null,base,null,null];}else{if(lang.isArray(base)){this.colors=arr.map(base.slice(0),function(item){if(lang.isString(item)){return new dxc.Color(item);}return item;});}else{if(lang.isString(base)){this.colors=[null,null,new dxc.Color(base),null,null];}}}}};function _3c8(p,_3c9,val){var ret=new dxc.Palette();ret.colors=[];arr.forEach(p.colors,function(item){var r=(_3c9=="dr")?item.r+val:item.r,g=(_3c9=="dg")?item.g+val:item.g,b=(_3c9=="db")?item.b+val:item.b,a=(_3c9=="da")?item.a+val:item.a;ret.colors.push(new dxc.Color({r:Math.min(255,Math.max(0,r)),g:Math.min(255,Math.max(0,g)),b:Math.min(255,Math.max(0,b)),a:Math.min(1,Math.max(0,a))}));});return ret;};function tCMY(p,_3ca,val){var ret=new dxc.Palette();ret.colors=[];arr.forEach(p.colors,function(item){var o=item.toCmy(),c=(_3ca=="dc")?o.c+val:o.c,m=(_3ca=="dm")?o.m+val:o.m,y=(_3ca=="dy")?o.y+val:o.y;ret.colors.push(dxc.fromCmy(Math.min(100,Math.max(0,c)),Math.min(100,Math.max(0,m)),Math.min(100,Math.max(0,y))));});return ret;};function _3cb(p,_3cc,val){var ret=new dxc.Palette();ret.colors=[];arr.forEach(p.colors,function(item){var o=item.toCmyk(),c=(_3cc=="dc")?o.c+val:o.c,m=(_3cc=="dm")?o.m+val:o.m,y=(_3cc=="dy")?o.y+val:o.y,k=(_3cc=="dk")?o.b+val:o.b;ret.colors.push(dxc.fromCmyk(Math.min(100,Math.max(0,c)),Math.min(100,Math.max(0,m)),Math.min(100,Math.max(0,y)),Math.min(100,Math.max(0,k))));});return ret;};function tHSL(p,_3cd,val){var ret=new dxc.Palette();ret.colors=[];arr.forEach(p.colors,function(item){var o=item.toHsl(),h=(_3cd=="dh")?o.h+val:o.h,s=(_3cd=="ds")?o.s+val:o.s,l=(_3cd=="dl")?o.l+val:o.l;ret.colors.push(dxc.fromHsl(h%360,Math.min(100,Math.max(0,s)),Math.min(100,Math.max(0,l))));});return ret;};function tHSV(p,_3ce,val){var ret=new dxc.Palette();ret.colors=[];arr.forEach(p.colors,function(item){var o=item.toHsv(),h=(_3ce=="dh")?o.h+val:o.h,s=(_3ce=="ds")?o.s+val:o.s,v=(_3ce=="dv")?o.v+val:o.v;ret.colors.push(dxc.fromHsv(h%360,Math.min(100,Math.max(0,s)),Math.min(100,Math.max(0,v))));});return ret;};function _3cf(val,low,high){return high-((high-val)*((high-low)/high));};lang.extend(dxc.Palette,{transform:function(_3d0){var fn=_3c8;if(_3d0.use){var use=_3d0.use.toLowerCase();if(use.indexOf("hs")==0){if(use.charAt(2)=="l"){fn=tHSL;}else{fn=tHSV;}}else{if(use.indexOf("cmy")==0){if(use.charAt(3)=="k"){fn=_3cb;}else{fn=tCMY;}}}}else{if("dc" in _3d0||"dm" in _3d0||"dy" in _3d0){if("dk" in _3d0){fn=_3cb;}else{fn=tCMY;}}else{if("dh" in _3d0||"ds" in _3d0){if("dv" in _3d0){fn=tHSV;}else{fn=tHSL;}}}}var _3d1=this;for(var p in _3d0){if(p=="use"){continue;}_3d1=fn(_3d1,p,_3d0[p]);}return _3d1;},clone:function(){return new dxc.Palette(this);}});lang.mixin(dxc.Palette,{generators:{analogous:function(args){var high=args.high||60,low=args.low||18,base=lang.isString(args.base)?new dxc.Color(args.base):args.base,hsv=base.toHsv();var h=[(hsv.h+low+360)%360,(hsv.h+Math.round(low/2)+360)%360,hsv.h,(hsv.h-Math.round(high/2)+360)%360,(hsv.h-high+360)%360];var s1=Math.max(10,(hsv.s<=95)?hsv.s+5:(100-(hsv.s-95))),s2=(hsv.s>1)?hsv.s-1:21-hsv.s,v1=(hsv.v>=92)?hsv.v-9:Math.max(hsv.v+9,20),v2=(hsv.v<=90)?Math.max(hsv.v+5,20):(95+Math.ceil((hsv.v-90)/2)),s=[s1,s2,hsv.s,s1,s1],v=[v1,v2,hsv.v,v1,v2];return new dxc.Palette(arr.map(h,function(hue,i){return dxc.fromHsv(hue,s[i],v[i]);}));},monochromatic:function(args){var base=lang.isString(args.base)?new dxc.Color(args.base):args.base,hsv=base.toHsv();var s1=(hsv.s-30>9)?hsv.s-30:hsv.s+30,s2=hsv.s,v1=_3cf(hsv.v,20,100),v2=(hsv.v-20>20)?hsv.v-20:hsv.v+60,v3=(hsv.v-50>20)?hsv.v-50:hsv.v+30;return new dxc.Palette([dxc.fromHsv(hsv.h,s1,v1),dxc.fromHsv(hsv.h,s2,v3),base,dxc.fromHsv(hsv.h,s1,v3),dxc.fromHsv(hsv.h,s2,v2)]);},triadic:function(args){var base=lang.isString(args.base)?new dxc.Color(args.base):args.base,hsv=base.toHsv();var h1=(hsv.h+57+360)%360,h2=(hsv.h-157+360)%360,s1=(hsv.s>20)?hsv.s-10:hsv.s+10,s2=(hsv.s>90)?hsv.s-10:hsv.s+10,s3=(hsv.s>95)?hsv.s-5:hsv.s+5,v1=(hsv.v-20>20)?hsv.v-20:hsv.v+20,v2=(hsv.v-30>20)?hsv.v-30:hsv.v+30,v3=(hsv.v-30>70)?hsv.v-30:hsv.v+30;return new dxc.Palette([dxc.fromHsv(h1,s1,hsv.v),dxc.fromHsv(hsv.h,s2,v2),base,dxc.fromHsv(h2,s2,v1),dxc.fromHsv(h2,s3,v3)]);},complementary:function(args){var base=lang.isString(args.base)?new dxc.Color(args.base):args.base,hsv=base.toHsv();var h1=((hsv.h*2)+137<360)?(hsv.h*2)+137:Math.floor(hsv.h/2)-137,s1=Math.max(hsv.s-10,0),s2=_3cf(hsv.s,10,100),s3=Math.min(100,hsv.s+20),v1=Math.min(100,hsv.v+30),v2=(hsv.v>20)?hsv.v-30:hsv.v+30;return new dxc.Palette([dxc.fromHsv(hsv.h,s1,v1),dxc.fromHsv(hsv.h,s2,v2),base,dxc.fromHsv(h1,s3,v2),dxc.fromHsv(h1,hsv.s,hsv.v)]);},splitComplementary:function(args){var base=lang.isString(args.base)?new dxc.Color(args.base):args.base,_3d2=args.da||30,hsv=base.toHsv();var _3d3=((hsv.h*2)+137<360)?(hsv.h*2)+137:Math.floor(hsv.h/2)-137,h1=(_3d3-_3d2+360)%360,h2=(_3d3+_3d2)%360,s1=Math.max(hsv.s-10,0),s2=_3cf(hsv.s,10,100),s3=Math.min(100,hsv.s+20),v1=Math.min(100,hsv.v+30),v2=(hsv.v>20)?hsv.v-30:hsv.v+30;return new dxc.Palette([dxc.fromHsv(h1,s1,v1),dxc.fromHsv(h1,s2,v2),base,dxc.fromHsv(h2,s3,v2),dxc.fromHsv(h2,hsv.s,hsv.v)]);},compound:function(args){var base=lang.isString(args.base)?new dxc.Color(args.base):args.base,hsv=base.toHsv();var h1=((hsv.h*2)+18<360)?(hsv.h*2)+18:Math.floor(hsv.h/2)-18,h2=((hsv.h*2)+120<360)?(hsv.h*2)+120:Math.floor(hsv.h/2)-120,h3=((hsv.h*2)+99<360)?(hsv.h*2)+99:Math.floor(hsv.h/2)-99,s1=(hsv.s-40>10)?hsv.s-40:hsv.s+40,s2=(hsv.s-10>80)?hsv.s-10:hsv.s+10,s3=(hsv.s-25>10)?hsv.s-25:hsv.s+25,v1=(hsv.v-40>10)?hsv.v-40:hsv.v+40,v2=(hsv.v-20>80)?hsv.v-20:hsv.v+20,v3=Math.max(hsv.v,20);return new dxc.Palette([dxc.fromHsv(h1,s1,v1),dxc.fromHsv(h1,s2,v2),base,dxc.fromHsv(h2,s3,v3),dxc.fromHsv(h3,s2,v2)]);},shades:function(args){var base=lang.isString(args.base)?new dxc.Color(args.base):args.base,hsv=base.toHsv();var s=(hsv.s==100&&hsv.v==0)?0:hsv.s,v1=(hsv.v-50>20)?hsv.v-50:hsv.v+30,v2=(hsv.v-25>=20)?hsv.v-25:hsv.v+55,v3=(hsv.v-75>=20)?hsv.v-75:hsv.v+5,v4=Math.max(hsv.v-10,20);return new dxc.Palette([new dxc.fromHsv(hsv.h,s,v1),new dxc.fromHsv(hsv.h,s,v2),base,new dxc.fromHsv(hsv.h,s,v3),new dxc.fromHsv(hsv.h,s,v4)]);}},generate:function(base,type){if(lang.isFunction(type)){return type({base:base});}else{if(dxc.Palette.generators[type]){return dxc.Palette.generators[type]({base:base});}}throw new Error("dojox.color.Palette.generate: the specified generator ('"+type+"') does not exist.");}});return dxc.Palette;});},"url:dijit/templates/Tooltip.html":"<div class=\"dijitTooltip dijitTooltipLeft\" id=\"dojoTooltip\"\r\n\t><div class=\"dijitTooltipContainer dijitTooltipContents\" data-dojo-attach-point=\"containerNode\" role='alert'></div\r\n\t><div class=\"dijitTooltipConnector\" data-dojo-attach-point=\"connectorNode\"></div\r\n></div>\r\n","dojox/charting/axis2d/common":function(){define("dojox/charting/axis2d/common",["dojo/_base/lang","dojo/_base/html","dojo/_base/window","dojo/dom-geometry","dojox/gfx"],function(lang,html,win,_3d4,g){var _3d5=lang.getObject("dojox.charting.axis2d.common",true);var _3d6=function(s){s.marginLeft="0px";s.marginTop="0px";s.marginRight="0px";s.marginBottom="0px";s.paddingLeft="0px";s.paddingTop="0px";s.paddingRight="0px";s.paddingBottom="0px";s.borderLeftWidth="0px";s.borderTopWidth="0px";s.borderRightWidth="0px";s.borderBottomWidth="0px";};var _3d7=function(n){if(n["getBoundingClientRect"]){var bcr=n.getBoundingClientRect();return bcr.width||(bcr.right-bcr.left);}else{return _3d4.getMarginBox(n).w;}};return lang.mixin(_3d5,{createText:{gfx:function(_3d8,_3d9,x,y,_3da,text,font,_3db){return _3d9.createText({x:x,y:y,text:text,align:_3da}).setFont(font).setFill(_3db);},html:function(_3dc,_3dd,x,y,_3de,text,font,_3df,_3e0){var p=win.doc.createElement("div"),s=p.style,_3e1;if(_3dc.getTextDir){p.dir=_3dc.getTextDir(text);}_3d6(s);s.font=font;p.innerHTML=String(text).replace(/\s/g,"&nbsp;");s.color=_3df;s.position="absolute";s.left="-10000px";win.body().appendChild(p);var size=g.normalizedLength(g.splitFontString(font).size);if(!_3e0){_3e1=_3d7(p);}if(p.dir=="rtl"){x+=_3e0?_3e0:_3e1;}win.body().removeChild(p);s.position="relative";if(_3e0){s.width=_3e0+"px";switch(_3de){case "middle":s.textAlign="center";s.left=(x-_3e0/2)+"px";break;case "end":s.textAlign="right";s.left=(x-_3e0)+"px";break;default:s.left=x+"px";s.textAlign="left";break;}}else{switch(_3de){case "middle":s.left=Math.floor(x-_3e1/2)+"px";break;case "end":s.left=Math.floor(x-_3e1)+"px";break;default:s.left=Math.floor(x)+"px";break;}}s.top=Math.floor(y-size)+"px";s.whiteSpace="nowrap";var wrap=win.doc.createElement("div"),w=wrap.style;_3d6(w);w.width="0px";w.height="0px";wrap.appendChild(p);_3dc.node.insertBefore(wrap,_3dc.node.firstChild);return wrap;}}});});},"dojo/fx/easing":function(){define(["../_base/lang"],function(lang){var _3e2={linear:function(n){return n;},quadIn:function(n){return Math.pow(n,2);},quadOut:function(n){return n*(n-2)*-1;},quadInOut:function(n){n=n*2;if(n<1){return Math.pow(n,2)/2;}return -1*((--n)*(n-2)-1)/2;},cubicIn:function(n){return Math.pow(n,3);},cubicOut:function(n){return Math.pow(n-1,3)+1;},cubicInOut:function(n){n=n*2;if(n<1){return Math.pow(n,3)/2;}n-=2;return (Math.pow(n,3)+2)/2;},quartIn:function(n){return Math.pow(n,4);},quartOut:function(n){return -1*(Math.pow(n-1,4)-1);},quartInOut:function(n){n=n*2;if(n<1){return Math.pow(n,4)/2;}n-=2;return -1/2*(Math.pow(n,4)-2);},quintIn:function(n){return Math.pow(n,5);},quintOut:function(n){return Math.pow(n-1,5)+1;},quintInOut:function(n){n=n*2;if(n<1){return Math.pow(n,5)/2;}n-=2;return (Math.pow(n,5)+2)/2;},sineIn:function(n){return -1*Math.cos(n*(Math.PI/2))+1;},sineOut:function(n){return Math.sin(n*(Math.PI/2));},sineInOut:function(n){return -1*(Math.cos(Math.PI*n)-1)/2;},expoIn:function(n){return (n==0)?0:Math.pow(2,10*(n-1));},expoOut:function(n){return (n==1)?1:(-1*Math.pow(2,-10*n)+1);},expoInOut:function(n){if(n==0){return 0;}if(n==1){return 1;}n=n*2;if(n<1){return Math.pow(2,10*(n-1))/2;}--n;return (-1*Math.pow(2,-10*n)+2)/2;},circIn:function(n){return -1*(Math.sqrt(1-Math.pow(n,2))-1);},circOut:function(n){n=n-1;return Math.sqrt(1-Math.pow(n,2));},circInOut:function(n){n=n*2;if(n<1){return -1/2*(Math.sqrt(1-Math.pow(n,2))-1);}n-=2;return 1/2*(Math.sqrt(1-Math.pow(n,2))+1);},backIn:function(n){var s=1.70158;return Math.pow(n,2)*((s+1)*n-s);},backOut:function(n){n=n-1;var s=1.70158;return Math.pow(n,2)*((s+1)*n+s)+1;},backInOut:function(n){var s=1.70158*1.525;n=n*2;if(n<1){return (Math.pow(n,2)*((s+1)*n-s))/2;}n-=2;return (Math.pow(n,2)*((s+1)*n+s)+2)/2;},elasticIn:function(n){if(n==0||n==1){return n;}var p=0.3;var s=p/4;n=n-1;return -1*Math.pow(2,10*n)*Math.sin((n-s)*(2*Math.PI)/p);},elasticOut:function(n){if(n==0||n==1){return n;}var p=0.3;var s=p/4;return Math.pow(2,-10*n)*Math.sin((n-s)*(2*Math.PI)/p)+1;},elasticInOut:function(n){if(n==0){return 0;}n=n*2;if(n==2){return 1;}var p=0.3*1.5;var s=p/4;if(n<1){n-=1;return -0.5*(Math.pow(2,10*n)*Math.sin((n-s)*(2*Math.PI)/p));}n-=1;return 0.5*(Math.pow(2,-10*n)*Math.sin((n-s)*(2*Math.PI)/p))+1;},bounceIn:function(n){return (1-_3e2.bounceOut(1-n));},bounceOut:function(n){var s=7.5625;var p=2.75;var l;if(n<(1/p)){l=s*Math.pow(n,2);}else{if(n<(2/p)){n-=(1.5/p);l=s*Math.pow(n,2)+0.75;}else{if(n<(2.5/p)){n-=(2.25/p);l=s*Math.pow(n,2)+0.9375;}else{n-=(2.625/p);l=s*Math.pow(n,2)+0.984375;}}}return l;},bounceInOut:function(n){if(n<0.5){return _3e2.bounceIn(n*2)/2;}return (_3e2.bounceOut(n*2-1)/2)+0.5;}};lang.setObject("dojo.fx.easing",_3e2);return _3e2;});},"dojox/charting/plot2d/StackedAreas":function(){define("dojox/charting/plot2d/StackedAreas",["dojo/_base/declare","./Stacked"],function(_3e3,_3e4){return _3e3("dojox.charting.plot2d.StackedAreas",_3e4,{constructor:function(){this.opt.lines=true;this.opt.areas=true;}});});},"dojox/charting/themes/PlotKit/base":function(){define("dojox/charting/themes/PlotKit/base",["dojo/_base/kernel","dojo/_base/lang","../../Theme","../common"],function(dojo,lang,_3e5,_3e6){var pk=lang.getObject("PlotKit",true,_3e6);pk.base=new _3e5({chart:{stroke:null,fill:"yellow"},plotarea:{stroke:null,fill:"yellow"},axis:{stroke:{color:"#fff",width:1},line:{color:"#fff",width:0.5},majorTick:{color:"#fff",width:0.5,length:6},minorTick:{color:"#fff",width:0.5,length:3},tick:{font:"normal normal normal 7pt Helvetica,Arial,sans-serif",fontColor:"#999"}},series:{stroke:{width:2.5,color:"#fff"},fill:"#666",font:"normal normal normal 7.5pt Helvetica,Arial,sans-serif",fontColor:"#666"},marker:{stroke:{width:2},fill:"#333",font:"normal normal normal 7pt Helvetica,Arial,sans-serif",fontColor:"#666"},colors:["red","green","blue"]});pk.base.next=function(_3e7,_3e8,_3e9){var _3ea=_3e5.prototype.next.apply(this,arguments);if(_3e7=="line"){_3ea.marker.outline={width:2,color:"#fff"};_3ea.series.stroke.width=3.5;_3ea.marker.stroke.width=2;}else{if(_3e7=="candlestick"){_3ea.series.stroke.width=1;}else{_3ea.series.stroke.color="#fff";}}return _3ea;};return pk;});},"dojo/data/util/simpleFetch":function(){define(["dojo/_base/lang","dojo/_base/window","./sorter"],function(lang,_3eb,_3ec){var _3ed=lang.getObject("dojo.data.util.simpleFetch",true);_3ed.fetch=function(_3ee){_3ee=_3ee||{};if(!_3ee.store){_3ee.store=this;}var self=this;var _3ef=function(_3f0,_3f1){if(_3f1.onError){var _3f2=_3f1.scope||_3eb.global;_3f1.onError.call(_3f2,_3f0,_3f1);}};var _3f3=function(_3f4,_3f5){var _3f6=_3f5.abort||null;var _3f7=false;var _3f8=_3f5.start?_3f5.start:0;var _3f9=(_3f5.count&&(_3f5.count!==Infinity))?(_3f8+_3f5.count):_3f4.length;_3f5.abort=function(){_3f7=true;if(_3f6){_3f6.call(_3f5);}};var _3fa=_3f5.scope||_3eb.global;if(!_3f5.store){_3f5.store=self;}if(_3f5.onBegin){_3f5.onBegin.call(_3fa,_3f4.length,_3f5);}if(_3f5.sort){_3f4.sort(_3ec.createSortFunction(_3f5.sort,self));}if(_3f5.onItem){for(var i=_3f8;(i<_3f4.length)&&(i<_3f9);++i){var item=_3f4[i];if(!_3f7){_3f5.onItem.call(_3fa,item,_3f5);}}}if(_3f5.onComplete&&!_3f7){var _3fb=null;if(!_3f5.onItem){_3fb=_3f4.slice(_3f8,_3f9);}_3f5.onComplete.call(_3fa,_3fb,_3f5);}};this._fetchItems(_3ee,_3f3,_3ef);return _3ee;};return _3ed;});},"dojox/charting/plot2d/_PlotEvents":function(){define("dojox/charting/plot2d/_PlotEvents",["dojo/_base/lang","dojo/_base/array","dojo/_base/declare","dojo/_base/connect"],function(lang,arr,_3fc,hub){return _3fc("dojox.charting.plot2d._PlotEvents",null,{constructor:function(){this._shapeEvents=[];this._eventSeries={};},destroy:function(){this.resetEvents();this.inherited(arguments);},plotEvent:function(o){},raiseEvent:function(o){this.plotEvent(o);var t=lang.delegate(o);t.originalEvent=o.type;t.originalPlot=o.plot;t.type="onindirect";arr.forEach(this.chart.stack,function(plot){if(plot!==this&&plot.plotEvent){t.plot=plot;plot.plotEvent(t);}},this);},connect:function(_3fd,_3fe){this.dirty=true;return hub.connect(this,"plotEvent",_3fd,_3fe);},events:function(){return !!this.plotEvent.after;},resetEvents:function(){if(this._shapeEvents.length){arr.forEach(this._shapeEvents,function(item){item.shape.disconnect(item.handle);});this._shapeEvents=[];}this.raiseEvent({type:"onplotreset",plot:this});},_connectSingleEvent:function(o,_3ff){this._shapeEvents.push({shape:o.eventMask,handle:o.eventMask.connect(_3ff,this,function(e){o.type=_3ff;o.event=e;this.raiseEvent(o);o.event=null;})});},_connectEvents:function(o){if(o){o.chart=this.chart;o.plot=this;o.hAxis=this.hAxis||null;o.vAxis=this.vAxis||null;o.eventMask=o.eventMask||o.shape;this._connectSingleEvent(o,"onmouseover");this._connectSingleEvent(o,"onmouseout");this._connectSingleEvent(o,"onclick");}},_reconnectEvents:function(_400){var a=this._eventSeries[_400];if(a){arr.forEach(a,this._connectEvents,this);}},fireEvent:function(_401,_402,_403,_404){var s=this._eventSeries[_401];if(s&&s.length&&_403<s.length){var o=s[_403];o.type=_402;o.event=_404||null;this.raiseEvent(o);o.event=null;}}});});},"esri/PopupBase":function(){define(["dijit","dojo","dojox"],function(_405,dojo,_406){dojo.provide("esri.PopupBase");dojo.declare("esri.PopupBase",null,{onSetFeatures:function(){},onClearFeatures:function(){},onSelectionChange:function(){},onDfdComplete:function(){var _407=this._marked;if(_407){this._marked=null;this.showClosestFirst(_407);}},initialize:function(){this.count=0;this.selectedIndex=-1;},cleanup:function(){this.features=this.deferreds=null;},setFeatures:function(arg){if(!arg||!arg.length){return;}this.clearFeatures();var _408,_409;if(arg[0] instanceof dojo.Deferred){_409=arg;}else{_408=arg;}if(_408){this._updateFeatures(null,_408);}else{this.deferreds=_409;_409=_409.slice(0);dojo.forEach(_409,function(dfd){dfd.addBoth(dojo.hitch(this,this._updateFeatures,dfd));},this);}},clearFeatures:function(){this.features=this.deferreds=this._marked=null;this.count=0;var _40a=this.selectedIndex;this.selectedIndex=-1;if(_40a>-1){this.onSelectionChange();}this.onClearFeatures();},getSelectedFeature:function(){var _40b=this.features;if(_40b){return _40b[this.selectedIndex];}},select:function(_40c){if(_40c<0||_40c>=this.count){return;}this.selectedIndex=_40c;this.onSelectionChange();},enableHighlight:function(map){this._highlighted=map.graphics.add(new esri.Graphic(new esri.geometry.Point(0,0,map.spatialReference)));this._highlighted.hide();var ESYM=esri.symbol;if(!this.markerSymbol){var _40d=(this.markerSymbol=new ESYM.SimpleMarkerSymbol());_40d.setStyle(ESYM.SimpleMarkerSymbol.STYLE_TARGET);_40d._setDim(16,16,7);_40d.setOutline(new ESYM.CartographicLineSymbol(ESYM.SimpleLineSymbol.STYLE_SOLID,new dojo.Color([0,255,255]),2,ESYM.CartographicLineSymbol.CAP_ROUND,ESYM.CartographicLineSymbol.JOIN_ROUND));_40d.setColor(new dojo.Color([0,0,0,0]));}if(!this.lineSymbol){this.lineSymbol=new ESYM.SimpleLineSymbol(ESYM.SimpleLineSymbol.STYLE_SOLID,new dojo.Color([0,255,255]),2);}if(!this.fillSymbol){this.fillSymbol=new ESYM.SimpleFillSymbol(ESYM.SimpleFillSymbol.STYLE_NULL,new ESYM.SimpleLineSymbol(ESYM.SimpleLineSymbol.STYLE_SOLID,new dojo.Color([0,255,255]),2),new dojo.Color([0,0,0,0]));}},disableHighlight:function(map){var _40e=this._highlighted;if(_40e){_40e.hide();map.graphics.remove(_40e);delete this._highlighted;}this.markerSymbol=this.lineSymbol=this.fillSymbol=null;},showHighlight:function(){if(this._highlighted&&this.features&&this.features[this.selectedIndex]){this._highlighted.show();}},hideHighlight:function(){if(this._highlighted){this._highlighted.hide();}},updateHighlight:function(map,_40f){var _410=_40f.geometry,_411=this._highlighted;if(!_410||!_411){return;}_411.hide();if(!_411.getLayer()&&map){map.graphics.add(_411);}_411.setGeometry(esri.geometry.fromJson(_410.toJson()));var _412;switch(_410.type){case "point":case "multipoint":_412=this.markerSymbol;_412.setOffset(0,0);_412.setAngle(0);var lyr=_40f.getLayer();if(lyr){var _413=lyr._getSymbol(_40f),_414,_415,xoff=0,yoff=0,_416=0;if(_413){switch(_413.type){case "simplemarkersymbol":_414=_415=(_413.size||0);break;case "picturemarkersymbol":_414=(_413.width||0);_415=(_413.height||0);break;}xoff=_413.xoffset||0;yoff=_413.yoffset||0;_416=_413.angle||0;}if(_414&&_415){_412._setDim(_414+1,_415+1,7);}_412.setOffset(xoff,yoff);_412.setAngle(_416);}break;case "polyline":_412=this.lineSymbol;break;case "polygon":_412=this.fillSymbol;break;}_411.setSymbol(_412);},showClosestFirst:function(_417){var _418=this.features;if(_418&&_418.length){if(_418.length>1){var i,_419=Infinity,_41a=-1,geom,_41b=esri.geometry.getLength,_41c;for(i=_418.length-1;i>=0;i--){geom=_418[i].geometry;_41c=0;try{_41c=(geom.type==="point")?_41b(_417,geom):_41b(_417,geom.getExtent().getCenter());}catch(e){}if(_41c>0&&_41c<_419){_419=_41c;_41a=i;}}if(_41a>0){_418.splice(0,0,_418.splice(_41a,1)[0]);this.select(0);}}}else{if(this.deferreds){this._marked=_417;}}},_unbind:function(dfd){var _41d=dojo.indexOf(this.deferreds,dfd);if(_41d===-1){return;}this.deferreds.splice(_41d,1);if(!this.deferreds.length){this.deferreds=null;return 2;}return 1;},_updateFeatures:function(dfd,_41e){if(dfd){if(this.deferreds){var res=this._unbind(dfd);if(!res){return;}if(_41e&&_41e instanceof Error){this.onDfdComplete(_41e);if(res===2){this.onSetFeatures();}return;}if(_41e&&_41e.length){if(!this.features){this.features=_41e;this.count=_41e.length;this.selectedIndex=0;this.onDfdComplete();if(res===2){this.onSetFeatures();}this.select(0);}else{var _41f=dojo.filter(_41e,function(_420){return dojo.indexOf(this.features,_420)===-1;},this);this.features=this.features.concat(_41f);this.count=this.features.length;this.onDfdComplete();if(res===2){this.onSetFeatures();}}}else{this.onDfdComplete();if(res===2){this.onSetFeatures();}}}}else{this.features=_41e;this.count=_41e.length;this.selectedIndex=0;this.onSetFeatures();this.select(0);}}});dojo.declare("esri.PopupInfoTemplate",[esri.InfoTemplate],{"-chains-":{constructor:"manual"},initialize:function(json){if(!json){return;}this.info=json;this.title=this.getTitle;this.content=this.getContent;var _421=(this._fieldLabels={}),_422=(this._fieldsMap={});if(json.fieldInfos){dojo.forEach(json.fieldInfos,function(_423){_421[_423.fieldName]=_423.label;_422[_423.fieldName]=_423;});}},toJson:function(){return dojo.fromJson(dojo.toJson(this.info));},getTitle:function(){},getContent:function(){},getComponents:function(_424){var _425=this.info,_426=_424.getLayer(),_427=dojo.clone(_424.attributes)||{},_428=dojo.clone(_427),_429=_425.fieldInfos,_42a="",_42b="",_42c,_42d,_42e,_42f=_426&&_426._getDateOpts&&_426._getDateOpts().properties,_430={dateFormat:{properties:_42f,formatter:"DateFormat"+this._dateFormats["shortDateShortTime"]}};if(_429){dojo.forEach(_429,function(_431){var _432=_431.fieldName,val=_428[_432];_428[_432]=this._formatValue(val,_432,_430);if(_42f&&_431.format&&_431.format.dateFormat){var pos=dojo.indexOf(_42f,_432);if(pos>-1){_42f.splice(pos,1);}}},this);}if(_426){var _433=_426.types,_434=_426.typeIdField,_435=_434&&_427[_434];for(_42d in _427){_42e=_427[_42d];if(esri._isDefined(_42e)){var _436=this._getDomainName(_426,_433,_435,_42d,_42e);if(esri._isDefined(_436)){_428[_42d]=_436;}else{if(_42d===_434){var _437=this._getTypeName(_426,_42e);if(esri._isDefined(_437)){_428[_42d]=_437;}}}}}}if(_425.title){_42a=dojo.trim(esri.substitute(_428,this._fixTokens(_425.title),_430)||"");}if(_425.description){_42b=dojo.trim(esri.substitute(_428,this._fixTokens(_425.description),_430)||"");}if(_429){_42c=[];dojo.forEach(_429,function(_438){_42d=_438.fieldName;if(_42d&&_438.visible){_42c.push([_438.label||_42d,esri.substitute(_428,"${"+_42d+"}",_430)||""]);}});}var _439,_43a;if(_425.mediaInfos){_439=[];dojo.forEach(_425.mediaInfos,function(_43b){_43a=0;_42e=_43b.value;switch(_43b.type){case "image":var url=_42e.sourceURL;url=url&&dojo.trim(esri.substitute(_427,this._fixTokens(url)));_43a=!!url;break;case "piechart":case "linechart":case "columnchart":case "barchart":_43a=dojo.some(_42e.fields,function(_43c){return esri._isDefined(_427[_43c]);});break;default:return;}if(_43a){_43b=dojo.clone(_43b);_42e=_43b.value;_43b.title=_43b.title?dojo.trim(esri.substitute(_428,this._fixTokens(_43b.title),_430)||""):"";_43b.caption=_43b.caption?dojo.trim(esri.substitute(_428,this._fixTokens(_43b.caption),_430)||""):"";if(_43b.type==="image"){_42e.sourceURL=esri.substitute(_427,this._fixTokens(_42e.sourceURL));if(_42e.linkURL){_42e.linkURL=dojo.trim(esri.substitute(_427,this._fixTokens(_42e.linkURL))||"");}}else{var _43d=_427[_42e.normalizeField]||0;_42e.fields=dojo.map(_42e.fields,function(_43e){var data=_427[_43e];data=(data===undefined)?null:data;if(data&&_43d){data=data/_43d;}return {y:data,tooltip:(this._fieldLabels[_43e]||_43e)+":<br/>"+this._formatValue(data,_43e,_430,!!_43d)};},this);}_439.push(_43b);}},this);}return {title:_42a,description:_42b,fields:(_42c&&_42c.length)?_42c:null,mediaInfos:(_439&&_439.length)?_439:null,formatted:_428,editSummary:(_426&&_426.getEditSummary)?_426.getEditSummary(_424):""};},getAttachments:function(_43f){var _440=_43f.getLayer(),_441=_43f.attributes;if(this.info.showAttachments&&_440&&_440.hasAttachments&&_440.objectIdField){var oid=_441&&_441[_440.objectIdField];if(oid){return _440.queryAttachmentInfos(oid);}}},_dateFormats:{"shortDate":"(datePattern: 'M/d/y', selector: 'date')","longMonthDayYear":"(datePattern: 'MMMM d, y', selector: 'date')","dayShortMonthYear":"(datePattern: 'd MMM y', selector: 'date')","longDate":"(datePattern: 'EEEE, MMMM d, y', selector: 'date')","shortDateShortTime":"(datePattern: 'M/d/y', timePattern: 'h:mm a', selector: 'date and time')","shortDateShortTime24":"(datePattern: 'M/d/y', timePattern: 'H:mm', selector: 'date and time')","longMonthYear":"(datePattern: 'MMMM y', selector: 'date')","shortMonthYear":"(datePattern: 'MMM y', selector: 'date')","year":"(datePattern: 'y', selector: 'date')"},_fixTokens:function(_442){return _442.replace(/(\{[^\{\r\n]+\})/g,"$$$1");},_formatValue:function(val,_443,_444,_445){var _446=this._fieldsMap[_443],fmt=_446&&_446.format;if(!esri._isDefined(val)||!_446||!esri._isDefined(fmt)){return val;}var _447="",_448=[],_449=fmt.hasOwnProperty("places")||fmt.hasOwnProperty("digitSeparator"),_44a=fmt.hasOwnProperty("digitSeparator")?fmt.digitSeparator:true;if(_449){_447="NumberFormat";_448.push("places: "+((esri._isDefined(fmt.places)&&(!_445||fmt.places>0))?Number(fmt.places):"Infinity"));if(_448.length){_447+=("("+_448.join(",")+")");}}else{if(fmt.dateFormat){_447="DateFormat"+(this._dateFormats[fmt.dateFormat]||this._dateFormats["shortDateShortTime"]);}else{return val;}}var _44b=esri.substitute({"myKey":val},"${myKey:"+_447+"}",_444)||"";if(_449&&!_44a){var _44c=dojo.i18n.getLocalization("dojo.cldr","number");if(_44c.group){_44b=_44b.replace(new RegExp("\\"+_44c.group,"g"),"");}}return _44b;},_getDomainName:function(_44d,_44e,_44f,_450,_451){var _452,stop;if(_44e&&esri._isDefined(_44f)){dojo.some(_44e,function(_453){if(_453.id==_44f){_452=_453.domains&&_453.domains[_450];if(_452&&_452.type==="inherited"){_452=this._getLayerDomain(_44d,_450);stop=true;}return true;}return false;},this);}if(!stop&&!_452){_452=this._getLayerDomain(_44d,_450);}if(_452&&_452.codedValues){var _454;dojo.some(_452.codedValues,function(_455){if(_455.code==_451){_454=_455.name;return true;}return false;});return _454;}},_getLayerDomain:function(_456,_457){var _458=_456.fields;if(_458){var _459;dojo.some(_458,function(_45a){if(_45a.name===_457){_459=_45a.domain;return true;}return false;});return _459;}},_getTypeName:function(_45b,id){var _45c=_45b.types;if(_45c){var _45d;dojo.some(_45c,function(_45e){if(_45e.id==id){_45d=_45e.name;return true;}return false;});return _45d;}}});});},"dojox/charting/Element":function(){define("dojox/charting/Element",["dojo/_base/lang","dojo/_base/array","dojo/dom-construct","dojo/_base/declare","dojox/gfx","dojox/gfx/utils","dojox/gfx/shape"],function(lang,arr,_45f,_460,gfx,_461,_462){return _460("dojox.charting.Element",null,{chart:null,group:null,htmlElements:null,dirty:true,constructor:function(_463){this.chart=_463;this.group=null;this.htmlElements=[];this.dirty=true;this.trailingSymbol="...";this._events=[];},createGroup:function(_464){if(!_464){_464=this.chart.surface;}if(!this.group){this.group=_464.createGroup();}return this;},purgeGroup:function(){this.destroyHtmlElements();if(this.group){_461.forEach(this.group,function(_465){_462.dispose(_465);});this.group.clear();this.group.removeShape();this.group=null;}this.dirty=true;if(this._events.length){arr.forEach(this._events,function(item){item.shape.disconnect(item.handle);});this._events=[];}return this;},cleanGroup:function(_466){this.destroyHtmlElements();if(!_466){_466=this.chart.surface;}if(this.group){this.group.clear();}else{this.group=_466.createGroup();}this.dirty=true;return this;},destroyHtmlElements:function(){if(this.htmlElements.length){arr.forEach(this.htmlElements,_45f.destroy);this.htmlElements=[];}},destroy:function(){this.purgeGroup();},getTextWidth:function(s,font){return gfx._base._getTextBox(s,{font:font}).w||0;},getTextWithLimitLength:function(s,font,_467,_468){if(!s||s.length<=0){return {text:"",truncated:_468||false};}if(!_467||_467<=0){return {text:s,truncated:_468||false};}var _469=2,_46a=0.618,_46b=s.substring(0,1)+this.trailingSymbol,_46c=this.getTextWidth(_46b,font);if(_467<=_46c){return {text:_46b,truncated:true};}var _46d=this.getTextWidth(s,font);if(_46d<=_467){return {text:s,truncated:_468||false};}else{var _46e=0,end=s.length;while(_46e<end){if(end-_46e<=_469){while(this.getTextWidth(s.substring(0,_46e)+this.trailingSymbol,font)>_467){_46e-=1;}return {text:(s.substring(0,_46e)+this.trailingSymbol),truncated:true};}var _46f=_46e+Math.round((end-_46e)*_46a),_470=this.getTextWidth(s.substring(0,_46f),font);if(_470<_467){_46e=_46f;end=end;}else{_46e=_46e;end=_46f;}}}},getTextWithLimitCharCount:function(s,font,_471,_472){if(!s||s.length<=0){return {text:"",truncated:_472||false};}if(!_471||_471<=0||s.length<=_471){return {text:s,truncated:_472||false};}return {text:s.substring(0,_471)+this.trailingSymbol,truncated:true};},_plotFill:function(fill,dim,_473){if(!fill||!fill.type||!fill.space){return fill;}var _474=fill.space;switch(fill.type){case "linear":if(_474==="plot"||_474==="shapeX"||_474==="shapeY"){fill=gfx.makeParameters(gfx.defaultLinearGradient,fill);fill.space=_474;if(_474==="plot"||_474==="shapeX"){var span=dim.height-_473.t-_473.b;fill.y1=_473.t+span*fill.y1/100;fill.y2=_473.t+span*fill.y2/100;}if(_474==="plot"||_474==="shapeY"){var span=dim.width-_473.l-_473.r;fill.x1=_473.l+span*fill.x1/100;fill.x2=_473.l+span*fill.x2/100;}}break;case "radial":if(_474==="plot"){fill=gfx.makeParameters(gfx.defaultRadialGradient,fill);fill.space=_474;var _475=dim.width-_473.l-_473.r,_476=dim.height-_473.t-_473.b;fill.cx=_473.l+_475*fill.cx/100;fill.cy=_473.t+_476*fill.cy/100;fill.r=fill.r*Math.sqrt(_475*_475+_476*_476)/200;}break;case "pattern":if(_474==="plot"||_474==="shapeX"||_474==="shapeY"){fill=gfx.makeParameters(gfx.defaultPattern,fill);fill.space=_474;if(_474==="plot"||_474==="shapeX"){var span=dim.height-_473.t-_473.b;fill.y=_473.t+span*fill.y/100;fill.height=span*fill.height/100;}if(_474==="plot"||_474==="shapeY"){var span=dim.width-_473.l-_473.r;fill.x=_473.l+span*fill.x/100;fill.width=span*fill.width/100;}}break;}return fill;},_shapeFill:function(fill,bbox){if(!fill||!fill.space){return fill;}var _477=fill.space;switch(fill.type){case "linear":if(_477==="shape"||_477==="shapeX"||_477==="shapeY"){fill=gfx.makeParameters(gfx.defaultLinearGradient,fill);fill.space=_477;if(_477==="shape"||_477==="shapeX"){var span=bbox.width;fill.x1=bbox.x+span*fill.x1/100;fill.x2=bbox.x+span*fill.x2/100;}if(_477==="shape"||_477==="shapeY"){var span=bbox.height;fill.y1=bbox.y+span*fill.y1/100;fill.y2=bbox.y+span*fill.y2/100;}}break;case "radial":if(_477==="shape"){fill=gfx.makeParameters(gfx.defaultRadialGradient,fill);fill.space=_477;fill.cx=bbox.x+bbox.width/2;fill.cy=bbox.y+bbox.height/2;fill.r=fill.r*bbox.width/200;}break;case "pattern":if(_477==="shape"||_477==="shapeX"||_477==="shapeY"){fill=gfx.makeParameters(gfx.defaultPattern,fill);fill.space=_477;if(_477==="shape"||_477==="shapeX"){var span=bbox.width;fill.x=bbox.x+span*fill.x/100;fill.width=span*fill.width/100;}if(_477==="shape"||_477==="shapeY"){var span=bbox.height;fill.y=bbox.y+span*fill.y/100;fill.height=span*fill.height/100;}}break;}return fill;},_pseudoRadialFill:function(fill,_478,_479,_47a,end){if(!fill||fill.type!=="radial"||fill.space!=="shape"){return fill;}var _47b=fill.space;fill=gfx.makeParameters(gfx.defaultRadialGradient,fill);fill.space=_47b;if(arguments.length<4){fill.cx=_478.x;fill.cy=_478.y;fill.r=fill.r*_479/100;return fill;}var _47c=arguments.length<5?_47a:(end+_47a)/2;return {type:"linear",x1:_478.x,y1:_478.y,x2:_478.x+fill.r*_479*Math.cos(_47c)/100,y2:_478.y+fill.r*_479*Math.sin(_47c)/100,colors:fill.colors};return fill;}});});},"dojox/charting/axis2d/Base":function(){define("dojox/charting/axis2d/Base",["dojo/_base/declare","../Element"],function(_47d,_47e){return _47d("dojox.charting.axis2d.Base",_47e,{constructor:function(_47f,_480){this.vertical=_480&&_480.vertical;},clear:function(){return this;},initialized:function(){return false;},calculate:function(min,max,span){return this;},getScaler:function(){return null;},getTicks:function(){return null;},getOffsets:function(){return {l:0,r:0,t:0,b:0};},render:function(dim,_481){this.dirty=false;return this;}});});},"dojox/lang/functional/scan":function(){define("dojox/lang/functional/scan",["dojo/_base/kernel","dojo/_base/lang","./lambda"],function(d,_482,df){var _483={};d.mixin(df,{scanl:function(a,f,z,o){if(typeof a=="string"){a=a.split("");}o=o||d.global;f=df.lambda(f);var t,n,i;if(d.isArray(a)){t=new Array((n=a.length)+1);t[0]=z;for(i=0;i<n;z=f.call(o,z,a[i],i,a),t[++i]=z){}}else{if(typeof a.hasNext=="function"&&typeof a.next=="function"){t=[z];for(i=0;a.hasNext();t.push(z=f.call(o,z,a.next(),i++,a))){}}else{t=[z];for(i in a){if(!(i in _483)){t.push(z=f.call(o,z,a[i],i,a));}}}}return t;},scanl1:function(a,f,o){if(typeof a=="string"){a=a.split("");}o=o||d.global;f=df.lambda(f);var t,n,z,_484=true;if(d.isArray(a)){t=new Array(n=a.length);t[0]=z=a[0];for(var i=1;i<n;t[i]=z=f.call(o,z,a[i],i,a),++i){}}else{if(typeof a.hasNext=="function"&&typeof a.next=="function"){if(a.hasNext()){t=[z=a.next()];for(i=1;a.hasNext();t.push(z=f.call(o,z,a.next(),i++,a))){}}}else{for(i in a){if(!(i in _483)){if(_484){t=[z=a[i]];_484=false;}else{t.push(z=f.call(o,z,a[i],i,a));}}}}}return t;},scanr:function(a,f,z,o){if(typeof a=="string"){a=a.split("");}o=o||d.global;f=df.lambda(f);var n=a.length,t=new Array(n+1),i=n;t[n]=z;for(;i>0;--i,z=f.call(o,z,a[i],i,a),t[i]=z){}return t;},scanr1:function(a,f,o){if(typeof a=="string"){a=a.split("");}o=o||d.global;f=df.lambda(f);var n=a.length,t=new Array(n),z=a[n-1],i=n-1;t[i]=z;for(;i>0;--i,z=f.call(o,z,a[i],i,a),t[i]=z){}return t;}});});},"esri/layers/wms":function(){define(["dijit","dojo","dojox","dojo/require!esri/layers/dynamic,esri/layers/agscommon"],function(_485,dojo,_486){dojo.provide("esri.layers.wms");dojo.require("esri.layers.dynamic");dojo.require("esri.layers.agscommon");dojo.declare("esri.layers.WMSLayer",[esri.layers.DynamicMapServiceLayer],{_CRS_TO_EPSG:{84:4326,83:4269,27:4267},_REVERSED_LAT_LONG_RANGES:[[4001,4999],[2044,2045],[2081,2083],[2085,2086],[2093,2093],[2096,2098],[2105,2132],[2169,2170],[2176,2180],[2193,2193],[2200,2200],[2206,2212],[2319,2319],[2320,2462],[2523,2549],[2551,2735],[2738,2758],[2935,2941],[2953,2953],[3006,3030],[3034,3035],[3058,3059],[3068,3068],[3114,3118],[3126,3138],[3300,3301],[3328,3335],[3346,3346],[3350,3352],[3366,3366],[3416,3416],[20004,20032],[20064,20092],[21413,21423],[21473,21483],[21896,21899],[22171,22177],[22181,22187],[22191,22197],[25884,25884],[27205,27232],[27391,27398],[27492,27492],[28402,28432],[28462,28492],[30161,30179],[30800,30800],[31251,31259],[31275,31279],[31281,31290],[31466,31700]],_WEB_MERCATOR:[102100,3857,102113,900913],_WORLD_MERCATOR:[3395,54004],allExtents:[],constructor:function(url,_487){url=this._stripParameters(url,["version","service","request","bbox","format","height","width","layers","srs","crs","styles","transparent","bgcolor","exceptions","time","elevation","sld","wfs"]);this.url=url;this._url=esri.urlToObject(url);this._getCapabilitiesURL=url;this._initLayer=dojo.hitch(this,this._initLayer);this._parseCapabilities=dojo.hitch(this,this._parseCapabilities);this._getCapabilitiesError=dojo.hitch(this,this._getCapabilitiesError);if(_487){this.imageFormat=this._getImageFormat(_487.format);this.imageTransparency=(_487.transparent===false)?false:true;this.visibleLayers=_487.visibleLayers?_487.visibleLayers:[];if(_487.resourceInfo){this._readResourceInfo(_487.resourceInfo);}else{this._getCapabilities();}}else{this.imageFormat="image/png";this.imageTransparency=true;this.visibleLayers=[];this._getCapabilities();}this._blankImageURL=require.toUrl("esri/layers")+"/../../../images/pixel.png";},setVisibleLayers:function(_488){_488=this._checkVisibleLayersList(_488);this.visibleLayers=(_488)?_488:[];this.refresh(true);},setImageFormat:function(_489){this.imageFormat=this._getImageFormat(_489);this.refresh(true);},setImageTransparency:function(_48a){this.imageTransparency=_48a;this.refresh(true);},getImageUrl:function(_48b,_48c,_48d,_48e){if(!this.visibleLayers||this.visibleLayers.length===0){_48e(this._blankImageURL);return;}var wkid=_48b.spatialReference.wkid;if(dojo.some(this._WEB_MERCATOR,function(el){return el==wkid;})){var _48f=dojo.filter(this.spatialReferences,function(el){return (dojo.some(this._WEB_MERCATOR,function(el2){return el2==el;}));},this);if(_48f.length==0){_48f=dojo.filter(this.spatialReferences,function(el){return (dojo.some(this._WORLD_MERCATOR,function(el2){return el2==el;}));},this);}if(_48f.length>0){wkid=_48f[0];}else{wkid=this._WEB_MERCATOR[0];}}var list=dojo.filter(this.spatialReferences,function(el){return el!==wkid;});this.spatialReferences=list;this.spatialReferences.unshift(wkid);var xmin=_48b.xmin;var xmax=_48b.xmax;var ymin=_48b.ymin;var ymax=_48b.ymax;var _490={};_490.SERVICE="WMS";_490.REQUEST="GetMap";_490.FORMAT=this.imageFormat;_490.TRANSPARENT=this.imageTransparency?"TRUE":"FALSE";_490.STYLES="";_490.VERSION=this.version;_490.LAYERS=this.visibleLayers?this.visibleLayers.toString():null;_490.WIDTH=_48c;_490.HEIGHT=_48d;if(this.maxWidth<_48c){_490.WIDTH=this.maxWidth;}if(this.maxHeight<_48d){_490.HEIGHT=this.maxHeight;}var _491=wkid?wkid:NaN;if(!isNaN(_491)){if(this.version=="1.3.0"){_490.CRS="EPSG:"+_491;}else{_490.SRS="EPSG:"+_491;}}if(this.version=="1.3.0"&&this._useLatLong(_491)){_490.BBOX=ymin+","+xmin+","+ymax+","+xmax;}else{_490.BBOX=xmin+","+ymin+","+xmax+","+ymax;}var _492=this.getMapURL;_492+=(_492.indexOf("?")==-1)?"?":"";for(var key in _490){_492+=(_492.substring(_492.length-1,_492.length)=="?")?"":"&";_492+=key+"="+_490[key];}_48e(_492);},_initLayer:function(_493,io){this.spatialReference=new esri.SpatialReference(this.extent.spatialReference);this.initialExtent=new esri.geometry.Extent(this.extent);this.fullExtent=new esri.geometry.Extent(this.extent);this.visibleLayers=this._checkVisibleLayersList(this.visibleLayers);this.loaded=true;this.onLoad(this);var _494=this._loadCallback;if(_494){delete this._loadCallback;_494(this);}},_readResourceInfo:function(_495){if(!_495.extent){console.error("esri.layers.WMSLayer: unable to find the 'extent' property in resourceInfo");return;}if(!_495.layerInfos){console.error("esri.layers.WMSLayer: unable to find the 'layerInfos' property in resourceInfo");return;}this.extent=_495.extent;this.allExtents[0]=_495.extent;this.layerInfos=_495.layerInfos;this.description=_495.description?_495.description:"";this.copyright=_495.copyright?_495.copyright:"";this.title=_495.title?_495.title:"";this.getMapURL=_495.getMapURL?_495.getMapURL:this._getCapabilitiesURL;this.version=_495.version?_495.version:"1.3.0";this.maxWidth=_495.maxWidth?_495.maxWidth:5000;this.maxHeight=_495.maxHeight?_495.maxHeight:5000;this.spatialReferences=_495.spatialReferences?_495.spatialReferences:[];this.imageFormat=this._getImageFormat(_495.format);this._initLayer();},_getCapabilities:function(){var _496=this._url.query?this._url.query:{};_496.SERVICE="WMS";_496.REQUEST="GetCapabilities";var uri=this._url.path+"?";for(var key in _496){uri+=(uri.substring(uri.length-1,uri.length)=="?")?"":"&";uri+=key+"="+_496[key];}var _497=esri.request({url:uri,handleAs:"xml",load:this._parseCapabilities,error:this._getCapabilitiesError},{usePost:false});},_parseCapabilities:function(xml){if(!xml){this.onError("GetCapabilities request for "+this._getCapabilitiesURL+" failed. (Response is null.)");return;}this.version=this._getAttributeValue("WMS_Capabilities","version",xml,null);if(!this.version){this.version=this._getAttributeValue("WMT_MS_Capabilities","version",xml,"1.3.0");}var _498=this._getTag("Service",xml);this.title=this._getTagValue("Title",_498,"");if(!this.title||this.title.length==0){this.title=this._getTagValue("Name",_498,"");}this.copyright=this._getTagValue("AccessConstraints",_498,"");this.description=this._getTagValue("Abstract",_498,"");this.maxWidth=parseInt(this._getTagValue("MaxWidth",_498,5000));this.maxHeight=parseInt(this._getTagValue("MaxHeight",_498,5000));var _499=this._getTag("Layer",xml);if(!_499){this._getCapabilitiesError({"error":{"message":"Response does not contain any layers."}});return;}var _49a=this._getLayerInfo(_499);if(_49a){this.layerInfos=_49a.subLayers;if(!this.layerInfos||this.layerInfos.length==0){this.layerInfos=[_49a];}this.extent=_49a.extent;this.allExtents=_49a.allExtents;this.spatialReferences=_49a.spatialReferences;if(this.spatialReferences.length==0&&this.layerInfos.length>0){this.spatialReferences=this.layerInfos[0].spatialReferences;}}this.getMapURL=this._getCapabilitiesURL;var _49b=dojo.query("DCPType",this._getTag("GetMap",xml));if(_49b&&_49b.length>0){var _49c=dojo.query("HTTP",_49b[0]);if(_49c&&_49c.length>0){var _49d=dojo.query("Get",_49c[0]);if(_49d&&_49d.length>0){var _49e=this._getAttributeValue("OnlineResource","xlink:href",_49d[0],null);if(_49e){if(_49e.indexOf("&")==(_49e.length-1)){_49e=_49e.substring(0,_49e.length-1);}this.getMapURL=_49e;}}}}this.getMapFormats=[];if(dojo.query("Operation",xml).length==0){dojo.forEach(dojo.query("Format",this._getTag("GetMap",xml)),function(_49f){this.getMapFormats.push(_49f.text?_49f.text:_49f.textContent);},this);}else{dojo.forEach(dojo.query("Operation",xml),function(_4a0){if(_4a0.getAttribute("name")=="GetMap"){dojo.forEach(dojo.query("Format",_4a0),function(_4a1){this.getMapFormats.push(_4a1.text?_4a1.text:_4a1.textContent);},this);}},this);}if(!dojo.some(this.getMapFormats,function(el){return el.indexOf(this.imageFormat)>-1;},this)){this.imageFormat=this.getMapFormats[0];}this._initLayer();},_getCapabilitiesError:function(_4a2,io){this.onError("GetCapabilities request for "+this._getCapabilitiesURL+" failed. ("+dojo.toJson(_4a2)+")");},_getLayerInfo:function(_4a3){if(!_4a3){return null;}var _4a4=new esri.layers.WMSLayerInfo();_4a4.name="";_4a4.title="";_4a4.description="";_4a4.allExtents=[];_4a4.spatialReferences=[];_4a4.subLayers=[];var _4a5=this._getTag("LatLonBoundingBox",_4a3);if(_4a5){_4a4.allExtents[0]=this._getExtent(_4a5,4326);}var _4a6=this._getTag("EX_GeographicBoundingBox",_4a3);if(_4a6){var _4a7=new esri.geometry.Extent(0,0,0,0,new esri.SpatialReference({wkid:4326}));_4a7.xmin=parseFloat(this._getTagValue("westBoundLongitude",_4a6,0));_4a7.ymin=parseFloat(this._getTagValue("southBoundLatitude",_4a6,0));_4a7.xmax=parseFloat(this._getTagValue("eastBoundLongitude",_4a6,0));_4a7.ymax=parseFloat(this._getTagValue("northBoundLatitude",_4a6,0));_4a4.allExtents[0]=_4a7;}_4a4.extent=_4a4.allExtents[0];var _4a8=(dojo.indexOf(["1.0.0","1.1.0","1.1.1"],this.version)>-1)?"SRS":"CRS";dojo.forEach(_4a3.childNodes,function(_4a9){if(_4a9.nodeName=="Name"){_4a4.name=(_4a9.text?_4a9.text:_4a9.textContent)||"";}else{if(_4a9.nodeName=="Title"){_4a4.title=(_4a9.text?_4a9.text:_4a9.textContent)||"";}else{if(_4a9.nodeName=="Abstract"){_4a4.description=(_4a9.text?_4a9.text:_4a9.textContent)||"";}else{if(_4a9.nodeName=="BoundingBox"){srAttr=_4a9.getAttribute(_4a8);if(srAttr&&srAttr.indexOf("EPSG:")===0){wkid=parseInt(srAttr.substring(5));if(wkid!==0&&!isNaN(wkid)){var _4aa;if(this.version=="1.3.0"){_4aa=this._getExtent(_4a9,wkid,this._useLatLong(wkid));}else{_4aa=this._getExtent(_4a9,wkid);}_4a4.allExtents[wkid]=_4aa;if(!_4a4.extent){_4a4.extent=_4aa;}}}else{if(srAttr&&srAttr.indexOf("CRS:")===0){wkid=parseInt(srAttr.substring(4));if(wkid!==0&&!isNaN(wkid)){if(this._CRS_TO_EPSG[wkid]){wkid=this._CRS_TO_EPSG[wkid];}_4a4.allExtents[wkid]=this._getExtent(_4a9,wkid);}}else{wkid=parseInt(srAttr);if(wkid!==0&&!isNaN(wkid)){_4a4.allExtents[wkid]=this._getExtent(_4a9,wkid);}}}}else{if(_4a9.nodeName==_4a8){var _4ab=_4a9.text?_4a9.text:_4a9.textContent;var arr=_4ab.split(" ");dojo.forEach(arr,function(val){if(val.indexOf(":")>-1){val=parseInt(val.split(":")[1]);}else{val=parseInt(val);}if(val!==84&&val!==0&&!isNaN(val)){if(!dojo.some(_4a4.spatialReferences,function(el){return (el==val);})){_4a4.spatialReferences.push(val);}}},this);}else{if(_4a9.nodeName=="Style"){var _4ac=this._getTag("LegendURL",_4a9);if(_4ac){var _4ad=this._getTag("OnlineResource",_4ac);if(_4ad){_4a4.legendURL=_4ad.getAttribute("xlink:href");}}}else{if(_4a9.nodeName==="Layer"){_4a4.subLayers.push(this._getLayerInfo(_4a9));}}}}}}}},this);return _4a4;},_getImageFormat:function(_4ae){var _4af=_4ae?_4ae.toLowerCase():"";switch(_4af){case "jpg":return "image/jpeg";case "bmp":return "image/bmp";case "gif":return "image/gif";case "svg":return "image/svg+xml";default:return "image/png";}},getImageFormat:function(){var _4b0=this.imageFormat?this.imageFormat.toLowerCase():"";switch(_4b0){case "image/jpeg":return "jpg";case "image/bmp":return "bmp";case "image/gif":return "gif";case "image/svg+xml":return "svg";default:return "png";}},_getExtent:function(_4b1,wkid,_4b2){var _4b3;if(_4b1){_4b3=new esri.geometry.Extent();var minx=parseFloat(_4b1.getAttribute("minx"));var miny=parseFloat(_4b1.getAttribute("miny"));var maxx=parseFloat(_4b1.getAttribute("maxx"));var maxy=parseFloat(_4b1.getAttribute("maxy"));if(_4b2){_4b3.xmin=isNaN(miny)?((-1)*Number.MAX_VALUE):miny;_4b3.ymin=isNaN(minx)?((-1)*Number.MAX_VALUE):minx;_4b3.xmax=isNaN(maxy)?Number.MAX_VALUE:maxy;_4b3.ymax=isNaN(maxx)?Number.MAX_VALUE:maxx;}else{_4b3.xmin=isNaN(minx)?((-1)*Number.MAX_VALUE):minx;_4b3.ymin=isNaN(miny)?((-1)*Number.MAX_VALUE):miny;_4b3.xmax=isNaN(maxx)?Number.MAX_VALUE:maxx;_4b3.ymax=isNaN(maxy)?Number.MAX_VALUE:maxy;}_4b3.spatialReference=new esri.SpatialReference({wkid:wkid});}return _4b3;},_useLatLong:function(wkid){var _4b4;for(var i=0;i<this._REVERSED_LAT_LONG_RANGES.length;i++){var _4b5=this._REVERSED_LAT_LONG_RANGES[i];if(wkid>=_4b5[0]&&wkid<=_4b5[1]){_4b4=true;break;}}return _4b4;},_getTag:function(_4b6,xml){var tags=dojo.query(_4b6,xml);if(tags&&tags.length>0){return tags[0];}else{return null;}},_getTagValue:function(_4b7,xml,_4b8){var _4b9=dojo.query(_4b7,xml);if(_4b9&&_4b9.length>0){if(_4b9[0].text){return _4b9[0].text;}else{return _4b9[0].textContent;}}else{return _4b8;}},_getAttributeValue:function(_4ba,_4bb,xml,_4bc){var _4bd=dojo.query(_4ba,xml);if(_4bd&&_4bd.length>0){return _4bd[0].getAttribute(_4bb);}else{return _4bc;}},_checkVisibleLayersList:function(_4be){if(_4be&&_4be.length>0&&this.layerInfos&&this.layerInfos.length>0){if((typeof _4be[0])=="number"){var list=[];dojo.forEach(_4be,function(pos){if(pos<this.layerInfos.length){list.push(this.layerInfos[pos].name);}},this);_4be=list;}}return _4be;},_stripParameters:function(url,_4bf){var obj=esri.urlToObject(url);qs=[];for(var prop in obj.query){if(dojo.indexOf(_4bf,prop.toLowerCase())===-1){qs.push(prop+"="+obj.query[prop]);}}return obj.path+(qs.length?("?"+qs.join("&")):"");}});dojo.declare("esri.layers.WMSLayerInfo",null,{name:null,title:null,description:null,extent:null,legendURL:null,subLayers:[],allExtents:[],spatialReferences:[],constructor:function(_4c0){if(_4c0){this.name=_4c0.name;this.title=_4c0.title;this.description=_4c0.description;this.extent=_4c0.extent;this.legendURL=_4c0.legendURL;this.subLayers=_4c0.subLayers?_4c0.subLayers:[];this.allExtents=_4c0.allExtents?_4c0.allExtents:[];this.spatialReferences=_4c0.spatialReferences?_4c0.spatialReferences:[];}},clone:function(){var info={name:this.name,title:this.title,description:this.description,legendURL:this.legendURL};if(this.extent){info.extent=this.extent.getExtent();}info.subLayers=[];dojo.forEach(this.subLayers,function(_4c1){info.subLayers.push(_4c1.clone());});info.allExtents=[];for(var wkid in this.allExtents){wkid=parseInt(wkid);if(!isNaN(wkid)){info.allExtents[wkid]=this.allExtents[wkid].getExtent();}}info.spatialReferences=[];dojo.forEach(this.spatialReferences,function(wkid){info.spatialReferences.push(wkid);});return info;}});});},"dojox/charting/scaler/primitive":function(){define("dojox/charting/scaler/primitive",["dojo/_base/lang"],function(lang){var _4c2=lang.getObject("dojox.charting.scaler.primitive",true);return lang.mixin(_4c2,{buildScaler:function(min,max,span,_4c3){if(min==max){min-=0.5;max+=0.5;}return {bounds:{lower:min,upper:max,from:min,to:max,scale:span/(max-min),span:span},scaler:_4c2};},buildTicks:function(_4c4,_4c5){return {major:[],minor:[],micro:[]};},getTransformerFromModel:function(_4c6){var _4c7=_4c6.bounds.from,_4c8=_4c6.bounds.scale;return function(x){return (x-_4c7)*_4c8;};},getTransformerFromPlot:function(_4c9){var _4ca=_4c9.bounds.from,_4cb=_4c9.bounds.scale;return function(x){return x/_4cb+_4ca;};}});});},"dojox/gfx/fx":function(){define("dojox/gfx/fx",["dojo/_base/lang","./_base","./matrix","dojo/_base/Color","dojo/_base/array","dojo/_base/fx","dojo/_base/connect"],function(lang,g,m,_4cc,arr,fx,Hub){var fxg=g.fx={};function _4cd(_4ce,end){this.start=_4ce,this.end=end;};_4cd.prototype.getValue=function(r){return (this.end-this.start)*r+this.start;};function _4cf(_4d0,end,_4d1){this.start=_4d0,this.end=end;this.units=_4d1;};_4cf.prototype.getValue=function(r){return (this.end-this.start)*r+this.start+this.units;};function _4d2(_4d3,end){this.start=_4d3,this.end=end;this.temp=new _4cc();};_4d2.prototype.getValue=function(r){return _4cc.blendColors(this.start,this.end,r,this.temp);};function _4d4(_4d5){this.values=_4d5;this.length=_4d5.length;};_4d4.prototype.getValue=function(r){return this.values[Math.min(Math.floor(r*this.length),this.length-1)];};function _4d6(_4d7,def){this.values=_4d7;this.def=def?def:{};};_4d6.prototype.getValue=function(r){var ret=lang.clone(this.def);for(var i in this.values){ret[i]=this.values[i].getValue(r);}return ret;};function _4d8(_4d9,_4da){this.stack=_4d9;this.original=_4da;};_4d8.prototype.getValue=function(r){var ret=[];arr.forEach(this.stack,function(t){if(t instanceof m.Matrix2D){ret.push(t);return;}if(t.name=="original"&&this.original){ret.push(this.original);return;}if(!(t.name in m)){return;}var f=m[t.name];if(typeof f!="function"){ret.push(f);return;}var val=arr.map(t.start,function(v,i){return (t.end[i]-v)*r+v;}),_4db=f.apply(m,val);if(_4db instanceof m.Matrix2D){ret.push(_4db);}},this);return ret;};var _4dc=new _4cc(0,0,0,0);function _4dd(prop,obj,name,def){if(prop.values){return new _4d4(prop.values);}var _4de,_4df,end;if(prop.start){_4df=g.normalizeColor(prop.start);}else{_4df=_4de=obj?(name?obj[name]:obj):def;}if(prop.end){end=g.normalizeColor(prop.end);}else{if(!_4de){_4de=obj?(name?obj[name]:obj):def;}end=_4de;}return new _4d2(_4df,end);};function _4e0(prop,obj,name,def){if(prop.values){return new _4d4(prop.values);}var _4e1,_4e2,end;if(prop.start){_4e2=prop.start;}else{_4e2=_4e1=obj?obj[name]:def;}if(prop.end){end=prop.end;}else{if(typeof _4e1!="number"){_4e1=obj?obj[name]:def;}end=_4e1;}return new _4cd(_4e2,end);};fxg.animateStroke=function(args){if(!args.easing){args.easing=fx._defaultEasing;}var anim=new fx.Animation(args),_4e3=args.shape,_4e4;Hub.connect(anim,"beforeBegin",anim,function(){_4e4=_4e3.getStroke();var prop=args.color,_4e5={},_4e6,_4e7,end;if(prop){_4e5.color=_4dd(prop,_4e4,"color",_4dc);}prop=args.style;if(prop&&prop.values){_4e5.style=new _4d4(prop.values);}prop=args.width;if(prop){_4e5.width=_4e0(prop,_4e4,"width",1);}prop=args.cap;if(prop&&prop.values){_4e5.cap=new _4d4(prop.values);}prop=args.join;if(prop){if(prop.values){_4e5.join=new _4d4(prop.values);}else{_4e7=prop.start?prop.start:(_4e4&&_4e4.join||0);end=prop.end?prop.end:(_4e4&&_4e4.join||0);if(typeof _4e7=="number"&&typeof end=="number"){_4e5.join=new _4cd(_4e7,end);}}}this.curve=new _4d6(_4e5,_4e4);});Hub.connect(anim,"onAnimate",_4e3,"setStroke");return anim;};fxg.animateFill=function(args){if(!args.easing){args.easing=fx._defaultEasing;}var anim=new fx.Animation(args),_4e8=args.shape,fill;Hub.connect(anim,"beforeBegin",anim,function(){fill=_4e8.getFill();var prop=args.color,_4e9={};if(prop){this.curve=_4dd(prop,fill,"",_4dc);}});Hub.connect(anim,"onAnimate",_4e8,"setFill");return anim;};fxg.animateFont=function(args){if(!args.easing){args.easing=fx._defaultEasing;}var anim=new fx.Animation(args),_4ea=args.shape,font;Hub.connect(anim,"beforeBegin",anim,function(){font=_4ea.getFont();var prop=args.style,_4eb={},_4ec,_4ed,end;if(prop&&prop.values){_4eb.style=new _4d4(prop.values);}prop=args.variant;if(prop&&prop.values){_4eb.variant=new _4d4(prop.values);}prop=args.weight;if(prop&&prop.values){_4eb.weight=new _4d4(prop.values);}prop=args.family;if(prop&&prop.values){_4eb.family=new _4d4(prop.values);}prop=args.size;if(prop&&prop.units){_4ed=parseFloat(prop.start?prop.start:(_4ea.font&&_4ea.font.size||"0"));end=parseFloat(prop.end?prop.end:(_4ea.font&&_4ea.font.size||"0"));_4eb.size=new _4cf(_4ed,end,prop.units);}this.curve=new _4d6(_4eb,font);});Hub.connect(anim,"onAnimate",_4ea,"setFont");return anim;};fxg.animateTransform=function(args){if(!args.easing){args.easing=fx._defaultEasing;}var anim=new fx.Animation(args),_4ee=args.shape,_4ef;Hub.connect(anim,"beforeBegin",anim,function(){_4ef=_4ee.getTransform();this.curve=new _4d8(args.transform,_4ef);});Hub.connect(anim,"onAnimate",_4ee,"setTransform");return anim;};return fxg;});},"dojox/charting/plot2d/StackedColumns":function(){define("dojox/charting/plot2d/StackedColumns",["dojo/_base/lang","dojo/_base/array","dojo/_base/declare","./Columns","./common","dojox/lang/functional","dojox/lang/functional/reversed","dojox/lang/functional/sequence"],function(lang,arr,_4f0,_4f1,dc,df,dfr,dfs){var _4f2=dfr.lambda("item.purgeGroup()");return _4f0("dojox.charting.plot2d.StackedColumns",_4f1,{getSeriesStats:function(){var _4f3=dc.collectStackedStats(this.series);this._maxRunLength=_4f3.hmax;_4f3.hmin-=0.5;_4f3.hmax+=0.5;return _4f3;},render:function(dim,_4f4){if(this._maxRunLength<=0){return this;}var acc=df.repeat(this._maxRunLength,"-> 0",0);for(var i=0;i<this.series.length;++i){var run=this.series[i];for(var j=0;j<run.data.length;++j){var _4f5=run.data[j];if(_4f5!==null){var v=typeof _4f5=="number"?_4f5:_4f5.y;if(isNaN(v)){v=0;}acc[j]+=v;}}}if(this.zoom&&!this.isDataDirty()){return this.performZoom(dim,_4f4);}this.resetEvents();this.dirty=this.isDirty();if(this.dirty){arr.forEach(this.series,_4f2);this._eventSeries={};this.cleanGroup();var s=this.group;df.forEachRev(this.series,function(item){item.cleanGroup(s);});}var t=this.chart.theme,f,gap,_4f6,ht=this._hScaler.scaler.getTransformerFromModel(this._hScaler),vt=this._vScaler.scaler.getTransformerFromModel(this._vScaler),_4f7=this.events();f=dc.calculateBarSize(this._hScaler.bounds.scale,this.opt);gap=f.gap;_4f6=f.size;for(var i=this.series.length-1;i>=0;--i){var run=this.series[i];if(!this.dirty&&!run.dirty){t.skip();this._reconnectEvents(run.name);continue;}run.cleanGroup();var _4f8=t.next("column",[this.opt,run]),s=run.group,_4f9=new Array(acc.length);for(var j=0;j<acc.length;++j){var _4f5=run.data[j];if(_4f5!==null){var v=acc[j],_4fa=vt(v),_4fb=typeof _4f5!="number"?t.addMixin(_4f8,"column",_4f5,true):t.post(_4f8,"column");if(_4f6>=1&&_4fa>=0){var rect={x:_4f4.l+ht(j+0.5)+gap,y:dim.height-_4f4.b-vt(v),width:_4f6,height:_4fa};var _4fc=this._plotFill(_4fb.series.fill,dim,_4f4);_4fc=this._shapeFill(_4fc,rect);var _4fd=s.createRect(rect).setFill(_4fc).setStroke(_4fb.series.stroke);run.dyn.fill=_4fd.getFill();run.dyn.stroke=_4fd.getStroke();if(_4f7){var o={element:"column",index:j,run:run,shape:_4fd,x:j+0.5,y:v};this._connectEvents(o);_4f9[j]=o;}if(this.animate){this._animateColumn(_4fd,dim.height-_4f4.b,_4fa);}}}}this._eventSeries[run.name]=_4f9;run.dirty=false;for(var j=0;j<run.data.length;++j){var _4f5=run.data[j];if(_4f5!==null){var v=typeof _4f5=="number"?_4f5:_4f5.y;if(isNaN(v)){v=0;}acc[j]-=v;}}}this.dirty=false;return this;}});});},"dojo/data/util/filter":function(){define(["dojo/_base/lang"],function(lang){var _4fe=lang.getObject("dojo.data.util.filter",true);_4fe.patternToRegExp=function(_4ff,_500){var rxp="^";var c=null;for(var i=0;i<_4ff.length;i++){c=_4ff.charAt(i);switch(c){case "\\":rxp+=c;i++;rxp+=_4ff.charAt(i);break;case "*":rxp+=".*";break;case "?":rxp+=".";break;case "$":case "^":case "/":case "+":case ".":case "|":case "(":case ")":case "{":case "}":case "[":case "]":rxp+="\\";default:rxp+=c;}}rxp+="$";if(_500){return new RegExp(rxp,"mi");}else{return new RegExp(rxp,"m");}};return _4fe;});},"dojox/charting/plot2d/OHLC":function(){define("dojox/charting/plot2d/OHLC",["dojo/_base/lang","dojo/_base/array","dojo/_base/declare","./Base","./common","dojox/lang/functional","dojox/lang/functional/reversed","dojox/lang/utils","dojox/gfx/fx"],function(lang,arr,_501,Base,dc,df,dfr,du,fx){var _502=dfr.lambda("item.purgeGroup()");return _501("dojox.charting.plot2d.OHLC",Base,{defaultParams:{hAxis:"x",vAxis:"y",gap:2,animate:null},optionalParams:{minBarSize:1,maxBarSize:1,stroke:{},outline:{},shadow:{},fill:{},font:"",fontColor:""},constructor:function(_503,_504){this.opt=lang.clone(this.defaultParams);du.updateWithObject(this.opt,_504);du.updateWithPattern(this.opt,_504,this.optionalParams);this.series=[];this.hAxis=this.opt.hAxis;this.vAxis=this.opt.vAxis;this.animate=this.opt.animate;},collectStats:function(_505){var _506=lang.delegate(dc.defaultStats);for(var i=0;i<_505.length;i++){var run=_505[i];if(!run.data.length){continue;}var _507=_506.vmin,_508=_506.vmax;if(!("ymin" in run)||!("ymax" in run)){arr.forEach(run.data,function(val,idx){if(val!==null){var x=val.x||idx+1;_506.hmin=Math.min(_506.hmin,x);_506.hmax=Math.max(_506.hmax,x);_506.vmin=Math.min(_506.vmin,val.open,val.close,val.high,val.low);_506.vmax=Math.max(_506.vmax,val.open,val.close,val.high,val.low);}});}if("ymin" in run){_506.vmin=Math.min(_507,run.ymin);}if("ymax" in run){_506.vmax=Math.max(_508,run.ymax);}}return _506;},getSeriesStats:function(){var _509=this.collectStats(this.series);_509.hmin-=0.5;_509.hmax+=0.5;return _509;},render:function(dim,_50a){if(this.zoom&&!this.isDataDirty()){return this.performZoom(dim,_50a);}this.resetEvents();this.dirty=this.isDirty();if(this.dirty){arr.forEach(this.series,_502);this._eventSeries={};this.cleanGroup();var s=this.group;df.forEachRev(this.series,function(item){item.cleanGroup(s);});}var t=this.chart.theme,f,gap,_50b,ht=this._hScaler.scaler.getTransformerFromModel(this._hScaler),vt=this._vScaler.scaler.getTransformerFromModel(this._vScaler),_50c=Math.max(0,this._vScaler.bounds.lower),_50d=vt(_50c),_50e=this.events();f=dc.calculateBarSize(this._hScaler.bounds.scale,this.opt);gap=f.gap;_50b=f.size;for(var i=this.series.length-1;i>=0;--i){var run=this.series[i];if(!this.dirty&&!run.dirty){t.skip();this._reconnectEvents(run.name);continue;}run.cleanGroup();var _50f=t.next("candlestick",[this.opt,run]),s=run.group,_510=new Array(run.data.length);for(var j=0;j<run.data.length;++j){var v=run.data[j];if(v!==null){var _511=t.addMixin(_50f,"candlestick",v,true);var x=ht(v.x||(j+0.5))+_50a.l+gap,y=dim.height-_50a.b,open=vt(v.open),_512=vt(v.close),high=vt(v.high),low=vt(v.low);if(low>high){var tmp=high;high=low;low=tmp;}if(_50b>=1){var hl={x1:_50b/2,x2:_50b/2,y1:y-high,y2:y-low},op={x1:0,x2:((_50b/2)+((_511.series.stroke.width||1)/2)),y1:y-open,y2:y-open},cl={x1:((_50b/2)-((_511.series.stroke.width||1)/2)),x2:_50b,y1:y-_512,y2:y-_512};var _513=s.createGroup();_513.setTransform({dx:x,dy:0});var _514=_513.createGroup();_514.createLine(hl).setStroke(_511.series.stroke);_514.createLine(op).setStroke(_511.series.stroke);_514.createLine(cl).setStroke(_511.series.stroke);run.dyn.stroke=_511.series.stroke;if(_50e){var o={element:"candlestick",index:j,run:run,shape:_514,x:x,y:y-Math.max(open,_512),cx:_50b/2,cy:(y-Math.max(open,_512))+(Math.max(open>_512?open-_512:_512-open,1)/2),width:_50b,height:Math.max(open>_512?open-_512:_512-open,1),data:v};this._connectEvents(o);_510[j]=o;}}if(this.animate){this._animateOHLC(_513,y-low,high-low);}}}this._eventSeries[run.name]=_510;run.dirty=false;}this.dirty=false;return this;},_animateOHLC:function(_515,_516,_517){fx.animateTransform(lang.delegate({shape:_515,duration:1200,transform:[{name:"translate",start:[0,_516-(_516/_517)],end:[0,0]},{name:"scale",start:[1,1/_517],end:[1,1]},{name:"original"}]},this.animate)).play();}});});},"dojo/data/util/sorter":function(){define(["dojo/_base/lang"],function(lang){var _518=lang.getObject("dojo.data.util.sorter",true);_518.basicComparator=function(a,b){var r=-1;if(a===null){a=undefined;}if(b===null){b=undefined;}if(a==b){r=0;}else{if(a>b||a==null){r=1;}}return r;};_518.createSortFunction=function(_519,_51a){var _51b=[];function _51c(attr,dir,comp,s){return function(_51d,_51e){var a=s.getValue(_51d,attr);var b=s.getValue(_51e,attr);return dir*comp(a,b);};};var _51f;var map=_51a.comparatorMap;var bc=_518.basicComparator;for(var i=0;i<_519.length;i++){_51f=_519[i];var attr=_51f.attribute;if(attr){var dir=(_51f.descending)?-1:1;var comp=bc;if(map){if(typeof attr!=="string"&&("toString" in attr)){attr=attr.toString();}comp=map[attr]||bc;}_51b.push(_51c(attr,dir,comp,_51a));}}return function(rowA,rowB){var i=0;while(i<_51b.length){var ret=_51b[i++](rowA,rowB);if(ret!==0){return ret;}}return 0;};};return _518;});},"dojo/colors":function(){define(["./_base/kernel","./_base/lang","./_base/Color","./_base/array"],function(dojo,lang,_520,_521){var _522=lang.getObject("dojo.colors",true);var _523=function(m1,m2,h){if(h<0){++h;}if(h>1){--h;}var h6=6*h;if(h6<1){return m1+(m2-m1)*h6;}if(2*h<1){return m2;}if(3*h<2){return m1+(m2-m1)*(2/3-h)*6;}return m1;};dojo.colorFromRgb=_520.fromRgb=function(_524,obj){var m=_524.toLowerCase().match(/^(rgba?|hsla?)\(([\s\.\-,%0-9]+)\)/);if(m){var c=m[2].split(/\s*,\s*/),l=c.length,t=m[1],a;if((t=="rgb"&&l==3)||(t=="rgba"&&l==4)){var r=c[0];if(r.charAt(r.length-1)=="%"){a=_521.map(c,function(x){return parseFloat(x)*2.56;});if(l==4){a[3]=c[3];}return _520.fromArray(a,obj);}return _520.fromArray(c,obj);}if((t=="hsl"&&l==3)||(t=="hsla"&&l==4)){var H=((parseFloat(c[0])%360)+360)%360/360,S=parseFloat(c[1])/100,L=parseFloat(c[2])/100,m2=L<=0.5?L*(S+1):L+S-L*S,m1=2*L-m2;a=[_523(m1,m2,H+1/3)*256,_523(m1,m2,H)*256,_523(m1,m2,H-1/3)*256,1];if(l==4){a[3]=c[3];}return _520.fromArray(a,obj);}}return null;};var _525=function(c,low,high){c=Number(c);return isNaN(c)?high:c<low?low:c>high?high:c;};_520.prototype.sanitize=function(){var t=this;t.r=Math.round(_525(t.r,0,255));t.g=Math.round(_525(t.g,0,255));t.b=Math.round(_525(t.b,0,255));t.a=_525(t.a,0,1);return this;};_522.makeGrey=_520.makeGrey=function(g,a){return _520.fromArray([g,g,g,a]);};lang.mixin(_520.named,{"aliceblue":[240,248,255],"antiquewhite":[250,235,215],"aquamarine":[127,255,212],"azure":[240,255,255],"beige":[245,245,220],"bisque":[255,228,196],"blanchedalmond":[255,235,205],"blueviolet":[138,43,226],"brown":[165,42,42],"burlywood":[222,184,135],"cadetblue":[95,158,160],"chartreuse":[127,255,0],"chocolate":[210,105,30],"coral":[255,127,80],"cornflowerblue":[100,149,237],"cornsilk":[255,248,220],"crimson":[220,20,60],"cyan":[0,255,255],"darkblue":[0,0,139],"darkcyan":[0,139,139],"darkgoldenrod":[184,134,11],"darkgray":[169,169,169],"darkgreen":[0,100,0],"darkgrey":[169,169,169],"darkkhaki":[189,183,107],"darkmagenta":[139,0,139],"darkolivegreen":[85,107,47],"darkorange":[255,140,0],"darkorchid":[153,50,204],"darkred":[139,0,0],"darksalmon":[233,150,122],"darkseagreen":[143,188,143],"darkslateblue":[72,61,139],"darkslategray":[47,79,79],"darkslategrey":[47,79,79],"darkturquoise":[0,206,209],"darkviolet":[148,0,211],"deeppink":[255,20,147],"deepskyblue":[0,191,255],"dimgray":[105,105,105],"dimgrey":[105,105,105],"dodgerblue":[30,144,255],"firebrick":[178,34,34],"floralwhite":[255,250,240],"forestgreen":[34,139,34],"gainsboro":[220,220,220],"ghostwhite":[248,248,255],"gold":[255,215,0],"goldenrod":[218,165,32],"greenyellow":[173,255,47],"grey":[128,128,128],"honeydew":[240,255,240],"hotpink":[255,105,180],"indianred":[205,92,92],"indigo":[75,0,130],"ivory":[255,255,240],"khaki":[240,230,140],"lavender":[230,230,250],"lavenderblush":[255,240,245],"lawngreen":[124,252,0],"lemonchiffon":[255,250,205],"lightblue":[173,216,230],"lightcoral":[240,128,128],"lightcyan":[224,255,255],"lightgoldenrodyellow":[250,250,210],"lightgray":[211,211,211],"lightgreen":[144,238,144],"lightgrey":[211,211,211],"lightpink":[255,182,193],"lightsalmon":[255,160,122],"lightseagreen":[32,178,170],"lightskyblue":[135,206,250],"lightslategray":[119,136,153],"lightslategrey":[119,136,153],"lightsteelblue":[176,196,222],"lightyellow":[255,255,224],"limegreen":[50,205,50],"linen":[250,240,230],"magenta":[255,0,255],"mediumaquamarine":[102,205,170],"mediumblue":[0,0,205],"mediumorchid":[186,85,211],"mediumpurple":[147,112,219],"mediumseagreen":[60,179,113],"mediumslateblue":[123,104,238],"mediumspringgreen":[0,250,154],"mediumturquoise":[72,209,204],"mediumvioletred":[199,21,133],"midnightblue":[25,25,112],"mintcream":[245,255,250],"mistyrose":[255,228,225],"moccasin":[255,228,181],"navajowhite":[255,222,173],"oldlace":[253,245,230],"olivedrab":[107,142,35],"orange":[255,165,0],"orangered":[255,69,0],"orchid":[218,112,214],"palegoldenrod":[238,232,170],"palegreen":[152,251,152],"paleturquoise":[175,238,238],"palevioletred":[219,112,147],"papayawhip":[255,239,213],"peachpuff":[255,218,185],"peru":[205,133,63],"pink":[255,192,203],"plum":[221,160,221],"powderblue":[176,224,230],"rosybrown":[188,143,143],"royalblue":[65,105,225],"saddlebrown":[139,69,19],"salmon":[250,128,114],"sandybrown":[244,164,96],"seagreen":[46,139,87],"seashell":[255,245,238],"sienna":[160,82,45],"skyblue":[135,206,235],"slateblue":[106,90,205],"slategray":[112,128,144],"slategrey":[112,128,144],"snow":[255,250,250],"springgreen":[0,255,127],"steelblue":[70,130,180],"tan":[210,180,140],"thistle":[216,191,216],"tomato":[255,99,71],"turquoise":[64,224,208],"violet":[238,130,238],"wheat":[245,222,179],"whitesmoke":[245,245,245],"yellowgreen":[154,205,50]});return _520;});},"dojox/lang/functional/reversed":function(){define("dojox/lang/functional/reversed",["dojo/_base/lang","dojo/_base/window","./lambda"],function(lang,win,df){lang.mixin(df,{filterRev:function(a,f,o){if(typeof a=="string"){a=a.split("");}o=o||win.global;f=df.lambda(f);var t=[],v,i=a.length-1;for(;i>=0;--i){v=a[i];if(f.call(o,v,i,a)){t.push(v);}}return t;},forEachRev:function(a,f,o){if(typeof a=="string"){a=a.split("");}o=o||win.global;f=df.lambda(f);for(var i=a.length-1;i>=0;f.call(o,a[i],i,a),--i){}},mapRev:function(a,f,o){if(typeof a=="string"){a=a.split("");}o=o||win.global;f=df.lambda(f);var n=a.length,t=new Array(n),i=n-1,j=0;for(;i>=0;t[j++]=f.call(o,a[i],i,a),--i){}return t;},everyRev:function(a,f,o){if(typeof a=="string"){a=a.split("");}o=o||win.global;f=df.lambda(f);for(var i=a.length-1;i>=0;--i){if(!f.call(o,a[i],i,a)){return false;}}return true;},someRev:function(a,f,o){if(typeof a=="string"){a=a.split("");}o=o||win.global;f=df.lambda(f);for(var i=a.length-1;i>=0;--i){if(f.call(o,a[i],i,a)){return true;}}return false;}});return df;});},"dojox/charting/Chart":function(){define("dojox/charting/Chart",["dojo/_base/lang","dojo/_base/array","dojo/_base/declare","dojo/_base/html","dojo/dom","dojo/dom-geometry","dojo/dom-construct","dojo/_base/Color","dojo/_base/sniff","./Element","./Theme","./Series","./axis2d/common","dojox/gfx","dojox/lang/functional","dojox/lang/functional/fold","dojox/lang/functional/reversed"],function(lang,arr,_526,html,dom,_527,_528,_529,has,_52a,_52b,_52c,_52d,g,func,_52e,_52f){var dc=dojox.charting,_530=func.lambda("item.clear()"),_531=func.lambda("item.purgeGroup()"),_532=func.lambda("item.destroy()"),_533=func.lambda("item.dirty = false"),_534=func.lambda("item.dirty = true"),_535=func.lambda("item.name");_526("dojox.charting.Chart",null,{constructor:function(node,_536){if(!_536){_536={};}this.margins=_536.margins?_536.margins:{l:10,t:10,r:10,b:10};this.stroke=_536.stroke;this.fill=_536.fill;this.delayInMs=_536.delayInMs||200;this.title=_536.title;this.titleGap=_536.titleGap;this.titlePos=_536.titlePos;this.titleFont=_536.titleFont;this.titleFontColor=_536.titleFontColor;this.chartTitle=null;this.theme=null;this.axes={};this.stack=[];this.plots={};this.series=[];this.runs={};this.dirty=true;this.coords=null;this.node=dom.byId(node);var box=_527.getMarginBox(node);this.surface=g.createSurface(this.node,box.w||400,box.h||300);},destroy:function(){arr.forEach(this.series,_532);arr.forEach(this.stack,_532);func.forIn(this.axes,_532);if(this.chartTitle&&this.chartTitle.tagName){_528.destroy(this.chartTitle);}this.surface.destroy();},getCoords:function(){return html.coords(this.node,true);},setTheme:function(_537){this.theme=_537.clone();this.dirty=true;return this;},addAxis:function(name,_538){var axis,_539=_538&&_538.type||"Default";if(typeof _539=="string"){if(!dc.axis2d||!dc.axis2d[_539]){throw Error("Can't find axis: "+_539+" - Check "+"require() dependencies.");}axis=new dc.axis2d[_539](this,_538);}else{axis=new _539(this,_538);}axis.name=name;axis.dirty=true;if(name in this.axes){this.axes[name].destroy();}this.axes[name]=axis;this.dirty=true;return this;},getAxis:function(name){return this.axes[name];},removeAxis:function(name){if(name in this.axes){this.axes[name].destroy();delete this.axes[name];this.dirty=true;}return this;},addPlot:function(name,_53a){var plot,_53b=_53a&&_53a.type||"Default";if(typeof _53b=="string"){if(!dc.plot2d||!dc.plot2d[_53b]){throw Error("Can't find plot: "+_53b+" - didn't you forget to dojo"+".require() it?");}plot=new dc.plot2d[_53b](this,_53a);}else{plot=new _53b(this,_53a);}plot.name=name;plot.dirty=true;if(name in this.plots){this.stack[this.plots[name]].destroy();this.stack[this.plots[name]]=plot;}else{this.plots[name]=this.stack.length;this.stack.push(plot);}this.dirty=true;return this;},getPlot:function(name){return this.stack[this.plots[name]];},removePlot:function(name){if(name in this.plots){var _53c=this.plots[name];delete this.plots[name];this.stack[_53c].destroy();this.stack.splice(_53c,1);func.forIn(this.plots,function(idx,name,_53d){if(idx>_53c){_53d[name]=idx-1;}});var ns=arr.filter(this.series,function(run){return run.plot!=name;});if(ns.length<this.series.length){arr.forEach(this.series,function(run){if(run.plot==name){run.destroy();}});this.runs={};arr.forEach(ns,function(run,_53e){this.runs[run.plot]=_53e;},this);this.series=ns;}this.dirty=true;}return this;},getPlotOrder:function(){return func.map(this.stack,_535);},setPlotOrder:function(_53f){var _540={},_541=func.filter(_53f,function(name){if(!(name in this.plots)||(name in _540)){return false;}_540[name]=1;return true;},this);if(_541.length<this.stack.length){func.forEach(this.stack,function(plot){var name=plot.name;if(!(name in _540)){_541.push(name);}});}var _542=func.map(_541,function(name){return this.stack[this.plots[name]];},this);func.forEach(_542,function(plot,i){this.plots[plot.name]=i;},this);this.stack=_542;this.dirty=true;return this;},movePlotToFront:function(name){if(name in this.plots){var _543=this.plots[name];if(_543){var _544=this.getPlotOrder();_544.splice(_543,1);_544.unshift(name);return this.setPlotOrder(_544);}}return this;},movePlotToBack:function(name){if(name in this.plots){var _545=this.plots[name];if(_545<this.stack.length-1){var _546=this.getPlotOrder();_546.splice(_545,1);_546.push(name);return this.setPlotOrder(_546);}}return this;},addSeries:function(name,data,_547){var run=new _52c(this,data,_547);run.name=name;if(name in this.runs){this.series[this.runs[name]].destroy();this.series[this.runs[name]]=run;}else{this.runs[name]=this.series.length;this.series.push(run);}this.dirty=true;if(!("ymin" in run)&&"min" in run){run.ymin=run.min;}if(!("ymax" in run)&&"max" in run){run.ymax=run.max;}return this;},getSeries:function(name){return this.series[this.runs[name]];},removeSeries:function(name){if(name in this.runs){var _548=this.runs[name];delete this.runs[name];this.series[_548].destroy();this.series.splice(_548,1);func.forIn(this.runs,function(idx,name,runs){if(idx>_548){runs[name]=idx-1;}});this.dirty=true;}return this;},updateSeries:function(name,data){if(name in this.runs){var run=this.series[this.runs[name]];run.update(data);this._invalidateDependentPlots(run.plot,false);this._invalidateDependentPlots(run.plot,true);}return this;},getSeriesOrder:function(_549){return func.map(func.filter(this.series,function(run){return run.plot==_549;}),_535);},setSeriesOrder:function(_54a){var _54b,_54c={},_54d=func.filter(_54a,function(name){if(!(name in this.runs)||(name in _54c)){return false;}var run=this.series[this.runs[name]];if(_54b){if(run.plot!=_54b){return false;}}else{_54b=run.plot;}_54c[name]=1;return true;},this);func.forEach(this.series,function(run){var name=run.name;if(!(name in _54c)&&run.plot==_54b){_54d.push(name);}});var _54e=func.map(_54d,function(name){return this.series[this.runs[name]];},this);this.series=_54e.concat(func.filter(this.series,function(run){return run.plot!=_54b;}));func.forEach(this.series,function(run,i){this.runs[run.name]=i;},this);this.dirty=true;return this;},moveSeriesToFront:function(name){if(name in this.runs){var _54f=this.runs[name],_550=this.getSeriesOrder(this.series[_54f].plot);if(name!=_550[0]){_550.splice(_54f,1);_550.unshift(name);return this.setSeriesOrder(_550);}}return this;},moveSeriesToBack:function(name){if(name in this.runs){var _551=this.runs[name],_552=this.getSeriesOrder(this.series[_551].plot);if(name!=_552[_552.length-1]){_552.splice(_551,1);_552.push(name);return this.setSeriesOrder(_552);}}return this;},resize:function(_553,_554){var box;switch(arguments.length){case 1:box=lang.mixin({},_553);_527.setMarginBox(this.node,box);break;case 2:box={w:_553,h:_554};_527.setMarginBox(this.node,box);break;}box=_527.getMarginBox(this.node);var d=this.surface.getDimensions();if(d.width!=box.w||d.height!=box.h){this.surface.setDimensions(box.w,box.h);this.dirty=true;return this.render();}else{return this;}},getGeometry:function(){var ret={};func.forIn(this.axes,function(axis){if(axis.initialized()){ret[axis.name]={name:axis.name,vertical:axis.vertical,scaler:axis.scaler,ticks:axis.ticks};}});return ret;},setAxisWindow:function(name,_555,_556,zoom){var axis=this.axes[name];if(axis){axis.setWindow(_555,_556);arr.forEach(this.stack,function(plot){if(plot.hAxis==name||plot.vAxis==name){plot.zoom=zoom;}});}return this;},setWindow:function(sx,sy,dx,dy,zoom){if(!("plotArea" in this)){this.calculateGeometry();}func.forIn(this.axes,function(axis){var _557,_558,_559=axis.getScaler().bounds,s=_559.span/(_559.upper-_559.lower);if(axis.vertical){_557=sy;_558=dy/s/_557;}else{_557=sx;_558=dx/s/_557;}axis.setWindow(_557,_558);});arr.forEach(this.stack,function(plot){plot.zoom=zoom;});return this;},zoomIn:function(name,_55a){var axis=this.axes[name];if(axis){var _55b,_55c,_55d=axis.getScaler().bounds;var _55e=Math.min(_55a[0],_55a[1]);var _55f=Math.max(_55a[0],_55a[1]);_55e=_55a[0]<_55d.lower?_55d.lower:_55e;_55f=_55a[1]>_55d.upper?_55d.upper:_55f;_55b=(_55d.upper-_55d.lower)/(_55f-_55e);_55c=_55e-_55d.lower;this.setAxisWindow(name,_55b,_55c);this.render();}},calculateGeometry:function(){if(this.dirty){return this.fullGeometry();}var _560=arr.filter(this.stack,function(plot){return plot.dirty||(plot.hAxis&&this.axes[plot.hAxis].dirty)||(plot.vAxis&&this.axes[plot.vAxis].dirty);},this);_561(_560,this.plotArea);return this;},fullGeometry:function(){this._makeDirty();arr.forEach(this.stack,_530);if(!this.theme){this.setTheme(new _52b(dojox.charting._def));}arr.forEach(this.series,function(run){if(!(run.plot in this.plots)){if(!dc.plot2d||!dc.plot2d.Default){throw Error("Can't find plot: Default - didn't you forget to dojo"+".require() it?");}var plot=new dc.plot2d.Default(this,{});plot.name=run.plot;this.plots[run.plot]=this.stack.length;this.stack.push(plot);}this.stack[this.plots[run.plot]].addSeries(run);},this);arr.forEach(this.stack,function(plot){if(plot.hAxis){plot.setAxis(this.axes[plot.hAxis]);}if(plot.vAxis){plot.setAxis(this.axes[plot.vAxis]);}},this);var dim=this.dim=this.surface.getDimensions();dim.width=g.normalizedLength(dim.width);dim.height=g.normalizedLength(dim.height);func.forIn(this.axes,_530);_561(this.stack,dim);var _562=this.offsets={l:0,r:0,t:0,b:0};func.forIn(this.axes,function(axis){func.forIn(axis.getOffsets(),function(o,i){_562[i]+=o;});});if(this.title){this.titleGap=(this.titleGap==0)?0:this.titleGap||this.theme.chart.titleGap||20;this.titlePos=this.titlePos||this.theme.chart.titlePos||"top";this.titleFont=this.titleFont||this.theme.chart.titleFont;this.titleFontColor=this.titleFontColor||this.theme.chart.titleFontColor||"black";var _563=g.normalizedLength(g.splitFontString(this.titleFont).size);_562[this.titlePos=="top"?"t":"b"]+=(_563+this.titleGap);}func.forIn(this.margins,function(o,i){_562[i]+=o;});this.plotArea={width:dim.width-_562.l-_562.r,height:dim.height-_562.t-_562.b};func.forIn(this.axes,_530);_561(this.stack,this.plotArea);return this;},render:function(){if(this.theme){this.theme.clear();}if(this.dirty){return this.fullRender();}this.calculateGeometry();func.forEachRev(this.stack,function(plot){plot.render(this.dim,this.offsets);},this);func.forIn(this.axes,function(axis){axis.render(this.dim,this.offsets);},this);this._makeClean();if(this.surface.render){this.surface.render();}return this;},fullRender:function(){this.fullGeometry();var _564=this.offsets,dim=this.dim,rect;arr.forEach(this.series,_531);func.forIn(this.axes,_531);arr.forEach(this.stack,_531);if(this.chartTitle&&this.chartTitle.tagName){_528.destroy(this.chartTitle);}this.surface.clear();this.chartTitle=null;var t=this.theme,fill=t.plotarea&&t.plotarea.fill,_565=t.plotarea&&t.plotarea.stroke,w=Math.max(0,dim.width-_564.l-_564.r),h=Math.max(0,dim.height-_564.t-_564.b),rect={x:_564.l-1,y:_564.t-1,width:w+2,height:h+2};if(fill){fill=_52a.prototype._shapeFill(_52a.prototype._plotFill(fill,dim,_564),rect);this.surface.createRect(rect).setFill(fill);}if(_565){this.surface.createRect({x:_564.l,y:_564.t,width:w+1,height:h+1}).setStroke(_565);}func.foldr(this.stack,function(z,plot){return plot.render(dim,_564),0;},0);fill=this.fill!==undefined?this.fill:(t.chart&&t.chart.fill);_565=this.stroke!==undefined?this.stroke:(t.chart&&t.chart.stroke);if(fill=="inherit"){var node=this.node,fill=new _529(html.style(node,"backgroundColor"));while(fill.a==0&&node!=document.documentElement){fill=new _529(html.style(node,"backgroundColor"));node=node.parentNode;}}if(fill){fill=_52a.prototype._plotFill(fill,dim,_564);if(_564.l){rect={width:_564.l,height:dim.height+1};this.surface.createRect(rect).setFill(_52a.prototype._shapeFill(fill,rect));}if(_564.r){rect={x:dim.width-_564.r,width:_564.r+1,height:dim.height+2};this.surface.createRect(rect).setFill(_52a.prototype._shapeFill(fill,rect));}if(_564.t){rect={width:dim.width+1,height:_564.t};this.surface.createRect(rect).setFill(_52a.prototype._shapeFill(fill,rect));}if(_564.b){rect={y:dim.height-_564.b,width:dim.width+1,height:_564.b+2};this.surface.createRect(rect).setFill(_52a.prototype._shapeFill(fill,rect));}}if(_565){this.surface.createRect({width:dim.width-1,height:dim.height-1}).setStroke(_565);}if(this.title){var _566=(g.renderer=="canvas"),_567=_566||!has("ie")&&!has("opera")?"html":"gfx",_568=g.normalizedLength(g.splitFontString(this.titleFont).size);this.chartTitle=_52d.createText[_567](this,this.surface,dim.width/2,this.titlePos=="top"?_568+this.margins.t:dim.height-this.margins.b,"middle",this.title,this.titleFont,this.titleFontColor);}func.forIn(this.axes,function(axis){axis.render(dim,_564);});this._makeClean();if(this.surface.render){this.surface.render();}return this;},delayedRender:function(){if(!this._delayedRenderHandle){this._delayedRenderHandle=setTimeout(lang.hitch(this,function(){clearTimeout(this._delayedRenderHandle);this._delayedRenderHandle=null;this.render();}),this.delayInMs);}return this;},connectToPlot:function(name,_569,_56a){return name in this.plots?this.stack[this.plots[name]].connect(_569,_56a):null;},fireEvent:function(_56b,_56c,_56d){if(_56b in this.runs){var _56e=this.series[this.runs[_56b]].plot;if(_56e in this.plots){var plot=this.stack[this.plots[_56e]];if(plot){plot.fireEvent(_56b,_56c,_56d);}}}return this;},_makeClean:function(){arr.forEach(this.axes,_533);arr.forEach(this.stack,_533);arr.forEach(this.series,_533);this.dirty=false;},_makeDirty:function(){arr.forEach(this.axes,_534);arr.forEach(this.stack,_534);arr.forEach(this.series,_534);this.dirty=true;},_invalidateDependentPlots:function(_56f,_570){if(_56f in this.plots){var plot=this.stack[this.plots[_56f]],axis,_571=_570?"vAxis":"hAxis";if(plot[_571]){axis=this.axes[plot[_571]];if(axis&&axis.dependOnData()){axis.dirty=true;arr.forEach(this.stack,function(p){if(p[_571]&&p[_571]==plot[_571]){p.dirty=true;}});}}else{plot.dirty=true;}}}});function _572(_573){return {min:_573.hmin,max:_573.hmax};};function _574(_575){return {min:_575.vmin,max:_575.vmax};};function _576(_577,h){_577.hmin=h.min;_577.hmax=h.max;};function _578(_579,v){_579.vmin=v.min;_579.vmax=v.max;};function _57a(_57b,_57c){if(_57b&&_57c){_57b.min=Math.min(_57b.min,_57c.min);_57b.max=Math.max(_57b.max,_57c.max);}return _57b||_57c;};function _561(_57d,_57e){var _57f={},axes={};arr.forEach(_57d,function(plot){var _580=_57f[plot.name]=plot.getSeriesStats();if(plot.hAxis){axes[plot.hAxis]=_57a(axes[plot.hAxis],_572(_580));}if(plot.vAxis){axes[plot.vAxis]=_57a(axes[plot.vAxis],_574(_580));}});arr.forEach(_57d,function(plot){var _581=_57f[plot.name];if(plot.hAxis){_576(_581,axes[plot.hAxis]);}if(plot.vAxis){_578(_581,axes[plot.vAxis]);}plot.initializeScalers(_57e,_581);});};return dojox.charting.Chart;});},"dojox/charting/plot2d/Candlesticks":function(){define("dojox/charting/plot2d/Candlesticks",["dojo/_base/lang","dojo/_base/declare","dojo/_base/array","./Base","./common","dojox/lang/functional","dojox/lang/functional/reversed","dojox/lang/utils","dojox/gfx/fx"],function(lang,_582,arr,Base,dc,df,dfr,du,fx){var _583=dfr.lambda("item.purgeGroup()");return _582("dojox.charting.plot2d.Candlesticks",Base,{defaultParams:{hAxis:"x",vAxis:"y",gap:2,animate:null},optionalParams:{minBarSize:1,maxBarSize:1,stroke:{},outline:{},shadow:{},fill:{},font:"",fontColor:""},constructor:function(_584,_585){this.opt=lang.clone(this.defaultParams);du.updateWithObject(this.opt,_585);du.updateWithPattern(this.opt,_585,this.optionalParams);this.series=[];this.hAxis=this.opt.hAxis;this.vAxis=this.opt.vAxis;this.animate=this.opt.animate;},collectStats:function(_586){var _587=lang.delegate(dc.defaultStats);for(var i=0;i<_586.length;i++){var run=_586[i];if(!run.data.length){continue;}var _588=_587.vmin,_589=_587.vmax;if(!("ymin" in run)||!("ymax" in run)){arr.forEach(run.data,function(val,idx){if(val!==null){var x=val.x||idx+1;_587.hmin=Math.min(_587.hmin,x);_587.hmax=Math.max(_587.hmax,x);_587.vmin=Math.min(_587.vmin,val.open,val.close,val.high,val.low);_587.vmax=Math.max(_587.vmax,val.open,val.close,val.high,val.low);}});}if("ymin" in run){_587.vmin=Math.min(_588,run.ymin);}if("ymax" in run){_587.vmax=Math.max(_589,run.ymax);}}return _587;},getSeriesStats:function(){var _58a=this.collectStats(this.series);_58a.hmin-=0.5;_58a.hmax+=0.5;return _58a;},render:function(dim,_58b){if(this.zoom&&!this.isDataDirty()){return this.performZoom(dim,_58b);}this.resetEvents();this.dirty=this.isDirty();if(this.dirty){arr.forEach(this.series,_583);this._eventSeries={};this.cleanGroup();var s=this.group;df.forEachRev(this.series,function(item){item.cleanGroup(s);});}var t=this.chart.theme,f,gap,_58c,ht=this._hScaler.scaler.getTransformerFromModel(this._hScaler),vt=this._vScaler.scaler.getTransformerFromModel(this._vScaler),_58d=Math.max(0,this._vScaler.bounds.lower),_58e=vt(_58d),_58f=this.events();f=dc.calculateBarSize(this._hScaler.bounds.scale,this.opt);gap=f.gap;_58c=f.size;for(var i=this.series.length-1;i>=0;--i){var run=this.series[i];if(!this.dirty&&!run.dirty){t.skip();this._reconnectEvents(run.name);continue;}run.cleanGroup();var _590=t.next("candlestick",[this.opt,run]),s=run.group,_591=new Array(run.data.length);for(var j=0;j<run.data.length;++j){var v=run.data[j];if(v!==null){var _592=t.addMixin(_590,"candlestick",v,true);var x=ht(v.x||(j+0.5))+_58b.l+gap,y=dim.height-_58b.b,open=vt(v.open),_593=vt(v.close),high=vt(v.high),low=vt(v.low);if("mid" in v){var mid=vt(v.mid);}if(low>high){var tmp=high;high=low;low=tmp;}if(_58c>=1){var _594=open>_593;var line={x1:_58c/2,x2:_58c/2,y1:y-high,y2:y-low},rect={x:0,y:y-Math.max(open,_593),width:_58c,height:Math.max(_594?open-_593:_593-open,1)};var _595=s.createGroup();_595.setTransform({dx:x,dy:0});var _596=_595.createGroup();_596.createLine(line).setStroke(_592.series.stroke);_596.createRect(rect).setStroke(_592.series.stroke).setFill(_594?_592.series.fill:"white");if("mid" in v){_596.createLine({x1:(_592.series.stroke.width||1),x2:_58c-(_592.series.stroke.width||1),y1:y-mid,y2:y-mid}).setStroke(_594?"white":_592.series.stroke);}run.dyn.fill=_592.series.fill;run.dyn.stroke=_592.series.stroke;if(_58f){var o={element:"candlestick",index:j,run:run,shape:_596,x:x,y:y-Math.max(open,_593),cx:_58c/2,cy:(y-Math.max(open,_593))+(Math.max(_594?open-_593:_593-open,1)/2),width:_58c,height:Math.max(_594?open-_593:_593-open,1),data:v};this._connectEvents(o);_591[j]=o;}}if(this.animate){this._animateCandlesticks(_595,y-low,high-low);}}}this._eventSeries[run.name]=_591;run.dirty=false;}this.dirty=false;return this;},_animateCandlesticks:function(_597,_598,_599){fx.animateTransform(lang.delegate({shape:_597,duration:1200,transform:[{name:"translate",start:[0,_598-(_598/_599)],end:[0,0]},{name:"scale",start:[1,1/_599],end:[1,1]},{name:"original"}]},this.animate)).play();}});});},"dojox/charting/axis2d/Default":function(){define("dojox/charting/axis2d/Default",["dojo/_base/lang","dojo/_base/array","dojo/_base/sniff","dojo/_base/declare","dojo/_base/connect","dojo/_base/html","dojo/dom-geometry","./Invisible","../scaler/common","../scaler/linear","./common","dojox/gfx","dojox/lang/utils"],function(lang,arr,has,_59a,_59b,html,_59c,_59d,_59e,lin,_59f,g,du){var _5a0=4,_5a1=45;return _59a("dojox.charting.axis2d.Default",_59d,{defaultParams:{vertical:false,fixUpper:"none",fixLower:"none",natural:false,leftBottom:true,includeZero:false,fixed:true,majorLabels:true,minorTicks:true,minorLabels:true,microTicks:false,rotation:0,htmlLabels:true,enableCache:false},optionalParams:{min:0,max:1,from:0,to:1,majorTickStep:4,minorTickStep:2,microTickStep:1,labels:[],labelFunc:null,maxLabelSize:0,maxLabelCharCount:0,trailingSymbol:null,stroke:{},majorTick:{},minorTick:{},microTick:{},tick:{},font:"",fontColor:"",title:"",titleGap:0,titleFont:"",titleFontColor:"",titleOrientation:""},constructor:function(_5a2,_5a3){this.opt=lang.clone(this.defaultParams);du.updateWithObject(this.opt,_5a3);du.updateWithPattern(this.opt,_5a3,this.optionalParams);if(this.opt.enableCache){this._textFreePool=[];this._lineFreePool=[];this._textUsePool=[];this._lineUsePool=[];}},getOffsets:function(){var s=this.scaler,_5a4={l:0,r:0,t:0,b:0};if(!s){return _5a4;}var o=this.opt,_5a5=0,a,b,c,d,gl=_59e.getNumericLabel,_5a6=0,ma=s.major,mi=s.minor,ta=this.chart.theme.axis,_5a7=o.font||(ta.majorTick&&ta.majorTick.font)||(ta.tick&&ta.tick.font),_5a8=o.titleFont||(ta.tick&&ta.tick.titleFont),_5a9=(o.titleGap==0)?0:o.titleGap||(ta.tick&&ta.tick.titleGap)||15,_5aa=this.chart.theme.getTick("major",o),_5ab=this.chart.theme.getTick("minor",o),size=_5a7?g.normalizedLength(g.splitFontString(_5a7).size):0,_5ac=_5a8?g.normalizedLength(g.splitFontString(_5a8).size):0,_5ad=o.rotation%360,_5ae=o.leftBottom,cosr=Math.abs(Math.cos(_5ad*Math.PI/180)),sinr=Math.abs(Math.sin(_5ad*Math.PI/180));this.trailingSymbol=(o.trailingSymbol===undefined||o.trailingSymbol===null)?this.trailingSymbol:o.trailingSymbol;if(_5ad<0){_5ad+=360;}if(size){if(this.labels){_5a5=this._groupLabelWidth(this.labels,_5a7,o.maxLabelCharCount);}else{_5a5=this._groupLabelWidth([gl(ma.start,ma.prec,o),gl(ma.start+ma.count*ma.tick,ma.prec,o),gl(mi.start,mi.prec,o),gl(mi.start+mi.count*mi.tick,mi.prec,o)],_5a7,o.maxLabelCharCount);}_5a5=o.maxLabelSize?Math.min(o.maxLabelSize,_5a5):_5a5;if(this.vertical){var side=_5ae?"l":"r";switch(_5ad){case 0:case 180:_5a4[side]=_5a5;_5a4.t=_5a4.b=size/2;break;case 90:case 270:_5a4[side]=size;_5a4.t=_5a4.b=_5a5/2;break;default:if(_5ad<=_5a1||(180<_5ad&&_5ad<=(180+_5a1))){_5a4[side]=size*sinr/2+_5a5*cosr;_5a4[_5ae?"t":"b"]=size*cosr/2+_5a5*sinr;_5a4[_5ae?"b":"t"]=size*cosr/2;}else{if(_5ad>(360-_5a1)||(180>_5ad&&_5ad>(180-_5a1))){_5a4[side]=size*sinr/2+_5a5*cosr;_5a4[_5ae?"b":"t"]=size*cosr/2+_5a5*sinr;_5a4[_5ae?"t":"b"]=size*cosr/2;}else{if(_5ad<90||(180<_5ad&&_5ad<270)){_5a4[side]=size*sinr+_5a5*cosr;_5a4[_5ae?"t":"b"]=size*cosr+_5a5*sinr;}else{_5a4[side]=size*sinr+_5a5*cosr;_5a4[_5ae?"b":"t"]=size*cosr+_5a5*sinr;}}}break;}_5a4[side]+=_5a0+Math.max(_5aa.length,_5ab.length)+(o.title?(_5ac+_5a9):0);}else{var side=_5ae?"b":"t";switch(_5ad){case 0:case 180:_5a4[side]=size;_5a4.l=_5a4.r=_5a5/2;break;case 90:case 270:_5a4[side]=_5a5;_5a4.l=_5a4.r=size/2;break;default:if((90-_5a1)<=_5ad&&_5ad<=90||(270-_5a1)<=_5ad&&_5ad<=270){_5a4[side]=size*sinr/2+_5a5*cosr;_5a4[_5ae?"r":"l"]=size*cosr/2+_5a5*sinr;_5a4[_5ae?"l":"r"]=size*cosr/2;}else{if(90<=_5ad&&_5ad<=(90+_5a1)||270<=_5ad&&_5ad<=(270+_5a1)){_5a4[side]=size*sinr/2+_5a5*cosr;_5a4[_5ae?"l":"r"]=size*cosr/2+_5a5*sinr;_5a4[_5ae?"r":"l"]=size*cosr/2;}else{if(_5ad<_5a1||(180<_5ad&&_5ad<(180-_5a1))){_5a4[side]=size*sinr+_5a5*cosr;_5a4[_5ae?"r":"l"]=size*cosr+_5a5*sinr;}else{_5a4[side]=size*sinr+_5a5*cosr;_5a4[_5ae?"l":"r"]=size*cosr+_5a5*sinr;}}}break;}_5a4[side]+=_5a0+Math.max(_5aa.length,_5ab.length)+(o.title?(_5ac+_5a9):0);}}if(_5a5){this._cachedLabelWidth=_5a5;}return _5a4;},cleanGroup:function(_5af){if(this.opt.enableCache&&this.group){this._lineFreePool=this._lineFreePool.concat(this._lineUsePool);this._lineUsePool=[];this._textFreePool=this._textFreePool.concat(this._textUsePool);this._textUsePool=[];}this.inherited(arguments);},createText:function(_5b0,_5b1,x,y,_5b2,_5b3,font,_5b4,_5b5){if(!this.opt.enableCache||_5b0=="html"){return _59f.createText[_5b0](this.chart,_5b1,x,y,_5b2,_5b3,font,_5b4,_5b5);}var text;if(this._textFreePool.length>0){text=this._textFreePool.pop();text.setShape({x:x,y:y,text:_5b3,align:_5b2});_5b1.add(text);}else{text=_59f.createText[_5b0](this.chart,_5b1,x,y,_5b2,_5b3,font,_5b4,_5b5);}this._textUsePool.push(text);return text;},createLine:function(_5b6,_5b7){var line;if(this.opt.enableCache&&this._lineFreePool.length>0){line=this._lineFreePool.pop();line.setShape(_5b7);_5b6.add(line);}else{line=_5b6.createLine(_5b7);}if(this.opt.enableCache){this._lineUsePool.push(line);}return line;},render:function(dim,_5b8){if(!this.dirty){return this;}var o=this.opt,ta=this.chart.theme.axis,_5b9=o.leftBottom,_5ba=o.rotation%360,_5bb,stop,_5bc,_5bd=0,_5be,_5bf,_5c0,_5c1,_5c2,_5c3,_5c4=o.font||(ta.majorTick&&ta.majorTick.font)||(ta.tick&&ta.tick.font),_5c5=o.titleFont||(ta.tick&&ta.tick.titleFont),_5c6=o.fontColor||(ta.majorTick&&ta.majorTick.fontColor)||(ta.tick&&ta.tick.fontColor)||"black",_5c7=o.titleFontColor||(ta.tick&&ta.tick.titleFontColor)||"black",_5c8=(o.titleGap==0)?0:o.titleGap||(ta.tick&&ta.tick.titleGap)||15,_5c9=o.titleOrientation||(ta.tick&&ta.tick.titleOrientation)||"axis",_5ca=this.chart.theme.getTick("major",o),_5cb=this.chart.theme.getTick("minor",o),_5cc=this.chart.theme.getTick("micro",o),_5cd=Math.max(_5ca.length,_5cb.length,_5cc.length),_5ce="stroke" in o?o.stroke:ta.stroke,size=_5c4?g.normalizedLength(g.splitFontString(_5c4).size):0,cosr=Math.abs(Math.cos(_5ba*Math.PI/180)),sinr=Math.abs(Math.sin(_5ba*Math.PI/180)),_5cf=_5c5?g.normalizedLength(g.splitFontString(_5c5).size):0;if(_5ba<0){_5ba+=360;}if(this.vertical){_5bb={y:dim.height-_5b8.b};stop={y:_5b8.t};_5bc={y:(dim.height-_5b8.b+_5b8.t)/2};_5be=size*sinr+(this._cachedLabelWidth||0)*cosr+_5a0+Math.max(_5ca.length,_5cb.length)+_5cf+_5c8;_5bf={x:0,y:-1};_5c2={x:0,y:0};_5c0={x:1,y:0};_5c1={x:_5a0,y:0};switch(_5ba){case 0:_5c3="end";_5c2.y=size*0.4;break;case 90:_5c3="middle";_5c2.x=-size;break;case 180:_5c3="start";_5c2.y=-size*0.4;break;case 270:_5c3="middle";break;default:if(_5ba<_5a1){_5c3="end";_5c2.y=size*0.4;}else{if(_5ba<90){_5c3="end";_5c2.y=size*0.4;}else{if(_5ba<(180-_5a1)){_5c3="start";}else{if(_5ba<(180+_5a1)){_5c3="start";_5c2.y=-size*0.4;}else{if(_5ba<270){_5c3="start";_5c2.x=_5b9?0:size*0.4;}else{if(_5ba<(360-_5a1)){_5c3="end";_5c2.x=_5b9?0:size*0.4;}else{_5c3="end";_5c2.y=size*0.4;}}}}}}}if(_5b9){_5bb.x=stop.x=_5b8.l;_5bd=(_5c9&&_5c9=="away")?90:270;_5bc.x=_5b8.l-_5be+(_5bd==270?_5cf:0);_5c0.x=-1;_5c1.x=-_5c1.x;}else{_5bb.x=stop.x=dim.width-_5b8.r;_5bd=(_5c9&&_5c9=="axis")?90:270;_5bc.x=dim.width-_5b8.r+_5be-(_5bd==270?0:_5cf);switch(_5c3){case "start":_5c3="end";break;case "end":_5c3="start";break;case "middle":_5c2.x+=size;break;}}}else{_5bb={x:_5b8.l};stop={x:dim.width-_5b8.r};_5bc={x:(dim.width-_5b8.r+_5b8.l)/2};_5be=size*cosr+(this._cachedLabelWidth||0)*sinr+_5a0+Math.max(_5ca.length,_5cb.length)+_5cf+_5c8;_5bf={x:1,y:0};_5c2={x:0,y:0};_5c0={x:0,y:1};_5c1={x:0,y:_5a0};switch(_5ba){case 0:_5c3="middle";_5c2.y=size;break;case 90:_5c3="start";_5c2.x=-size*0.4;break;case 180:_5c3="middle";break;case 270:_5c3="end";_5c2.x=size*0.4;break;default:if(_5ba<(90-_5a1)){_5c3="start";_5c2.y=_5b9?size:0;}else{if(_5ba<(90+_5a1)){_5c3="start";_5c2.x=-size*0.4;}else{if(_5ba<180){_5c3="start";_5c2.y=_5b9?0:-size;}else{if(_5ba<(270-_5a1)){_5c3="end";_5c2.y=_5b9?0:-size;}else{if(_5ba<(270+_5a1)){_5c3="end";_5c2.y=_5b9?size*0.4:0;}else{_5c3="end";_5c2.y=_5b9?size:0;}}}}}}if(_5b9){_5bb.y=stop.y=dim.height-_5b8.b;_5bd=(_5c9&&_5c9=="axis")?180:0;_5bc.y=dim.height-_5b8.b+_5be-(_5bd?_5cf:0);}else{_5bb.y=stop.y=_5b8.t;_5bd=(_5c9&&_5c9=="away")?180:0;_5bc.y=_5b8.t-_5be+(_5bd?0:_5cf);_5c0.y=-1;_5c1.y=-_5c1.y;switch(_5c3){case "start":_5c3="end";break;case "end":_5c3="start";break;case "middle":_5c2.y-=size;break;}}}this.cleanGroup();try{var s=this.group,c=this.scaler,t=this.ticks,_5d0,f=lin.getTransformerFromModel(this.scaler),_5d1=(!o.title||!_5bd)&&!_5ba&&this.opt.htmlLabels&&!has("ie")&&!has("opera")?"html":"gfx",dx=_5c0.x*_5ca.length,dy=_5c0.y*_5ca.length;s.createLine({x1:_5bb.x,y1:_5bb.y,x2:stop.x,y2:stop.y}).setStroke(_5ce);if(o.title){var _5d2=_59f.createText[_5d1](this.chart,s,_5bc.x,_5bc.y,"middle",o.title,_5c5,_5c7);if(_5d1=="html"){this.htmlElements.push(_5d2);}else{_5d2.setTransform(g.matrix.rotategAt(_5bd,_5bc.x,_5bc.y));}}if(t==null){this.dirty=false;return this;}arr.forEach(t.major,function(tick){var _5d3=f(tick.value),elem,x=_5bb.x+_5bf.x*_5d3,y=_5bb.y+_5bf.y*_5d3;this.createLine(s,{x1:x,y1:y,x2:x+dx,y2:y+dy}).setStroke(_5ca);if(tick.label){var _5d4=o.maxLabelCharCount?this.getTextWithLimitCharCount(tick.label,_5c4,o.maxLabelCharCount):{text:tick.label,truncated:false};_5d4=o.maxLabelSize?this.getTextWithLimitLength(_5d4.text,_5c4,o.maxLabelSize,_5d4.truncated):_5d4;elem=this.createText(_5d1,s,x+dx+_5c1.x+(_5ba?0:_5c2.x),y+dy+_5c1.y+(_5ba?0:_5c2.y),_5c3,_5d4.text,_5c4,_5c6);if(this.chart.truncateBidi&&_5d4.truncated){this.chart.truncateBidi(elem,tick.label,_5d1);}_5d4.truncated&&this.labelTooltip(elem,this.chart,tick.label,_5d4.text,_5c4,_5d1);if(_5d1=="html"){this.htmlElements.push(elem);}else{if(_5ba){elem.setTransform([{dx:_5c2.x,dy:_5c2.y},g.matrix.rotategAt(_5ba,x+dx+_5c1.x,y+dy+_5c1.y)]);}}}},this);dx=_5c0.x*_5cb.length;dy=_5c0.y*_5cb.length;_5d0=c.minMinorStep<=c.minor.tick*c.bounds.scale;arr.forEach(t.minor,function(tick){var _5d5=f(tick.value),elem,x=_5bb.x+_5bf.x*_5d5,y=_5bb.y+_5bf.y*_5d5;this.createLine(s,{x1:x,y1:y,x2:x+dx,y2:y+dy}).setStroke(_5cb);if(_5d0&&tick.label){var _5d6=o.maxLabelCharCount?this.getTextWithLimitCharCount(tick.label,_5c4,o.maxLabelCharCount):{text:tick.label,truncated:false};_5d6=o.maxLabelSize?this.getTextWithLimitLength(_5d6.text,_5c4,o.maxLabelSize,_5d6.truncated):_5d6;elem=this.createText(_5d1,s,x+dx+_5c1.x+(_5ba?0:_5c2.x),y+dy+_5c1.y+(_5ba?0:_5c2.y),_5c3,_5d6.text,_5c4,_5c6);if(this.chart.getTextDir&&_5d6.truncated){this.chart.truncateBidi(elem,tick.label,_5d1);}_5d6.truncated&&this.labelTooltip(elem,this.chart,tick.label,_5d6.text,_5c4,_5d1);if(_5d1=="html"){this.htmlElements.push(elem);}else{if(_5ba){elem.setTransform([{dx:_5c2.x,dy:_5c2.y},g.matrix.rotategAt(_5ba,x+dx+_5c1.x,y+dy+_5c1.y)]);}}}},this);dx=_5c0.x*_5cc.length;dy=_5c0.y*_5cc.length;arr.forEach(t.micro,function(tick){var _5d7=f(tick.value),elem,x=_5bb.x+_5bf.x*_5d7,y=_5bb.y+_5bf.y*_5d7;this.createLine(s,{x1:x,y1:y,x2:x+dx,y2:y+dy}).setStroke(_5cc);},this);}catch(e){}this.dirty=false;return this;},labelTooltip:function(elem,_5d8,_5d9,_5da,font,_5db){var _5dc=["dijit/Tooltip"];var _5dd={type:"rect"},_5de=["above","below"],_5df=g._base._getTextBox(_5da,{font:font}).w||0,_5e0=font?g.normalizedLength(g.splitFontString(font).size):0;if(_5db=="html"){lang.mixin(_5dd,html.coords(elem.firstChild,true));_5dd.width=Math.ceil(_5df);_5dd.height=Math.ceil(_5e0);this._events.push({shape:dojo,handle:_59b.connect(elem.firstChild,"onmouseover",this,function(e){require(_5dc,function(_5e1){_5e1.show(_5d9,_5dd,_5de);});})});this._events.push({shape:dojo,handle:_59b.connect(elem.firstChild,"onmouseout",this,function(e){require(_5dc,function(_5e2){_5e2.hide(_5dd);});})});}else{var shp=elem.getShape(),lt=html.coords(_5d8.node,true);_5dd=lang.mixin(_5dd,{x:shp.x-_5df/2,y:shp.y});_5dd.x+=lt.x;_5dd.y+=lt.y;_5dd.x=Math.round(_5dd.x);_5dd.y=Math.round(_5dd.y);_5dd.width=Math.ceil(_5df);_5dd.height=Math.ceil(_5e0);this._events.push({shape:elem,handle:elem.connect("onmouseenter",this,function(e){require(_5dc,function(_5e3){_5e3.show(_5d9,_5dd,_5de);});})});this._events.push({shape:elem,handle:elem.connect("onmouseleave",this,function(e){require(_5dc,function(_5e4){_5e4.hide(_5dd);});})});}}});});},"dojox/charting/plot2d/Scatter":function(){define("dojox/charting/plot2d/Scatter",["dojo/_base/lang","dojo/_base/array","dojo/_base/declare","./Base","./common","dojox/lang/functional","dojox/lang/functional/reversed","dojox/lang/utils","dojox/gfx/fx","dojox/gfx/gradutils"],function(lang,arr,_5e5,Base,dc,df,dfr,du,fx,_5e6){var _5e7=dfr.lambda("item.purgeGroup()");return _5e5("dojox.charting.plot2d.Scatter",Base,{defaultParams:{hAxis:"x",vAxis:"y",shadows:null,animate:null},optionalParams:{markerStroke:{},markerOutline:{},markerShadow:{},markerFill:{},markerFont:"",markerFontColor:""},constructor:function(_5e8,_5e9){this.opt=lang.clone(this.defaultParams);du.updateWithObject(this.opt,_5e9);du.updateWithPattern(this.opt,_5e9,this.optionalParams);this.series=[];this.hAxis=this.opt.hAxis;this.vAxis=this.opt.vAxis;this.animate=this.opt.animate;},render:function(dim,_5ea){if(this.zoom&&!this.isDataDirty()){return this.performZoom(dim,_5ea);}this.resetEvents();this.dirty=this.isDirty();if(this.dirty){arr.forEach(this.series,_5e7);this._eventSeries={};this.cleanGroup();var s=this.group;df.forEachRev(this.series,function(item){item.cleanGroup(s);});}var t=this.chart.theme,_5eb=this.events();for(var i=this.series.length-1;i>=0;--i){var run=this.series[i];if(!this.dirty&&!run.dirty){t.skip();this._reconnectEvents(run.name);continue;}run.cleanGroup();if(!run.data.length){run.dirty=false;t.skip();continue;}var _5ec=t.next("marker",[this.opt,run]),s=run.group,_5ed,ht=this._hScaler.scaler.getTransformerFromModel(this._hScaler),vt=this._vScaler.scaler.getTransformerFromModel(this._vScaler);if(typeof run.data[0]=="number"){_5ed=arr.map(run.data,function(v,i){return {x:ht(i+1)+_5ea.l,y:dim.height-_5ea.b-vt(v)};},this);}else{_5ed=arr.map(run.data,function(v,i){return {x:ht(v.x)+_5ea.l,y:dim.height-_5ea.b-vt(v.y)};},this);}var _5ee=new Array(_5ed.length),_5ef=new Array(_5ed.length),_5f0=new Array(_5ed.length);arr.forEach(_5ed,function(c,i){var _5f1=typeof run.data[i]=="number"?t.post(_5ec,"marker"):t.addMixin(_5ec,"marker",run.data[i],true),path="M"+c.x+" "+c.y+" "+_5f1.symbol;if(_5f1.marker.shadow){_5ee[i]=s.createPath("M"+(c.x+_5f1.marker.shadow.dx)+" "+(c.y+_5f1.marker.shadow.dy)+" "+_5f1.symbol).setStroke(_5f1.marker.shadow).setFill(_5f1.marker.shadow.color);if(this.animate){this._animateScatter(_5ee[i],dim.height-_5ea.b);}}if(_5f1.marker.outline){var _5f2=dc.makeStroke(_5f1.marker.outline);_5f2.width=2*_5f2.width+_5f1.marker.stroke.width;_5f0[i]=s.createPath(path).setStroke(_5f2);if(this.animate){this._animateScatter(_5f0[i],dim.height-_5ea.b);}}var _5f3=dc.makeStroke(_5f1.marker.stroke),fill=this._plotFill(_5f1.marker.fill,dim,_5ea);if(fill&&(fill.type==="linear"||fill.type=="radial")){var _5f4=_5e6.getColor(fill,{x:c.x,y:c.y});if(_5f3){_5f3.color=_5f4;}_5ef[i]=s.createPath(path).setStroke(_5f3).setFill(_5f4);}else{_5ef[i]=s.createPath(path).setStroke(_5f3).setFill(fill);}if(this.animate){this._animateScatter(_5ef[i],dim.height-_5ea.b);}},this);if(_5ef.length){run.dyn.stroke=_5ef[_5ef.length-1].getStroke();run.dyn.fill=_5ef[_5ef.length-1].getFill();}if(_5eb){var _5f5=new Array(_5ef.length);arr.forEach(_5ef,function(s,i){var o={element:"marker",index:i,run:run,shape:s,outline:_5f0&&_5f0[i]||null,shadow:_5ee&&_5ee[i]||null,cx:_5ed[i].x,cy:_5ed[i].y};if(typeof run.data[0]=="number"){o.x=i+1;o.y=run.data[i];}else{o.x=run.data[i].x;o.y=run.data[i].y;}this._connectEvents(o);_5f5[i]=o;},this);this._eventSeries[run.name]=_5f5;}else{delete this._eventSeries[run.name];}run.dirty=false;}this.dirty=false;return this;},_animateScatter:function(_5f6,_5f7){fx.animateTransform(lang.delegate({shape:_5f6,duration:1200,transform:[{name:"translate",start:[0,_5f7],end:[0,0]},{name:"scale",start:[0,0],end:[1,1]},{name:"original"}]},this.animate)).play();}});});},"dojox/data/CsvStore":function(){define("dojox/data/CsvStore",["dojo/_base/lang","dojo/_base/declare","dojo/_base/xhr","dojo/_base/window","dojo/data/util/filter","dojo/data/util/simpleFetch"],function(lang,_5f8,xhr,_5f9,_5fa,_5fb){var _5fc=_5f8("dojox.data.CsvStore",null,{constructor:function(_5fd){this._attributes=[];this._attributeIndexes={};this._dataArray=[];this._arrayOfAllItems=[];this._loadFinished=false;if(_5fd.url){this.url=_5fd.url;}this._csvData=_5fd.data;if(_5fd.label){this.label=_5fd.label;}else{if(this.label===""){this.label=undefined;}}this._storeProp="_csvStore";this._idProp="_csvId";this._features={"dojo.data.api.Read":true,"dojo.data.api.Identity":true};this._loadInProgress=false;this._queuedFetches=[];this.identifier=_5fd.identifier;if(this.identifier===""){delete this.identifier;}else{this._idMap={};}if("separator" in _5fd){this.separator=_5fd.separator;}if("urlPreventCache" in _5fd){this.urlPreventCache=_5fd.urlPreventCache?true:false;}},url:"",label:"",identifier:"",separator:",",urlPreventCache:false,_assertIsItem:function(item){if(!this.isItem(item)){throw new Error(this.declaredClass+": a function was passed an item argument that was not an item");}},_getIndex:function(item){var idx=this.getIdentity(item);if(this.identifier){idx=this._idMap[idx];}return idx;},getValue:function(item,_5fe,_5ff){this._assertIsItem(item);var _600=_5ff;if(typeof _5fe==="string"){var ai=this._attributeIndexes[_5fe];if(ai!=null){var _601=this._dataArray[this._getIndex(item)];_600=_601[ai]||_5ff;}}else{throw new Error(this.declaredClass+": a function was passed an attribute argument that was not a string");}return _600;},getValues:function(item,_602){var _603=this.getValue(item,_602);return (_603?[_603]:[]);},getAttributes:function(item){this._assertIsItem(item);var _604=[];var _605=this._dataArray[this._getIndex(item)];for(var i=0;i<_605.length;i++){if(_605[i]!==""){_604.push(this._attributes[i]);}}return _604;},hasAttribute:function(item,_606){this._assertIsItem(item);if(typeof _606==="string"){var _607=this._attributeIndexes[_606];var _608=this._dataArray[this._getIndex(item)];return (typeof _607!=="undefined"&&_607<_608.length&&_608[_607]!=="");}else{throw new Error(this.declaredClass+": a function was passed an attribute argument that was not a string");}},containsValue:function(item,_609,_60a){var _60b=undefined;if(typeof _60a==="string"){_60b=_5fa.patternToRegExp(_60a,false);}return this._containsValue(item,_609,_60a,_60b);},_containsValue:function(item,_60c,_60d,_60e){var _60f=this.getValues(item,_60c);for(var i=0;i<_60f.length;++i){var _610=_60f[i];if(typeof _610==="string"&&_60e){return (_610.match(_60e)!==null);}else{if(_60d===_610){return true;}}}return false;},isItem:function(_611){if(_611&&_611[this._storeProp]===this){var _612=_611[this._idProp];if(this.identifier){var data=this._dataArray[this._idMap[_612]];if(data){return true;}}else{if(_612>=0&&_612<this._dataArray.length){return true;}}}return false;},isItemLoaded:function(_613){return this.isItem(_613);},loadItem:function(item){},getFeatures:function(){return this._features;},getLabel:function(item){if(this.label&&this.isItem(item)){return this.getValue(item,this.label);}return undefined;},getLabelAttributes:function(item){if(this.label){return [this.label];}return null;},_fetchItems:function(_614,_615,_616){var self=this;var _617=function(_618,_619){var _61a=null;if(_618.query){var key,_61b;_61a=[];var _61c=_618.queryOptions?_618.queryOptions.ignoreCase:false;var _61d={};for(key in _618.query){_61b=_618.query[key];if(typeof _61b==="string"){_61d[key]=_5fa.patternToRegExp(_61b,_61c);}}for(var i=0;i<_619.length;++i){var _61e=true;var _61f=_619[i];for(key in _618.query){_61b=_618.query[key];if(!self._containsValue(_61f,key,_61b,_61d[key])){_61e=false;}}if(_61e){_61a.push(_61f);}}}else{_61a=_619.slice(0,_619.length);}_615(_61a,_618);};if(this._loadFinished){_617(_614,this._arrayOfAllItems);}else{if(this.url!==""){if(this._loadInProgress){this._queuedFetches.push({args:_614,filter:_617});}else{this._loadInProgress=true;var _620={url:self.url,handleAs:"text",preventCache:self.urlPreventCache};var _621=xhr.get(_620);_621.addCallback(function(data){try{self._processData(data);_617(_614,self._arrayOfAllItems);self._handleQueuedFetches();}catch(e){_616(e,_614);}});_621.addErrback(function(_622){self._loadInProgress=false;if(_616){_616(_622,_614);}else{throw _622;}});var _623=null;if(_614.abort){_623=_614.abort;}_614.abort=function(){var df=_621;if(df&&df.fired===-1){df.cancel();df=null;}if(_623){_623.call(_614);}};}}else{if(this._csvData){try{this._processData(this._csvData);this._csvData=null;_617(_614,this._arrayOfAllItems);}catch(e){_616(e,_614);}}else{var _624=new Error(this.declaredClass+": No CSV source data was provided as either URL or String data input.");if(_616){_616(_624,_614);}else{throw _624;}}}}},close:function(_625){},_getArrayOfArraysFromCsvFileContents:function(_626){if(lang.isString(_626)){var _627=new RegExp("^\\s+","g");var _628=new RegExp("\\s+$","g");var _629=new RegExp("\"\"","g");var _62a=[];var i;var _62b=this._splitLines(_626);for(i=0;i<_62b.length;++i){var _62c=_62b[i];if(_62c.length>0){var _62d=_62c.split(this.separator);var j=0;while(j<_62d.length){var _62e=_62d[j];var _62f=_62e.replace(_627,"");var _630=_62f.replace(_628,"");var _631=_630.charAt(0);var _632=_630.charAt(_630.length-1);var _633=_630.charAt(_630.length-2);var _634=_630.charAt(_630.length-3);if(_630.length===2&&_630=="\"\""){_62d[j]="";}else{if((_631=="\"")&&((_632!="\"")||((_632=="\"")&&(_633=="\"")&&(_634!="\"")))){if(j+1===_62d.length){return;}var _635=_62d[j+1];_62d[j]=_62f+this.separator+_635;_62d.splice(j+1,1);}else{if((_631=="\"")&&(_632=="\"")){_630=_630.slice(1,(_630.length-1));_630=_630.replace(_629,"\"");}_62d[j]=_630;j+=1;}}}_62a.push(_62d);}}this._attributes=_62a.shift();for(i=0;i<this._attributes.length;i++){this._attributeIndexes[this._attributes[i]]=i;}this._dataArray=_62a;}},_splitLines:function(_636){var _637=[];var i;var line="";var _638=false;for(i=0;i<_636.length;i++){var c=_636.charAt(i);switch(c){case "\"":_638=!_638;line+=c;break;case "\r":if(_638){line+=c;}else{_637.push(line);line="";if(i<(_636.length-1)&&_636.charAt(i+1)=="\n"){i++;}}break;case "\n":if(_638){line+=c;}else{_637.push(line);line="";}break;default:line+=c;}}if(line!==""){_637.push(line);}return _637;},_processData:function(data){this._getArrayOfArraysFromCsvFileContents(data);this._arrayOfAllItems=[];if(this.identifier){if(this._attributeIndexes[this.identifier]===undefined){throw new Error(this.declaredClass+": Identity specified is not a column header in the data set.");}}for(var i=0;i<this._dataArray.length;i++){var id=i;if(this.identifier){var _639=this._dataArray[i];id=_639[this._attributeIndexes[this.identifier]];this._idMap[id]=i;}this._arrayOfAllItems.push(this._createItemFromIdentity(id));}this._loadFinished=true;this._loadInProgress=false;},_createItemFromIdentity:function(_63a){var item={};item[this._storeProp]=this;item[this._idProp]=_63a;return item;},getIdentity:function(item){if(this.isItem(item)){return item[this._idProp];}return null;},fetchItemByIdentity:function(_63b){var item;var _63c=_63b.scope?_63b.scope:_5f9.global;if(!this._loadFinished){var self=this;if(this.url!==""){if(this._loadInProgress){this._queuedFetches.push({args:_63b});}else{this._loadInProgress=true;var _63d={url:self.url,handleAs:"text"};var _63e=xhr.get(_63d);_63e.addCallback(function(data){try{self._processData(data);var item=self._createItemFromIdentity(_63b.identity);if(!self.isItem(item)){item=null;}if(_63b.onItem){_63b.onItem.call(_63c,item);}self._handleQueuedFetches();}catch(error){if(_63b.onError){_63b.onError.call(_63c,error);}}});_63e.addErrback(function(_63f){this._loadInProgress=false;if(_63b.onError){_63b.onError.call(_63c,_63f);}});}}else{if(this._csvData){try{self._processData(self._csvData);self._csvData=null;item=self._createItemFromIdentity(_63b.identity);if(!self.isItem(item)){item=null;}if(_63b.onItem){_63b.onItem.call(_63c,item);}}catch(e){if(_63b.onError){_63b.onError.call(_63c,e);}}}}}else{item=this._createItemFromIdentity(_63b.identity);if(!this.isItem(item)){item=null;}if(_63b.onItem){_63b.onItem.call(_63c,item);}}},getIdentityAttributes:function(item){if(this.identifier){return [this.identifier];}else{return null;}},_handleQueuedFetches:function(){if(this._queuedFetches.length>0){for(var i=0;i<this._queuedFetches.length;i++){var _640=this._queuedFetches[i];var _641=_640.filter;var _642=_640.args;if(_641){_641(_642,this._arrayOfAllItems);}else{this.fetchItemByIdentity(_640.args);}}this._queuedFetches=[];}}});lang.extend(_5fc,_5fb);return _5fc;});},"dojox/charting/plot2d/ClusteredColumns":function(){define("dojox/charting/plot2d/ClusteredColumns",["dojo/_base/array","dojo/_base/declare","./Columns","./common","dojox/lang/functional","dojox/lang/functional/reversed","dojox/lang/utils"],function(arr,_643,_644,dc,df,dfr,du){var _645=dfr.lambda("item.purgeGroup()");return _643("dojox.charting.plot2d.ClusteredColumns",_644,{render:function(dim,_646){if(this.zoom&&!this.isDataDirty()){return this.performZoom(dim,_646);}this.resetEvents();this.dirty=this.isDirty();if(this.dirty){arr.forEach(this.series,_645);this._eventSeries={};this.cleanGroup();var s=this.group;df.forEachRev(this.series,function(item){item.cleanGroup(s);});}var t=this.chart.theme,f,gap,_647,_648,ht=this._hScaler.scaler.getTransformerFromModel(this._hScaler),vt=this._vScaler.scaler.getTransformerFromModel(this._vScaler),_649=Math.max(0,this._vScaler.bounds.lower),_64a=vt(_649),_64b=this.events();f=dc.calculateBarSize(this._hScaler.bounds.scale,this.opt,this.series.length);gap=f.gap;_647=_648=f.size;for(var i=0;i<this.series.length;++i){var run=this.series[i],_64c=_648*i;if(!this.dirty&&!run.dirty){t.skip();this._reconnectEvents(run.name);continue;}run.cleanGroup();var _64d=t.next("column",[this.opt,run]),s=run.group,_64e=new Array(run.data.length);for(var j=0;j<run.data.length;++j){var _64f=run.data[j];if(_64f!==null){var v=typeof _64f=="number"?_64f:_64f.y,vv=vt(v),_650=vv-_64a,h=Math.abs(_650),_651=typeof _64f!="number"?t.addMixin(_64d,"column",_64f,true):t.post(_64d,"column");if(_647>=1&&h>=0){var rect={x:_646.l+ht(j+0.5)+gap+_64c,y:dim.height-_646.b-(v>_649?vv:_64a),width:_647,height:h};var _652=this._plotFill(_651.series.fill,dim,_646);_652=this._shapeFill(_652,rect);var _653=s.createRect(rect).setFill(_652).setStroke(_651.series.stroke);run.dyn.fill=_653.getFill();run.dyn.stroke=_653.getStroke();if(_64b){var o={element:"column",index:j,run:run,shape:_653,x:j+0.5,y:v};this._connectEvents(o);_64e[j]=o;}if(this.animate){this._animateColumn(_653,dim.height-_646.b-_64a,h);}}}}this._eventSeries[run.name]=_64e;run.dirty=false;}this.dirty=false;return this;}});});},"dojo/DeferredList":function(){define(["./_base/kernel","./_base/Deferred","./_base/array"],function(dojo,_654,_655){dojo.DeferredList=function(list,_656,_657,_658,_659){var _65a=[];_654.call(this);var self=this;if(list.length===0&&!_656){this.resolve([0,[]]);}var _65b=0;_655.forEach(list,function(item,i){item.then(function(_65c){if(_656){self.resolve([i,_65c]);}else{_65d(true,_65c);}},function(_65e){if(_657){self.reject(_65e);}else{_65d(false,_65e);}if(_658){return null;}throw _65e;});function _65d(_65f,_660){_65a[i]=[_65f,_660];_65b++;if(_65b===list.length){self.resolve(_65a);}};});};dojo.DeferredList.prototype=new _654();dojo.DeferredList.prototype.gatherResults=function(_661){var d=new dojo.DeferredList(_661,false,true,false);d.addCallback(function(_662){var ret=[];_655.forEach(_662,function(_663){ret.push(_663[1]);});return ret;});return d;};return dojo.DeferredList;});},"dojo/io/iframe":function(){define(["../main","require"],function(dojo,_664){dojo.getObject("io",true,dojo);dojo.io.iframe={create:function(_665,_666,uri){if(window[_665]){return window[_665];}if(window.frames[_665]){return window.frames[_665];}var turi=uri;if(!turi){if(dojo.config["useXDomain"]&&!dojo.config["dojoBlankHtmlUrl"]){console.warn("dojo.io.iframe.create: When using cross-domain Dojo builds,"+" please save dojo/resources/blank.html to your domain and set djConfig.dojoBlankHtmlUrl"+" to the path on your domain to blank.html");}turi=(dojo.config["dojoBlankHtmlUrl"]||_664.toUrl("../resources/blank.html"));}var _667=dojo.place("<iframe id=\""+_665+"\" name=\""+_665+"\" src=\""+turi+"\" onload=\""+_666+"\" style=\"position: absolute; left: 1px; top: 1px; height: 1px; width: 1px; visibility: hidden\">",dojo.body());window[_665]=_667;return _667;},setSrc:function(_668,src,_669){try{if(!_669){if(dojo.isWebKit){_668.location=src;}else{frames[_668.name].location=src;}}else{var idoc;if(dojo.isIE||dojo.isWebKit){idoc=_668.contentWindow.document;}else{idoc=_668.contentWindow;}if(!idoc){_668.location=src;}else{idoc.location.replace(src);}}}catch(e){console.log("dojo.io.iframe.setSrc: ",e);}},doc:function(_66a){return _66a.contentDocument||(((_66a.name)&&(_66a.document)&&(dojo.doc.getElementsByTagName("iframe")[_66a.name].contentWindow)&&(dojo.doc.getElementsByTagName("iframe")[_66a.name].contentWindow.document)))||((_66a.name)&&(dojo.doc.frames[_66a.name])&&(dojo.doc.frames[_66a.name].document))||null;},send:function(args){if(!this["_frame"]){this._frame=this.create(this._iframeName,dojo._scopeName+".io.iframe._iframeOnload();");}var dfd=dojo._ioSetArgs(args,function(dfd){dfd.canceled=true;dfd.ioArgs._callNext();},function(dfd){var _66b=null;try{var _66c=dfd.ioArgs;var dii=dojo.io.iframe;var ifd=dii.doc(dii._frame);var _66d=_66c.handleAs;_66b=ifd;if(_66d!="html"){if(_66d=="xml"){if(dojo.isIE<9||(dojo.isIE&&dojo.isQuirks)){dojo.query("a",dii._frame.contentWindow.document.documentElement).orphan();var _66e=(dii._frame.contentWindow.document).documentElement.innerText;_66e=_66e.replace(/>\s+</g,"><");_66e=dojo.trim(_66e);var _66f={responseText:_66e};_66b=dojo._contentHandlers["xml"](_66f);}}else{_66b=ifd.getElementsByTagName("textarea")[0].value;if(_66d=="json"){_66b=dojo.fromJson(_66b);}else{if(_66d=="javascript"){_66b=dojo.eval(_66b);}}}}}catch(e){_66b=e;}finally{_66c._callNext();}return _66b;},function(_670,dfd){dfd.ioArgs._hasError=true;dfd.ioArgs._callNext();return _670;});dfd.ioArgs._callNext=function(){if(!this["_calledNext"]){this._calledNext=true;dojo.io.iframe._currentDfd=null;dojo.io.iframe._fireNextRequest();}};this._dfdQueue.push(dfd);this._fireNextRequest();dojo._ioWatch(dfd,function(dfd){return !dfd.ioArgs["_hasError"];},function(dfd){return (!!dfd.ioArgs["_finished"]);},function(dfd){if(dfd.ioArgs._finished){dfd.callback(dfd);}else{dfd.errback(new Error("Invalid dojo.io.iframe request state"));}});return dfd;},_currentDfd:null,_dfdQueue:[],_iframeName:dojo._scopeName+"IoIframe",_fireNextRequest:function(){try{if((this._currentDfd)||(this._dfdQueue.length==0)){return;}do{var dfd=this._currentDfd=this._dfdQueue.shift();}while(dfd&&dfd.canceled&&this._dfdQueue.length);if(!dfd||dfd.canceled){this._currentDfd=null;return;}var _671=dfd.ioArgs;var args=_671.args;_671._contentToClean=[];var fn=dojo.byId(args["form"]);var _672=args["content"]||{};if(fn){if(_672){var _673=function(name,_674){dojo.create("input",{type:"hidden",name:name,value:_674},fn);_671._contentToClean.push(name);};for(var x in _672){var val=_672[x];if(dojo.isArray(val)&&val.length>1){var i;for(i=0;i<val.length;i++){_673(x,val[i]);}}else{if(!fn[x]){_673(x,val);}else{fn[x].value=val;}}}}var _675=fn.getAttributeNode("action");var _676=fn.getAttributeNode("method");var _677=fn.getAttributeNode("target");if(args["url"]){_671._originalAction=_675?_675.value:null;if(_675){_675.value=args.url;}else{fn.setAttribute("action",args.url);}}if(!_676||!_676.value){if(_676){_676.value=(args["method"])?args["method"]:"post";}else{fn.setAttribute("method",(args["method"])?args["method"]:"post");}}_671._originalTarget=_677?_677.value:null;if(_677){_677.value=this._iframeName;}else{fn.setAttribute("target",this._iframeName);}fn.target=this._iframeName;dojo._ioNotifyStart(dfd);fn.submit();}else{var _678=args.url+(args.url.indexOf("?")>-1?"&":"?")+_671.query;dojo._ioNotifyStart(dfd);this.setSrc(this._frame,_678,true);}}catch(e){dfd.errback(e);}},_iframeOnload:function(){var dfd=this._currentDfd;if(!dfd){this._fireNextRequest();return;}var _679=dfd.ioArgs;var args=_679.args;var _67a=dojo.byId(args.form);if(_67a){var _67b=_679._contentToClean;for(var i=0;i<_67b.length;i++){var key=_67b[i];for(var j=0;j<_67a.childNodes.length;j++){var _67c=_67a.childNodes[j];if(_67c.name==key){dojo.destroy(_67c);break;}}}if(_679["_originalAction"]){_67a.setAttribute("action",_679._originalAction);}if(_679["_originalTarget"]){_67a.setAttribute("target",_679._originalTarget);_67a.target=_679._originalTarget;}}_679._finished=true;}};return dojo.io.iframe;});},"dojox/lang/functional/lambda":function(){define("dojox/lang/functional/lambda",["../..","dojo/_base/kernel","dojo/_base/lang","dojo/_base/array"],function(_67d,dojo,lang,arr){var df=lang.getObject("lang.functional",true,_67d);var _67e={};var _67f="ab".split(/a*/).length>1?String.prototype.split:function(sep){var r=this.split.call(this,sep),m=sep.exec(this);if(m&&m.index==0){r.unshift("");}return r;};var _680=function(s){var args=[],_681=_67f.call(s,/\s*->\s*/m);if(_681.length>1){while(_681.length){s=_681.pop();args=_681.pop().split(/\s*,\s*|\s+/m);if(_681.length){_681.push("(function("+args+"){return ("+s+")})");}}}else{if(s.match(/\b_\b/)){args=["_"];}else{var l=s.match(/^\s*(?:[+*\/%&|\^\.=<>]|!=)/m),r=s.match(/[+\-*\/%&|\^\.=<>!]\s*$/m);if(l||r){if(l){args.push("$1");s="$1"+s;}if(r){args.push("$2");s=s+"$2";}}else{var vars=s.replace(/(?:\b[A-Z]|\.[a-zA-Z_$])[a-zA-Z_$\d]*|[a-zA-Z_$][a-zA-Z_$\d]*:|this|true|false|null|undefined|typeof|instanceof|in|delete|new|void|arguments|decodeURI|decodeURIComponent|encodeURI|encodeURIComponent|escape|eval|isFinite|isNaN|parseFloat|parseInt|unescape|dojo|dijit|dojox|window|document|'(?:[^'\\]|\\.)*'|"(?:[^"\\]|\\.)*"/g,"").match(/([a-z_$][a-z_$\d]*)/gi)||[],t={};arr.forEach(vars,function(v){if(!(v in t)){args.push(v);t[v]=1;}});}}}return {args:args,body:s};};var _682=function(a){return a.length?function(){var i=a.length-1,x=df.lambda(a[i]).apply(this,arguments);for(--i;i>=0;--i){x=df.lambda(a[i]).call(this,x);}return x;}:function(x){return x;};};lang.mixin(df,{rawLambda:function(s){return _680(s);},buildLambda:function(s){s=_680(s);return "function("+s.args.join(",")+"){return ("+s.body+");}";},lambda:function(s){if(typeof s=="function"){return s;}if(s instanceof Array){return _682(s);}if(s in _67e){return _67e[s];}s=_680(s);return _67e[s]=new Function(s.args,"return ("+s.body+");");},clearLambdaCache:function(){_67e={};}});return df;});},"dojox/charting/themes/common":function(){define("dojox/charting/themes/common",["dojo/_base/lang"],function(lang){return lang.getObject("dojox.charting.themes",true);});},"dojox/charting/plot2d/MarkersOnly":function(){define("dojox/charting/plot2d/MarkersOnly",["dojo/_base/declare","./Default"],function(_683,_684){return _683("dojox.charting.plot2d.MarkersOnly",_684,{constructor:function(){this.opt.lines=false;this.opt.markers=true;}});});},"esri/dijit/Popup":function(){define(["dijit","dojo","dojox","dojo/require!esri/InfoWindowBase,esri/PopupBase,esri/utils,dijit/_Widget,dijit/_Templated,dojo/number,dojo/date/locale,dojox/charting/Chart2D,dojox/charting/themes/PlotKit/base,dojox/charting/action2d/Tooltip,dojo/i18n"],function(_685,dojo,_686){dojo.provide("esri.dijit.Popup");dojo.require("esri.InfoWindowBase");dojo.require("esri.PopupBase");dojo.require("esri.utils");dojo.require("dijit._Widget");dojo.require("dijit._Templated");dojo.require("dojo.number");dojo.require("dojo.date.locale");dojo.require("dojox.charting.Chart2D");dojo.require("dojox.charting.themes.PlotKit.base");dojo.require("dojox.charting.action2d.Tooltip");dojo.require("dojo.i18n");(function(){var dc=_686.charting,pk=dc.themes.PlotKit;pk.popup=pk.base.clone();pk.popup.chart.fill=pk.popup.plotarea.fill="#e7eef6";pk.popup.colors=["#284B70","#702828","#5F7143","#F6BC0C","#382C6C","#50224F","#1D7554","#4C4C4C","#0271AE","#706E41","#446A73","#0C3E69","#757575","#B7B7B7","#A3A3A3"];pk.popup.series.stroke.width=1;pk.popup.marker.stroke.width=1;}());dojo.declare("esri.dijit.Popup",[esri.InfoWindowBase,esri.PopupBase],{offsetX:3,offsetY:3,zoomFactor:4,marginLeft:25,marginTop:25,highlight:true,constructor:function(_687,_688){this.initialize();dojo.mixin(this,_687);this.domNode=dojo.byId(_688);var nls=this._nls=dojo.mixin({},esri.bundle.widgets.popup);var _689=this.domNode;dojo.addClass(_689,"esriPopup");var _68a="<div class='esriPopupWrapper' style='position: absolute;'>"+"<div class='sizer'>"+"<div class='titlePane'>"+"<div class='spinner hidden' title='"+nls.NLS_searching+"...'></div>"+"<div class='title'></div>"+"<div class='titleButton prev hidden' title='"+nls.NLS_prevFeature+"'></div>"+"<div class='titleButton next hidden' title='"+nls.NLS_nextFeature+"'></div>"+"<div class='titleButton maximize' title='"+nls.NLS_maximize+"'></div>"+"<div class='titleButton close' title='"+nls.NLS_close+"'></div>"+"</div>"+"</div>"+"<div class='sizer content'>"+"<div class='contentPane'>"+"</div>"+"</div>"+"<div class='sizer'>"+"<div class='actionsPane'>"+"<div class='actionList hidden'>"+"<a class='action zoomTo' href='javascript:void(0);'>"+nls.NLS_zoomTo+"</a>"+"</div>"+"</div>"+"</div>"+"<div class='pointer hidden'></div>"+"</div>"+"<div class='outerPointer hidden'></div>";dojo.attr(_689,"innerHTML",_68a);this._sizers=dojo.query(".sizer",_689);var _68b=dojo.query(".titlePane",_689)[0];dojo.setSelectable(_68b,false);this._title=dojo.query(".title",_68b)[0];this._prevFeatureButton=dojo.query(".prev",_68b)[0];this._nextFeatureButton=dojo.query(".next",_68b)[0];this._maxButton=dojo.query(".maximize",_68b)[0];this._spinner=dojo.query(".spinner",_68b)[0];this._contentPane=dojo.query(".contentPane",_689)[0];this._positioner=dojo.query(".esriPopupWrapper",_689)[0];this._pointer=dojo.query(".pointer",_689)[0];this._outerPointer=dojo.query(".outerPointer",_689)[0];this._actionList=dojo.query(".actionsPane .actionList",_689)[0];this._eventConnections=[dojo.connect(dojo.query(".close",_68b)[0],"onclick",this,this.hide),dojo.connect(this._prevFeatureButton,"onclick",this,this.selectPrevious),dojo.connect(this._nextFeatureButton,"onclick",this,this.selectNext),dojo.connect(this._maxButton,"onclick",this,this._toggleSize),dojo.connect(dojo.query(".zoomTo",this._actionList)[0],"onclick",this,this._zoomToFeature)];if(esri.isTouchEnabled){var _68c=esri.setScrollable(this._contentPane);this._eventConnections.push(_68c[0],_68c[1]);}this._setVisibility(false);this.isShowing=false;},setMap:function(map){this.inherited(arguments);dojo.place(this.domNode,map.root);if(this.highlight){this.enableHighlight(map);}this._maxHeight=dojo.style(this._contentPane,"maxHeight");},unsetMap:function(){this.disableHighlight(this.map);this.inherited(arguments);},setTitle:function(_68d){if(!esri._isDefined(_68d)||_68d===""){_68d="&nbsp;";}this.destroyDijits(this._title);this.place(_68d,this._title);if(this.isShowing){this.startupDijits(this._title);this.reposition();}},setContent:function(_68e){if(!esri._isDefined(_68e)||_68e===""){_68e="&nbsp;";}this.destroyDijits(this._contentPane);this.place(_68e,this._contentPane);if(this.isShowing){this.startupDijits(this._contentPane);this.reposition();}},show:function(_68f,_690){if(!_68f){this._setVisibility(true);this.isShowing=true;return;}var map=this.map,_691;if(_68f.spatialReference){this._location=_68f;_691=map.toScreen(_68f);}else{this._location=map.toMap(_68f);_691=_68f;}var _692=map._getFrameWidth();if(_692!==-1){_691.x=_691.x%_692;if(_691.x<0){_691.x+=_692;}if(map.width>_692){var _693=(map.width-_692)/2;while(_691.x<_693){_691.x+=_692;}}}if(this._maximized){this.restore();}else{this._setPosition(_691);}if(_690&&_690.closestFirst){this.showClosestFirst(this._location);}if(!this.isShowing){this._setVisibility(true);this.isShowing=true;this.onShow();}},hide:function(){if(this.isShowing){this._setVisibility(false);this.isShowing=false;this.onHide();}},resize:function(_694,_695){this._sizers.style({width:_694+"px"});dojo.style(this._contentPane,"maxHeight",_695+"px");this._maxHeight=_695;if(this.isShowing){this.reposition();}},reposition:function(){if(this.map&&this._location&&!this._maximized&&this.isShowing){this._setPosition(this.map.toScreen(this._location));}},onShow:function(){this._followMap();this.startupDijits(this._title);this.startupDijits(this._contentPane);this.reposition();this.showHighlight();},onHide:function(){this._unfollowMap();this.hideHighlight();},maximize:function(){var map=this.map;if(!map||this._maximized){return;}this._maximized=true;var max=this._maxButton;dojo.removeClass(max,"maximize");dojo.addClass(max,"restore");dojo.attr(max,"title",this._nls.NLS_restore);var _696=this.marginLeft,_697=this.marginTop,_698=map.width-(2*_696),_699=map.height-(2*_697),_69a=this.domNode;dojo.style(_69a,{left:_696+"px",right:null,top:_697+"px",bottom:null});dojo.style(this._positioner,{left:null,right:null,top:null,bottom:null});this._savedWidth=dojo.style(this._sizers[0],"width");this._savedHeight=dojo.style(this._contentPane,"maxHeight");this._sizers.style({width:_698+"px"});dojo.style(this._contentPane,{maxHeight:(_699-65)+"px",height:(_699-65)+"px"});this._showPointer("");this._unfollowMap();dojo.addClass(this.domNode,"esriPopupMaximized");this.onMaximize();},restore:function(){var map=this.map;if(!map||!this._maximized){return;}this._maximized=false;var max=this._maxButton;dojo.removeClass(max,"restore");dojo.addClass(max,"maximize");dojo.attr(max,"title",this._nls.NLS_maximize);dojo.style(this._contentPane,"height",null);this.resize(this._savedWidth,this._savedHeight);this._savedWidth=this._savedHeight=null;this.show(this._location);this._followMap();dojo.removeClass(this.domNode,"esriPopupMaximized");this.onRestore();},destroy:function(){if(this.map){this.unsetMap();}this.cleanup();if(this.isShowing){this.hide();}this.destroyDijits(this._title);this.destroyDijits(this._content);dojo.forEach(this._eventConnections,dojo.disconnect);dojo.destroy(this.domNode);this._sizers=this._contentPane=this._actionList=this._positioner=this._pointer=this._outerPointer=this._title=this._prevFeatureButton=this._nextFeatureButton=this._spinner=this._eventConnections=this._pagerScope=this._targetLocation=this._nls=this._maxButton=null;},selectNext:function(){this.select(this.selectedIndex+1);},selectPrevious:function(){this.select(this.selectedIndex-1);},setFeatures:function(){this.inherited(arguments);this._updateUI();},onSetFeatures:function(){},onClearFeatures:function(){this.setTitle("&nbsp;");this.setContent("&nbsp;");this._setPagerCallbacks(this);this._updateUI();this.hideHighlight();},onSelectionChange:function(){var ptr=this.selectedIndex;this._updateUI();if(ptr>=0){this.setContent(this.features[ptr].getContent());this.updateHighlight(this.map,this.features[ptr]);if(this.isShowing){this.showHighlight();}}},onDfdComplete:function(){this.inherited(arguments);this._updateUI();},onMaximize:function(){},onRestore:function(){},_setVisibility:function(_69b){dojo.style(this.domNode,"visibility",_69b?"visible":"hidden");},_followMap:function(){this._unfollowMap();var map=this.map;this._handles=[dojo.connect(map,"onPanStart",this,this._onPanStart),dojo.connect(map,"onPan",this,this._onPan),dojo.connect(map,"onZoomStart",this,this._onZoomStart),dojo.connect(map,"onExtentChange",this,this._onExtentChange)];},_unfollowMap:function(){var _69c=this._handles;if(_69c){dojo.forEach(_69c,dojo.disconnect,dojo);this._handles=null;}},_onPanStart:function(){var _69d=this.domNode.style;this._panOrigin={left:_69d.left,top:_69d.top,right:_69d.right,bottom:_69d.bottom};},_onPan:function(_69e,_69f){var _6a0=this._panOrigin,dx=_69f.x,dy=_69f.y,left=_6a0.left,top=_6a0.top,_6a1=_6a0.right,_6a2=_6a0.bottom;if(left){left=(parseFloat(left)+dx)+"px";}if(top){top=(parseFloat(top)+dy)+"px";}if(_6a1){_6a1=(parseFloat(_6a1)-dx)+"px";}if(_6a2){_6a2=(parseFloat(_6a2)-dy)+"px";}dojo.style(this.domNode,{left:left,top:top,right:_6a1,bottom:_6a2});},_onZoomStart:function(){this._setVisibility(false);},_onExtentChange:function(_6a3,_6a4,_6a5){if(_6a5){this._setVisibility(true);this.show(this._targetLocation||this._location);}this._targetLocation=null;},_toggleSize:function(){if(this._maximized){this.restore();}else{this.maximize();}},_setPosition:function(_6a6){var posX=_6a6.x,posY=_6a6.y,offX=this.offsetX||0,offY=this.offsetY||0,_6a7=0,_6a8=0,_6a9=dojo.position(this.map.container,true),_6aa=_6a9.w,_6ab=_6a9.h,_6ac="Left",_6ad="bottom",_6ae=dojo.contentBox(this._positioner),_6af=_6ae.w/2,_6b0=_6ae.h/2,maxH=dojo.style(this._sizers[0],"height")+this._maxHeight+dojo.style(this._sizers[2],"height"),_6b1=maxH/2,xmin=0,ymin=0,xmax=_6aa,ymax=_6ab,_6b2=posX,_6b3=posY;var _6b4=dojo.getObject("dojo.window.getBox");if(_6b4){_6b4=_6b4();xmin=Math.max(_6b4.l,_6a9.x);xmax=Math.min(_6b4.l+_6b4.w,_6a9.x+_6a9.w);ymin=Math.max(_6b4.t,_6a9.y);ymax=Math.min(_6b4.t+_6b4.h,_6a9.y+_6a9.h);_6b2+=_6a9.x;_6b3+=_6a9.y;}if(((_6b3-ymin)>_6b1)&&((ymax-_6b3)>=_6b1)){if((xmax-_6b2)>=_6ae.w){_6ad="";_6ac="Left";}else{if((_6b2-xmin)>=_6ae.w){_6ad="";_6ac="Right";}}}if(_6ac&&_6ad){if(((_6b2-xmin)>_6af)&&((xmax-_6b2)>=_6af)){if((_6b3-ymin)>=maxH){_6ac="";_6ad="bottom";}else{if((ymax-_6b3)>=maxH){_6ac="";_6ad="top";}}}}if(_6ac&&_6ad){if(_6b2<=xmax/2){_6ac="Left";}else{if(_6b2<=xmax){_6ac="Right";}}if(_6b3<=ymax/2){_6ad="top";}else{if(_6b3<=ymax){_6ad="bottom";}}}var _6b5=_6ad+_6ac;switch(_6b5){case "top":case "bottom":_6a8=14;break;case "Left":case "Right":_6a7=13;break;case "topLeft":case "topRight":case "bottomLeft":case "bottomRight":_6a8=45;break;}dojo.style(this.domNode,{left:posX+"px",top:posY+"px",right:null,bottom:null});var _6b6={left:null,right:null,top:null,bottom:null};if(_6ac){_6b6[_6ac.toLowerCase()]=(_6a7+offX)+"px";}else{_6b6.left=(-_6af)+"px";}if(_6ad){_6b6[_6ad]=(_6a8+offY)+"px";}else{_6b6.top=(-_6b0)+"px";}dojo.style(this._positioner,_6b6);this._showPointer(_6b5);},_showPointer:function(_6b7){dojo.removeClass(this._pointer,["top","bottom","right","left","topLeft","topRight","bottomRight","bottomLeft","hidden"]);dojo.removeClass(this._outerPointer,["right","left","hidden"]);if(_6b7==="Right"||_6b7==="Left"){_6b7=_6b7.toLowerCase();dojo.addClass(this._outerPointer,_6b7);}else{dojo.addClass(this._pointer,_6b7);}},_setPagerCallbacks:function(_6b8,_6b9,_6ba){if(_6b8===this&&(!this._pagerScope||this._pagerScope===this)){return;}if(_6b8===this._pagerScope){return;}this._pagerScope=_6b8;if(_6b8===this){_6b9=this.selectPrevious;_6ba=this.selectNext;}var _6bb=this._eventConnections;dojo.disconnect(_6bb[1]);dojo.disconnect(_6bb[2]);if(_6b9){_6bb[1]=dojo.connect(this._prevFeatureButton,"onclick",_6b8,_6b9);}if(_6ba){_6bb[2]=dojo.connect(this._nextFeatureButton,"onclick",_6b8,_6ba);}},_zoomToFeature:function(){var _6bc=this.features,ptr=this.selectedIndex,map=this.map;if(_6bc){var _6bd=_6bc[ptr].geometry,_6be,_6bf,_6c0=0,_6c1;if(_6bd){switch(_6bd.type){case "point":_6be=_6bd;break;case "multipoint":_6be=_6bd.getPoint(0);_6bf=_6bd.getExtent();break;case "polyline":_6be=_6bd.getPoint(0,0);_6bf=_6bd.getExtent();if(map._getFrameWidth()!==-1){dojo.forEach(_6bd.paths,function(path){var _6c2={"paths":[path,map.spatialReference]},_6c3=new esri.geometry.Polyline(_6c2),_6c4=_6c3.getExtent(),_6c5=Math.abs(_6c4.ymax-_6c4.ymin),_6c6=Math.abs(_6c4.xmax-_6c4.xmin),_6c7=(_6c6>_6c5)?_6c6:_6c5;if(_6c7>_6c0){_6c0=_6c7;_6c1=_6c4;}});_6c1.spatialReference=_6bf.spatialReference;_6bf=_6c1;}break;case "polygon":_6be=_6bd.getPoint(0,0);_6bf=_6bd.getExtent();if(map._getFrameWidth()!==-1){dojo.forEach(_6bd.rings,function(ring){var _6c8={"rings":[ring,map.spatialReference]},_6c9=new esri.geometry.Polygon(_6c8),_6ca=_6c9.getExtent(),_6cb=Math.abs(_6ca.ymax-_6ca.ymin),_6cc=Math.abs(_6ca.xmax-_6ca.xmin),_6cd=(_6cc>_6cb)?_6cc:_6cb;if(_6cd>_6c0){_6c0=_6cd;_6c1=_6ca;}});_6c1.spatialReference=_6bf.spatialReference;_6bf=_6c1;}break;}}if(!_6be){_6be=this._location;}if(!_6bf||!_6bf.intersects(this._location)){this._location=_6be;}if(_6bf){map.setExtent(_6bf,true);}else{var _6ce=map.getNumLevels(),_6cf=map.getLevel(),last=_6ce-1,_6d0=this.zoomFactor||1;if(_6ce>0){if(_6cf===last){return;}var _6d1=_6cf+_6d0;if(_6d1>last){_6d1=last;}map._scrollZoomHandler({value:(_6d1-_6cf),mapPoint:_6be},true);}else{map._scrollZoomHandler({value:(1/Math.pow(2,_6d0))*2,mapPoint:_6be},true);}}}},_updateUI:function(){var _6d2="&nbsp;",ptr=this.selectedIndex,_6d3=this.features,_6d4=this.deferreds,prev=this._prevFeatureButton,next=this._nextFeatureButton,_6d5=this._spinner,_6d6=this._actionList,nls=this._nls;if(_6d3&&_6d3.length>1){if(nls.NLS_pagingInfo){_6d2=esri.substitute({index:(ptr+1),total:_6d3.length},nls.NLS_pagingInfo);}if(ptr===0){dojo.addClass(prev,"hidden");}else{dojo.removeClass(prev,"hidden");}if(ptr===_6d3.length-1){dojo.addClass(next,"hidden");}else{dojo.removeClass(next,"hidden");}}else{dojo.addClass(prev,"hidden");dojo.addClass(next,"hidden");}this.setTitle(_6d2);if(_6d4&&_6d4.length){if(_6d3){dojo.removeClass(_6d5,"hidden");}else{this.setContent("<div style='text-align: center;'>"+nls.NLS_searching+"...</div>");}}else{dojo.addClass(_6d5,"hidden");if(!_6d3||!_6d3.length){this.setContent("<div style='text-align: center;'>"+nls.NLS_noInfo+".</div>");}}if(_6d3&&_6d3.length){dojo.removeClass(_6d6,"hidden");}else{dojo.addClass(_6d6,"hidden");}}});dojo.declare("esri.dijit.PopupTemplate",[esri.PopupInfoTemplate],{chartTheme:"dojox.charting.themes.PlotKit.popup",constructor:function(json,_6d7){dojo.mixin(this,_6d7);this.initialize(json);this._nls=dojo.mixin({},esri.bundle.widgets.popup);},getTitle:function(_6d8){return this.info?this.getComponents(_6d8).title:"";},getContent:function(_6d9){return this.info?new esri.dijit._PopupRenderer({template:this,graphic:_6d9,chartTheme:this.chartTheme,_nls:this._nls},dojo.create("div")).domNode:"";}});dojo.declare("esri.dijit._PopupRenderer",[_685._Widget,_685._Templated],{templateString:"<div class='esriViewPopup'>"+"<div class='mainSection'>"+"<div class='header' dojoAttachPoint='_title'></div>"+"<div class='hzLine'></div>"+"<div dojoAttachPoint='_description'></div>"+"<div class='break'></div>"+"</div>"+"<div class='attachmentsSection hidden'>"+"<div>${_nls.NLS_attach}:</div>"+"<ul dojoAttachPoint='_attachmentsList'>"+"</ul>"+"<div class='break'></div>"+"</div>"+"<div class='mediaSection hidden'>"+"<div class='header' dojoAttachPoint='_mediaTitle'></div>"+"<div class='hzLine'></div>"+"<div class='caption' dojoAttachPoint='_mediaCaption'></div>"+"<div class='gallery' dojoAttachPoint='_gallery'>"+"<div class='mediaHandle prev' dojoAttachPoint='_prevMedia' dojoAttachEvent='onclick: _goToPrevMedia'></div>"+"<div class='mediaHandle next' dojoAttachPoint='_nextMedia' dojoAttachEvent='onclick: _goToNextMedia'></div>"+"<ul class='summary'>"+"<li class='image mediaCount hidden' dojoAttachPoint='_imageCount'>0</li>"+"<li class='image mediaIcon hidden'></li>"+"<li class='chart mediaCount hidden' dojoAttachPoint='_chartCount'>0</li>"+"<li class='chart mediaIcon hidden'></li>"+"</ul>"+"<div class='frame' dojoAttachPoint='_mediaFrame'></div>"+"</div>"+"</div>"+"<div class='editSummarySection hidden' dojoAttachPoint='_editSummarySection'>"+"<div class='break'></div>"+"<div class='break hidden' dojoAttachPoint='_mediaBreak'></div>"+"<div class='editSummary' dojoAttachPoint='_editSummary'></div>"+"</div>"+"</div>",startup:function(){this.inherited(arguments);var _6da=this.template,_6db=this.graphic,_6dc=_6da.getComponents(_6db),_6dd=_6dc.title,_6de=_6dc.description,_6df=_6dc.fields,_6e0=_6dc.mediaInfos,_6e1=this.domNode,nls=this._nls;this._prevMedia.title=nls.NLS_prevMedia;this._nextMedia.title=nls.NLS_nextMedia;dojo.attr(this._title,"innerHTML",_6dd);if(!_6dd){dojo.addClass(this._title,"hidden");}if(!_6de&&_6df){_6de="";dojo.forEach(_6df,function(row){_6de+=("<tr valign='top'>");_6de+=("<td class='attrName'>"+row[0]+"</td>");_6de+=("<td class='attrValue'>"+row[1].replace(/^\s*(https?:\/\/[^\s]+)\s*$/i,"<a target='_blank' href='$1' title='$1'>"+nls.NLS_moreInfo+"</a>")+"</td>");_6de+=("</tr>");});if(_6de){_6de="<table class='attrTable' cellpadding='0px' cellspacing='0px'>"+_6de+"</table>";}}dojo.attr(this._description,"innerHTML",_6de);if(!_6de){dojo.addClass(this._description,"hidden");}dojo.query("a",this._description).forEach(function(node){dojo.attr(node,"target","_blank");});if(_6dd&&_6de){dojo.query(".mainSection .hzLine",_6e1).removeClass("hidden");}else{if(_6dd||_6de){dojo.query(".mainSection .hzLine",_6e1).addClass("hidden");}else{dojo.query(".mainSection",_6e1).addClass("hidden");}}var dfd=(this._dfd=_6da.getAttachments(_6db));if(dfd){dfd.addBoth(dojo.hitch(this,this._attListHandler,dfd));dojo.attr(this._attachmentsList,"innerHTML","<li>"+nls.NLS_searching+"...</li>");dojo.query(".attachmentsSection",_6e1).removeClass("hidden");}if(_6e0&&_6e0.length){dojo.query(".mediaSection",_6e1).removeClass("hidden");dojo.setSelectable(this._mediaFrame,false);this._mediaInfos=_6e0;this._mediaPtr=0;this._updateUI();this._displayMedia();}if(_6dc.editSummary){dojo.attr(this._editSummary,"innerHTML",_6dc.editSummary);if(_6e0&&_6e0.length){dojo.removeClass(this._mediaBreak,"hidden");}dojo.removeClass(this._editSummarySection,"hidden");}},destroy:function(){if(this._dfd){this._dfd.cancel();}this._destroyFrame();this.template=this.graphic=this._nls=this._mediaInfos=this._mediaPtr=this._dfd=null;this.inherited(arguments);},_goToPrevMedia:function(){var ptr=this._mediaPtr-1;if(ptr<0){return;}this._mediaPtr--;this._updateUI();this._displayMedia();},_goToNextMedia:function(){var ptr=this._mediaPtr+1;if(ptr===this._mediaInfos.length){return;}this._mediaPtr++;this._updateUI();this._displayMedia();},_updateUI:function(){var _6e2=this._mediaInfos,_6e3=_6e2.length,_6e4=this.domNode,_6e5=this._prevMedia,_6e6=this._nextMedia;if(_6e3>1){var _6e7=0,_6e8=0;dojo.forEach(_6e2,function(info){if(info.type==="image"){_6e7++;}else{if(info.type.indexOf("chart")!==-1){_6e8++;}}});if(_6e7){dojo.attr(this._imageCount,"innerHTML",_6e7);dojo.query(".summary .image",_6e4).removeClass("hidden");}if(_6e8){dojo.attr(this._chartCount,"innerHTML",_6e8);dojo.query(".summary .chart",_6e4).removeClass("hidden");}}else{dojo.query(".summary",_6e4).addClass("hidden");dojo.addClass(_6e5,"hidden");dojo.addClass(_6e6,"hidden");}var ptr=this._mediaPtr;if(ptr===0){dojo.addClass(_6e5,"hidden");}else{dojo.removeClass(_6e5,"hidden");}if(ptr===_6e3-1){dojo.addClass(_6e6,"hidden");}else{dojo.removeClass(_6e6,"hidden");}this._destroyFrame();},_displayMedia:function(){var info=this._mediaInfos[this._mediaPtr],_6e9=info.title,_6ea=info.caption,_6eb=dojo.query(".mediaSection .hzLine",this.domNode)[0];dojo.attr(this._mediaTitle,"innerHTML",_6e9);dojo[_6e9?"removeClass":"addClass"](this._mediaTitle,"hidden");dojo.attr(this._mediaCaption,"innerHTML",_6ea);dojo[_6ea?"removeClass":"addClass"](this._mediaCaption,"hidden");dojo[(_6e9&&_6ea)?"removeClass":"addClass"](_6eb,"hidden");if(info.type==="image"){this._showImage(info.value);}else{this._showChart(info.type,info.value);}},_showImage:function(_6ec){dojo.addClass(this._mediaFrame,"image");var _6ed=dojo.style(this._gallery,"height"),html="<img src='"+_6ec.sourceURL+"' onload='esri.dijit._PopupRenderer.prototype._imageLoaded(this,"+_6ed+");' />";if(_6ec.linkURL){html="<a target='_blank' href='"+_6ec.linkURL+"'>"+html+"</a>";}dojo.attr(this._mediaFrame,"innerHTML",html);},_showChart:function(type,_6ee){dojo.removeClass(this._mediaFrame,"image");var _6ef=this._chart=new _686.charting.Chart2D(dojo.create("div",{"class":"chart"},this._mediaFrame),{margins:{l:4,t:4,r:4,b:4}});var _6f0=_6ee.theme||this.chartTheme||"PlotKit.popup";_6ef.setTheme(dojo.getObject(_6f0)||dojo.getObject("dojox.charting.themes."+_6f0));switch(type){case "piechart":_6ef.addPlot("default",{type:"Pie",labels:false});_6ef.addSeries("Series A",_6ee.fields);break;case "linechart":_6ef.addPlot("default",{type:"Markers"});_6ef.addAxis("x",{min:0,majorTicks:false,minorTicks:false,majorLabels:false,minorLabels:false});_6ef.addAxis("y",{includeZero:true,vertical:true,fixUpper:"minor"});dojo.forEach(_6ee.fields,function(info,idx){info.x=idx+1;});_6ef.addSeries("Series A",_6ee.fields);break;case "columnchart":_6ef.addPlot("default",{type:"Columns",gap:3});_6ef.addAxis("y",{includeZero:true,vertical:true,fixUpper:"minor"});_6ef.addSeries("Series A",_6ee.fields);break;case "barchart":_6ef.addPlot("default",{type:"Bars",gap:3});_6ef.addAxis("x",{includeZero:true,fixUpper:"minor",minorLabels:false});_6ef.addAxis("y",{vertical:true,majorTicks:false,minorTicks:false,majorLabels:false,minorLabels:false});_6ef.addSeries("Series A",_6ee.fields);break;}this._action=new _686.charting.action2d.Tooltip(_6ef);_6ef.render();},_destroyFrame:function(){if(this._chart){this._chart.destroy();this._chart=null;}if(this._action){this._action.destroy();this._action=null;}dojo.attr(this._mediaFrame,"innerHTML","");},_imageLoaded:function(img,_6f1){var _6f2=img.height;if(_6f2<_6f1){var diff=Math.round((_6f1-_6f2)/2);dojo.style(img,"marginTop",diff+"px");}},_attListHandler:function(dfd,_6f3){if(dfd===this._dfd){this._dfd=null;var html="";if(!(_6f3 instanceof Error)&&_6f3&&_6f3.length){dojo.forEach(_6f3,function(info){html+=("<li>");html+=("<a href='"+info.url+"' target='_blank'>"+(info.name||"[No name]")+"</a>");html+=("</li>");});}dojo.attr(this._attachmentsList,"innerHTML",html||"<li>"+this._nls.NLS_noAttach+"</li>");}}});});},"dojox/charting/scaler/common":function(){define("dojox/charting/scaler/common",["dojo/_base/lang"],function(lang){var eq=function(a,b){return Math.abs(a-b)<=0.000001*(Math.abs(a)+Math.abs(b));};var _6f4=lang.getObject("dojox.charting.scaler.common",true);var _6f5={};return lang.mixin(_6f4,{doIfLoaded:function(_6f6,_6f7,_6f8){if(_6f5[_6f6]==undefined){try{_6f5[_6f6]=require(_6f6);}catch(e){_6f5[_6f6]=null;}}if(_6f5[_6f6]){return _6f7(_6f5[_6f6]);}else{return _6f8();}},findString:function(val,text){val=val.toLowerCase();for(var i=0;i<text.length;++i){if(val==text[i]){return true;}}return false;},getNumericLabel:function(_6f9,_6fa,_6fb){var def="";_6f4.doIfLoaded("dojo/number",function(_6fc){def=(_6fb.fixed?_6fc.format(_6f9,{places:_6fa<0?-_6fa:0}):_6fc.format(_6f9))||"";},function(){def=_6fb.fixed?_6f9.toFixed(_6fa<0?-_6fa:0):_6f9.toString();});if(_6fb.labelFunc){var r=_6fb.labelFunc(def,_6f9,_6fa);if(r){return r;}}if(_6fb.labels){var l=_6fb.labels,lo=0,hi=l.length;while(lo<hi){var mid=Math.floor((lo+hi)/2),val=l[mid].value;if(val<_6f9){lo=mid+1;}else{hi=mid;}}if(lo<l.length&&eq(l[lo].value,_6f9)){return l[lo].text;}--lo;if(lo>=0&&lo<l.length&&eq(l[lo].value,_6f9)){return l[lo].text;}lo+=2;if(lo<l.length&&eq(l[lo].value,_6f9)){return l[lo].text;}}return def;}});});},"esri/layers/FeatureLayer":function(){define(["dijit","dojo","dojox","dojo/require!esri/layers/graphics,esri/tasks/query,dojo/io/iframe,esri/layers/agscommon,dojo/date/locale"],function(_6fd,dojo,_6fe){dojo.provide("esri.layers.FeatureLayer");dojo.require("esri.layers.graphics");dojo.require("esri.tasks.query");dojo.require("dojo.io.iframe");dojo.require("esri.layers.agscommon");dojo.require("dojo.date.locale");dojo.declare("esri.layers.FeatureLayer",esri.layers.GraphicsLayer,{constructor:function(url,_6ff){this._outFields=_6ff&&_6ff.outFields;this._loadCallback=_6ff&&_6ff.loadCallback;var _700=_6ff&&_6ff._usePatch;this._usePatch=(_700===null||_700===undefined)?true:_700;this._trackIdField=_6ff&&_6ff.trackIdField;this.objectIdField=_6ff&&_6ff.objectIdField;this._maxOffset=_6ff&&_6ff.maxAllowableOffset;this._optEditable=_6ff&&_6ff.editable;this._optAutoGen=_6ff&&_6ff.autoGeneralize;this.editSummaryCallback=_6ff&&_6ff.editSummaryCallback;this.userId=_6ff&&_6ff.userId;this.userIsAdmin=_6ff&&_6ff.userIsAdmin;this.useMapTime=(_6ff&&_6ff.hasOwnProperty("useMapTime"))?(!!_6ff.useMapTime):true;this.source=_6ff&&_6ff.source;this.gdbVersion=_6ff&&_6ff.gdbVersion;this._selectedFeatures={};this._selectedFeaturesArr=[];this._newFeatures=[];this._deletedFeatures={};this._ulid=this._getUniqueId();var ctor=this.constructor,mode=this.mode=(esri._isDefined(_6ff&&_6ff.mode)?_6ff.mode:ctor.MODE_ONDEMAND);switch(mode){case ctor.MODE_SNAPSHOT:this._mode=new esri.layers._SnapshotMode(this);this._isSnapshot=true;break;case ctor.MODE_ONDEMAND:this._tileWidth=(_6ff&&_6ff.tileWidth)||512;this._tileHeight=(_6ff&&_6ff.tileHeight)||512;this._mode=new esri.layers._OnDemandMode(this);var _701=_6ff&&_6ff.latticeTiling;this.latticeTiling=_701;break;case ctor.MODE_SELECTION:this._mode=new esri.layers._SelectionMode(this);this._isSelOnly=true;break;}this._initLayer=dojo.hitch(this,this._initLayer);this._selectHandler=dojo.hitch(this,this._selectHandler);this._editable=false;if(dojo.isObject(url)&&url.layerDefinition){var json=url;this._collection=true;this.mode=ctor.MODE_SNAPSHOT;this._initLayer(json);return this;}this._task=new esri.tasks.QueryTask(this.url,{source:this.source,gdbVersion:this.gdbVersion});var _702=this._url.path;this._fserver=false;if(_702.search(/\/FeatureServer\//i)!==-1){this._fserver=true;}var _703=_6ff&&_6ff.resourceInfo;if(_703){this._initLayer(_703);}else{if(this.source){var _704={source:this.source.toJson()};this._url.query=dojo.mixin(this._url.query,{layer:dojo.toJson(_704)});}if(this.gdbVersion){this._url.query=dojo.mixin(this._url.query,{gdbVersion:this.gdbVersion});}esri.request({url:_702,content:dojo.mixin({f:"json"},this._url.query),callbackParamName:"callback",load:this._initLayer,error:this._errorHandler});}},_initLayer:function(_705,io){if(_705||io){this._json=_705;this._findCredential();var ssl=(this.credential&&this.credential.ssl)||(_705&&_705._ssl);if(ssl){this._useSSL();this._task._useSSL();}if(this._collection){this._mode=new esri.layers._SnapshotMode(this);this._isSnapshot=true;this._featureSet=_705.featureSet;this._nextId=_705.nextObjectId;_705=_705.layerDefinition;}if(_705.hasOwnProperty("capabilities")){var _706=(this.capabilities=_705.capabilities);if(_706&&_706.toLowerCase().indexOf("editing")!==-1){this._editable=true;}else{this._editable=false;}}else{if(!this._collection){this._editable=this._fserver;}}if(esri._isDefined(this._optEditable)){this._editable=this._optEditable;delete this._optEditable;}this._json=dojo.toJson(this._json);if(this.isEditable()){delete this._maxOffset;}else{if(this.mode!==this.constructor.MODE_SNAPSHOT&&((_705.geometryType==="esriGeometryPolyline")||(_705.geometryType==="esriGeometryPolygon"))){this._autoGeneralize=esri._isDefined(this._optAutoGen)?this._optAutoGen:(this.mode===this.constructor.MODE_ONDEMAND);delete this._optAutoGen;}}var _707=_705.effectiveMinScale||_705.minScale,_708=_705.effectiveMaxScale||_705.maxScale;if(!this._hasMin&&_707){this.setMinScale(_707);}if(!this._hasMax&&_708){this.setMaxScale(_708);}this.layerId=_705.id;this.name=_705.name;this.description=_705.description;this.copyright=_705.copyrightText;this.type=_705.type;this.geometryType=_705.geometryType;this.displayField=_705.displayField;this.defaultDefinitionExpression=_705.definitionExpression;this.fullExtent=new esri.geometry.Extent(_705.extent);this.defaultVisibility=_705.defaultVisibility;if((this.geometryType==="esriGeometryPoint")||(this.geometryType==="esriGeometryMultipoint")){this.latticeTiling=false;}this.indexedFields=_705.indexedFields;this.maxRecordCount=_705.maxRecordCount;this.canModifyLayer=_705.canModifyLayer;this.supportsStatistics=_705.supportsStatistics;this.supportsAdvancedQueries=_705.supportsAdvancedQueries;this.hasLabels=_705.hasLabels;this.canScaleSymbols=_705.canScaleSymbols;this.supportsRollbackOnFailure=_705.supportsRollbackOnFailure;this.syncCanReturnChanges=_705.syncCanReturnChanges;this.isDataVersioned=_705.isDataVersioned;this.editFieldsInfo=_705.editFieldsInfo;this.ownershipBasedAccessControlForFeatures=_705.ownershipBasedAccessControlForFeatures;if(this.editFieldsInfo&&this.ownershipBasedAccessControlForFeatures){this.creatorField=this.editFieldsInfo.creatorField;}this.relationships=_705.relationships;this.allowGeometryUpdates=esri._isDefined(_705.allowGeometryUpdates)?_705.allowGeometryUpdates:true;this._isTable=(this.type==="Table");var _709=(this.fields=[]),_70a=_705.fields,i;for(i=0;i<_70a.length;i++){_709.push(new esri.layers.Field(_70a[i]));}if(!this.objectIdField){this.objectIdField=_705.objectIdField;if(!this.objectIdField){_70a=_705.fields;for(i=0;i<_70a.length;i++){var _70b=_70a[i];if(_70b.type==="esriFieldTypeOID"){this.objectIdField=_70b.name;break;}}}if(!this.objectIdField){console.debug("esri.layers.FeatureLayer: "+esri.substitute({url:this.url},esri.bundle.layers.FeatureLayer.noOIDField));}}if(!esri._isDefined(this._nextId)){var _70c=this.objectIdField,_70d=-1;if(this._collection&&_70c){var fset=this._featureSet,_70e=fset&&fset.features,il=_70e?_70e.length:0,oid,attr;for(i=0;i<il;i++){attr=_70e[i].attributes;oid=attr&&attr[_70c];if(oid>_70d){_70d=oid;}}}this._nextId=(_70d+1);}this.globalIdField=_705.globalIdField;var _70f=(this.typeIdField=_705.typeIdField),_710;if(_70f){_710=!this._getField(_70f)&&this._getField(_70f,true);if(_710){this.typeIdField=_710.name;}}this.visibilityField=_705.visibilityField;var _711=_705.defaultSymbol;if(_711){this.defaultSymbol=esri.symbol.fromJson(_711);}var _712=this.types=[],_713=_705.types,_714,_715,_716,_717=this.editFieldsInfo,_718=_717&&_717.creatorField,_719=_717&&_717.editorField,fix=(_718||_719),_71a=[];if(_713){for(i=0;i<_713.length;i++){_714=new esri.layers.FeatureType(_713[i]);_715=_714.templates;if(fix&&_715&&_715.length){_71a=_71a.concat(_715);}_712.push(_714);}}var _71b=_705.templates,_71c,_71d=this.templates=[];if(_71b){for(i=0;i<_71b.length;i++){_71c=new esri.layers.FeatureTemplate(_71b[i]);if(fix){_71a.push(_71c);}_71d.push(_71c);}}for(i=0;i<_71a.length;i++){_716=dojo.getObject("prototype.attributes",false,_71a[i]);if(_716){if(_718){delete _716[_718];}if(_719){delete _716[_719];}}}var _71e=_705.timeInfo;if(_71e){this.timeInfo=new esri.layers.TimeInfo(_71e);this._startTimeField=_71e.startTimeField;this._endTimeField=_71e.endTimeField;if(this._startTimeField&&this._endTimeField){this._twoTimeFields=true;}if(this._trackIdField){_71e.trackIdField=this._trackIdField;}else{this._trackIdField=_71e.trackIdField;}}this.hasAttachments=(!this._collection&&_705.hasAttachments)?true:false;this.htmlPopupType=_705.htmlPopupType;var _71f=_705.drawingInfo,_720;if(!this.renderer){if(_71f&&_71f.renderer){_720=_71f.renderer;this.setRenderer(esri.renderer.fromJson(_720));if(_720.type==="classBreaks"){this.renderer._setMaxInclusiveness(true);}if(!this._collection){var _721=_720.type,_722=[];_720=this.renderer;switch(_721){case "simple":_722.push(_720.symbol);break;case "uniqueValue":case "classBreaks":_722.push(_720.defaultSymbol);_722=_722.concat(dojo.map(_720.infos,function(info){return info.symbol;}));break;}_722=dojo.filter(_722,esri._isDefined);var _723=this._url.path+"/images/",_724=this._getToken();dojo.forEach(_722,function(sym){var url=sym.url;if(url){if((url.search(/https?\:/)===-1)&&(url.indexOf("data:")===-1)){sym.url=_723+url;}if(_724&&sym.url.search(/https?\:/)!==-1){sym.url+=("?token="+_724);}}});}}else{if(_711){_713=this.types;if(_713.length>0){_720=new esri.renderer.UniqueValueRenderer(this.defaultSymbol,this.typeIdField);dojo.forEach(_713,function(type){_720.addValue(type.id,type.symbol);});}else{_720=new esri.renderer.SimpleRenderer(this.defaultSymbol);}this.setRenderer(_720);}else{if(!this._isTable){var _725;switch(this.geometryType){case "esriGeometryPoint":case "esriGeometryMultipoint":_725=new esri.symbol.SimpleMarkerSymbol();break;case "esriGeometryPolyline":_725=new esri.symbol.SimpleLineSymbol();break;case "esriGeometryPolygon":_725=new esri.symbol.SimpleFillSymbol();break;}this.setRenderer(_725?new esri.renderer.SimpleRenderer(_725):null);}}}}var _726=(_71f&&_71f.transparency)||0;if(!esri._isDefined(this.opacity)&&_726>0){this.opacity=1-(_726/100);}this.version=_705.currentVersion;if(!this.version){var ver;if("capabilities" in _705||"drawingInfo" in _705||"hasAttachments" in _705||"htmlPopupType" in _705||"relationships" in _705||"timeInfo" in _705||"typeIdField" in _705||"types" in _705){ver=10;}else{ver=9.3;}this.version=ver;}if((dojo.isIE||dojo.isSafari)&&this.isEditable()&&this.version<10.02){this._ts=true;}this.loaded=true;this._fixRendererFields();this._checkFields();this._updateCaps();if(this._collection){this._fireUpdateStart();var _727=this._featureSet;delete this._featureSet;this._mode._drawFeatures(new esri.tasks.FeatureSet(_727));this._fcAdded=true;}this.onLoad(this);var _728=this._loadCallback;if(_728){delete this._loadCallback;_728(this);}}},setRenderer:function(ren){this.inherited("setRenderer",arguments);var _729=this.renderer;if(_729){this._ager=(_729.declaredClass.indexOf("TemporalRenderer")!==-1&&_729.observationAger&&_729.observationRenderer);var _72a=dojo.filter([_729,_729.observationRenderer,_729.latestObservationRenderer,_729.trackRenderer],esri._isDefined);var _72b=[];dojo.forEach(_72a,function(rnd){_72b.push(rnd.attributeField);_72b.push(rnd.attributeField2);_72b.push(rnd.attributeField3);},this);this._rendererFields=dojo.filter(_72b,esri._isDefined);}else{this._ager=false;this._rendererFields=[];}if(this.loaded&&this._rendererFields.length>0){this._fixRendererFields();this._checkFields(this._rendererFields);}if(this.loaded&&this._collection){this._typesDirty=true;}},_setMap:function(map,_72c){this._map=map;this._toggleTime(true);var div=this.inherited("_setMap",arguments);this.clearSelection();var _72d=this.renderer;if(this.timeInfo){if(this._trackIdField||(_72d&&(_72d.latestObservationRenderer||_72d.trackRenderer))){this._trackManager=new esri.layers._TrackManager(this);this._trackManager.initialize(map);}}this._zoomConnect=dojo.connect(map,"onZoomEnd",this,this._updateMaxOffset);this._updateMaxOffset();var mode=this._mode;if(mode){mode.initialize(map);}return div;},_unsetMap:function(map,_72e){var mode=this._mode;if(mode){mode.destroy();this._mode=null;}if(this._trackManager){this._trackManager.destroy();this._trackManager=null;}dojo.disconnect(this._zoomConnect);this._zoomConnect=null;this._toggleTime(false);this.inherited("_unsetMap",arguments);},refresh:function(){var mode=this._mode;if(mode){mode.refresh();}},setEditable:function(_72f){if(!this._collection){console.log("FeatureLayer:setEditable - this functionality is not yet supported for layer in a feature service");return this;}if(!this.loaded){this._optEditable=_72f;return this;}var _730=this._editable;this._editable=_72f;this._updateCaps();if(_730!==_72f){this.onCapabilitiesChange();}return this;},getEditCapabilities:function(_731){var _732={"canCreate":false,"canUpdate":false,"canDelete":false};if(!this.loaded||!this.isEditable()){return _732;}var _733=_731&&_731.feature,_734=_731&&_731.userId,caps=dojo.map((this.capabilities?this.capabilities.toLowerCase().split(","):[]),dojo.trim),_735=dojo.indexOf(caps,"editing")>-1,_736=_735&&(dojo.indexOf(caps,"create")>-1),_737=_735&&(dojo.indexOf(caps,"update")>-1),_738=_735&&(dojo.indexOf(caps,"delete")>-1),_739=this.ownershipBasedAccessControlForFeatures,_73a=this.editFieldsInfo,_73b=_73a&&_73a.creatorField,_73c=_73a&&_73a.realm,_73d=_733&&_733.attributes,_73e=(_73d&&_73b)?_73d[_73b]:undefined,_73f,_740=!!this.userIsAdmin,_741=!_739||_740||!!(_739.allowOthersToUpdate||_739.allowUpdateToOthers),_742=!_739||_740||!!(_739.allowOthersToDelete||_739.allowDeleteToOthers);if(_740||(_735&&!(_736||_737||_738))){_736=_737=_738=true;}_73f={"canCreate":_736,"canUpdate":_737,"canDelete":_738};if(_73e===null){_73f.canUpdate=_737&&_741;_73f.canDelete=_738&&_742;}else{if(_73e===""){return _73f;}else{if(_73e){_734=_734||this.getUserId();if(_734&&_73c){_734=_734+"@"+_73c;}if(_734.toLowerCase()===_73e.toLowerCase()){return _73f;}else{_73f.canUpdate=_737&&_741;_73f.canDelete=_738&&_742;}}}}return _73f;},getUserId:function(){var _743;if(this.loaded){_743=(this.credential&&this.credential.userId)||this.userId||"";}return _743;},setUserIsAdmin:function(_744){this.userIsAdmin=_744;},setEditSummaryCallback:function(_745){this.editSummaryCallback=_745;},getEditSummary:function(_746,_747,_748){_748=esri._isDefined(_748)?_748:(new Date()).getTime();var _749="",info=this.getEditInfo(_746,_747,_748),_74a=(_747&&_747.callback)||this.editSummaryCallback;if(_74a){info=_74a(_746,info)||"";}if(dojo.isString(info)){_749=info;}else{if(info){var _74b=info.action,_74c=info.userId,_74d=info.timeValue,_74e=0;if(_74b){_74e++;}if(_74c){_74e++;}if(esri._isDefined(_74d)){_74e++;}if(_74e>1){_749=(_74b==="edit"?"edit":"create")+(_74c?"User":"")+(esri._isDefined(_74d)?info.displayPattern:"");}}_749=_749&&esri.substitute(info,esri.bundle.layers.FeatureLayer[_749]);}return _749;},getEditInfo:function(_74f,_750,_751){if(!this.loaded){return;}_751=esri._isDefined(_751)?_751:(new Date()).getTime();var _752=(_750&&_750.action)||"last",_753=this.editFieldsInfo,_754=_753&&_753.creatorField,_755=_753&&_753.creationDateField,_756=_753&&_753.editorField,_757=_753&&_753.editDateField,_758=_753&&_753.realm,_759=_74f&&_74f.attributes,_75a=(_759&&_754)?_759[_754]:undefined,_75b=(_759&&_755)?_759[_755]:null,_75c=(_759&&_756)?_759[_756]:undefined,_75d=(_759&&_757)?_759[_757]:null,_75e=this._getEditData(_75a,_75b,_751),_75f=this._getEditData(_75c,_75d,_751),_760;switch(_752){case "creation":_760=_75e;break;case "edit":_760=_75f;break;case "last":_760=_75f||_75e;break;}if(_760){_760.action=(_760===_75f)?"edit":"creation";}return _760;},_getEditData:function(_761,_762,_763){var data,_764,_765,_766=60000,_767=3600000,_768=2*_767,_769=24*_767,_76a=7*_769;if(esri._isDefined(_762)){_764=_763-_762;if(_764<0){_765="Full";}else{if(_764<_766){_765="Seconds";}else{if(_764<(2*_766)){_765="Minute";}else{if(_764<_767){_765="Minutes";}else{if(_764<_768){_765="Hour";}else{if(_764<_769){_765="Hours";}else{if(_764<_76a){_765="WeekDay";}else{_765="Full";}}}}}}}}if((_761!==undefined)||_765){data=data||{};data.userId=_761;if(_765){var _76b=dojo.date.locale.format,_76c=new Date(_762);data.minutes=Math.floor(_764/_766);data.hours=Math.floor(_764/_767);data.weekDay=_76b(_76c,{datePattern:"EEEE",selector:"date"});data.formattedDate=_76b(_76c,{selector:"date"});data.formattedTime=_76b(_76c,{selector:"time"});data.displayPattern=_765;data.timeValue=_762;}}return data;},isEditable:function(){return !!(this._editable||this.userIsAdmin);},setMaxAllowableOffset:function(_76d){if(!this.isEditable()){this._maxOffset=_76d;}return this;},getMaxAllowableOffset:function(){return this._maxOffset;},setAutoGeneralize:function(_76e){if(!this.loaded){this._optAutoGen=_76e;}else{if(!this.isEditable()&&(this.mode!==this.constructor.MODE_SNAPSHOT)&&((this.geometryType==="esriGeometryPolyline")||(this.geometryType==="esriGeometryPolygon"))){this._autoGeneralize=_76e;if(_76e){var map=this._map;if(map&&map.loaded){this._maxOffset=Math.floor(map.extent.getWidth()/map.width);}}else{delete this._maxOffset;}}}return this;},setGDBVersion:function(_76f){if(!this._collection&&(_76f!==this.gdbVersion)&&(_76f||this.gdbVersion)){this.gdbVersion=_76f;this._task.gdbVersion=_76f;this._url.query=dojo.mixin(this._url.query,{gdbVersion:_76f});if(this.loaded){this.clearSelection();if(this._map){this.refresh();}}this.onGDBVersionChange();}return this;},setDefinitionExpression:function(expr){this._defnExpr=expr;var mode=this._mode;if(mode){mode.propertyChangeHandler(1);}return this;},getDefinitionExpression:function(){return this._defnExpr;},setTimeDefinition:function(_770){if(this._isSnapshot){this._timeDefn=_770;var mode=this._mode;if(mode){mode.propertyChangeHandler(2);}}return this;},getTimeDefinition:function(){return this._timeDefn;},setTimeOffset:function(_771,_772){this._timeOffset=_771;this._timeOffsetUnits=_772;var mode=this._mode;if(mode){mode.propertyChangeHandler(0);}return this;},setUseMapTime:function(use){this.useMapTime=use;this._toggleTime(!this.suspended);var mode=this._mode;if(mode){mode.propertyChangeHandler(0);}},selectFeatures:function(_773,_774,_775,_776){_774=_774||this.constructor.SELECTION_NEW;var _777=this._getShallowClone(_773),map=this._map,_778,dfd=esri._fixDfd(new dojo.Deferred(esri._dfdCanceller));_777.outFields=this._getOutFields();_777.returnGeometry=true;if(map){_777.outSpatialReference=new esri.SpatialReference(map.spatialReference.toJson());}if(!this._applyQueryFilters(_777)){_778={features:[]};this._selectHandler(_778,_774,_775,_776,dfd);return dfd;}var _779=this._canDoClientSideQuery(_777);if(_779){_778={features:this._doQuery(_777,_779)};this._selectHandler(_778,_774,_775,_776,dfd);return dfd;}else{if(this._collection){var err=new Error("FeatureLayer::selectFeatures - "+esri.bundle.layers.FeatureLayer.invalidParams);this._resolve([err],null,_776,dfd,true);return dfd;}var self=this;if(this._ts){_777._ts=(new Date()).getTime();}var temp=dfd._pendingDfd=this._task.execute(_777);temp.addCallbacks(function(_77a){self._selectHandler(_77a,_774,_775,_776,dfd);},function(err){self._resolve([err],null,_776,dfd,true);});return dfd;}},getSelectedFeatures:function(){var _77b=this._selectedFeatures,_77c=[],item;for(item in _77b){if(_77b.hasOwnProperty(item)){_77c.push(_77b[item]);}}return _77c;},clearSelection:function(_77d){var _77e=this._selectedFeatures,mode=this._mode,item;for(item in _77e){if(_77e.hasOwnProperty(item)){this._unSelectFeatureIIf(item,mode);mode._removeFeatureIIf(item);}}this._selectedFeatures={};if(this._isSelOnly){mode._applyTimeFilter(true);}if(!_77d){this.onSelectionClear();}return this;},setSelectionSymbol:function(_77f){this._selectionSymbol=_77f;if(_77f){var _780=this._selectedFeatures,item;for(item in _780){if(_780.hasOwnProperty(item)){_780[item].setSymbol(_77f);}}}return this;},getSelectionSymbol:function(){return this._selectionSymbol;},__msigns:[{n:"applyEdits",c:5,a:[{i:0},{i:1}],e:4,f:1}],applyEdits:function(adds,_781,_782,_783,_784,_785){var _786=_785.assembly,dfd=_785.dfd;this._applyNormalized(adds,_786&&_786[0]);this._applyNormalized(_781,_786&&_786[1]);this.onBeforeApplyEdits(adds,_781,_782);var i,_787={},_788=this.objectIdField,_789={f:"json"},_78a=false;if(this._collection){var _78b={};_78b.addResults=adds?dojo.map(adds,function(){_78a=true;return {objectId:this._nextId++,success:true};},this):null;_78b.updateResults=_781?dojo.map(_781,function(_78c){_78a=true;var oid=_78c.attributes[_788];_787[oid]=_78c;return {objectId:oid,success:true};},this):null;_78b.deleteResults=_782?dojo.map(_782,function(_78d){_78a=true;return {objectId:_78d.attributes[_788],success:true};},this):null;if(_78a){this._editHandler(_78b,adds,_787,_783,_784,dfd);}return;}if(adds&&adds.length>0){_789.adds=this._convertFeaturesToJson(adds,0,1);_78a=true;}if(_781&&_781.length>0){for(i=0;i<_781.length;i++){var _78e=_781[i];_787[_78e.attributes[_788]]=_78e;}_789.updates=this._convertFeaturesToJson(_781,0,0,1);_78a=true;}if(_782&&_782.length>0){var ids=[];for(i=0;i<_782.length;i++){ids.push(_782[i].attributes[_788]);}_789.deletes=ids.join(",");_78a=true;}if(_78a){var self=this;return esri.request({url:this._url.path+"/applyEdits",content:dojo.mixin(_789,this._url.query),callbackParamName:"callback",load:function(_78f){self._editHandler(_78f,adds,_787,_783,_784,dfd);},error:function(err){self._resolve([err],null,_784,dfd,true);}},{usePost:true});}},queryFeatures:function(_790,_791,_792){return this._query("execute","onQueryFeaturesComplete",_790,_791,_792);},queryRelatedFeatures:function(_793,_794,_795){return this._query("executeRelationshipQuery","onQueryRelatedFeaturesComplete",_793,_794,_795);},queryIds:function(_796,_797,_798){return this._query("executeForIds","onQueryIdsComplete",_796,_797,_798);},queryCount:function(_799,_79a,_79b){return this._query("executeForCount","onQueryCountComplete",_799,_79a,_79b);},queryAttachmentInfos:function(_79c,_79d,_79e){var url=this._url.path+"/"+_79c+"/attachments",dfd=new dojo.Deferred(esri._dfdCanceller),self=this;dfd._pendingDfd=esri.request({url:url,content:dojo.mixin({f:"json"},this._url.query),callbackParamName:"callback",load:function(_79f){var _7a0=_79f.attachmentInfos,_7a1;dojo.forEach(_7a0,function(info){_7a1=dojo.objectToQuery({gdbVersion:self._url.query&&self._url.query.gdbVersion,layer:self._url.query&&self._url.query.layer,token:self._getToken()});info.url=url+"/"+info.id+(_7a1?("?"+_7a1):"");info.objectId=_79c;});self._resolve([_7a0],"onQueryAttachmentInfosComplete",_79d,dfd);},error:function(err){self._resolve([err],null,_79e,dfd,true);}});return dfd;},addAttachment:function(_7a2,_7a3,_7a4,_7a5){return this._sendAttachment("add",_7a2,_7a3,_7a4,_7a5);},updateAttachment:function(_7a6,_7a7,_7a8,_7a9,_7aa){_7a8.appendChild(dojo.create("input",{type:"hidden",name:"attachmentId",value:_7a7}));return this._sendAttachment("update",_7a6,_7a8,_7a9,_7aa);},deleteAttachments:function(_7ab,_7ac,_7ad,_7ae){var url=this._url.path+"/"+_7ab+"/deleteAttachments",dfd=new dojo.Deferred(esri._dfdCanceller),self=this,_7af={f:"json",attachmentIds:_7ac.join(",")};dfd._pendingDfd=esri.request({url:url,content:dojo.mixin(_7af,this._url.query),callbackParamName:"callback",load:dojo.hitch(this,function(_7b0){var _7b1=_7b0.deleteAttachmentResults;_7b1=dojo.map(_7b1,function(_7b2){var res=new esri.layers.FeatureEditResult(_7b2);res.attachmentId=res.objectId;res.objectId=_7ab;return res;});self._resolve([_7b1],"onDeleteAttachmentsComplete",_7ad,dfd);}),error:function(err){self._resolve([err],null,_7ae,dfd,true);}},{usePost:true});return dfd;},addType:function(_7b3){var _7b4=this.types;if(_7b4){var _7b5=dojo.some(_7b4,function(type){if(type.id==_7b3.id){return true;}return false;});if(_7b5){return false;}else{_7b4.push(_7b3);}}else{this.types=[_7b3];}this._typesDirty=true;return true;},deleteType:function(_7b6){if(!this._collection){return;}var _7b7=this.types;if(_7b7){var _7b8=-1;dojo.some(_7b7,function(type,_7b9){if(type.id==_7b6){_7b8=_7b9;return true;}return false;});if(_7b8>-1){this._typesDirty=true;return _7b7.splice(_7b8,1)[0];}}},toJson:function(){var _7ba=this._json,json=dojo.isString(_7ba)?dojo.fromJson(_7ba):dojo.clone(_7ba);if(!json){return;}json=json.layerDefinition?json:{layerDefinition:json};var _7bb=json.layerDefinition,_7bc=this._collection;if(_7bc&&this._typesDirty){_7bb.types=dojo.map(this.types||[],function(type){return type.toJson();});var _7bd=this.renderer,_7be=_7bb.drawingInfo;if(_7be&&_7bd&&_7bd.declaredClass.indexOf("TemporalRenderer")===-1){_7be.renderer=_7bd.toJson();}}var _7bf=null;if(!(_7bc&&!this._fcAdded)){_7bf={geometryType:_7bb.geometryType,features:this._convertFeaturesToJson(this.graphics,true)};}json.featureSet=dojo.mixin({},json.featureSet||{},_7bf);if(_7bc){json.nextObjectId=this._nextId;_7bb.capabilities=this.capabilities;}return json;},onSelectionComplete:function(){},onSelectionClear:function(){},onBeforeApplyEdits:function(){},onEditsComplete:function(){},onQueryFeaturesComplete:function(){},onQueryRelatedFeaturesComplete:function(){},onQueryIdsComplete:function(){},onQueryCountComplete:function(){},onQueryAttachmentInfosComplete:function(){},onAddAttachmentComplete:function(){},onUpdateAttachmentComplete:function(){},onDeleteAttachmentsComplete:function(){},onCapabilitiesChange:function(){},onGDBVersionChange:function(){},onQueryLimitExceeded:function(){},_updateCaps:function(){var _7c0=this._editable,_7c1=dojo.trim(this.capabilities||""),_7c2=dojo.map((_7c1?_7c1.split(","):[]),dojo.trim),caps=dojo.map((_7c1?_7c1.toLowerCase().split(","):[]),dojo.trim),_7c3=dojo.indexOf(caps,"editing"),cap,i,_7c4,_7c5={"Create":dojo.indexOf(caps,"create"),"Update":dojo.indexOf(caps,"update"),"Delete":dojo.indexOf(caps,"delete")};if(_7c0&&_7c3===-1){_7c2.push("Editing");}else{if(!_7c0&&_7c3>-1){_7c4=[_7c3];for(cap in _7c5){if(_7c5[cap]>-1){_7c4.push(_7c5[cap]);}}_7c4.sort();for(i=_7c4.length-1;i>=0;i--){_7c2.splice(_7c4[i],1);}}}this.capabilities=_7c2.join(",");},_counter:{value:0},_getUniqueId:function(){return this._counter.value++;},onSuspend:function(){this.inherited(arguments);this._toggleTime(false);var mode=this._mode;if(mode){mode.suspend();}},onResume:function(){this.inherited(arguments);this._toggleTime(true);this._updateMaxOffset();var mode=this._mode;if(mode){mode.resume();}},_updateMaxOffset:function(){var map=this._map;if(map&&map.loaded){if(this._autoGeneralize){this._maxOffset=Math.floor(map.extent.getWidth()/map.width);}}},_toggleTime:function(_7c6){var map=this._map;if(_7c6&&this.timeInfo&&this.useMapTime&&map){this._mapTimeExtent=map.timeExtent;if(!this._timeConnect){this._timeConnect=dojo.connect(map,"onTimeExtentChange",this,this._timeChangeHandler);}}else{this._mapTimeExtent=null;dojo.disconnect(this._timeConnect);this._timeConnect=null;}},_timeChangeHandler:function(_7c7){this._mapTimeExtent=_7c7;var mode=this._mode;if(mode){mode.propertyChangeHandler(0);}},_getOffsettedTE:function(_7c8){var _7c9=this._timeOffset,_7ca=this._timeOffsetUnits;return (_7c8&&_7c9&&_7ca)?_7c8.offset(-1*_7c9,_7ca):_7c8;},_getTimeOverlap:function(_7cb,_7cc){if(_7cb&&_7cc){return _7cb.intersection(_7cc);}else{return _7cb||_7cc;}},_getTimeFilter:function(_7cd){var _7ce=this.getTimeDefinition(),_7cf=null,_7d0;if(_7ce||_7cf){_7d0=this._getTimeOverlap(_7ce,_7cf);if(!_7d0){return [false];}}if(_7cd){_7cd=_7d0?this._getTimeOverlap(_7cd,_7d0):_7cd;if(!_7cd){return [false];}}else{_7cd=_7d0;}return [true,_7cd];},_getAttributeFilter:function(_7d1){var _7d2=this.getDefinitionExpression();if(_7d1){_7d1=_7d2?"("+_7d2+") AND ("+_7d1+")":_7d1;}else{_7d1=_7d2;}return _7d1;},_applyQueryFilters:function(_7d3){_7d3.where=this._getAttributeFilter(_7d3.where);_7d3.maxAllowableOffset=this._maxOffset;if(this.timeInfo){var _7d4=this._getTimeFilter(_7d3.timeExtent);if(!_7d4[0]){return false;}else{_7d3.timeExtent=_7d4[1];}}return true;},_add:function(_7d5){var _7d6=this._selectionSymbol,attr=_7d5.attributes,_7d7=this.visibilityField;if(_7d6&&this._isSelOnly){_7d5.setSymbol(_7d6);}if(_7d7&&attr&&attr.hasOwnProperty(_7d7)){_7d5[attr[_7d7]?"show":"hide"]();}return this.add.apply(this,arguments);},_remove:function(){return this.remove.apply(this,arguments);},_canDoClientSideQuery:function(_7d8){var _7d9=[],map=this._map;if(this._isTable||!map){return;}if(_7d8.text||(_7d8.where&&_7d8.where!==this.getDefinitionExpression())){return;}var _7da=this._isSnapshot,_7db=this._isSelOnly;var _7dc=_7d8.geometry;if(_7dc){if(!_7db&&_7d8.spatialRelationship===esri.tasks.Query.SPATIAL_REL_INTERSECTS&&(_7dc.type==="extent"&&(_7da||map.extent.contains(_7dc)))){_7d9.push(1);}else{return;}}var ids=_7d8.objectIds;if(ids){if(_7da){_7d9.push(2);}else{var len=ids.length,mode=this._mode,_7dd=0,i;for(i=0;i<len;i++){if(mode._getFeature(ids[i])){_7dd++;}}if(_7dd===len){_7d9.push(2);}else{return;}}}if(this.timeInfo){var _7de=_7d8.timeExtent,_7df=this._mapTimeExtent;if(_7da){if(_7de){_7d9.push(3);}}else{if(_7db){if(_7de){return;}}else{if(_7df){if(dojo.indexOf(_7d9,2)!==-1){if(_7de){_7d9.push(3);}}else{return;}}else{if(_7d9.length>0){if(_7de){_7d9.push(3);}}else{if(_7de){return;}}}}}}return _7d9.length>0?_7d9:null;},_doQuery:function(_7e0,_7e1,_7e2){var _7e3=[],mode=this._mode,_7e4=this.objectIdField,i,len,_7e5;if(dojo.indexOf(_7e1,2)!==-1){_7e3=[];var ids=_7e0.objectIds;len=ids.length;for(i=0;i<len;i++){var obj=mode._getFeature(ids[i]);if(obj){_7e3.push(obj);}}if(_7e3.length===0){return [];}}if(dojo.indexOf(_7e1,1)!==-1){_7e5=_7e3.length>0?_7e3:this.graphics;len=_7e5.length;var _7e6=_7e0.geometry._normalize(null,true);_7e3=[];for(i=0;i<len;i++){var _7e7=_7e5[i],_7e8=_7e7.geometry;if(_7e8){if(this.normalization&&_7e6.length){if(_7e6[0].intersects(_7e8)||_7e6[1].intersects(_7e8)){_7e3.push(_7e7);}}else{if(_7e6.intersects(_7e8)){_7e3.push(_7e7);}}}}if(_7e3.length===0){return [];}}if(dojo.indexOf(_7e1,3)!==-1){if(this.timeInfo){_7e5=_7e3.length>0?_7e3:this.graphics;var time=_7e0.timeExtent,_7e9=this._filterByTime(_7e5,time.startTime,time.endTime);_7e3=_7e9.match;}}if(_7e2){return dojo.map(_7e3,function(obj){return obj.attributes[_7e4];},this);}else{return _7e3;}},_filterByTime:function(_7ea,_7eb,_7ec){var _7ed=this._startTimeField,_7ee=this._endTimeField,_7ef;if(!this._twoTimeFields){_7ef=_7ed||_7ee;}var _7f0=esri._isDefined,yea=[],nay=[],i,len=_7ea.length,_7f1,_7f2;_7eb=_7eb?_7eb.getTime():-Infinity;_7ec=_7ec?_7ec.getTime():Infinity;if(_7ef){for(i=0;i<len;i++){_7f1=_7ea[i];_7f2=_7f1.attributes;var time=_7f2[_7ef];if(time>=_7eb&&time<=_7ec){yea.push(_7f1);}else{nay.push(_7f1);}}}else{for(i=0;i<len;i++){_7f1=_7ea[i];_7f2=_7f1.attributes;var _7f3=_7f2[_7ed],end=_7f2[_7ee];_7f3=_7f0(_7f3)?_7f3:-Infinity;end=_7f0(end)?end:Infinity;if((_7f3>=_7eb&&_7f3<=_7ec)||(end>=_7eb&&end<=_7ec)||(_7eb>=_7f3&&_7ec<=end)){yea.push(_7f1);}else{nay.push(_7f1);}}}return {match:yea,noMatch:nay};},_resolve:function(args,_7f4,_7f5,dfd,_7f6){if(_7f4){this[_7f4].apply(this,args);}if(_7f5){_7f5.apply(null,args);}if(dfd){esri._resDfd(dfd,args,_7f6);}},_getShallowClone:function(_7f7){var _7f8=new esri.tasks.Query(),prop;for(prop in _7f7){if(_7f7.hasOwnProperty(prop)){_7f8[prop]=_7f7[prop];}}return _7f8;},_query:function(type,_7f9,_7fa,_7fb,_7fc){var that=this,dfd=new dojo.Deferred(esri._dfdCanceller);var _7fd=function(_7fe,_7ff){if(!_7ff&&type==="execute"&&!that._isTable){var _800=_7fe.features,mode=that._mode,_801=that.objectIdField,il=_800.length,i;for(i=il-1;i>=0;i--){var oid=_800[i].attributes[_801];var _802=mode._getFeature(oid);if(_802){_800.splice(i,1,_802);}}}that._resolve([_7fe],_7f9,_7fb,dfd);};if(type!=="executeRelationshipQuery"){_7fa=this._getShallowClone(_7fa);_7fa.outFields=this._getOutFields();_7fa.returnGeometry=true;var map=this._map,_803;if(map){_7fa.outSpatialReference=new esri.SpatialReference(map.spatialReference.toJson());}if(!this._applyQueryFilters(_7fa)){switch(type){case "execute":_803=new esri.tasks.FeatureSet({features:[]});break;case "executeForIds":_803=[];break;case "executeForCount":_803=0;break;}_7fd(_803,true);return dfd;}var _804=this._canDoClientSideQuery(_7fa);if(_804){var _805=this._doQuery(_7fa,_804,(type==="executeForIds"||type==="executeForCount"));switch(type){case "execute":_803=new esri.tasks.FeatureSet();_803.features=_805;break;case "executeForIds":_803=_805;break;case "executeForCount":_803=_805.length;break;}_7fd(_803,true);return dfd;}}if(this._collection){var err=new Error("FeatureLayer::_query - "+esri.bundle.layers.FeatureLayer.invalidParams);this._resolve([err],null,_7fc,dfd,true);return dfd;}if(this._ts){_7fa._ts=(new Date()).getTime();}var temp=dfd._pendingDfd=this._task[type](_7fa);temp.addCallbacks(_7fd,function(err){that._resolve([err],null,_7fc,dfd,true);});return dfd;},_convertFeaturesToJson:function(_806,_807,_808,_809){var json=[],_80a=this._selectionSymbol,_80b=this.visibilityField,i,_80c,_80d=this.objectIdField;if(this.loaded&&(_808||_809)){_80c=dojo.filter(this.fields,function(_80e){return (_80e.editable===false)&&(!_809||(_80e.name!==_80d));});}for(i=0;i<_806.length;i++){var _80f=_806[i],_810={},_811=_80f.geometry,attr=_80f.attributes,_812=_80f.symbol;if(_811&&(!_809||!this.loaded||this.allowGeometryUpdates)){_810.geometry=_811.toJson();}if(_80b){_810.attributes=attr=dojo.mixin({},attr);attr[_80b]=_80f.visible?1:0;}else{if(attr){_810.attributes=dojo.mixin({},attr);}}if(_810.attributes&&_80c&&_80c.length){dojo.forEach(_80c,function(_813){delete _810.attributes[_813.name];});}if(_812&&(_812!==_80a)){_810.symbol=_812.toJson();}json.push(_810);}return _807?json:dojo.toJson(json);},_selectHandler:function(_814,_815,_816,_817,dfd){var _818,ctor=this.constructor;switch(_815){case ctor.SELECTION_NEW:this.clearSelection(true);_818=true;break;case ctor.SELECTION_ADD:_818=true;break;case ctor.SELECTION_SUBTRACT:_818=false;break;}var i,_819=_814.features,mode=this._mode,_81a=[],_81b=this.objectIdField,_81c,oid;if(_818){for(i=0;i<_819.length;i++){_81c=_819[i];oid=_81c.attributes[_81b];var _81d=mode._addFeatureIIf(oid,_81c);_81a.push(_81d);this._selectFeatureIIf(oid,_81d,mode);}}else{for(i=0;i<_819.length;i++){_81c=_819[i];oid=_81c.attributes[_81b];this._unSelectFeatureIIf(oid,mode);var _81e=mode._removeFeatureIIf(oid);_81a.push(_81e||_81c);}}if(this._isSelOnly){mode._applyTimeFilter(true);}this._resolve([_81a,_815,_814.exceededTransferLimit?{queryLimitExceeded:true}:null],"onSelectionComplete",_816,dfd);if(_814.exceededTransferLimit){this.onQueryLimitExceeded();}},_selectFeatureIIf:function(oid,_81f,mode){var _820=this._selectedFeatures,_821=_820[oid];if(!_821){mode._incRefCount(oid);_820[oid]=_81f;if(!this._isTable){this._setSelectSymbol(_81f);}}return _821||_81f;},_unSelectFeatureIIf:function(oid,mode){var _822=this._selectedFeatures[oid];if(_822){mode._decRefCount(oid);delete this._selectedFeatures[oid];if(!this._isTable){this._setUnSelectSymbol(_822);}}return _822;},_isSelected:function(_823){},_setSelectSymbol:function(_824){var _825=this._selectionSymbol;if(_825&&!this._isSelOnly){_824.setSymbol(_825);}},_setUnSelectSymbol:function(_826){var _827=this._selectionSymbol;if(_827&&!this._isSelOnly){if(_827===_826.symbol){_826.setSymbol(null,true);}}},_getOutFields:function(){var _828=dojo.filter([this.objectIdField,this.typeIdField,this.creatorField,this._startTimeField,this._endTimeField,this._trackIdField].concat(this._rendererFields),function(_829,_82a,arr){return !!_829&&(dojo.indexOf(arr,_829)===_82a);});var _82b=dojo.clone(this._outFields);if(_82b){if(dojo.indexOf(_82b,"*")!==-1){return _82b;}dojo.forEach(_828,function(_82c){if(dojo.indexOf(_82b,_82c)===-1){_82b.push(_82c);}});return _82b;}else{return _828;}},_checkFields:function(_82d){var _82e=_82d||this._getOutFields();dojo.forEach(_82e,function(_82f){if(_82f==="*"){return;}if(!this._getField(_82f)){console.debug("esri.layers.FeatureLayer: "+esri.substitute({url:this.url,field:_82f},esri.bundle.layers.FeatureLayer.fieldNotFound));}},this);if(!_82d&&!this._isTable&&!this._fserver&&!this._collection){var _830=dojo.some(this.fields,function(_831){return (_831&&_831.type==="esriFieldTypeGeometry")?true:false;});if(!_830){console.debug("esri.layers.FeatureLayer: "+esri.substitute({url:this.url},esri.bundle.layers.FeatureLayer.noGeometryField));}}},_fixRendererFields:function(){var _832=this.renderer;if(_832&&this.fields.length>0){var _833=dojo.filter([_832,_832.observationRenderer,_832.latestObservationRenderer,_832.trackRenderer],esri._isDefined);var _834=[];dojo.forEach(_833,function(rnd){var _835,_836;_836=rnd.attributeField;if(_836){_835=!this._getField(_836)&&this._getField(_836,true);if(_835){rnd.attributeField=_835.name;}}_836=rnd.attributeField2;if(_836){_835=!this._getField(_836)&&this._getField(_836,true);if(_835){rnd.attributeField2=_835.name;}}_836=rnd.attributeField3;if(_836){_835=!this._getField(_836)&&this._getField(_836,true);if(_835){rnd.attributeField3=_835.name;}}_834.push(rnd.attributeField);_834.push(rnd.attributeField2);_834.push(rnd.attributeField3);},this);this._rendererFields=dojo.filter(_834,esri._isDefined);}},_getField:function(_837,_838){var _839=this.fields;if(_839.length===0){return null;}var _83a;if(_838){_837=_837.toLowerCase();}dojo.some(_839,function(_83b){var _83c=false;if(_838){_83c=(_83b&&_83b.name.toLowerCase()===_837)?true:false;}else{_83c=(_83b&&_83b.name===_837)?true:false;}if(_83c){_83a=_83b;}return _83c;});return _83a;},_getDateOpts:function(){if(!this._dtOpts){var _83d=dojo.map(dojo.filter(this.fields,function(_83e){return !!(_83e&&_83e.type==="esriFieldTypeDate");}),function(_83f){return _83f.name;});this._dtOpts={properties:_83d};}return this._dtOpts;},_applyNormalized:function(_840,_841){if(_840&&_841){dojo.forEach(_840,function(_842,_843){if(_842&&_841[_843]){_842.setGeometry(_841[_843]);}});}},_editHandler:function(_844,adds,_845,_846,_847,dfd){var _848=_844.addResults,_849=_844.updateResults,_84a=_844.deleteResults,i,_84b,oid,_84c,attr,_84d=this.objectIdField,mode=this._mode,_84e=this._isTable;var _84f=this.editFieldsInfo,_850=this._getOutFields()||[],_851=_84f&&_84f.creatorField,_852=_84f&&_84f.creationDateField,_853=_84f&&_84f.editorField,_854=_84f&&_84f.editDateField,_855=_84f&&_84f.realm;if(dojo.indexOf(_850,"*")===-1){if(_851&&dojo.indexOf(_850,_851)===-1){_851=null;}if(_852&&dojo.indexOf(_850,_852)===-1){_852=null;}if(_853&&dojo.indexOf(_850,_853)===-1){_853=null;}if(_854&&dojo.indexOf(_850,_854)===-1){_854=null;}}var _856=(_852||_854)?(new Date()).getTime():null,_857=(_851||_853)?this.getUserId():undefined;if(_857&&_855){_857=_857+"@"+_855;}if(_848){for(i=0;i<_848.length;i++){_848[i]=new esri.layers.FeatureEditResult(_848[i]);if(_84e){continue;}_84b=_848[i];if(_84b.success){oid=_84b.objectId;_84c=adds[i];var gl=_84c._graphicsLayer;if(gl&&gl!==this){gl.remove(_84c);}attr=_84c.attributes||{};attr[_84d]=oid;if(_851){attr[_851]=_857;}if(_853){attr[_853]=_857;}if(_852){attr[_852]=_856;}if(_854){attr[_854]=_856;}_84c.setAttributes(attr);if(mode._init){mode.drawFeature(_84c);}}}}if(_849){for(i=0;i<_849.length;i++){_849[i]=new esri.layers.FeatureEditResult(_849[i]);if(_84e){continue;}_84b=_849[i];if(_84b.success){oid=_84b.objectId;_84c=_845[oid];var _858=mode._getFeature(oid);if(_858){if(_858.geometry!==_84c.geometry){_858.setGeometry(esri.geometry.fromJson(_84c.geometry.toJson()));}this._repaint(_858,oid);}_84c=_858||_84c;attr=_84c.attributes||{};if(_853){attr[_853]=_857;}if(_854){attr[_854]=_856;}_84c.setAttributes(attr);}}}if(_84a){var _859=[];for(i=0;i<_84a.length;i++){_84a[i]=new esri.layers.FeatureEditResult(_84a[i]);if(_84e){continue;}_84b=_84a[i];if(_84b.success){oid=_84b.objectId;_84c=mode._getFeature(oid);if(_84c){if(this._unSelectFeatureIIf(oid,mode)){_859.push(_84c);}_84c._count=0;mode._removeFeatureIIf(oid);}}}if(_859.length>0){this.onSelectionComplete(_859,this.constructor.SELECTION_SUBTRACT);}}this._resolve([_848,_849,_84a],"onEditsComplete",_846,dfd);},_sendAttachment:function(type,_85a,_85b,_85c,_85d){var _85e=(type==="add")?"addAttachment":"updateAttachment",url=this._url.path+"/"+_85a+"/"+_85e,self=this;var dfd=esri.request({url:url,form:_85b,content:dojo.mixin(this._url.query,{f:"json",token:this._getToken()||undefined}),callbackParamName:"callback.html",handleAs:"json"}).addCallback(function(_85f){var _860=(type==="add")?"addAttachmentResult":"updateAttachmentResult",_861=(type==="add")?"onAddAttachmentComplete":"onUpdateAttachmentComplete",_862=new esri.layers.FeatureEditResult(_85f[_860]);_862.attachmentId=_862.objectId;_862.objectId=_85a;self._resolve([_862],_861,_85c);return _862;}).addErrback(function(_863){self._resolve([_863],null,_85d,null,true);});return dfd;},_repaint:function(_864,oid,_865){oid=esri._isDefined(oid)?oid:_864.attributes[this.objectIdField];if(!(oid in this._selectedFeatures)||!this._selectionSymbol){_864.setSymbol(_864.symbol,_865);}},_getKind:function(_866){var _867=this._trackManager;if(_867){return _867.isLatestObservation(_866)?1:0;}return 0;}});dojo.mixin(esri.layers.FeatureLayer,{MODE_SNAPSHOT:0,MODE_ONDEMAND:1,MODE_SELECTION:2,SELECTION_NEW:3,SELECTION_ADD:4,SELECTION_SUBTRACT:5,POPUP_NONE:"esriServerHTMLPopupTypeNone",POPUP_HTML_TEXT:"esriServerHTMLPopupTypeAsHTMLText",POPUP_URL:"esriServerHTMLPopupTypeAsURL"});esri._createWrappers("esri.layers.FeatureLayer");dojo.declare("esri.layers.FeatureType",null,{constructor:function(json){if(json&&dojo.isObject(json)){this.id=json.id;this.name=json.name;var _868=json.symbol;if(_868){this.symbol=esri.symbol.fromJson(_868);}var _869=json.domains,_86a,i;var _86b=this.domains={};for(_86a in _869){if(_869.hasOwnProperty(_86a)){var _86c=_869[_86a];switch(_86c.type){case "range":_86b[_86a]=new esri.layers.RangeDomain(_86c);break;case "codedValue":_86b[_86a]=new esri.layers.CodedValueDomain(_86c);break;case "inherited":_86b[_86a]=new esri.layers.InheritedDomain(_86c);break;}}}var _86d=json.templates;if(_86d){var _86e=this.templates=[];for(i=0;i<_86d.length;i++){_86e.push(new esri.layers.FeatureTemplate(_86d[i]));}}}},toJson:function(){var json={id:this.id,name:this.name,symbol:this.symbol&&this.symbol.toJson()};var _86f,_870=this.domains,_871=this.templates,_872=esri._sanitize;if(_870){var _873=json.domains={};for(_86f in _870){if(_870.hasOwnProperty(_86f)){_873[_86f]=_870[_86f]&&_870[_86f].toJson();}}_872(_873);}if(_871){json.templates=dojo.map(_871,function(_874){return _874.toJson();});}return _872(json);}});dojo.declare("esri.layers.FeatureTemplate",null,{constructor:function(json){if(json&&dojo.isObject(json)){this.name=json.name;this.description=json.description;this.drawingTool=json.drawingTool;var _875=json.prototype;this.prototype=new esri.Graphic(_875.geometry,null,_875.attributes);}},toJson:function(){return esri._sanitize({name:this.name,description:this.description,drawingTool:this.drawingTool,prototype:this.prototype&&this.prototype.toJson()});}});dojo.mixin(esri.layers.FeatureTemplate,{TOOL_AUTO_COMPLETE_POLYGON:"esriFeatureEditToolAutoCompletePolygon",TOOL_CIRCLE:"esriFeatureEditToolCircle",TOOL_ELLIPSE:"esriFeatureEditToolEllipse",TOOL_FREEHAND:"esriFeatureEditToolFreehand",TOOL_LINE:"esriFeatureEditToolLine",TOOL_NONE:"esriFeatureEditToolNone",TOOL_POINT:"esriFeatureEditToolPoint",TOOL_POLYGON:"esriFeatureEditToolPolygon",TOOL_RECTANGLE:"esriFeatureEditToolRectangle",TOOL_ARROW:"esriFeatureEditToolArrow",TOOL_TRIANGLE:"esriFeatureEditToolTriangle",TOOL_LEFT_ARROW:"esriFeatureEditToolLeftArrow",TOOL_RIGHT_ARROW:"esriFeatureEditToolRightArrow",TOOL_UP_ARROW:"esriFeatureEditToolUpArrow",TOOL_DOWN_ARROW:"esriFeatureEditToolDownArrow"});dojo.declare("esri.layers.FeatureEditResult",null,{constructor:function(json){if(json&&dojo.isObject(json)){this.objectId=json.objectId;this.success=json.success;if(!json.success){var err=json.error;this.error=new Error();this.error.code=err.code;this.error.message=err.description;}}}});dojo.declare("esri.layers._RenderMode",null,{constructor:function(){this._prefix="jsonp_"+(dojo._scopeName||"dojo")+"IoScript";},initialize:function(map){},propertyChangeHandler:function(type){},destroy:function(){},drawFeature:function(_876){},suspend:function(){},resume:function(){},refresh:function(){},_incRefCount:function(oid){var _877=this._featureMap[oid];if(_877){_877._count++;}},_decRefCount:function(oid){var _878=this._featureMap[oid];if(_878){_878._count--;}},_getFeature:function(oid){return this._featureMap[oid];},_addFeatureIIf:function(oid,_879){var fmap=this._featureMap,_87a=fmap[oid],_87b=this.featureLayer;if(!_87a){fmap[oid]=_879;_87b._add(_879);_879._count=0;}return _87a||_879;},_removeFeatureIIf:function(oid){var _87c=this._featureMap[oid],_87d=this.featureLayer;if(_87c){if(_87c._count){return;}delete this._featureMap[oid];_87d._remove(_87c);}return _87c;},_clearIIf:function(){var i,_87e=this.featureLayer,_87f=_87e.graphics,_880=_87e._selectedFeatures,_881=_87e.objectIdField;for(i=_87f.length-1;i>=0;i--){var _882=_87f[i];var oid=_882.attributes[_881];if(oid in _880){_882._count=1;continue;}_882._count=0;this._removeFeatureIIf(oid);}},_isPending:function(id){var dfd=dojo.io.script[this._prefix+id];return dfd?true:false;},_cancelPendingRequest:function(dfd,id){dfd=dfd||dojo.io.script[this._prefix+id];if(dfd){try{dfd.cancel();dojo.io.script._validCheck(dfd);}catch(e){}}},_purgeRequests:function(){dojo.io.script._validCheck(null);},_toggleVisibility:function(show){var _883=this.featureLayer,_884=_883.graphics,_885=show?"show":"hide",i,len=_884.length;show=show&&_883._ager;for(i=0;i<len;i++){var _886=_884[i];_886[_885]();if(show){_883._repaint(_886);}}},_applyTimeFilter:function(_887){var _888=this.featureLayer;if(!_888.timeInfo||_888.suspended){return;}if(!_887){_888._fireUpdateStart();}var _889=_888._trackManager;if(_889){_889.clearTracks();}var defn=_888.getTimeDefinition(),_88a=_888._getOffsettedTE(_888._mapTimeExtent);if(_88a){_88a=_888._getTimeOverlap(defn,_88a);if(_88a){var _88b=_888._filterByTime(_888.graphics,_88a.startTime,_88a.endTime);if(_889){_889.addFeatures(_88b.match);}dojo.forEach(_88b.match,function(_88c){var _88d=_88c._shape;if(!_88c.visible){_88c.show();_88d=_88c._shape;_88d&&_88d._moveToFront();}if(_888._ager&&_88d){_888._repaint(_88c);}});dojo.forEach(_88b.noMatch,function(_88e){if(_88e.visible){_88e.hide();}});}else{this._toggleVisibility(false);}}else{if(_889){_889.addFeatures(_888.graphics);}this._toggleVisibility(true);}if(_889){_889.moveLatestToFront();_889.drawTracks();}if(!_887){_888._fireUpdateEnd();}}});dojo.declare("esri.layers._SelectionMode",[esri.layers._RenderMode],{constructor:function(_88f){this.featureLayer=_88f;this._featureMap={};},initialize:function(map){this.map=map;this._init=true;},propertyChangeHandler:function(type){if(this._init&&type===0){this._applyTimeFilter();}},destroy:function(){this._init=false;},resume:function(){this.propertyChangeHandler(0);}});dojo.declare("esri.layers._SnapshotMode",[esri.layers._RenderMode],{constructor:function(_890){this.featureLayer=_890;this._featureMap={};this._drawFeatures=dojo.hitch(this,this._drawFeatures);this._queryErrorHandler=dojo.hitch(this,this._queryErrorHandler);},initialize:function(map){this.map=map;var _891=this.featureLayer;if(_891._collection){this._applyTimeFilter();}else{this._fetchAll();}this._init=true;},propertyChangeHandler:function(type){if(this._init){if(type){this._fetchAll();}else{this._applyTimeFilter();}}},destroy:function(){this._init=false;},drawFeature:function(_892){var _893=this.featureLayer,_894=_893.objectIdField,oid=_892.attributes[_894];this._addFeatureIIf(oid,_892);this._incRefCount(oid);},resume:function(){this.propertyChangeHandler(0);},refresh:function(){var _895=this.featureLayer;if(_895._collection){_895._fireUpdateStart();_895._refresh(true);_895._fireUpdateEnd();}else{this._fetchAll();}},_getRequestId:function(_896){var id="_"+_896.name+_896.layerId+_896._ulid;return id.replace(/[^a-zA-Z0-9\_]+/g,"_");},_fetchAll:function(){var _897=this.featureLayer;if(_897._collection){return;}_897._fireUpdateStart();this._clearIIf();this._sendRequest();},_sendRequest:function(){var map=this.map,_898=this.featureLayer,_899=_898.getDefinitionExpression();var _89a=new esri.tasks.Query();_89a.outFields=_898._getOutFields();_89a.where=_899||"1=1";_89a.returnGeometry=true;_89a.outSpatialReference=new esri.SpatialReference(map.spatialReference.toJson());_89a.timeExtent=_898.getTimeDefinition();_89a.maxAllowableOffset=_898._maxOffset;if(_898._ts){_89a._ts=(new Date()).getTime();}var _89b;if(_898._usePatch){_89b=this._getRequestId(_898);this._cancelPendingRequest(null,_89b);}_898._task.execute(_89a,this._drawFeatures,this._queryErrorHandler,_89b);},_drawFeatures:function(_89c){this._purgeRequests();var _89d=_89c.features,_89e=this.featureLayer,_89f=_89e.objectIdField,i,len=_89d.length,_8a0,oid;for(i=0;i<len;i++){_8a0=_89d[i];oid=_8a0.attributes[_89f];this._addFeatureIIf(oid,_8a0);this._incRefCount(oid);}this._applyTimeFilter(true);_89e._fireUpdateEnd(null,_89c.exceededTransferLimit?{queryLimitExceeded:true}:null);if(_89c.exceededTransferLimit){_89e.onQueryLimitExceeded();}},_queryErrorHandler:function(err){this._purgeRequests();var _8a1=this.featureLayer;_8a1._errorHandler(err);_8a1._fireUpdateEnd(err);}});dojo.declare("esri.layers._OnDemandMode",[esri.layers._RenderMode],{constructor:function(_8a2){this.featureLayer=_8a2;this._featureMap={};this._queryErrorHandler=dojo.hitch(this,this._queryErrorHandler);},initialize:function(map){this.map=map;this._initialize();this._init=true;},propertyChangeHandler:function(type){if(this._init){if(type<2){this._zoomHandler();}}},destroy:function(){this._disableConnectors();this._init=false;},drawFeature:function(_8a3){var _8a4=this._gridLayer,geom=_8a3.geometry,_8a5=[];if(!geom){return;}_8a5=_8a4.getCellsInExtent((geom.type==="point")?{xmin:geom.x,ymin:geom.y,xmax:geom.x,ymax:geom.y}:geom.getExtent(),false).cells;var _8a6=this._cellMap,i,cell,oid=_8a3.attributes[this.featureLayer.objectIdField],_8a7,row,col;for(i=0;i<_8a5.length;i++){cell=_8a5[i];_8a7=cell.latticeID;row=cell.row;col=cell.col;if(_8a7){cell=(_8a6[_8a7]=(_8a6[_8a7]||cell));}else{_8a6[row]=_8a6[row]||{};cell=(_8a6[row][col]=(_8a6[row][col]||cell));}cell.features=cell.features||[];cell.features.push(_8a3);this._addFeatureIIf(oid,_8a3);this._incRefCount(oid);}},suspend:function(){if(!this._init){return;}this._disableConnectors();},resume:function(){if(!this._init){return;}this._enableConnectors();this._zoomHandler();},refresh:function(){this._zoomHandler();},_initialize:function(){var map=this.map,_8a8=this.featureLayer;var _8a9=_8a8._srInfo;this._gridLayer=new esri.layers._GridLayout(new esri.geometry.Point(_8a9?_8a9.valid[0]:map.extent.xmin,map.extent.ymax,map.spatialReference),{width:_8a8._tileWidth,height:_8a8._tileHeight},{width:map.width,height:map.height},_8a9);this._ioQueue=[];if(!_8a8.suspended){this._zoomHandler();this._enableConnectors();}},_enableConnectors:function(){var map=this.map;this._zoomConnect=dojo.connect(map,"onZoomEnd",this,this._zoomHandler);this._panConnect=dojo.connect(map,"onPanEnd",this,this._panHandler);this._resizeConnect=dojo.connect(map,"onResize",this,this._panHandler);},_disableConnectors:function(){dojo.disconnect(this._zoomConnect);dojo.disconnect(this._panConnect);dojo.disconnect(this._resizeConnect);},_zoomHandler:function(){this._processIOQueue(true);var _8aa=this.featureLayer,map=this.map;if(_8aa.suspended){return;}_8aa._fireUpdateStart();this._clearIIf();var _8ab=_8aa._trackManager;if(_8ab){_8ab.clearTracks();}this._cellMap={};this._gridLayer.setResolution(map.extent);this._sendRequest();},_panHandler:function(){this.featureLayer._fireUpdateStart();this._sendRequest(this.featureLayer._resized&&arguments[0]);},_getRequestId:function(_8ac,cell){var id="_"+_8ac.name+_8ac.layerId+_8ac._ulid+"_"+cell.resolution+"_"+(cell.latticeID||(cell.row+"_"+cell.col));return id.replace(/[^a-zA-Z0-9\_]+/g,"_");},_sendRequest:function(_8ad){this._exceeds=false;var _8ae=this.featureLayer,map=this.map,_8af=_8ad||map.extent,_8b0=this._gridLayer.getCellsInExtent(_8af,_8ae.latticeTiling),_8b1=_8b0.cells;if(!_8ae.isEditable()){var _8b2=this._cellMap;_8b1=dojo.filter(_8b1,function(cell){if(cell.lattice){if(_8b2[cell.latticeID]){return false;}}else{if(_8b2[cell.row]&&_8b2[cell.row][cell.col]){return false;}}return true;});}var _8b3=_8ae._getOutFields(),_8b4=_8ae.getDefinitionExpression(),time=_8ae._getOffsettedTE(_8ae._mapTimeExtent),_8b5=_8ae._usePatch,_8b6=this._ioQueue,i,self=this,func=this._drawFeatures,cell,_8b7,_8b8;this._pending=this._pending||0;for(i=0;i<_8b1.length;i++){cell=_8b1[i];_8b7=new esri.tasks.Query();_8b7.geometry=cell.extent||cell.lattice;_8b7.outFields=_8b3;_8b7.where=_8b4;if(_8ae.latticeTiling&&cell.extent){_8b7.spatialRelationship=esri.tasks.Query.SPATIAL_REL_CONTAINS;}_8b7.returnGeometry=true;_8b7.timeExtent=time;_8b7.maxAllowableOffset=_8ae._maxOffset;if(_8ae._ts){_8b7._ts=(new Date()).getTime();}_8b8=null;if(_8b5){_8b8=this._getRequestId(_8ae,cell);if(this._isPending(_8b8)){continue;}}this._pending++;_8b6.push(_8ae._task.execute(_8b7,function(){var _8b9=cell;return function(_8ba){func.apply(self,[_8ba,_8b9]);};}.call(this),this._queryErrorHandler,_8b8));}this._removeOldCells(_8af);this._endCheck();},_drawFeatures:function(_8bb,cell){this._exceeds=this._exceeds||_8bb.exceededTransferLimit;this._finalizeIO();var _8bc=this.featureLayer,map=this.map,_8bd=map.extent,_8be=cell.extent,row=cell.row,col=cell.col,_8bf=_8bc.objectIdField,_8c0=_8bb.features,_8c1=this._gridLayer,_8c2=this._cellMap,i,len,_8c3=cell.latticeID,_8c4=_8c3?_8c2[_8c3]:(_8c2[row]&&_8c2[row][col]);if((cell.resolution!=_8c1._resolution)||(_8c3?(_8c3!==_8c1.getLatticeID(_8bd)):(!_8c1.intersects(_8be,_8bd)))){if(_8c4){this._removeCell(row,col,_8c3);}}else{if(_8c4){this._updateCell(_8c4,_8c0);}else{cell.features=_8c0;if(_8c3){_8c2[_8c3]=cell;}else{_8c2[row]=_8c2[row]||{};_8c2[row][col]=cell;}len=_8c0.length;for(i=0;i<len;i++){var _8c5=_8c0[i];var oid=_8c5.attributes[_8bf];this._addFeatureIIf(oid,_8c5);this._incRefCount(oid);}}}this._endCheck();},_queryErrorHandler:function(err){this._finalizeIO();this.featureLayer._errorHandler(err);this._endCheck(true);},_finalizeIO:function(){this._purgeRequests();this._pending--;},_endCheck:function(_8c6){if(this._pending===0){this._processIOQueue();var _8c7=this.featureLayer,_8c8=_8c7._trackManager;if(_8c8){_8c8.clearTracks();_8c8.addFeatures(_8c7.graphics);if(_8c7._ager){dojo.forEach(_8c7.graphics,function(_8c9){if(_8c9._shape){_8c7._repaint(_8c9);}});}_8c8.moveLatestToFront();_8c8.drawTracks();}this.featureLayer._fireUpdateEnd(_8c6&&new Error("FeatureLayer: "+esri.bundle.layers.FeatureLayer.updateError),this._exceeds?{queryLimitExceeded:true}:null);if(this._exceeds){_8c7.onQueryLimitExceeded();}}},_processIOQueue:function(_8ca){this._ioQueue=dojo.filter(this._ioQueue,function(dfd){var keep=dfd.fired>-1?false:true;return keep;});if(_8ca){dojo.forEach(this._ioQueue,this._cancelPendingRequest);}},_removeOldCells:function(_8cb){var _8cc=this._cellMap,_8cd=this._gridLayer,_8ce,_8cf;for(_8ce in _8cc){if(_8cc[_8ce]){var row=_8cc[_8ce],_8d0=row.latticeID,_8d1=0,_8d2=0;if(_8d0){_8d1++;if(_8d0!==_8cd.getLatticeID(_8cb)){this._removeCell(null,null,_8d0);_8d2++;}}else{for(_8cf in row){if(row[_8cf]){_8d1++;var _8d3=row[_8cf].extent;if(!_8cd.intersects(_8d3,_8cb)){this._removeCell(_8ce,_8cf);_8d2++;}}}}if(_8d2===_8d1){delete _8cc[_8ce];}}}},_updateCell:function(cell,_8d4){var _8d5=this.featureLayer,_8d6=_8d5.objectIdField,_8d7=_8d5._selectedFeatures,i,len=_8d4.length;cell.features=cell.features||[];for(i=0;i<len;i++){var _8d8=_8d4[i];var oid=_8d8.attributes[_8d6];var _8d9=this._addFeatureIIf(oid,_8d8);if(_8d9===_8d8){this._incRefCount(oid);cell.features.push(_8d9);}else{if(!(oid in _8d7)){_8d9.setGeometry(_8d8.geometry);_8d9.setAttributes(_8d8.attributes);}}}},_removeCell:function(row,col,_8da){var _8db=this._cellMap,_8dc=this.featureLayer,_8dd=_8dc.objectIdField;var cell=_8da?_8db[_8da]:(_8db[row]&&_8db[row][col]);if(cell){if(_8da){delete _8db[_8da];}else{delete _8db[row][col];}var _8de=cell.features,i;for(i=0;i<_8de.length;i++){var _8df=_8de[i];var oid=_8df.attributes[_8dd];this._decRefCount(oid);if(oid in _8dc._selectedFeatures){continue;}this._removeFeatureIIf(oid);}}}});dojo.declare("esri.layers._GridLayout",null,{constructor:function(_8e0,_8e1,_8e2,_8e3){this.origin=_8e0;this.cellWidth=_8e1.width;this.cellHeight=_8e1.height;this.mapWidth=_8e2.width;this.mapHeight=_8e2.height;this.srInfo=_8e3;},setResolution:function(_8e4){this._resolution=(_8e4.xmax-_8e4.xmin)/this.mapWidth;if(this.srInfo){var _8e5=Math.round((2*this.srInfo.valid[1])/this._resolution),_8e6=Math.round(_8e5/this.cellWidth);this._frameStats=[_8e6,0,_8e6-1];}},getCellCoordinates:function(_8e7){var res=this._resolution,_8e8=this.origin;return {row:Math.floor((_8e8.y-_8e7.y)/(this.cellHeight*res)),col:Math.floor((_8e7.x-_8e8.x)/(this.cellWidth*res))};},normalize:function(col){var _8e9=this._frameStats;if(_8e9){var _8ea=_8e9[0],m180=_8e9[1],p180=_8e9[2];if(col<m180){col=col%_8ea;col=col<m180?col+_8ea:col;}else{if(col>p180){col=col%_8ea;}}}return col;},intersects:function(_8eb,_8ec){var _8ed=this.srInfo;if(_8ed){return dojo.some(_8ec._getParts(_8ed),function(_8ee){return _8eb.intersects(_8ee.extent);});}else{return _8eb.intersects(_8ec);}},getCellExtent:function(row,col){var res=this._resolution,_8ef=this.origin,_8f0=this.cellWidth,_8f1=this.cellHeight;return new esri.geometry.Extent((col*_8f0*res)+_8ef.x,_8ef.y-((row+1)*_8f1*res),((col+1)*_8f0*res)+_8ef.x,_8ef.y-(row*_8f1*res),new esri.SpatialReference(_8ef.spatialReference.toJson()));},getLatticeID:function(_8f2){var _8f3=this.getCellCoordinates({x:_8f2.xmin,y:_8f2.ymax}),_8f4=this.getCellCoordinates({x:_8f2.xmax,y:_8f2.ymin}),_8f5=_8f3.row,_8f6=_8f4.row,_8f7=this.normalize(_8f3.col),_8f8=this.normalize(_8f4.col);return _8f5+"_"+_8f6+"_"+_8f7+"_"+_8f8;},sorter:function(a,b){return (a<b)?-1:1;},getCellsInExtent:function(_8f9,_8fa){var _8fb=this.getCellCoordinates({x:_8f9.xmin,y:_8f9.ymax}),_8fc=this.getCellCoordinates({x:_8f9.xmax,y:_8f9.ymin}),_8fd=_8fb.row,_8fe=_8fc.row,_8ff=_8fb.col,_900=_8fc.col,_901=[],i,j,nj,_902=[],_903=[],len,xmin,xmax,ymin,ymax,_904=[],_905,_906;for(i=_8fd;i<=_8fe;i++){for(j=_8ff;j<=_900;j++){nj=this.normalize(j);_8f9=this.getCellExtent(i,nj);_901.push({row:i,col:nj,extent:_8f9,resolution:this._resolution});if(_8fa){_902.push(_8f9.xmin,_8f9.xmax);_903.push(_8f9.ymin,_8f9.ymax);}}}_8ff=this.normalize(_8ff);_900=this.normalize(_900);_902.sort(this.sorter);_903.sort(this.sorter);len=_902.length;for(i=len-1;i>=0;i--){if(i<(len-1)){if(_902[i]===_902[i+1]){_902.splice(i,1);}}}len=_903.length;for(i=len-1;i>=0;i--){if(i<(len-1)){if(_903[i]===_903[i+1]){_903.splice(i,1);}}}if(_902.length&&_903.length){xmin=_902[0];xmax=_902[_902.length-1];ymin=_903[0];ymax=_903[_903.length-1];len=_902.length;for(i=0;i<len;i++){_904.push([[_902[i],ymax],[_902[i],ymin]]);}len=_903.length;for(i=0;i<len;i++){_904.push([[xmin,_903[i]],[xmax,_903[i]]]);}_905=new esri.geometry.Polyline({paths:_904,spatialReference:this.origin.spatialReference.toJson()});_906=_8fd+"_"+_8fe+"_"+_8ff+"_"+_900;_901.push({latticeID:_906,lattice:_905,resolution:this._resolution});}return {minRow:_8fd,maxRow:_8fe,minCol:_8ff,maxCol:_900,cells:_901};}});dojo.declare("esri.layers._TrackManager",null,{constructor:function(_907){this.layer=_907;this.trackMap={};},initialize:function(map){this.map=map;var _908=this.layer,_909=_908.renderer.trackRenderer;if(_909&&(_908.geometryType==="esriGeometryPoint")){var _90a=(this.container=new esri.layers._GraphicsLayer({id:_908.id+"_tracks",_child:true}));_90a._setMap(map,_908._div);_90a.setRenderer(_909);}},addFeatures:function(_90b){var tkid,_90c=this.trackMap,_90d=this.layer,_90e=_90d._trackIdField;dojo.forEach(_90b,function(_90f){var _910=_90f.attributes;tkid=_910[_90e];var ary=(_90c[tkid]=(_90c[tkid]||[]));ary.push(_90f);});var _911=_90d._startTimeField,_912=_90d.objectIdField;var _913=function(a,b){var _914=a.attributes[_911],_915=b.attributes[_911];if(_914===_915){return (a.attributes[_912]<b.attributes[_912])?-1:1;}else{return (_914<_915)?-1:1;}};for(tkid in _90c){_90c[tkid].sort(_913);}},drawTracks:function(){var _916=this.container;if(!_916){return;}var _917=this.trackMap,sr=this.map.spatialReference,tkid,ary,path,i,_918,_919=this.layer._trackIdField,_91a;for(tkid in _917){ary=_917[tkid];path=[];for(i=ary.length-1;i>=0;i--){_918=ary[i].geometry;if(_918){path.push([_918.x,_918.y]);}}_91a={};_91a[_919]=tkid;if(path.length>0){_916.add(new esri.Graphic(new esri.geometry.Polyline({paths:[path],spatialReference:sr}),null,_91a));}}},moveLatestToFront:function(){dojo.forEach(this.getLatestObservations(),function(_91b){var _91c=_91b._shape;_91c&&_91c._moveToFront();this._repaint(_91b,null,true);},this.layer);},getLatestObservations:function(){var _91d=[];if(!this.layer.renderer.latestObservationRenderer){return _91d;}var _91e=this.trackMap,tkid;for(tkid in _91e){var ary=_91e[tkid];_91d.push(ary[ary.length-1]);}return _91d;},clearTracks:function(){var _91f=this.getLatestObservations();this.trackMap={};var _920=this.container;if(_920){_920.clear();}dojo.forEach(_91f,function(_921){this._repaint(_921,null,true);},this.layer);},isLatestObservation:function(_922){var _923=this.layer._trackIdField;var _924=this.trackMap[_922.attributes[_923]];if(_924){return (_924[_924.length-1]===_922);}return false;},destroy:function(){var _925=this.container;if(_925){_925.clear();_925._unsetMap(this.map,this.layer._div);this.container=null;}this.map=null;this.layer=null;this.trackMap=null;}});});},"dojox/charting/plot2d/Bubble":function(){define("dojox/charting/plot2d/Bubble",["dojo/_base/lang","dojo/_base/declare","dojo/_base/array","./Base","./common","dojox/lang/functional","dojox/lang/functional/reversed","dojox/lang/utils","dojox/gfx/fx"],function(lang,_926,arr,Base,dc,df,dfr,du,fx){var _927=dfr.lambda("item.purgeGroup()");return _926("dojox.charting.plot2d.Bubble",Base,{defaultParams:{hAxis:"x",vAxis:"y",animate:null},optionalParams:{stroke:{},outline:{},shadow:{},fill:{},font:"",fontColor:""},constructor:function(_928,_929){this.opt=lang.clone(this.defaultParams);du.updateWithObject(this.opt,_929);du.updateWithPattern(this.opt,_929,this.optionalParams);this.series=[];this.hAxis=this.opt.hAxis;this.vAxis=this.opt.vAxis;this.animate=this.opt.animate;},render:function(dim,_92a){if(this.zoom&&!this.isDataDirty()){return this.performZoom(dim,_92a);}this.resetEvents();this.dirty=this.isDirty();if(this.dirty){arr.forEach(this.series,_927);this._eventSeries={};this.cleanGroup();var s=this.group;df.forEachRev(this.series,function(item){item.cleanGroup(s);});}var t=this.chart.theme,ht=this._hScaler.scaler.getTransformerFromModel(this._hScaler),vt=this._vScaler.scaler.getTransformerFromModel(this._vScaler),_92b=this.events();for(var i=this.series.length-1;i>=0;--i){var run=this.series[i];if(!this.dirty&&!run.dirty){t.skip();this._reconnectEvents(run.name);continue;}run.cleanGroup();if(!run.data.length){run.dirty=false;t.skip();continue;}if(typeof run.data[0]=="number"){console.warn("dojox.charting.plot2d.Bubble: the data in the following series cannot be rendered as a bubble chart; ",run);continue;}var _92c=t.next("circle",[this.opt,run]),s=run.group,_92d=arr.map(run.data,function(v,i){return v?{x:ht(v.x)+_92a.l,y:dim.height-_92a.b-vt(v.y),radius:this._vScaler.bounds.scale*(v.size/2)}:null;},this);var _92e=null,_92f=null,_930=null;if(_92c.series.shadow){_930=arr.map(_92d,function(item){if(item!==null){var _931=t.addMixin(_92c,"circle",item,true),_932=_931.series.shadow;var _933=s.createCircle({cx:item.x+_932.dx,cy:item.y+_932.dy,r:item.radius}).setStroke(_932).setFill(_932.color);if(this.animate){this._animateBubble(_933,dim.height-_92a.b,item.radius);}return _933;}return null;},this);if(_930.length){run.dyn.shadow=_930[_930.length-1].getStroke();}}if(_92c.series.outline){_92f=arr.map(_92d,function(item){if(item!==null){var _934=t.addMixin(_92c,"circle",item,true),_935=dc.makeStroke(_934.series.outline);_935.width=2*_935.width+_92c.series.stroke.width;var _936=s.createCircle({cx:item.x,cy:item.y,r:item.radius}).setStroke(_935);if(this.animate){this._animateBubble(_936,dim.height-_92a.b,item.radius);}return _936;}return null;},this);if(_92f.length){run.dyn.outline=_92f[_92f.length-1].getStroke();}}_92e=arr.map(_92d,function(item){if(item!==null){var _937=t.addMixin(_92c,"circle",item,true),rect={x:item.x-item.radius,y:item.y-item.radius,width:2*item.radius,height:2*item.radius};var _938=this._plotFill(_937.series.fill,dim,_92a);_938=this._shapeFill(_938,rect);var _939=s.createCircle({cx:item.x,cy:item.y,r:item.radius}).setFill(_938).setStroke(_937.series.stroke);if(this.animate){this._animateBubble(_939,dim.height-_92a.b,item.radius);}return _939;}return null;},this);if(_92e.length){run.dyn.fill=_92e[_92e.length-1].getFill();run.dyn.stroke=_92e[_92e.length-1].getStroke();}if(_92b){var _93a=new Array(_92e.length);arr.forEach(_92e,function(s,i){if(s!==null){var o={element:"circle",index:i,run:run,shape:s,outline:_92f&&_92f[i]||null,shadow:_930&&_930[i]||null,x:run.data[i].x,y:run.data[i].y,r:run.data[i].size/2,cx:_92d[i].x,cy:_92d[i].y,cr:_92d[i].radius};this._connectEvents(o);_93a[i]=o;}},this);this._eventSeries[run.name]=_93a;}else{delete this._eventSeries[run.name];}run.dirty=false;}this.dirty=false;return this;},_animateBubble:function(_93b,_93c,size){fx.animateTransform(lang.delegate({shape:_93b,duration:1200,transform:[{name:"translate",start:[0,_93c],end:[0,0]},{name:"scale",start:[0,1/size],end:[1,1]},{name:"original"}]},this.animate)).play();}});});},"*noref":1}});require(["dojo/i18n"],function(i18n){i18n._preloadLocalizations("esri/arcgis/nls/utils",[]);});define("esri/arcgis/utils",["dijit","dojo","dojox","dojo/require!esri/map,esri/layers/agsimageservice,esri/layers/osm,esri/layers/FeatureLayer,esri/layers/KMLLayer,esri/layers/wms,esri/virtualearth/VETiledLayer,esri/tasks/geometry,dojo/DeferredList,esri/dijit/Popup,esri/arcgis/csv"],function(_93d,dojo,_93e){dojo.provide("esri.arcgis.utils");dojo.require("esri.map");dojo.require("esri.layers.agsimageservice");dojo.require("esri.layers.osm");dojo.require("esri.layers.FeatureLayer");dojo.require("esri.layers.KMLLayer");dojo.require("esri.layers.wms");dojo.require("esri.virtualearth.VETiledLayer");dojo.require("esri.tasks.geometry");dojo.require("dojo.DeferredList");dojo.require("esri.dijit.Popup");dojo.require("esri.arcgis.csv");(function(){var EAU=esri.arcgis.utils;EAU.arcgisUrl=location.protocol+"//www.arcgis.com/sharing/rest/content/items";String.prototype.endsWith=function(str){return (this.match(str+"$")==str);};EAU.getItem=function(_93f){if(EAU._arcgisUrl&&EAU._arcgisUrl.length>0){EAU.arcgisUrl=EAU._arcgisUrl;}var url=EAU.arcgisUrl+"/"+_93f;var _940={},_941=new dojo.Deferred();esri.request({url:url,content:{f:"json"},callbackParamName:"callback",load:function(_942){_940.item=_942;esri.request({url:url+"/data",content:{f:"json"},callbackParamName:"callback",load:function(_943){_940.itemData=_943;_941.callback(_940);},error:function(_944){_941.errback(_944);}});},error:function(_945){_941.errback(_945);}});return _941;};EAU.createMap=function(arg1,_946,_947){var _948=new dojo.Deferred();_947=_947||{};var _949=_947.infoTemplateClass;_947._clazz=(_949&&dojo.getObject(_949))||esri.dijit.PopupTemplate;if(dojo.isString(arg1)){EAU.getItem(arg1).addCallback(function(_94a){EAU._getItemProps(_94a,_947).addCallback(function(_94b){EAU._getLayers(_94b.itemData,_947).addCallback(dojo.hitch(null,EAU._preCreateMap,_94b,_946,_947,_948));});}).addErrback(dojo.hitch(_948,_948.errback));}else{EAU._getItemProps(arg1,_947).addCallback(function(_94c){EAU._getLayers(_94c.itemData,_947).addCallback(dojo.hitch(null,EAU._preCreateMap,_94c,_946,_947,_948));});}return _948;};EAU._arcgisUrl=null;EAU._getItemProps=function(_94d,_94e){var _94f=new dojo.Deferred();var _950=_94d.itemData;var _951=[];var _952=[];dojo.forEach(_950.operationalLayers,function(_953){if(_953.itemId&&!_953.type){if(_953.url.indexOf("/FeatureServer")>-1){_952.push(_953);_951.push(EAU._getItemData(_953));}else{if(!_953.layers&&_953.url.indexOf("/MapServer")>-1&&_953.url.indexOf("/MapServer/")===-1){_952.push(_953);_951.push(EAU._getItemData(_953));}}}});if(_951.length>0){var _954=new dojo.DeferredList(_951);_954.addCallback(function(_955){dojo.forEach(_952,function(_956,i){var _957=_955[i][1];if(_957&&_957.layers){if(_956.url.indexOf("/FeatureServer")>-1){dojo.forEach(_957.layers,function(_958){if(_956.url.endsWith("/FeatureServer/"+_958.id)){_956.itemProperties=_958;EAU._processFSItemProperties(_956);}});}else{_956.layers=_957.layers;}}});_94f.callback(_94d);});}else{_94f.callback(_94d);}return _94f;};EAU._getItemData=function(_959){var url=EAU.arcgisUrl+"/"+_959.itemId+"/data";var _95a=esri.request({url:url,content:{f:"json"},callbackParamName:"callback"});return _95a;};EAU._processFSItemProperties=function(_95b){if(_95b.itemProperties.layerDefinition){if(_95b.layerDefinition){if(!_95b.layerDefinition.drawingInfo){_95b.layerDefinition.drawingInfo=_95b.itemProperties.layerDefinition.drawingInfo;}if(!_95b.layerDefinition.definitionExpression){_95b.layerDefinition.definitionExpression=_95b.itemProperties.layerDefinition.definitionExpression;}if(_95b.layerDefinition.minScale===null){_95b.layerDefinition.minScale=_95b.itemProperties.layerDefinition.minScale;}if(_95b.layerDefinition.maxScale===null){_95b.layerDefinition.maxScale=_95b.itemProperties.layerDefinition.maxScale;}}else{_95b.layerDefinition=_95b.itemProperties.layerDefinition;}}if(_95b.itemProperties.popupInfo&&!_95b.popupInfo&&!_95b.disablePopup){_95b.popupInfo=_95b.itemProperties.popupInfo;}};EAU._getLayers=function(_95c,_95d){var _95e=[];var _95f=[];var _960=[];var _961=new dojo.Deferred();dojo.forEach(_95c.operationalLayers,function(_962,_963){if(_962.featureCollection){dojo.forEach(_962.featureCollection.layers,function(_964,idx){var _965=true;if(_962.visibleLayers){if(dojo.indexOf(_962.visibleLayers,idx)==-1){_965=false;}}_964.visibility=(_962.visibility&&_965);_964.opacity=_962.opacity;_964.id=(_962.id||("operational"+_963))+"_"+idx;_960.push(_964);},this);}else{_960.push(_962);}});dojo.forEach(_95c.baseMap.baseMapLayers,function(_966,_967){_966.baseMapLayer=true;_966.id=_966.id||("base"+_967);_95e.push(_966);});dojo.forEach(_960,function(_968,_969){_968.id=_968.id||("operational"+_969);_95e.push(_968);});dojo.forEach(_95e,function(_96a){if(_96a.url&&!_96a.type){_96a.deferredsPos=_95f.length;_96a.errors=[];_95f.push(EAU._getServiceInfo(_96a.url,_96a.errors));}else{if(_96a.url&&_96a.type=="CSV"){_96a.deferredsPos=_95f.length;_95f.push(esri.arcgis.csv.buildCSVFeatureCollection(_96a));}}});if(_95f.length==0){var _96b=EAU._getMapSR(_95e);_95e=EAU._buildLayerObjects(_95e,_95d,_96b);_961.callback(_95e);}else{var _96c=new dojo.DeferredList(_95f);_96c.addCallback(function(_96d){EAU._preBuildLayerObjects(_96d,_95e,_95d,_95f,_961);});}return _961;};EAU._preBuildLayerObjects=function(_96e,_96f,_970,_971,_972){dojo.forEach(_96f,function(_973,_974){if(_973.url&&!_973.type){_973.resourceInfo=_96e[_973.deferredsPos][1];delete _973.deferredsPos;}else{if(_973.url&&_973.type=="CSV"){_973.featureCollection=_971[_973.deferredsPos].results[0];delete _973.deferredsPos;}}});var _975=EAU._getMapSR(_96f);var _976=[];var _977=new dojo.Deferred();dojo.forEach(_96f,function(_978){if(_978.url&&_978.type=="CSV"){_978.deferredsPos=_976.length;_976.push(esri.arcgis.csv.projectFeatureCollection(_978.featureCollection,_975));}});if(_976.length==0){_96f=EAU._buildLayerObjects(_96f,_970,_975);_972.callback(_96f);}else{var _979=new dojo.DeferredList(_976);_979.addCallback(function(){dojo.forEach(_96f,function(_97a){if(_97a.url&&_97a.type=="CSV"){_97a.featureCollection=_976[_97a.deferredsPos].results[0];delete _97a.deferredsPos;}});_96f=EAU._buildLayerObjects(_96f,_970,_975);_972.callback(_96f);});}};EAU._buildLayerObjects=function(_97b,_97c,_97d){dojo.forEach(_97b,function(_97e,_97f){if(_97e.url&&!_97e.type){if(_97f===0||_97b[0].layerObject){_97e.layerObject=EAU._initLayer(_97e,_97b,_97c,_97d);}}else{if(_97e.url&&_97e.type=="CSV"){_97e.layerObject=EAU._initLayer(_97e,_97b,_97c,_97d);}else{_97e.layerObject=EAU._initLayer(_97e,_97b,_97c,_97d);}}});var _980=dojo.filter(_97b,function(lyr){return !lyr.isReference;});var _981=dojo.filter(_97b,function(lyr){return !!lyr.isReference;});_97b=_980.concat(_981);return _97b;};EAU._preCreateMap=function(_982,_983,_984,_985,_986){try{var _987=_984.mapOptions||{};_984.mapOptions=_987;var card=_982.item;var _988=[];dojo.forEach(_986,function(_989){if(dojo.isArray(_989.layerObject)){dojo.forEach(_989.layerObject,function(l){_988.push(l);});}else{_988.push(_989.layerObject);}});if(!_988[0]){_985.errback(new Error(esri.bundle.arcgis.utils.baseLayerError));return;}_988=dojo.filter(_988,esri._isDefined);if(card){if(card.extent){if(!_987.extent){var _98a=new esri.geometry.Extent(card.extent[0][0],card.extent[0][1],card.extent[1][0],card.extent[1][1],new esri.SpatialReference({wkid:4326}));var _98b=_988[0].spatialReference;if(_98b.wkid===4326){_987.extent=_98a;EAU._createMap(_988,_986,_982,_983,_984,_985);}else{if(_98b.wkid===102100||_98b.wkid===102113||_98b.wkid===3857){_98a.xmin=Math.max(_98a.xmin,-180);_98a.xmax=Math.min(_98a.xmax,180);_98a.ymin=Math.max(_98a.ymin,-89.99);_98a.ymax=Math.min(_98a.ymax,89.99);_987.extent=esri.geometry.geographicToWebMercator(_98a);EAU._createMap(_988,_986,_982,_983,_984,_985);}else{if(_984.geometryServiceURL||esri.config.defaults.geometryService){var gs;if(_984.geometryServiceURL){gs=new esri.tasks.GeometryService(_984.geometryServiceURL);}else{gs=esri.config.defaults.geometryService;}gs.project([_98a],_98b,function(_98c){var _98d=_98c[0];_987.extent=_987.extent||_98d;EAU._createMap(_988,_986,_982,_983,_984,_985);});}else{_985.errback(new Error(esri.bundle.arcgis.utils.geometryServiceError));}}}}else{EAU._createMap(_988,_986,_982,_983,_984,_985);}}else{EAU._createMap(_988,_986,_982,_983,_984,_985);}}else{EAU._createMap(_988,_986,_982,_983,_984,_985);}}catch(err){_985.errback(err);}};EAU._getMapSR=function(_98e){var _98f=null;var _990=_98e[0];if(_990.url&&!_990.type){if(_990.resourceInfo.spatialReference){_98f=new esri.SpatialReference();if(_990.resourceInfo.spatialReference.wkid){_98f.wkid=_990.resourceInfo.spatialReference.wkid;}if(_990.resourceInfo.spatialReference.wkt){_98f.wkt=_990.resourceInfo.spatialReference.wkt;}}}else{if(_990.type.indexOf("BingMaps")>-1||_990.type=="OpenStreetMap"){_98f=new esri.SpatialReference({wkid:102100});}else{if(_990.type=="WMS"){_98f=new esri.SpatialReference({wkid:_990.spatialReferences[0]});}}}return _98f;};EAU._createMap=function(_991,_992,_993,_994,_995,_996){var _997=(_995.mapOptions||{}),_998,_999;if(!_997.infoWindow){_998=new esri.dijit.Popup(null,dojo.create("div"));_997.infoWindow=_998;}if(!esri._isDefined(_997.showInfoWindowOnClick)){_997.showInfoWindowOnClick=false;}var map=new esri.Map(_994,_997);if(_995.ignorePopups){dojo.forEach(_991,function(_99a){delete _99a.infoTemplate;});}if(!(_995.ignorePopups||_995.disableClickBehavior)){_999=dojo.connect(map,"onClick",EAU._showPopup);}dojo.connect(map,"onLayersAddResult",EAU._onLayersAddResult);map.addLayers(_991);if(!_995.ignorePopups){EAU._addSelectionLayers(_991,map,_995._clazz);}var _99b=[];dojo.forEach(_992,function(_99c){_99b=_99b.concat(_99c.errors);},this);_996.callback({map:map,itemInfo:_993,errors:_99b,clickEventHandle:_999,clickEventListener:EAU._showPopup});};EAU._addSelectionLayers=function(_99d,map,_99e){var _99f=[];dojo.forEach(_99d,function(_9a0){var _9a1=_9a0.__popups;if(_9a1&&_9a1.length>1&&_9a0.version>=10){_9a0.__deferredsPos=_99f.length;_99f.push(EAU._getLayersInfo(_9a0));}});var _9a2=[];if(_99f.length>0){var _9a3=new dojo.DeferredList(_99f);_9a3.addCallback(function(_9a4){dojo.forEach(_99d,function(_9a5){if(_9a5.__popups&&_9a5.__popups.length>0){if(_9a5.__deferredsPos||_9a5.__deferredsPos===0){var _9a6=_9a4[_9a5.__deferredsPos][1];_9a2=_9a2.concat(EAU._createSelectionFeatureLayers(_9a5,_9a6.layers,_99e,map));delete _9a5.__deferredsPos;}else{_9a2=_9a2.concat(EAU._createSelectionFeatureLayers(_9a5,null,_99e,map));}}});map.addLayers(_9a2);});}else{dojo.forEach(_99d,function(_9a7){if(_9a7.__popups&&_9a7.__popups.length>0){_9a2=_9a2.concat(EAU._createSelectionFeatureLayers(_9a7,null,_99e,map));}});map.addLayers(_9a2);}};EAU._createSelectionFeatureLayers=function(_9a8,_9a9,_9aa,map){var url=_9a8.url;var _9ab=_9a8.__popups;var ids=_9a8.__popupIds;var urls=_9a8.__popupUrls;var _9ac=_9a8.__resourceInfo;var _9ad=[];dojo.forEach(_9ab,function(_9ae,_9af){var i,_9b0=null;if(_9a9){for(i=0;i<_9a9.length;i++){if(_9a9[i].id===ids[_9af]){_9b0=_9a9[i];break;}}}var _9b1=url+"/"+ids[_9af];if(urls[_9af].length){_9b1=urls[_9af];}var _9b2=new esri.layers.FeatureLayer(EAU._checkUrl(_9b1),{id:_9a8.id+"_"+ids[_9af],outFields:["*"],mode:esri.layers.FeatureLayer.MODE_SELECTION,infoTemplate:_9ae&&new _9aa(_9ae),drawMode:false,visible:_9a8.visible,resourceInfo:_9b0,autoGeneralize:true});if(_9b2.loaded){EAU._updateLayerScaleInfo(_9ac.layers,_9b2);}else{dojo.connect(_9b2,"onLoad",function(_9b3){EAU._updateLayerScaleInfo(_9ac.layers,_9b3);});}_9ad.push(_9b2);});if(_9ad.length>0){var _9b4=function(_9b5,_9b6){dojo.forEach(_9b5,function(_9b7){if(_9b6){_9b7.show();}else{_9b7.hide();}});};dojo.connect(_9a8,"onVisibilityChange",dojo.hitch(this,_9b4,_9ad));var _9b8=function(_9b9,_9ba,_9bb){if(_9b9.id===_9bb.id){dojo.forEach(_9ba,function(_9bc){map.removeLayer(_9bc);});}};dojo.connect(map,"onLayerRemove",dojo.hitch(this,_9b8,_9a8,_9ad));}delete _9a8.__popups;delete _9a8.__popupIds;delete _9a8.__popupUrls;delete _9a8.__resourceInfo;return _9ad;};EAU._getServiceInfo=function(url,_9bd){var url2=EAU._checkUrl(url);return esri.request({url:url2,content:{f:"json"},callbackParamName:"callback",error:function(_9be,io){if(_9be.message){_9be.message+=" [url:"+url2+"]";}else{_9be.message="[url:"+url2+"]";}_9bd.push(_9be);esri.config.defaults.io.errorHandler(_9be,io);}});};EAU._getLayersInfo=function(_9bf){return esri.request({url:EAU._checkUrl(_9bf.url+"/layers"),content:{f:"json"},callbackParamName:"callback",error:function(){}});};EAU._initLayer=function(_9c0,_9c1,_9c2,_9c3){var _9c4,_9c5=_9c2._clazz;if(_9c0.type==="OpenStreetMap"){_9c4=new esri.layers.OpenStreetMapLayer({id:_9c0.id});}else{if(_9c0.type==="WMS"){var _9c6=[];var _9c7=[];dojo.forEach(_9c0.layers,function(_9c8){_9c7.push(new esri.layers.WMSLayerInfo({name:_9c8.name,title:_9c8.title,legendURL:_9c8.legendURL}));_9c6.push(_9c8.name);},this);if(_9c0.visibleLayers){_9c6=_9c0.visibleLayers;}var _9c9=new esri.geometry.Extent(_9c0.extent[0][0],_9c0.extent[0][1],_9c0.extent[1][0],_9c0.extent[1][1],new esri.SpatialReference({wkid:4326}));var _9ca={extent:_9c9,layerInfos:_9c7,version:_9c0.version,maxWidth:_9c0.maxWidth,maxHeight:_9c0.maxHeight,getMapUrl:_9c0.mapUrl,spatialReferences:_9c0.spatialReferences,title:_9c0.title,copyright:_9c0.copyright};_9c4=new esri.layers.WMSLayer(_9c0.url,{id:_9c0.id,visibleLayers:_9c6,format:"png",transparent:_9c0.baseMapLayer?false:true,opacity:_9c0.opacity,visible:(_9c0.visibility!==null)?_9c0.visibility:true,resourceInfo:_9ca});_9c4.spatialReference.wkid=_9ca.spatialReferences[0];}else{if(_9c0.type==="KML"){_9c4=new esri.layers.KMLLayer(_9c0.url,{id:_9c0.id,visible:(_9c0.visibility!==null)?_9c0.visibility:true,outSR:_9c3});dojo.connect(_9c4,"onLoad",function(){var _9cb=function(_9cc){dojo.forEach(_9cc,function(_9cd){if(_9cd.declaredClass==="esri.layers.FeatureLayer"||_9cd.declaredClass==="esri.layers.MapImageLayer"){_9cd.setOpacity(_9c0.opacity);}else{if(_9cd.declaredClass==="esri.layers.KMLLayer"){if(_9cd.loaded){_9cb(_9cd.getLayers());}else{dojo.connect(_9cd,"onLoad",dojo.hitch(this,function(lyr){_9cb(lyr.getLayers());}));}}}});};if(_9c0.opacity!==null){_9cb(_9c4.getLayers());}if(_9c0.visibleFolders){dojo.forEach(_9c4.folders,function(_9ce){if(dojo.indexOf(_9c0.visibleFolders,_9ce.id)>-1){_9c4.setFolderVisibility(_9ce,true);}else{_9c4.setFolderVisibility(_9ce,false);}},this);}});}else{if(_9c0.type=="CSV"&&_9c0.url){_9c4=new esri.layers.FeatureLayer(_9c0.featureCollection,{infoTemplate:new esri.dijit.PopupTemplate(_9c0.popupInfo?_9c0.popupInfo:esri.arcgis.csv.generateDefaultPopupInfo(_9c0.featureCollection)),id:_9c0.id?_9c0.id:null,outFields:["*"],visible:(_9c0.visibility!==null)?_9c0.visibility:true,opacity:_9c0.opacity?_9c0.opacity:1,autoGeneralize:true});}else{if(_9c0.layerDefinition&&!_9c0.url){var _9cf=dojo.fromJson(dojo.toJson(_9c0));delete _9cf.id;delete _9cf.opacity;delete _9cf.visibility;_9c4=new esri.layers.FeatureLayer(_9cf,{id:_9c0.id,opacity:_9c0.opacity,visible:_9c0.visibility,outFields:["*"],infoTemplate:_9cf.popupInfo&&new _9c5(_9cf.popupInfo),autoGeneralize:true});}else{if(_9c0.type==="BingMapsAerial"||_9c0.type==="BingMapsRoad"||_9c0.type==="BingMapsHybrid"){var _9d0=esri.virtualearth.VETiledLayer.MAP_STYLE_AERIAL_WITH_LABELS;if(_9c0.type==="BingMapsAerial"){_9d0=esri.virtualearth.VETiledLayer.MAP_STYLE_AERIAL;}else{if(_9c0.type==="BingMapsRoad"){_9d0=esri.virtualearth.VETiledLayer.MAP_STYLE_ROAD;}}_9c4=new esri.virtualearth.VETiledLayer({bingMapsKey:_9c2.bingMapsKey,mapStyle:_9d0,id:_9c0.id});}else{if(_9c0.resourceInfo&&_9c0.resourceInfo.mapName){if(_9c0.resourceInfo.singleFusedMapCache===true){if(!_9c0.baseMapLayer){if(EAU._sameSpatialReferenceAsBasemap(_9c0,_9c1)){if(EAU._sameTilingSchemeAsBasemap(_9c0,_9c1)){_9c4=EAU._loadAsCached(_9c0);}else{_9c4=EAU._loadAsDynamic(_9c0);}}else{_9c4=EAU._loadAsDynamic(_9c0);}}else{_9c4=EAU._loadAsCached(_9c0);}}else{_9c4=EAU._loadAsDynamic(_9c0);}}else{if(_9c0.resourceInfo&&_9c0.resourceInfo.pixelSizeX){var _9d1=new esri.layers.ImageServiceParameters();_9d1.bandIds=_9c0.bandIds;if(!_9c0.bandIds&&_9c0.resourceInfo.bandCount&&parseInt(_9c0.resourceInfo.bandCount,10)>3){_9d1.bandIds=[0,1,2];}_9c4=new esri.layers.ArcGISImageServiceLayer(EAU._checkUrl(_9c0.url),{resourceInfo:_9c0.resourceInfo,opacity:_9c0.opacity,visible:_9c0.visibility,id:_9c0.id,imageServiceParameters:_9d1});}else{if(_9c0.resourceInfo&&_9c0.resourceInfo.type==="Feature Layer"){_9c4=new esri.layers.FeatureLayer(EAU._checkUrl(_9c0.url),{resourceInfo:_9c0.resourceInfo,opacity:_9c0.opacity,visible:_9c0.visibility,id:_9c0.id,mode:esri._isDefined(_9c0.mode)?_9c0.mode:esri.layers.FeatureLayer.MODE_ONDEMAND,outFields:["*"],infoTemplate:_9c0.popupInfo&&new _9c5(_9c0.popupInfo),autoGeneralize:true});if(_9c0.layerDefinition){if(_9c0.layerDefinition.drawingInfo&&_9c0.layerDefinition.drawingInfo.renderer){var _9d2=esri.renderer.fromJson(_9c0.layerDefinition.drawingInfo.renderer);_9c4.setRenderer(_9d2);}if(_9c0.layerDefinition.definitionExpression){_9c4.setDefinitionExpression(_9c0.layerDefinition.definitionExpression);}if(esri._isDefined(_9c0.layerDefinition.minScale)){_9c4.minScale=_9c0.layerDefinition.minScale;}if(esri._isDefined(_9c0.layerDefinition.maxScale)){_9c4.maxScale=_9c0.layerDefinition.maxScale;}}}}}}}}}}}if(_9c4){_9c4.arcgisProps={title:_9c0.title};}return _9c4;};EAU._loadAsCached=function(_9d3){var _9d4=[];if(!_9d3.displayLevels){_9d4=dojo.map(_9d3.resourceInfo.tileInfo.lods,function(lod){return lod.level;});}var _9d5=new esri.layers.ArcGISTiledMapServiceLayer(EAU._checkUrl(_9d3.url),{resourceInfo:_9d3.resourceInfo,opacity:_9d3.opacity,visible:_9d3.visibility,displayLevels:_9d3.displayLevels||_9d4,id:_9d3.id});EAU._processPopups(_9d5,_9d3);return _9d5;};EAU._loadAsDynamic=function(_9d6){var _9d7=new esri.layers.ImageParameters();_9d7.format="png24";if(_9d6.resourceInfo&&_9d6.resourceInfo.supportedImageFormatTypes&&_9d6.resourceInfo.supportedImageFormatTypes.indexOf("PNG32")>-1){_9d7.format="png32";}var _9d8=new esri.layers.ArcGISDynamicMapServiceLayer(EAU._checkUrl(_9d6.url),{resourceInfo:_9d6.resourceInfo,opacity:_9d6.opacity,visible:_9d6.visibility,id:_9d6.id,imageParameters:_9d7});if(!_9d6.visibleLayers){var _9d9="";var _9da=_9d8.layerInfos;dojo.forEach(_9da,function(_9db){if(_9db.defaultVisibility){_9d9+=(_9d9.length>0?",":"")+_9db.id;}});_9d6.visibleLayers=_9d9;}var _9dc=EAU._getVisibleFeatureLayers(_9d8.layerInfos,_9d6.visibleLayers);_9d8.setVisibleLayers(_9dc);if(_9d6.layers&&_9d6.layers.length>0){var _9dd=[];dojo.forEach(_9d6.layers,function(_9de){if(_9de.layerDefinition&&_9de.layerDefinition.definitionExpression){_9dd[_9de.id]=_9de.layerDefinition.definitionExpression;}},this);if(_9dd.length>0){_9d8.setLayerDefinitions(_9dd);}}EAU._processPopups(_9d8,_9d6);return _9d8;};EAU._processPopups=function(_9df,_9e0){var _9e1=_9df.layerInfos;var _9e2=_9e0.layers;if(_9e2&&_9e1){var _9e3=[],ids=[],urls=[];dojo.forEach(_9e1,function(_9e4){var id=_9e4.id,i;if(!_9e4.subLayerIds&&dojo.indexOf(_9df.visibleLayers,id)!==-1){for(i=0;i<_9e2.length;i++){var _9e5=_9e2[i];if(_9e5.id===id){ids.push(id);_9e3.push(_9e5.popupInfo);urls.push(_9e5.layerUrl||"");break;}}}});if(_9e3.length){_9df.__popups=_9e3;_9df.__popupIds=ids;_9df.__popupUrls=urls;_9df.__resourceInfo=_9e0.resourceInfo;}}};EAU._onLayersAddResult=function(_9e6){dojo.forEach(_9e6,function(_9e7){var _9e8=_9e7.layer;if(_9e8.toJson){var json=_9e8.toJson();if(json.featureSet&&_9e8.name.indexOf("Text")>-1){dojo.forEach(json.featureSet.features,function(_9e9,idx){if(_9e9.attributes.TEXT){var _9ea=_9e8.graphics[idx];_9ea.symbol.setText(_9e9.attributes.TEXT);if(_9e9.symbol.horizontalAlignment){_9ea.symbol.align=_9e9.symbol.horizontalAlignment;}_9ea.setSymbol(_9ea.symbol);_9ea.setAttributes(_9e9.attributes);}},this);}}});};EAU._sameSpatialReferenceAsBasemap=function(_9eb,_9ec){var _9ed=[102113,102100,3857];var sp1=_9ec[0].layerObject.fullExtent.spatialReference;var sp2=new esri.SpatialReference(_9eb.resourceInfo.fullExtent.spatialReference);if(dojo.toJson(sp1.toJson())===dojo.toJson(sp2.toJson())){return true;}else{if(dojo.some(_9ed,function(wkid){return wkid===sp2.wkid;})&&dojo.some(_9ed,function(wkid){return wkid===sp1.wkid;})){return true;}}return false;};EAU._sameTilingSchemeAsBasemap=function(_9ee,_9ef){if(!_9ef[0].layerObject.tileInfo){return false;}var _9f0=[];dojo.forEach(_9ef,function(_9f1){if(_9f1.baseMapLayer){if(_9f1.layerObject.tileInfo){_9f0=_9f0.concat(dojo.map(_9f1.layerObject.tileInfo.lods,function(lod){return lod.scale;}));}}});var _9f2=dojo.some(_9ee.resourceInfo.tileInfo.lods,function(lod){return dojo.some(_9f0,function(_9f3){return _9f3===lod.scale;});});return _9f2;};EAU._showPopup=function(evt){var map=this,_9f4=map.infoWindow,_9f5=evt.graphic;if(!map.loaded){return;}_9f4.hide();_9f4.clearFeatures();var _9f6=[];dojo.forEach(map.graphicsLayerIds,function(_9f7){var _9f8=map.getLayer(_9f7);if(_9f8&&_9f8.declaredClass.indexOf("FeatureLayer")!==-1&&_9f8.loaded&&_9f8.visible){_9f8.clearSelection();if(_9f8.infoTemplate&&!_9f8.suspended){_9f6.push(_9f8);}}});_9f5=(_9f5&&_9f5._getEffInfoTemplate())?_9f5:null;if(!_9f6.length&&!_9f5){return;}var _9f9=EAU._calculateClickTolerance(_9f6);var _9fa=evt.screenPoint,_9fb=map.toMap(new esri.geometry.Point(_9fa.x-_9f9,_9fa.y+_9f9)),_9fc=map.toMap(new esri.geometry.Point(_9fa.x+_9f9,_9fa.y-_9f9)),_9fd=new esri.geometry.Extent(_9fb.x,_9fb.y,_9fc.x,_9fc.y,map.spatialReference);var _9fe=new esri.tasks.Query();_9fe.geometry=_9fd;_9fe.timeExtent=map.timeExtent;var _9ff=dojo.map(_9f6,function(_a00){var dfd=_a00.selectFeatures(_9fe);dfd.addCallback(function(){var _a01=_a00.getSelectedFeatures();return _a01;});return dfd;});if(_9f5){var dfd=new dojo.Deferred();dfd.callback([_9f5]);_9ff.splice(0,0,dfd);}var _a02=dojo.some(_9ff,function(dfd){return dfd.fired===-1;});if(!_a02){var _a03=_9f5?1:0;dojo.forEach(_9f6,function(_a04){_a03=_a03+_a04.getSelectedFeatures().length;});if(!_a03){return;}}_9f4.setFeatures(_9ff);_9f4.show(evt.mapPoint,{closestFirst:true});};EAU._calculateClickTolerance=function(_a05){var _a06=6;dojo.forEach(_a05,function(_a07){var _a08=_a07.renderer;if(_a08.declaredClass==="esri.renderer.SimpleRenderer"){var _a09=_a08.symbol;if(_a09&&_a09.xoffset){_a06=Math.max(_a06,Math.abs(_a09.xoffset));}if(_a09&&_a09.yoffset){_a06=Math.max(_a06,Math.abs(_a09.yoffset));}}else{if(_a08.declaredClass==="esri.renderer.UniqueValueRenderer"||_a08.declaredClass==="esri.renderer.ClassBreaksRenderer"){dojo.forEach(_a08.infos,function(info){var _a0a=info.symbol;if(_a0a&&_a0a.xoffset){_a06=Math.max(_a06,Math.abs(_a0a.xoffset));}if(_a0a&&_a0a.yoffset){_a06=Math.max(_a06,Math.abs(_a0a.yoffset));}});}}});return _a06;};EAU._getVisibleFeatureLayers=function(_a0b,_a0c){if(!_a0b||!_a0c||_a0c.length===0){return [];}var _a0d=","+_a0c+",";var _a0e=[];var _a0f="";var k,_a10=",";for(k=0;k<_a0b.length;k++){if(_a0b[k].subLayerIds!==null){if(_a0d.indexOf(","+_a0b[k].id+",")===-1||_a10.indexOf(","+_a0b[k].id+",")>-1){_a10+=_a0b[k].subLayerIds.toString()+",";}}else{if(_a0d.indexOf(","+_a0b[k].id+",")>-1&&_a10.indexOf(","+_a0b[k].id+",")===-1){_a0e.push(_a0b[k].id);_a0f=",";}}}return _a0e;};EAU._updateLayerScaleInfo=function(_a11,_a12){if(_a12.version<=10.1&&_a11){var i,id=parseInt(_a12.url.substring(_a12.url.lastIndexOf("/")+1,_a12.url.length));for(i=_a11.length-1;i>=0;i--){if(_a11[i].id==id){if(_a12.minScale==0&&_a11[i].minScale>0){_a12.minScale=_a11[i].minScale;}else{if(_a12.minScale>0&&_a11[i].minScale==0){_a12.minScale=_a12.minScale;}else{if(_a12.minScale>0&&_a11[i].minScale>0){_a12.minScale=Math.min(_a12.minScale,_a11[i].minScale);}}}_a12.maxScale=Math.max(_a12.maxScale||0,_a11[i].maxScale||0);if(_a11[i].parentLayerId>-1){id=_a11[i].parentLayerId;}else{break;}}}}};EAU._checkUrl=function(url){if(location.protocol==="https:"&&(EAU._isHostedService(url)||EAU._isAgolService(url))){url=url.replace("http:","https:");}return url;};EAU._isHostedService=function(url){if(!url){return false;}var _a13=".arcgis.com/";var _a14=(new dojo._Url(EAU.arcgisUrl)).authority;return (url.indexOf(_a13)!==-1||url.indexOf(_a14)!==-1);};EAU._isAgolService=function(url){if(!url){return false;}return (url.indexOf("/services.arcgisonline.com/")!==-1||url.indexOf("/server.arcgisonline.com/")!==-1);};}());});