//>>built
require({cache:{"dojox/gfx/arc":function(){define("dojox/gfx/arc",["./_base","dojo/_base/lang","./matrix"],function(f,i,d){function q(c){var m=Math.cos(c),c=Math.sin(c),j={x:m+4/3*(1-m),y:c-4/3*m*(1-m)/c};return{s:{x:m,y:-c},c1:{x:j.x,y:-j.y},c2:j,e:{x:m,y:c}}}var e=2*Math.PI,c=Math.PI/4,m=Math.PI/8,j=c+m,s=q(m);return f.arc={unitArcAsBezier:q,curvePI4:s,arcAsBezier:function(g,f,p,k,a,v,h,b){var a=Boolean(a),v=Boolean(v),r=d._degToRad(k),k=f*f,w=p*p,u=d.multiplyPoint(d.rotate(-r),{x:(g.x-h)/2,y:(g.y-
b)/2}),i=u.x*u.x,n=u.y*u.y,k=Math.sqrt((k*w-k*n-w*i)/(k*n+w*i));isNaN(k)&&(k=0);k={x:k*f*u.y/p,y:-k*p*u.x/f};a==v&&(k={x:-k.x,y:-k.y});k=d.multiplyPoint([d.translate((g.x+h)/2,(g.y+b)/2),d.rotate(r)],k);f=d.normalize([d.translate(k.x,k.y),d.rotate(r),d.scale(f,p)]);k=d.invert(f);g=d.multiplyPoint(k,g);b=d.multiplyPoint(k,h,b);h=Math.atan2(g.y,g.x);k=h-Math.atan2(b.y,b.x);v&&(k=-k);k<0?k+=e:k>e&&(k-=e);p=m;b=s;p=v?p:-p;g=[];for(a=k;a>0;a-=c)a<j&&(p=a/2,b=q(p),p=v?p:-p,a=0),u=d.normalize([f,d.rotate(h+
p)]),v?(k=d.multiplyPoint(u,b.c1),r=d.multiplyPoint(u,b.c2),u=d.multiplyPoint(u,b.e)):(k=d.multiplyPoint(u,b.c2),r=d.multiplyPoint(u,b.c1),u=d.multiplyPoint(u,b.s)),g.push([k.x,k.y,r.x,r.y,u.x,u.y]),h+=2*p;return g}}})},"dojo/_base/loader":function(){define("dojo/_base/loader",["./kernel","../has","require","module","./json","./lang","./array"],function(f,i,d,q,e,c,m){var j=function(b){return b.replace(/\./g,"/")},s=/\/\/>>built/,g=[],l=[],p,k=function(b){p[b.mid]=1;for(var n,o,a=b.deps||[],h=0;h<
a.length;h++)if(o=a[h],!(n=p[o.mid]))if(n===0||!k(o))return p[b.mid]=0,!1;return!0},a=function(){var b,o;p={};for(o in C)if(b=C[o],b.executed||b.noReqPluginCheck)p[o]=1;else{if(b.noReqPluginCheck!==0)b.noReqPluginCheck=/loadInit\!/.test(o)||/require\!/.test(o)?1:0;b.noReqPluginCheck?p[o]=1:b.injected!==n&&(p[o]=0)}for(var a=0,h=l.length;a<h;a++)if(b=l[a],!(o=p[b.mid]))if(o===0||!k(b))return;u.holdIdle();b=g;g=[];m.forEach(b,function(b){b(1)});u.releaseIdle()},v=function(b,n,o){var a=/\(|\)/g,h=1;
for(a.lastIndex=n;n=a.exec(b);)if(n[0]==")"?h-=1:h+=1,h==0)break;if(h!=0)throw"unmatched paren around character "+a.lastIndex+" in: "+b;return[f.trim(b.substring(o,a.lastIndex))+";\n",a.lastIndex]},h=/(\/\*([\s\S]*?)\*\/|\/\/(.*)$)/mg,b=/(^|\s)dojo\.(loadInit|require|provide|requireLocalization|requireIf|requireAfterIf|platformRequire)\s*\(/mg,r=/(^|\s)(require|define)\s*\(/m,w=function(n,o){var a,t,c,g=[],m=[];a=[];for(o=o||n.replace(h,function(n){b.lastIndex=r.lastIndex=0;return b.test(n)||r.test(n)?
"":n});a=b.exec(o);)t=b.lastIndex,c=t-a[0].length,t=v(o,t,c),a[2]=="loadInit"?g.push(t[0]):m.push(t[0]),b.lastIndex=t[1];a=g.concat(m);return a.length||!r.test(o)?[n.replace(/(^|\s)dojo\.loadInit\s*\(/g,"\n0 && dojo.loadInit("),a.join(""),a]:0},u=d.initSyncLoader(function(b,n,o){g.push(o);m.forEach(b.split(","),function(b){b=z(b,n.module);l.push(b);B(b)});a()},a,function(b,n){var o,a,h=[],t=[];if(s.test(n)||!(o=w(n)))return 0;a=b.mid+"-*loadInit";for(var r in z("dojo",b).result.scopeMap)h.push(r),
t.push('"'+r+'"');return"// xdomain rewrite of "+b.path+"\ndefine('"+a+"',{\n\tnames:"+f.toJson(h)+",\n\tdef:function("+h.join(",")+"){"+o[1]+"}});\n\ndefine("+f.toJson(h.concat(["dojo/loadInit!"+a]))+", function("+h.join(",")+"){\n"+o[0]+"});"}),y=u.sync,n=u.arrived,o=u.nonmodule,t=u.executing,x=u.executed,A=u.syncExecStack,C=u.modules,D=u.execQ,z=u.getModule,B=u.injectModule,E=u.setArrived,G=u.signal,H=u.finishExec,I=u.execModule,F=u.getLegacyMode;f.provide=function(b){var n=A[0],o=c.mixin(z(j(b),
d.module),{executed:t,result:c.getObject(b,!0)});E(o);if(n)(n.provides||(n.provides=[])).push(function(){o.result=c.getObject(b);delete o.provides;o.executed!==x&&H(o)});return o.result};i.add("config-publishRequireResult",1,0,0);f.require=function(b,a){var h=function(b,a){var h=z(j(b),d.module);if(A.length&&A[0].finish)A[0].finish.push(b);else{if(h.executed)return h.result;a&&(h.result=o);var t=F();B(h);t=F();h.executed!==x&&h.injected===n&&(u.holdIdle(),I(h),u.releaseIdle());if(h.executed)return h.result;
t==y?h.cjs?D.unshift(h):A.length&&(A[0].finish=[b]):D.push(h)}}(b,a);i("config-publishRequireResult")&&!c.exists(b)&&h!==void 0&&c.setObject(b,h);return h};f.loadInit=function(b){b()};f.registerModulePath=function(b,n){var o={};o[b.replace(/\./g,"/")]=n;d({paths:o})};f.platformRequire=function(b){for(var b=(b.common||[]).concat(b[f._name]||b["default"]||[]),n;b.length;)c.isArray(n=b.shift())?f.require.apply(f,n):f.require(n)};f.requireIf=f.requireAfterIf=function(b,n,o){b&&f.require(n,o)};f.requireLocalization=
function(b,n,o){d(["../i18n"],function(a){a.getLocalization(b,n,o)})};return{extractLegacyApiApplications:w,require:u.dojoRequirePlugin,loadInit:function(b,n,h){n([b],function(b){n(b.names,function(){for(var t="",r=[],c=0;c<arguments.length;c++)t+="var "+b.names[c]+"= arguments["+c+"]; ",r.push(arguments[c]);eval(t);var v=n.module,e=[],t={},d=[],x,c={provide:function(b){b=j(b);b=z(b,v);b!==v&&E(b)},require:function(b,n){b=j(b);n&&(z(b,v).result=o);d.push(b)},requireLocalization:function(b,n,o){e.length||
(e=["dojo/i18n"]);o=(o||f.locale).toLowerCase();b=j(b)+"/nls/"+(/root/i.test(o)?"":o+"/")+j(n);z(b,v).isXd&&e.push("dojo/i18n!"+b)},loadInit:function(b){b()}};try{for(x in c)t[x]=f[x],f[x]=c[x];b.def.apply(null,r)}catch(w){G("error",[{src:q.id,id:"failedDojoLoadInit"},w])}finally{for(x in c)f[x]=t[x]}d.length&&e.push("dojo/require!"+d.join(","));g.push(h);m.forEach(d,function(b){b=z(b,n.module);l.push(b);B(b)});a()})})}}})},"dojox/gfx/gradient":function(){define("dojox/gfx/gradient",["dojo/_base/lang",
"./matrix","dojo/_base/Color"],function(f,i,d){function q(c,j,e,g,d,f){c=i.multiplyPoint(e,c,j);g=i.multiplyPoint(g,c);return{r:c,p:g,o:i.multiplyPoint(d,g).x/f}}function e(c,j){return c.o-j.o}var c=f.getObject("dojox.gfx.gradient",!0);c.rescale=function(c,j,e){var g=c.length,f=e<j,i;f&&(i=j,j=e,e=i);if(!g)return[];if(e<=c[0].offset)i=[{offset:0,color:c[0].color},{offset:1,color:c[0].color}];else if(j>=c[g-1].offset)i=[{offset:0,color:c[g-1].color},{offset:1,color:c[g-1].color}];else{var k=e-j,a,
v,h;i=[];j<0&&i.push({offset:0,color:new d(c[0].color)});for(h=0;h<g;++h)if(a=c[h],a.offset>=j)break;h?(v=c[h-1],i.push({offset:0,color:d.blendColors(new d(v.color),new d(a.color),(j-v.offset)/(a.offset-v.offset))})):i.push({offset:0,color:new d(a.color)});for(;h<g;++h){a=c[h];if(a.offset>=e)break;i.push({offset:(a.offset-j)/k,color:new d(a.color)})}h<g?(v=c[h-1],i.push({offset:1,color:d.blendColors(new d(v.color),new d(a.color),(e-v.offset)/(a.offset-v.offset))})):i.push({offset:1,color:new d(c[g-
1].color)})}if(f){i.reverse();h=0;for(g=i.length;h<g;++h)a=i[h],a.offset=1-a.offset}return i};c.project=function(m,j,d,g){var m=m||i.identity,f=i.multiplyPoint(m,j.x1,j.y1),p=i.multiplyPoint(m,j.x2,j.y2),k=Math.atan2(p.y-f.y,p.x-f.x),a=i.project(p.x-f.x,p.y-f.y),f=i.multiplyPoint(a,f),p=i.multiplyPoint(a,p),f=new i.Matrix2D([i.rotate(-k),{dx:-f.x,dy:-f.y}]),p=i.multiplyPoint(f,p).x,m=[q(d.x,d.y,m,a,f,p),q(g.x,g.y,m,a,f,p),q(d.x,g.y,m,a,f,p),q(g.x,d.y,m,a,f,p)].sort(e),j=c.rescale(j.colors,m[0].o,
m[3].o);return{type:"linear",x1:m[0].p.x,y1:m[0].p.y,x2:m[3].p.x,y2:m[3].p.y,colors:j,angle:k}};return c})},"dojo/_base/browser":function(){require.has&&require.has.add("config-selectorEngine","acme");define("dojo/_base/browser",["../ready","./kernel","./connect","./unload","./window","./event","./html","./NodeList","../query","./xhr","./fx"],function(f){return f})},"djeo-esri/Placemark":function(){define("djeo-esri/Placemark",["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/_base/Color",
"djeo/_base","djeo/util/_base","djeo/common/Placemark"],function(f,i,d,q,e,c,m){function j(a,h,b){a=new q(a);if(h!==void 0)a.a=h;return new esri.symbol.SimpleLineSymbol(esri.symbol.SimpleLineSymbol.STYLE_SOLID,a,b)}function s(a,h,b,r){if(h||b!==void 0){h=h?new q(h):outline.color;if(b!==void 0)h.a=b;a.setColor(h)}r!==void 0&&a.setWidth(r)}function g(a){return esri.geometry.geographicToWebMercator(new esri.geometry.Point(a[0],a[1],{wkid:4326}))}var l,p,k={family:1,size:1,weight:1,style:1,variant:1},
a={style:"setStyle",variant:"setVariant",weight:"setWeight"},f=f([m],{constructor:function(a){i.mixin(this,a)},init:function(){var a=esri.symbol,h=a.TextSymbol,a=a.Font,b=this.engine.esriMap;l={start:h.ALIGN_START,middle:h.ALIGN_MIDDLE,end:h.ALIGN_END};p={style:{normal:a.STYLE_NORMAL,italic:a.STYLE_ITALIC,oblique:a.STYLE_OBLIQUE},variant:{normal:a.VARIANT_NORMAL,"small-caps":a.VARIANT_SMALLCAPS},weight:{normal:a.WEIGHT_NORMAL,bold:a.WEIGHT_BOLD,bolder:a.WEIGHT_BOLDER,lighter:a.WEIGHT_LIGHTER}};this.text=
b.addLayer(new esri.layers.GraphicsLayer)},remove:function(a){var h=a.baseShapes[0];this.engine._getParentLayer(a).remove(h)},show:function(a,h){var b=a.baseShapes[0];h?b.show():b.hide()},makePoint:function(){return null},makeLineString:function(a,h){var b=new esri.geometry.Polyline({paths:[h],spatialReference:this.map.engine.spatialReference});return new esri.Graphic(esri.geometry.geographicToWebMercator(b))},makeMultiLineString:function(a,h){var b=new esri.geometry.Polyline({paths:h,spatialReference:this.map.engine.spatialReference});
return new esri.Graphic(esri.geometry.geographicToWebMercator(b))},makePolygon:function(a,h){var b=new esri.geometry.Polygon({rings:h,spatialReference:this.map.engine.spatialReference});return new esri.Graphic(esri.geometry.geographicToWebMercator(b))},makeMultiPolygon:function(a,h){var b=[];d.forEach(h,function(a){d.forEach(a,function(a){b.push(a)})});return this.makePolygon(a,b)},applyPointStyle:function(a,h,b){var r=h.point,j=m.getSpecificShapeStyle(h.points,this.specificStyleIndex),e=a.baseShapes[0],
d=m.get("shape",h,r,j),n=m.getImgSrc(h,r,j),o=!0,t=m.getScale(h,r,j),f=e?e.symbol:new esri.symbol.PictureMarkerSymbol;if(!d&&n)o=!1;else if(!m.shapes[d]&&!e)d=m.defaultShapeType;(d=this._getIconUrl(o,d,n))&&f.setUrl(d);(d=o?m.getSize(h,r,j):m.getImgSize(h,r,j))?(h=o?[d[0]/2,d[1]/2]:m.getAnchor(h,r,j,d),h=[-h[0]+d[0]/2,h[1]-d[1]/2],f.setWidth(t*d[0]),f.setHeight(t*d[1]),f.setOffset(t*h[0],t*h[1])):e&&(t=m.get("rScale",h,r,j),t!==void 0&&(f.setWidth(t*f.width),f.setHeight(t*f.height),f.setOffset(t*
f.xoffset,t*f.yoffset)));if(e)e.setSymbol(f);else{e=a.orientation;if(e!==void 0){if(i.isObject(e))e=e.heading;f.setAngle(c.radToDeg(e))}a.baseShapes[0]=new esri.Graphic(g(b),f)}},applyLineStyle:function(a,h){var b=h.line,r=m.getSpecificShapeStyle(h.lines,this.specificStyleIndex),c=a.baseShapes[0],g=m.get("stroke",h,b,r),e=m.get("strokeOpacity",h,b,r),b=m.get("strokeWidth",h,b,r);(r=c.symbol)?(g||b!==void 0||e!==void 0)&&s(r,g,e,b):r=j(g,e,b);c.setSymbol(r)},applyPolygonStyle:function(a,h){var b=h.polygon,
r=a.baseShapes[0],c=m.get("fill",h,b),g=m.get("fillOpacity",h,b),e=m.get("stroke",h,b),n=m.get("strokeOpacity",h,b),b=m.get("strokeWidth",h,b),o=r.symbol;if(o){if(c||g!==void 0){c=c?new q(c):o.color;if(g!==void 0)c.a=g;o.setColor(c)}if(b===0)o.setOutline(null);else if(e||b||n!==void 0)(g=o.outline)?s(g,e,n,b):b&&(g=j(e,n,b)),o.setOutline(g)}else{o=new q(c);if(g!==void 0)o.a=g;o=new esri.symbol.SimpleFillSymbol(esri.symbol.SimpleFillSymbol.STYLE_SOLID,b?j(e,n,b):null,o)}r.setSymbol(o)},makeText:function(a,
h){a.textShapes&&d.forEach(a.textShapes,function(b){this.text.remove(b)},this);var b;if(a.isPoint())b=h.point;else if(a.isArea())b=h.area;if(b=m.get("text",h,b)){var c=b.label||this._getLabel(a,b);if(c)a.textShapes=[],a.reg.ts=b,b=this._makeTextShape(a,c,b),this.text.add(b),a.textShapes.push(b)}},_makeTextShape:function(c,h,b){var r=!0,e;if(c.isPoint()){if(b.hAlign)e=b.hAlign}else c.isArea()?e="middle":r=!1;if(r){var h=new esri.symbol.TextSymbol(h),r=m.getScale(c.reg.cs),d="dx"in b?r*b.dx:0,j="dy"in
b?r*b.dy:0,n=b.fill;e&&l[e]&&h.setAlign(l[e]);n&&h.setColor(new q(n));(d||j)&&h.setOffset(d,j);var o,t;for(t in k)if(t in b)if(o||(o=new esri.symbol.Font),p[t]){if(p[t][b[t]])o[a[t]](p[t][b[t]])}else t=="size"?o.setSize(r*b[t]):t=="family"&&o.setFamily(b[t]);o&&h.setFont(o);c=c.getCoords();return new esri.Graphic(g(c),h)}},setCoords:function(a,h){var b=g(a);h.baseShapes[0].setGeometry(b);h.textShapes&&h.textShapes[0].setGeometry(b)},setOrientation:function(a,h){var b=h.baseShapes[0],r=b.symbol;r.setAngle(c.radToDeg(a));
b.setSymbol(r)}});f.makePoint=g;return f})},"dojox/gfx/svg":function(){define("dojox/gfx/svg",["dojo/_base/lang","dojo/_base/window","dojo/dom","dojo/_base/declare","dojo/_base/array","dojo/dom-geometry","dojo/_base/Color","./_base","./shape","./path"],function(f,i,d,q,e,c,m,j,s,g){function l(b,a){return i.doc.createElementNS?i.doc.createElementNS(b,a):i.doc.createElement(a)}function p(b){return k.useSvgWeb?i.doc.createTextNode(b,!0):i.doc.createTextNode(b)}var k=j.svg={};k.useSvgWeb=typeof window.svgweb!=
"undefined";var a=navigator.userAgent.toLowerCase(),v=a.search("iphone")>-1||a.search("ipad")>-1||a.search("ipod")>-1;k.xmlns={xlink:"http://www.w3.org/1999/xlink",svg:"http://www.w3.org/2000/svg"};k.getRef=function(b){if(!b||b=="none")return null;if(b.match(/^url\(#.+\)$/))return d.byId(b.slice(5,-1));if(b.match(/^#dojoUnique\d+$/))return d.byId(b.slice(1));return null};k.dasharray={solid:"none",shortdash:[4,1],shortdot:[1,1],shortdashdot:[4,1,1,1],shortdashdotdot:[4,1,1,1,1,1],dot:[1,3],dash:[4,
3],longdash:[8,3],dashdot:[4,3,1,3],longdashdot:[8,3,1,3],longdashdotdot:[8,3,1,3,1,3]};q("dojox.gfx.svg.Shape",s.Shape,{setFill:function(b){if(!b)return this.fillStyle=null,this.rawNode.setAttribute("fill","none"),this.rawNode.setAttribute("fill-opacity",0),this;var a,h=function(b){this.setAttribute(b,a[b].toFixed(8))};if(typeof b=="object"&&"type"in b){switch(b.type){case "linear":a=j.makeParameters(j.defaultLinearGradient,b);b=this._setFillObject(a,"linearGradient");e.forEach(["x1","y1","x2","y2"],
h,b);break;case "radial":a=j.makeParameters(j.defaultRadialGradient,b);b=this._setFillObject(a,"radialGradient");e.forEach(["cx","cy","r"],h,b);break;case "pattern":a=j.makeParameters(j.defaultPattern,b),b=this._setFillObject(a,"pattern"),e.forEach(["x","y","width","height"],h,b)}this.fillStyle=a;return this}this.fillStyle=a=j.normalizeColor(b);this.rawNode.setAttribute("fill",a.toCss());this.rawNode.setAttribute("fill-opacity",a.a);this.rawNode.setAttribute("fill-rule","evenodd");return this},setStroke:function(b){var a=
this.rawNode;if(!b)return this.strokeStyle=null,a.setAttribute("stroke","none"),a.setAttribute("stroke-opacity",0),this;if(typeof b=="string"||f.isArray(b)||b instanceof m)b={color:b};b=this.strokeStyle=j.makeParameters(j.defaultStroke,b);b.color=j.normalizeColor(b.color);if(b){a.setAttribute("stroke",b.color.toCss());a.setAttribute("stroke-opacity",b.color.a);a.setAttribute("stroke-width",b.width);a.setAttribute("stroke-linecap",b.cap);typeof b.join=="number"?(a.setAttribute("stroke-linejoin","miter"),
a.setAttribute("stroke-miterlimit",b.join)):a.setAttribute("stroke-linejoin",b.join);var h=b.style.toLowerCase();h in k.dasharray&&(h=k.dasharray[h]);if(h instanceof Array){for(var h=f._toArray(h),c=0;c<h.length;++c)h[c]*=b.width;if(b.cap!="butt"){for(c=0;c<h.length;c+=2)h[c]-=b.width,h[c]<1&&(h[c]=1);for(c=1;c<h.length;c+=2)h[c]+=b.width}h=h.join(",")}a.setAttribute("stroke-dasharray",h);a.setAttribute("dojoGfxStrokeStyle",b.style)}return this},_getParentSurface:function(){for(var b=this.parent;b&&
!(b instanceof j.Surface);b=b.parent);return b},_setFillObject:function(b,a){var h=k.xmlns.svg;this.fillStyle=b;var c=this._getParentSurface().defNode,g=this.rawNode.getAttribute("fill");if(g=k.getRef(g))if(g.tagName.toLowerCase()!=a.toLowerCase()){var n=g.id;g.parentNode.removeChild(g);g=l(h,a);g.setAttribute("id",n);c.appendChild(g)}else for(;g.childNodes.length;)g.removeChild(g.lastChild);else g=l(h,a),g.setAttribute("id",j._base._getUniqueId()),c.appendChild(g);if(a=="pattern")g.setAttribute("patternUnits",
"userSpaceOnUse"),h=l(h,"image"),h.setAttribute("x",0),h.setAttribute("y",0),h.setAttribute("width",b.width.toFixed(8)),h.setAttribute("height",b.height.toFixed(8)),h.setAttributeNS(k.xmlns.xlink,"xlink:href",b.src),g.appendChild(h);else{g.setAttribute("gradientUnits","userSpaceOnUse");for(c=0;c<b.colors.length;++c){var n=b.colors[c],o=l(h,"stop"),t=n.color=j.normalizeColor(n.color);o.setAttribute("offset",n.offset.toFixed(8));o.setAttribute("stop-color",t.toCss());o.setAttribute("stop-opacity",t.a);
g.appendChild(o)}}this.rawNode.setAttribute("fill","url(#"+g.getAttribute("id")+")");this.rawNode.removeAttribute("fill-opacity");this.rawNode.setAttribute("fill-rule","evenodd");return g},_applyTransform:function(){if(this.matrix){var b=this.matrix;this.rawNode.setAttribute("transform","matrix("+b.xx.toFixed(8)+","+b.yx.toFixed(8)+","+b.xy.toFixed(8)+","+b.yy.toFixed(8)+","+b.dx.toFixed(8)+","+b.dy.toFixed(8)+")")}else this.rawNode.removeAttribute("transform");return this},setRawNode:function(b){b=
this.rawNode=b;this.shape.type!="image"&&b.setAttribute("fill","none");b.setAttribute("fill-opacity",0);b.setAttribute("stroke","none");b.setAttribute("stroke-opacity",0);b.setAttribute("stroke-width",1);b.setAttribute("stroke-linecap","butt");b.setAttribute("stroke-linejoin","miter");b.setAttribute("stroke-miterlimit",4);b.__gfxObject__=this.getUID()},setShape:function(b){this.shape=j.makeParameters(this.shape,b);for(var a in this.shape)a!="type"&&this.rawNode.setAttribute(a,this.shape[a]);this.bbox=
null;return this},_moveToFront:function(){this.rawNode.parentNode.appendChild(this.rawNode);return this},_moveToBack:function(){this.rawNode.parentNode.insertBefore(this.rawNode,this.rawNode.parentNode.firstChild);return this}});q("dojox.gfx.svg.Group",k.Shape,{constructor:function(){s.Container._init.call(this)},setRawNode:function(b){this.rawNode=b;this.rawNode.__gfxObject__=this.getUID()}});k.Group.nodeType="g";q("dojox.gfx.svg.Rect",[k.Shape,s.Rect],{setShape:function(b){this.shape=j.makeParameters(this.shape,
b);this.bbox=null;for(var a in this.shape)a!="type"&&a!="r"&&this.rawNode.setAttribute(a,this.shape[a]);this.shape.r!=null&&(this.rawNode.setAttribute("ry",this.shape.r),this.rawNode.setAttribute("rx",this.shape.r));return this}});k.Rect.nodeType="rect";q("dojox.gfx.svg.Ellipse",[k.Shape,s.Ellipse],{});k.Ellipse.nodeType="ellipse";q("dojox.gfx.svg.Circle",[k.Shape,s.Circle],{});k.Circle.nodeType="circle";q("dojox.gfx.svg.Line",[k.Shape,s.Line],{});k.Line.nodeType="line";q("dojox.gfx.svg.Polyline",
[k.Shape,s.Polyline],{setShape:function(b,a){b&&b instanceof Array?(this.shape=j.makeParameters(this.shape,{points:b}),a&&this.shape.points.length&&this.shape.points.push(this.shape.points[0])):this.shape=j.makeParameters(this.shape,b);this.bbox=null;this._normalizePoints();for(var h=[],c=this.shape.points,g=0;g<c.length;++g)h.push(c[g].x.toFixed(8),c[g].y.toFixed(8));this.rawNode.setAttribute("points",h.join(" "));return this}});k.Polyline.nodeType="polyline";q("dojox.gfx.svg.Image",[k.Shape,s.Image],
{setShape:function(b){this.shape=j.makeParameters(this.shape,b);this.bbox=null;var b=this.rawNode,a;for(a in this.shape)a!="type"&&a!="src"&&b.setAttribute(a,this.shape[a]);b.setAttribute("preserveAspectRatio","none");b.setAttributeNS(k.xmlns.xlink,"xlink:href",this.shape.src);b.__gfxObject__=this.getUID();return this}});k.Image.nodeType="image";q("dojox.gfx.svg.Text",[k.Shape,s.Text],{setShape:function(b){this.shape=j.makeParameters(this.shape,b);this.bbox=null;var b=this.rawNode,a=this.shape;b.setAttribute("x",
a.x);b.setAttribute("y",a.y);b.setAttribute("text-anchor",a.align);b.setAttribute("text-decoration",a.decoration);b.setAttribute("rotate",a.rotated?90:0);b.setAttribute("kerning",a.kerning?"auto":0);b.setAttribute("text-rendering","optimizeLegibility");b.firstChild?b.firstChild.nodeValue=a.text:b.appendChild(p(a.text));return this},getTextWidth:function(){var b=this.rawNode,a=b.parentNode,b=b.cloneNode(!0);b.style.visibility="hidden";var h=0,c=b.firstChild.nodeValue;a.appendChild(b);if(c!="")for(;!h;)h=
b.getBBox?parseInt(b.getBBox().width):68;a.removeChild(b);return h}});k.Text.nodeType="text";q("dojox.gfx.svg.Path",[k.Shape,g.Path],{_updateWithSegment:function(){this.inherited(arguments);typeof this.shape.path=="string"&&this.rawNode.setAttribute("d",this.shape.path)},setShape:function(){this.inherited(arguments);this.shape.path?this.rawNode.setAttribute("d",this.shape.path):this.rawNode.removeAttribute("d");return this}});k.Path.nodeType="path";q("dojox.gfx.svg.TextPath",[k.Shape,g.TextPath],
{_updateWithSegment:function(){this.inherited(arguments);this._setTextPath()},setShape:function(){this.inherited(arguments);this._setTextPath();return this},_setTextPath:function(){if(typeof this.shape.path=="string"){var b=this.rawNode;if(!b.firstChild){var a=l(k.xmlns.svg,"textPath"),h=p("");a.appendChild(h);b.appendChild(a)}a=(a=b.firstChild.getAttributeNS(k.xmlns.xlink,"href"))&&k.getRef(a);if(!a&&(h=this._getParentSurface())){var h=h.defNode,a=l(k.xmlns.svg,"path"),c=j._base._getUniqueId();a.setAttribute("id",
c);h.appendChild(a);b.firstChild.setAttributeNS(k.xmlns.xlink,"xlink:href","#"+c)}a&&a.setAttribute("d",this.shape.path)}},_setText:function(){var b=this.rawNode;if(!b.firstChild){var a=l(k.xmlns.svg,"textPath"),h=p("");a.appendChild(h);b.appendChild(a)}b=b.firstChild;a=this.text;b.setAttribute("alignment-baseline","middle");switch(a.align){case "middle":b.setAttribute("text-anchor","middle");b.setAttribute("startOffset","50%");break;case "end":b.setAttribute("text-anchor","end");b.setAttribute("startOffset",
"100%");break;default:b.setAttribute("text-anchor","start"),b.setAttribute("startOffset","0%")}b.setAttribute("baseline-shift","0.5ex");b.setAttribute("text-decoration",a.decoration);b.setAttribute("rotate",a.rotated?90:0);b.setAttribute("kerning",a.kerning?"auto":0);b.firstChild.data=a.text}});k.TextPath.nodeType="text";q("dojox.gfx.svg.Surface",s.Surface,{constructor:function(){s.Container._init.call(this)},destroy:function(){this.defNode=null;this.inherited(arguments)},setDimensions:function(b,
a){if(!this.rawNode)return this;this.rawNode.setAttribute("width",b);this.rawNode.setAttribute("height",a);return this},getDimensions:function(){return this.rawNode?{width:j.normalizedLength(this.rawNode.getAttribute("width")),height:j.normalizedLength(this.rawNode.getAttribute("height"))}:null}});k.createSurface=function(b,a,h){var c=new k.Surface;c.rawNode=l(k.xmlns.svg,"svg");c.rawNode.setAttribute("overflow","hidden");a&&c.rawNode.setAttribute("width",a);h&&c.rawNode.setAttribute("height",h);
a=l(k.xmlns.svg,"defs");c.rawNode.appendChild(a);c.defNode=a;c._parent=d.byId(b);c._parent.appendChild(c.rawNode);return c};var q={_setFont:function(){var b=this.fontStyle;this.rawNode.setAttribute("font-style",b.style);this.rawNode.setAttribute("font-variant",b.variant);this.rawNode.setAttribute("font-weight",b.weight);this.rawNode.setAttribute("font-size",b.size);this.rawNode.setAttribute("font-family",b.family)}},h=s.Container,g={openBatch:function(){this.fragment=k.useSvgWeb?i.doc.createDocumentFragment(!0):
i.doc.createDocumentFragment()},closeBatch:function(){this.fragment&&(this.rawNode.appendChild(this.fragment),delete this.fragment)},add:function(b){this!=b.getParent()&&(this.fragment?this.fragment.appendChild(b.rawNode):this.rawNode.appendChild(b.rawNode),h.add.apply(this,arguments));return this},remove:function(b){this==b.getParent()&&(this.rawNode==b.rawNode.parentNode&&this.rawNode.removeChild(b.rawNode),this.fragment&&this.fragment==b.rawNode.parentNode&&this.fragment.removeChild(b.rawNode),
h.remove.apply(this,arguments));return this},clear:function(){for(var b=this.rawNode;b.lastChild;)b.removeChild(b.lastChild);var a=this.defNode;if(a){for(;a.lastChild;)a.removeChild(a.lastChild);b.appendChild(a)}return h.clear.apply(this,arguments)},_moveChildToFront:h._moveChildToFront,_moveChildToBack:h._moveChildToBack},a={createObject:function(b,a){if(!this.rawNode)return null;var h=new b,c=l(k.xmlns.svg,b.nodeType);h.setRawNode(c);h.setShape(a);this.add(h);return h}};f.extend(k.Text,q);f.extend(k.TextPath,
q);f.extend(k.Group,g);f.extend(k.Group,s.Creator);f.extend(k.Group,a);f.extend(k.Surface,g);f.extend(k.Surface,s.Creator);f.extend(k.Surface,a);k.fixTarget=function(b){if(!b.gfxTarget)b.gfxTarget=v&&b.target.wholeText?s.byId(b.target.parentElement.__gfxObject__):s.byId(b.target.__gfxObject__);return!0};if(k.useSvgWeb)k.createSurface=function(b,a,h){var g=new k.Surface;if(!a||!h)var e=c.position(b),a=a||e.w,h=h||e.h;var b=d.byId(b),e=b.id?b.id+"_svgweb":j._base._getUniqueId(),n=l(k.xmlns.svg,"svg");
n.id=e;n.setAttribute("width",a);n.setAttribute("height",h);svgweb.appendChild(n,b);n.addEventListener("SVGLoad",function(){g.rawNode=this;g.isLoaded=!0;var b=l(k.xmlns.svg,"defs");g.rawNode.appendChild(b);g.defNode=b;if(g.onLoad)g.onLoad(g)},!1);g.isLoaded=!1;return g},k.Surface.extend({destroy:function(){var b=this.rawNode;svgweb.removeChild(b,b.parentNode)}}),q={connect:function(b,a,h){b.substring(0,2)==="on"&&(b=b.substring(2));h=arguments.length==2?a:f.hitch(a,h);this.getEventSource().addEventListener(b,
h,!1);return[this,b,h]},disconnect:function(b){this.getEventSource().removeEventListener(b[1],b[2],!1);delete b[0]}},f.extend(k.Shape,q),f.extend(k.Surface,q);return k})},"dojox/gfx/path":function(){define("dojox/gfx/path",["./_base","dojo/_base/lang","dojo/_base/declare","./matrix","./shape"],function(f,i,d,q,e){f.path={};e=d("dojox.gfx.path.Path",e.Shape,{constructor:function(c){this.shape=i.clone(f.defaultPath);this.segments=[];this.tbbox=null;this.absolute=!0;this.last={};this.rawNode=c;this.segmented=
!1},setAbsoluteMode:function(c){this._confirmSegmented();this.absolute=typeof c=="string"?c=="absolute":c;return this},getAbsoluteMode:function(){this._confirmSegmented();return this.absolute},getBoundingBox:function(){this._confirmSegmented();return this.bbox&&"l"in this.bbox?{x:this.bbox.l,y:this.bbox.t,width:this.bbox.r-this.bbox.l,height:this.bbox.b-this.bbox.t}:null},_getRealBBox:function(){this._confirmSegmented();if(this.tbbox)return this.tbbox;var c=this.bbox,e=this._getRealMatrix();this.bbox=
null;for(var d=0,f=this.segments.length;d<f;++d)this._updateWithSegment(this.segments[d],e);e=this.bbox;this.bbox=c;return this.tbbox=e?[{x:e.l,y:e.t},{x:e.r,y:e.t},{x:e.r,y:e.b},{x:e.l,y:e.b}]:null},getLastPosition:function(){this._confirmSegmented();return"x"in this.last?this.last:null},_applyTransform:function(){this.tbbox=null;return this.inherited(arguments)},_updateBBox:function(c,e,d){if(d)e=q.multiplyPoint(d,c,e),c=e.x,e=e.y;if(this.bbox&&"l"in this.bbox){if(this.bbox.l>c)this.bbox.l=c;if(this.bbox.r<
c)this.bbox.r=c;if(this.bbox.t>e)this.bbox.t=e;if(this.bbox.b<e)this.bbox.b=e}else this.bbox={l:c,b:e,r:c,t:e}},_updateWithSegment:function(c,e){var d=c.args,i=d.length,g;switch(c.action){case "M":case "L":case "C":case "S":case "Q":case "T":for(g=0;g<i;g+=2)this._updateBBox(d[g],d[g+1],e);this.last.x=d[i-2];this.last.y=d[i-1];this.absolute=!0;break;case "H":for(g=0;g<i;++g)this._updateBBox(d[g],this.last.y,e);this.last.x=d[i-1];this.absolute=!0;break;case "V":for(g=0;g<i;++g)this._updateBBox(this.last.x,
d[g],e);this.last.y=d[i-1];this.absolute=!0;break;case "m":g=0;if(!("x"in this.last))this._updateBBox(this.last.x=d[0],this.last.y=d[1],e),g=2;for(;g<i;g+=2)this._updateBBox(this.last.x+=d[g],this.last.y+=d[g+1],e);this.absolute=!1;break;case "l":case "t":for(g=0;g<i;g+=2)this._updateBBox(this.last.x+=d[g],this.last.y+=d[g+1],e);this.absolute=!1;break;case "h":for(g=0;g<i;++g)this._updateBBox(this.last.x+=d[g],this.last.y,e);this.absolute=!1;break;case "v":for(g=0;g<i;++g)this._updateBBox(this.last.x,
this.last.y+=d[g],e);this.absolute=!1;break;case "c":for(g=0;g<i;g+=6)this._updateBBox(this.last.x+d[g],this.last.y+d[g+1],e),this._updateBBox(this.last.x+d[g+2],this.last.y+d[g+3],e),this._updateBBox(this.last.x+=d[g+4],this.last.y+=d[g+5],e);this.absolute=!1;break;case "s":case "q":for(g=0;g<i;g+=4)this._updateBBox(this.last.x+d[g],this.last.y+d[g+1],e),this._updateBBox(this.last.x+=d[g+2],this.last.y+=d[g+3],e);this.absolute=!1;break;case "A":for(g=0;g<i;g+=7)this._updateBBox(d[g+5],d[g+6],e);
this.last.x=d[i-2];this.last.y=d[i-1];this.absolute=!0;break;case "a":for(g=0;g<i;g+=7)this._updateBBox(this.last.x+=d[g+5],this.last.y+=d[g+6],e);this.absolute=!1}var l=[c.action];for(g=0;g<i;++g)l.push(f.formatNumber(d[g],!0));typeof this.shape.path=="string"?this.shape.path+=l.join(""):Array.prototype.push.apply(this.shape.path,l)},_validSegments:{m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7,z:0},_pushSegment:function(c,e){this.tbbox=null;var d=this._validSegments[c.toLowerCase()];typeof d=="number"&&(d?
e.length>=d&&(d={action:c,args:e.slice(0,e.length-e.length%d)},this.segments.push(d),this._updateWithSegment(d)):(d={action:c,args:[]},this.segments.push(d),this._updateWithSegment(d)))},_collectArgs:function(c,e){for(var d=0;d<e.length;++d){var f=e[d];typeof f=="boolean"?c.push(f?1:0):typeof f=="number"?c.push(f):f instanceof Array?this._collectArgs(c,f):"x"in f&&"y"in f&&c.push(f.x,f.y)}},moveTo:function(){this._confirmSegmented();var c=[];this._collectArgs(c,arguments);this._pushSegment(this.absolute?
"M":"m",c);return this},lineTo:function(){this._confirmSegmented();var c=[];this._collectArgs(c,arguments);this._pushSegment(this.absolute?"L":"l",c);return this},hLineTo:function(){this._confirmSegmented();var c=[];this._collectArgs(c,arguments);this._pushSegment(this.absolute?"H":"h",c);return this},vLineTo:function(){this._confirmSegmented();var c=[];this._collectArgs(c,arguments);this._pushSegment(this.absolute?"V":"v",c);return this},curveTo:function(){this._confirmSegmented();var c=[];this._collectArgs(c,
arguments);this._pushSegment(this.absolute?"C":"c",c);return this},smoothCurveTo:function(){this._confirmSegmented();var c=[];this._collectArgs(c,arguments);this._pushSegment(this.absolute?"S":"s",c);return this},qCurveTo:function(){this._confirmSegmented();var c=[];this._collectArgs(c,arguments);this._pushSegment(this.absolute?"Q":"q",c);return this},qSmoothCurveTo:function(){this._confirmSegmented();var c=[];this._collectArgs(c,arguments);this._pushSegment(this.absolute?"T":"t",c);return this},
arcTo:function(){this._confirmSegmented();var c=[];this._collectArgs(c,arguments);this._pushSegment(this.absolute?"A":"a",c);return this},closePath:function(){this._confirmSegmented();this._pushSegment("Z",[]);return this},_confirmSegmented:function(){if(!this.segmented){var c=this.shape.path;this.shape.path=[];this._setPath(c);this.shape.path=this.shape.path.join("");this.segmented=!0}},_setPath:function(c){c=i.isArray(c)?c:c.match(f.pathSvgRegExp);this.segments=[];this.absolute=!0;this.bbox={};
this.last={};if(c){for(var e="",d=[],s=c.length,g=0;g<s;++g){var l=c[g],p=parseFloat(l);isNaN(p)?(e&&this._pushSegment(e,d),d=[],e=l):d.push(p)}this._pushSegment(e,d)}},setShape:function(c){this.inherited(arguments,[typeof c=="string"?{path:c}:c]);this.segmented=!1;this.segments=[];f.lazyPathSegmentation||this._confirmSegmented();return this},_2PI:Math.PI*2});d=d("dojox.gfx.path.TextPath",e,{constructor:function(){if(!("text"in this))this.text=i.clone(f.defaultTextPath);if(!("fontStyle"in this))this.fontStyle=
i.clone(f.defaultFont)},getText:function(){return this.text},setText:function(c){this.text=f.makeParameters(this.text,typeof c=="string"?{text:c}:c);this._setText();return this},getFont:function(){return this.fontStyle},setFont:function(c){this.fontStyle=typeof c=="string"?f.splitFontString(c):f.makeParameters(f.defaultFont,c);this._setFont();return this}});return{Path:e,TextPath:d}})},"dojo/require":function(){define("dojo/require",["./_base/loader"],function(f){return{dynamic:0,normalize:function(f){return f},
load:f.require}})},"dojo/_base/NodeList":function(){define("dojo/_base/NodeList",["./kernel","../query","./array","./html","../NodeList-dom"],function(f,i,d){var i=i.NodeList,q=i.prototype;q.connect=i._adaptAsForEach(function(){return f.connect.apply(this,arguments)});q.coords=i._adaptAsMap(f.coords);i.events=["blur","focus","change","click","error","keydown","keypress","keyup","load","mousedown","mouseenter","mouseleave","mousemove","mouseout","mouseover","mouseup","submit"];d.forEach(i.events,function(e){var c=
"on"+e;q[c]=function(e,d){return this.connect(c,e,d)}});f.NodeList=i;return f.NodeList})},"djeo-esri/Navigation":function(){define("djeo-esri/Navigation",["dojo/_base/declare","dojo/_base/lang","dojo/aspect"],function(f,i,d){return f(null,{enable:function(f){f===void 0&&(f=!0);var e=this.map.engine.esriMap;f&&d.after(e,"onZoomEnd",i.hitch(this,this._onZoom),!0)}})})},"djeo-esri/_TiledWebMap":function(){define("djeo-esri/_TiledWebMap",["dojo/_base/declare","esri/jsapi"],function(f){return f([esri.layers.TiledMapServiceLayer],
{constructor:function(f){this.spatialReference=new esri.SpatialReference({wkid:102100});this.initialExtent=this.fullExtent=new esri.geometry.Extent({xmin:-2.003750834E7,ymin:-2.003750834E7,xmax:2.003750834E7,ymax:2.003750834E7,spatialReference:{wkid:102100}});this.tileInfo=new esri.layers.TileInfo({rows:256,cols:256,dpi:96,format:"PNG8",compressionQuality:0,origin:{x:-2.0037508342787E7,y:2.0037508342787E7},spatialReference:{wkid:102100},lods:[{level:0,scale:5.91657527591555E8,resolution:156543.033928},
{level:1,scale:2.95828763795777E8,resolution:78271.5169639999},{level:2,scale:1.47914381897889E8,resolution:39135.7584820001},{level:3,scale:7.3957190948944E7,resolution:19567.8792409999},{level:4,scale:3.6978595474472E7,resolution:9783.93962049996},{level:5,scale:1.8489297737236E7,resolution:4891.96981024998},{level:6,scale:9244648.868618,resolution:2445.98490512499},{level:7,scale:4622324.434309,resolution:1222.99245256249},{level:8,scale:2311162.217155,resolution:611.49622628138},{level:9,scale:1155581.108577,
resolution:305.748113140558},{level:10,scale:577790.554289,resolution:152.874056570411},{level:11,scale:288895.277144,resolution:76.4370282850732},{level:12,scale:144447.638572,resolution:38.2185141425366},{level:13,scale:72223.819286,resolution:19.1092570712683},{level:14,scale:36111.909643,resolution:9.55462853563415},{level:15,scale:18055.954822,resolution:4.77731426794937},{level:16,scale:9027.977411,resolution:2.38865713397468},{level:17,scale:4513.988705,resolution:1.19432856685505},{level:18,
scale:2256.994353,resolution:0.597164283559817}]});this.url=f.url;this.yFirst=f.yFirst;if(this.url)this.numUrls=this.url.length;this.loaded=!0;this.onLoad(this)},getTileUrl:function(f,d,q){var e=this.yFirst?q:d;return this.url[e%this.numUrls]+"/"+f+"/"+(this.yFirst?d:q)+"/"+e+".png"}})})},"djeo/_tiles":function(){define("djeo/_tiles",[],function(){var f=["WebTiles",{url:"http://[a,b,c].tile.openstreetmap.org"}];return{webtiles:["WebTiles",{}],roadmap:f,osm:f,openstreetmap:f,"osm.org":f,"openstreetmap.org":f,
"mapquest-osm":["WebTiles",{url:"http://otile[1,2,3,4].mqcdn.com/tiles/1.0.0/osm"}],"mapquest-oa":["WebTiles",{url:"http://oatile[1,2,3,4].mqcdn.com/tiles/1.0.0/sat"}],arcgis_webtiles:["WebTiles",{}]}})},"djeo-esri/Engine":function(){define("djeo-esri/Engine",["require","dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/aspect","djeo/Engine","./Placemark","djeo/_tiles"],function(f,i,d,q,e,c,m,j){function s(){p=i([k],{getTileUrl:function(){}})}j=d.mixin({},j);j.arcgis_webtiles=["ArcgisWebTiles",
{}];var g={click:"onClick",mouseover:"onMouseOver",mouseout:"onMouseOut",mousedown:"onMouseDown",mouseup:"onMouseUp"},l={zoom_changed:"onZoomEnd",click:"onClick",mousemove:"onMouseMove"},p,k;return i([c],{esriMap:null,_eventRegistry:null,constructor:function(){this._require=f;d.mixin(this.ignoredDependencies,{Highlight:1,Tooltip:1});this._eventRegistry={};this._supportedLayers=j;this._initBasicFactories(m({map:this.map,engine:this}))},initialize:function(a){var c=this.map,h=c.layers,b=["./_TiledWebMap"];
if(h){d.isString(h)&&(h=[h]);var g=[];q.forEach(h,function(a){if(d.isString(a)){if(this.isValidLayerId(a)){var h=this.getLayerModuleId(a);h&&b.push("djeo/"+h,"./"+h);g.push(a)}}else b.push("./"+a.dependency),g.push(a)},this);h=g;c._layerLoaded=!0}b.push("esri/jsapi");f({packages:[{location:"../djeo-esri/library/3.1/jsapi/js/esri",name:"esri"}]},b,d.hitch(this,function(b){p||(k=b,s());c.projection="EPSG:4326";this.spatialReference={wkid:4326};var g=new esri.Map(c.container,{extent:esri.geometry.geographicToWebMercator(new esri.geometry.Extent({xmin:-180,
ymin:-75,xmax:75,ymax:71.91,spatialReference:this.spatialReference})),wrapAround180:!0,logo:!1});this.esriMap=g;e.after(g,"onLoad",function(){g.hideZoomSlider();a()});if(h&&h.length)for(var f=0;f<h.length;f++){var n=h[f];d.isString(n)&&this.getLayerModuleId(n)&&this.setLayerConstructor(n,arguments[1+f]);this.enableLayer(n,!0)}else g.addLayer(new p(g))}))},prepare:function(){var a=this.esriMap;this.areas=a.addLayer(new esri.layers.GraphicsLayer);this.lines=a.addLayer(new esri.layers.GraphicsLayer);
this.points=a.addLayer(new esri.layers.GraphicsLayer);this.factories.Placemark.init()},createContainer:function(){},appendChild:function(a,c){a._djeo=c;this._getParentLayer(c).add(a)},_getParentLayer:function(a){return a.isPoint()?this.points:a.isArea()?this.areas:this.lines},onForFeature:function(a,c,h,b){this._eventRegistry[c]||(this._eventRegistry[c]={listener:{},features:{}});var f=this._eventRegistry[c].listener,j=a.isPoint()?"points":a.isArea()?"areas":"lines";f[j]||(f[j]=e.after(this[j],g[c],
d.hitch(this,d.partial(this._onEvent,c)),!0));f=this._eventRegistry[c].features;f[a.id]||(f[a.id]=[]);h=[h,b];f[a.id].push(h);return[a.id,c,h]},_onEvent:function(a,c){var h=c.graphic;if(h){var b=h._djeo;(h=this._eventRegistry[a].features[b.id])&&q.forEach(h,function(h){h[0].call(h[1],{type:a,nativeEvent:c,feature:b})})}},disconnect:function(a){for(var c=a[0],h=a[2],a=this._eventRegistry[a[1]].features,b=a[c],e=0;e<b.length;e++)if(h===b[e])break;b.splice(e,1);b.length==0&&delete a[c]},onForMap:function(a,
c,h){return e.after(this.esriMap,l[a],function(b){var a=esri.geometry.webMercatorToGeographic(b.mapPoint);c.call(h,{mapCoords:[a.x,a.y],nativeEvent:b})},!0)},_on_zoom_changed:function(a,c,h){return e.after(this.esriMap,"onZoomEnd",function(){c.call(h)})},_on_extent_changed:function(a,c,h){return e.after(this.esriMap,"onExtentChange",function(){c.call(h)})},zoomTo:function(a){a[0]==a[2]&&a[1]==a[3]&&(a=[0.99999*a[0],0.99999*a[1],1.00001*a[2],1.00001*a[3]]);this.esriMap.setExtent(esri.geometry.geographicToWebMercator(new esri.geometry.Extent({xmin:a[0],
ymin:a[1],xmax:a[2],ymax:a[3],spatialReference:this.spatialReference})),!0)},destroy:function(){this.esriMap.destroy();delete this.esriMap},_setCamera:function(a){this.esriMap.centerAndZoom(m.makePoint(a.center),a.zoom)},_set_center:function(a){this.esriMap.centerAt(m.makePoint(a))},_get_center:function(){var a=esri.geometry.webMercatorToGeographic(this.esriMap.extent.getCenter());return[a.x,a.y]},_set_zoom:function(a){var c=this.map;a<c.minZoom||a>c.maxZoom||this.esriMap.setLevel(a)},_get_zoom:function(){return this.esriMap.getLevel()},
_get_extent:function(){var a=esri.geometry.webMercatorToGeographic(this.esriMap.extent);return[a.xmin,a.ymin,a.xmax,a.ymax]},_appendDiv:function(a){this.map.container.children[0].appendChild(a)}})})},"dojox/gfx/matrix":function(){define("dojox/gfx/matrix",["./_base","dojo/_base/lang"],function(f,i){var d=f.matrix={},q={};d._degToRad=function(e){return q[e]||(q[e]=Math.PI*e/180)};d._radToDeg=function(e){return e/Math.PI*180};d.Matrix2D=function(e){if(e)if(typeof e=="number")this.xx=this.yy=e;else if(e instanceof
Array){if(e.length>0){for(var c=d.normalize(e[0]),f=1;f<e.length;++f){var j=c,s=d.normalize(e[f]),c=new d.Matrix2D;c.xx=j.xx*s.xx+j.xy*s.yx;c.xy=j.xx*s.xy+j.xy*s.yy;c.yx=j.yx*s.xx+j.yy*s.yx;c.yy=j.yx*s.xy+j.yy*s.yy;c.dx=j.xx*s.dx+j.xy*s.dy+j.dx;c.dy=j.yx*s.dx+j.yy*s.dy+j.dy}i.mixin(this,c)}}else i.mixin(this,e)};i.extend(d.Matrix2D,{xx:1,xy:0,yx:0,yy:1,dx:0,dy:0});i.mixin(d,{identity:new d.Matrix2D,flipX:new d.Matrix2D({xx:-1}),flipY:new d.Matrix2D({yy:-1}),flipXY:new d.Matrix2D({xx:-1,yy:-1}),translate:function(e,
c){if(arguments.length>1)return new d.Matrix2D({dx:e,dy:c});return new d.Matrix2D({dx:e.x,dy:e.y})},scale:function(e,c){if(arguments.length>1)return new d.Matrix2D({xx:e,yy:c});if(typeof e=="number")return new d.Matrix2D({xx:e,yy:e});return new d.Matrix2D({xx:e.x,yy:e.y})},rotate:function(e){var c=Math.cos(e),e=Math.sin(e);return new d.Matrix2D({xx:c,xy:-e,yx:e,yy:c})},rotateg:function(e){return d.rotate(d._degToRad(e))},skewX:function(e){return new d.Matrix2D({xy:Math.tan(e)})},skewXg:function(e){return d.skewX(d._degToRad(e))},
skewY:function(e){return new d.Matrix2D({yx:Math.tan(e)})},skewYg:function(e){return d.skewY(d._degToRad(e))},reflect:function(e,c){if(arguments.length==1)c=e.y,e=e.x;var f=e*e,j=c*c,i=f+j,g=2*e*c/i;return new d.Matrix2D({xx:2*f/i-1,xy:g,yx:g,yy:2*j/i-1})},project:function(e,c){if(arguments.length==1)c=e.y,e=e.x;var f=e*e,j=c*c,i=f+j,g=e*c/i;return new d.Matrix2D({xx:f/i,xy:g,yx:g,yy:j/i})},normalize:function(e){return e instanceof d.Matrix2D?e:new d.Matrix2D(e)},clone:function(e){var c=new d.Matrix2D,
f;for(f in e)typeof e[f]=="number"&&typeof c[f]=="number"&&c[f]!=e[f]&&(c[f]=e[f]);return c},invert:function(e){var e=d.normalize(e),c=e.xx*e.yy-e.xy*e.yx;return e=new d.Matrix2D({xx:e.yy/c,xy:-e.xy/c,yx:-e.yx/c,yy:e.xx/c,dx:(e.xy*e.dy-e.yy*e.dx)/c,dy:(e.yx*e.dx-e.xx*e.dy)/c})},_multiplyPoint:function(e,c,d){return{x:e.xx*c+e.xy*d+e.dx,y:e.yx*c+e.yy*d+e.dy}},multiplyPoint:function(e,c,f){e=d.normalize(e);if(typeof c=="number"&&typeof f=="number")return d._multiplyPoint(e,c,f);return d._multiplyPoint(e,
c.x,c.y)},multiply:function(e){for(var c=d.normalize(e),f=1;f<arguments.length;++f){var j=c,i=d.normalize(arguments[f]),c=new d.Matrix2D;c.xx=j.xx*i.xx+j.xy*i.yx;c.xy=j.xx*i.xy+j.xy*i.yy;c.yx=j.yx*i.xx+j.yy*i.yx;c.yy=j.yx*i.xy+j.yy*i.yy;c.dx=j.xx*i.dx+j.xy*i.dy+j.dx;c.dy=j.yx*i.dx+j.yy*i.dy+j.dy}return c},_sandwich:function(e,c,f){return d.multiply(d.translate(c,f),e,d.translate(-c,-f))},scaleAt:function(e,c,f,j){switch(arguments.length){case 4:return d._sandwich(d.scale(e,c),f,j);case 3:if(typeof f==
"number")return d._sandwich(d.scale(e),c,f);return d._sandwich(d.scale(e,c),f.x,f.y)}return d._sandwich(d.scale(e),c.x,c.y)},rotateAt:function(e,c,f){if(arguments.length>2)return d._sandwich(d.rotate(e),c,f);return d._sandwich(d.rotate(e),c.x,c.y)},rotategAt:function(e,c,f){if(arguments.length>2)return d._sandwich(d.rotateg(e),c,f);return d._sandwich(d.rotateg(e),c.x,c.y)},skewXAt:function(e,c,f){if(arguments.length>2)return d._sandwich(d.skewX(e),c,f);return d._sandwich(d.skewX(e),c.x,c.y)},skewXgAt:function(e,
c,f){if(arguments.length>2)return d._sandwich(d.skewXg(e),c,f);return d._sandwich(d.skewXg(e),c.x,c.y)},skewYAt:function(e,c,f){if(arguments.length>2)return d._sandwich(d.skewY(e),c,f);return d._sandwich(d.skewY(e),c.x,c.y)},skewYgAt:function(e,c,f){if(arguments.length>2)return d._sandwich(d.skewYg(e),c,f);return d._sandwich(d.skewYg(e),c.x,c.y)}});f.Matrix2D=d.Matrix2D;return d})},"dojox/gfx/_base":function(){define("dojox/gfx/_base",["dojo/_base/lang","dojo/_base/html","dojo/_base/Color","dojo/_base/sniff",
"dojo/_base/window","dojo/_base/array","dojo/dom","dojo/dom-construct","dojo/dom-geometry"],function(f,i,d,q,e,c,m,j,s){var g=f.getObject("dojox.gfx",!0),l=g._base={};g._hasClass=function(a,b){var c=a.getAttribute("className");return c&&(" "+c+" ").indexOf(" "+b+" ")>=0};g._addClass=function(a,b){var c=a.getAttribute("className")||"";if(!c||(" "+c+" ").indexOf(" "+b+" ")<0)a.setAttribute("className",c+(c?" ":"")+b)};g._removeClass=function(a,b){var c=a.getAttribute("className");c&&a.setAttribute("className",
c.replace(RegExp("(^|\\s+)"+b+"(\\s+|$)"),"$1$2"))};l._getFontMeasurements=function(){var a={"1em":0,"1ex":0,"100%":0,"12pt":0,"16px":0,"xx-small":0,"x-small":0,small:0,medium:0,large:0,"x-large":0,"xx-large":0},b;if(q("ie"))e.doc.documentElement.style.fontSize="100%";var c=j.create("div",{style:{position:"absolute",left:"0",top:"-100px",width:"30px",height:"1000em",borderWidth:"0",margin:"0",padding:"0",outline:"none",lineHeight:"1",overflow:"hidden"}},e.body());for(b in a)c.style.fontSize=b,a[b]=
Math.round(c.offsetHeight*12/16)*16/12/1E3;e.body().removeChild(c);return a};var p=null;l._getCachedFontMeasurements=function(a){if(a||!p)p=l._getFontMeasurements();return p};var k=null,a={};l._getTextBox=function(c,b,f){var d,g,i=arguments.length,n;k||(k=j.create("div",{style:{position:"absolute",top:"-10000px",left:"0"}},e.body()));d=k;d.className="";g=d.style;g.borderWidth="0";g.margin="0";g.padding="0";g.outline="0";if(i>1&&b)for(n in b)n in a||(g[n]=b[n]);if(i>2&&f)d.className=f;d.innerHTML=
c;return d.getBoundingClientRect?(d=d.getBoundingClientRect(),{l:d.left,t:d.top,w:d.width||d.right-d.left,h:d.height||d.bottom-d.top}):s.getMarginBox(d)};var v=0;l._getUniqueId=function(){var a;do a=dojo._scopeName+"xUnique"+ ++v;while(m.byId(a));return a};f.mixin(g,{defaultPath:{type:"path",path:""},defaultPolyline:{type:"polyline",points:[]},defaultRect:{type:"rect",x:0,y:0,width:100,height:100,r:0},defaultEllipse:{type:"ellipse",cx:0,cy:0,rx:200,ry:100},defaultCircle:{type:"circle",cx:0,cy:0,r:100},
defaultLine:{type:"line",x1:0,y1:0,x2:100,y2:100},defaultImage:{type:"image",x:0,y:0,width:0,height:0,src:""},defaultText:{type:"text",x:0,y:0,text:"",align:"start",decoration:"none",rotated:!1,kerning:!0},defaultTextPath:{type:"textpath",text:"",align:"start",decoration:"none",rotated:!1,kerning:!0},defaultStroke:{type:"stroke",color:"black",style:"solid",width:1,cap:"butt",join:4},defaultLinearGradient:{type:"linear",x1:0,y1:0,x2:100,y2:100,colors:[{offset:0,color:"black"},{offset:1,color:"white"}]},
defaultRadialGradient:{type:"radial",cx:0,cy:0,r:100,colors:[{offset:0,color:"black"},{offset:1,color:"white"}]},defaultPattern:{type:"pattern",x:0,y:0,width:0,height:0,src:""},defaultFont:{type:"font",style:"normal",variant:"normal",weight:"normal",size:"10pt",family:"serif"},getDefault:function(){var a={};return function(b){var c=a[b];if(c)return new c;c=a[b]=new Function;c.prototype=g["default"+b];return new c}}(),normalizeColor:function(a){return a instanceof d?a:new d(a)},normalizeParameters:function(a,
b){var c;if(b){var d={};for(c in a)c in b&&!(c in d)&&(a[c]=b[c])}return a},makeParameters:function(a,b){var c=null;if(!b)return f.delegate(a);var d={};for(c in a)c in d||(d[c]=f.clone(c in b?b[c]:a[c]));return d},formatNumber:function(a,b){var c=a.toString();if(c.indexOf("e")>=0)c=a.toFixed(4);else{var d=c.indexOf(".");d>=0&&c.length-d>5&&(c=a.toFixed(4))}if(a<0)return c;return b?" "+c:c},makeFontString:function(a){return a.style+" "+a.variant+" "+a.weight+" "+a.size+" "+a.family},splitFontString:function(a){var b=
g.getDefault("Font"),a=a.split(/\s+/);if(!(a.length<5)){b.style=a[0];b.variant=a[1];b.weight=a[2];var c=a[3].indexOf("/");b.size=c<0?a[3]:a[3].substring(0,c);var d=4;c<0&&(a[4]=="/"?d=6:a[4].charAt(0)=="/"&&(d=5));if(d<a.length)b.family=a.slice(d).join(" ")}return b},cm_in_pt:72/2.54,mm_in_pt:7.2/2.54,px_in_pt:function(){return g._base._getCachedFontMeasurements()["12pt"]/12},pt2px:function(a){return a*g.px_in_pt()},px2pt:function(a){return a/g.px_in_pt()},normalizedLength:function(a){if(a.length===
0)return 0;if(a.length>2){var b=g.px_in_pt(),c=parseFloat(a);switch(a.slice(-2)){case "px":return c;case "pt":return c*b;case "in":return c*72*b;case "pc":return c*12*b;case "mm":return c*g.mm_in_pt*b;case "cm":return c*g.cm_in_pt*b}}return parseFloat(a)},pathVmlRegExp:/([A-Za-z]+)|(\d+(\.\d+)?)|(\.\d+)|(-\d+(\.\d+)?)|(-\.\d+)/g,pathSvgRegExp:/([A-Za-z])|(\d+(\.\d+)?)|(\.\d+)|(-\d+(\.\d+)?)|(-\.\d+)/g,equalSources:function(a,b){return a&&b&&a===b},switchTo:function(a){var b=typeof a=="string"?g[a]:
a;b&&c.forEach(["Group","Rect","Ellipse","Circle","Line","Polyline","Image","Text","Path","TextPath","Surface","createSurface","fixTarget"],function(a){g[a]=b[a]})}});return g})},"dojox/gfx/shape":function(){define("dojox/gfx/shape",["./_base","dojo/_base/lang","dojo/_base/declare","dojo/_base/window","dojo/_base/sniff","dojo/_base/connect","dojo/_base/array","dojo/dom-construct","dojo/_base/Color","./matrix"],function(f,i,d,q,e,c,m,j,s,g){var l=f.shape={},p={},k={};l.register=function(a){var c=a.declaredClass.split(".").pop(),
d=c in p?++p[c]:p[c]=0;c+=d;k[c]=a;return c};l.byId=function(a){return k[a]};l.dispose=function(a){delete k[a.getUID()]};d("dojox.gfx.shape.Shape",null,{constructor:function(){this.parentMatrix=this.parent=this.bbox=this.strokeStyle=this.fillStyle=this.matrix=this.shape=this.rawNode=null;var a=l.register(this);this.getUID=function(){return a}},getNode:function(){return this.rawNode},getShape:function(){return this.shape},getTransform:function(){return this.matrix},getFill:function(){return this.fillStyle},
getStroke:function(){return this.strokeStyle},getParent:function(){return this.parent},getBoundingBox:function(){return this.bbox},getTransformedBoundingBox:function(){var a=this.getBoundingBox();if(!a)return null;var c=this._getRealMatrix();return[g.multiplyPoint(c,a.x,a.y),g.multiplyPoint(c,a.x+a.width,a.y),g.multiplyPoint(c,a.x+a.width,a.y+a.height),g.multiplyPoint(c,a.x,a.y+a.height)]},getEventSource:function(){return this.rawNode},setShape:function(a){this.shape=f.makeParameters(this.shape,a);
this.bbox=null;return this},setFill:function(a){if(!a)return this.fillStyle=null,this;var c=null;if(typeof a=="object"&&"type"in a)switch(a.type){case "linear":c=f.makeParameters(f.defaultLinearGradient,a);break;case "radial":c=f.makeParameters(f.defaultRadialGradient,a);break;case "pattern":c=f.makeParameters(f.defaultPattern,a)}else c=f.normalizeColor(a);this.fillStyle=c;return this},setStroke:function(a){if(!a)return this.strokeStyle=null,this;if(typeof a=="string"||i.isArray(a)||a instanceof s)a=
{color:a};a=this.strokeStyle=f.makeParameters(f.defaultStroke,a);a.color=f.normalizeColor(a.color);return this},setTransform:function(a){this.matrix=g.clone(a?g.normalize(a):g.identity);return this._applyTransform()},_applyTransform:function(){return this},moveToFront:function(){var a=this.getParent();a&&(a._moveChildToFront(this),this._moveToFront());return this},moveToBack:function(){var a=this.getParent();a&&(a._moveChildToBack(this),this._moveToBack());return this},_moveToFront:function(){},_moveToBack:function(){},
applyRightTransform:function(a){return a?this.setTransform([this.matrix,a]):this},applyLeftTransform:function(a){return a?this.setTransform([a,this.matrix]):this},applyTransform:function(a){return a?this.setTransform([this.matrix,a]):this},removeShape:function(a){this.parent&&this.parent.remove(this,a);return this},_setParent:function(a,c){this.parent=a;return this._updateParentMatrix(c)},_updateParentMatrix:function(a){this.parentMatrix=a?g.clone(a):null;return this._applyTransform()},_getRealMatrix:function(){for(var a=
this.matrix,c=this.parent;c;)c.matrix&&(a=g.multiply(c.matrix,a)),c=c.parent;return a}});l._eventsProcessing={connect:function(a,d,h){return c.connect(this.getEventSource(),a,l.fixCallback(this,f.fixTarget,d,h))},disconnect:function(a){c.disconnect(a)}};l.fixCallback=function(a,c,d,b){b||(b=d,d=null);if(i.isString(b)){d=d||q.global;if(!d[b])throw['dojox.gfx.shape.fixCallback: scope["',b,'"] is null (scope="',d,'")'].join("");return function(e){return c(e,a)?d[b].apply(d,arguments||[]):void 0}}return!d?
function(e){return c(e,a)?b.apply(d,arguments):void 0}:function(e){return c(e,a)?b.apply(d,arguments||[]):void 0}};i.extend(l.Shape,l._eventsProcessing);l.Container={_init:function(){this.children=[]},openBatch:function(){},closeBatch:function(){},add:function(a){var c=a.getParent();c&&c.remove(a,!0);this.children.push(a);return a._setParent(this,this._getRealMatrix())},remove:function(a,c){for(var d=0;d<this.children.length;++d)if(this.children[d]==a){if(!c)a.parent=null,a.parentMatrix=null;this.children.splice(d,
1);break}return this},clear:function(){for(var a,c=0;c<this.children.length;++c)a=this.children[c],a.parent=null,a.parentMatrix=null;this.children=[];return this},_moveChildToFront:function(a){for(var c=0;c<this.children.length;++c)if(this.children[c]==a){this.children.splice(c,1);this.children.push(a);break}return this},_moveChildToBack:function(a){for(var c=0;c<this.children.length;++c)if(this.children[c]==a){this.children.splice(c,1);this.children.unshift(a);break}return this}};d("dojox.gfx.shape.Surface",
null,{constructor:function(){this._parent=this.rawNode=null;this._nodes=[];this._events=[]},destroy:function(){m.forEach(this._nodes,j.destroy);this._nodes=[];m.forEach(this._events,c.disconnect);this._events=[];this.rawNode=null;if(e("ie"))for(;this._parent.lastChild;)j.destroy(this._parent.lastChild);else this._parent.innerHTML="";this._parent=null},getEventSource:function(){return this.rawNode},_getRealMatrix:function(){return null},isLoaded:!0,onLoad:function(){},whenLoaded:function(a,d){var e=
i.hitch(a,d);if(this.isLoaded)e(this);else var b=c.connect(this,"onLoad",function(a){c.disconnect(b);e(a)})}});i.extend(l.Surface,l._eventsProcessing);d("dojox.gfx.Point",null,{});d("dojox.gfx.Rectangle",null,{});d("dojox.gfx.shape.Rect",l.Shape,{constructor:function(a){this.shape=f.getDefault("Rect");this.rawNode=a},getBoundingBox:function(){return this.shape}});d("dojox.gfx.shape.Ellipse",l.Shape,{constructor:function(a){this.shape=f.getDefault("Ellipse");this.rawNode=a},getBoundingBox:function(){if(!this.bbox){var a=
this.shape;this.bbox={x:a.cx-a.rx,y:a.cy-a.ry,width:2*a.rx,height:2*a.ry}}return this.bbox}});d("dojox.gfx.shape.Circle",l.Shape,{constructor:function(a){this.shape=f.getDefault("Circle");this.rawNode=a},getBoundingBox:function(){if(!this.bbox){var a=this.shape;this.bbox={x:a.cx-a.r,y:a.cy-a.r,width:2*a.r,height:2*a.r}}return this.bbox}});d("dojox.gfx.shape.Line",l.Shape,{constructor:function(a){this.shape=f.getDefault("Line");this.rawNode=a},getBoundingBox:function(){if(!this.bbox){var a=this.shape;
this.bbox={x:Math.min(a.x1,a.x2),y:Math.min(a.y1,a.y2),width:Math.abs(a.x2-a.x1),height:Math.abs(a.y2-a.y1)}}return this.bbox}});d("dojox.gfx.shape.Polyline",l.Shape,{constructor:function(a){this.shape=f.getDefault("Polyline");this.rawNode=a},setShape:function(a,c){a&&a instanceof Array?(this.inherited(arguments,[{points:a}]),c&&this.shape.points.length&&this.shape.points.push(this.shape.points[0])):this.inherited(arguments,[a]);return this},_normalizePoints:function(){var a=this.shape.points,c=a&&
a.length;if(c&&typeof a[0]=="number"){for(var d=[],b=0;b<c;b+=2)d.push({x:a[b],y:a[b+1]});this.shape.points=d}},getBoundingBox:function(){if(!this.bbox&&this.shape.points.length){for(var a=this.shape.points,c=a.length,d=a[0],b={l:d.x,t:d.y,r:d.x,b:d.y},e=1;e<c;++e){d=a[e];if(b.l>d.x)b.l=d.x;if(b.r<d.x)b.r=d.x;if(b.t>d.y)b.t=d.y;if(b.b<d.y)b.b=d.y}this.bbox={x:b.l,y:b.t,width:b.r-b.l,height:b.b-b.t}}return this.bbox}});d("dojox.gfx.shape.Image",l.Shape,{constructor:function(a){this.shape=f.getDefault("Image");
this.rawNode=a},getBoundingBox:function(){return this.shape},setStroke:function(){return this},setFill:function(){return this}});d("dojox.gfx.shape.Text",l.Shape,{constructor:function(a){this.fontStyle=null;this.shape=f.getDefault("Text");this.rawNode=a},getFont:function(){return this.fontStyle},setFont:function(a){this.fontStyle=typeof a=="string"?f.splitFontString(a):f.makeParameters(f.defaultFont,a);this._setFont();return this}});l.Creator={createShape:function(a){switch(a.type){case f.defaultPath.type:return this.createPath(a);
case f.defaultRect.type:return this.createRect(a);case f.defaultCircle.type:return this.createCircle(a);case f.defaultEllipse.type:return this.createEllipse(a);case f.defaultLine.type:return this.createLine(a);case f.defaultPolyline.type:return this.createPolyline(a);case f.defaultImage.type:return this.createImage(a);case f.defaultText.type:return this.createText(a);case f.defaultTextPath.type:return this.createTextPath(a)}return null},createGroup:function(){return this.createObject(f.Group)},createRect:function(a){return this.createObject(f.Rect,
a)},createEllipse:function(a){return this.createObject(f.Ellipse,a)},createCircle:function(a){return this.createObject(f.Circle,a)},createLine:function(a){return this.createObject(f.Line,a)},createPolyline:function(a){return this.createObject(f.Polyline,a)},createImage:function(a){return this.createObject(f.Image,a)},createText:function(a){return this.createObject(f.Text,a)},createPath:function(a){return this.createObject(f.Path,a)},createTextPath:function(a){return this.createObject(f.TextPath,{}).setText(a)},
createObject:function(){return null}};return l})},"dojo/main":function(){define("dojo/main",["./_base/kernel","./has","require","./_base/sniff","./_base/lang","./_base/array","./ready","./_base/declare","./_base/connect","./_base/Deferred","./_base/json","./_base/Color","./has!dojo-firebug?./_firebug/firebug","./_base/browser","./_base/loader"],function(f,i,d,q,e,c,m){f.config.isDebug&&d(["./_firebug/firebug"]);var j=f.config.require;j&&(j=c.map(e.isArray(j)?j:[j],function(c){return c.replace(/\./g,
"/")}),f.isAsync?d(j):m(1,function(){d(j)}));return f})},"dojox/gfx/vml":function(){define("dojox/gfx/vml",["dojo/_base/lang","dojo/_base/declare","dojo/_base/array","dojo/_base/Color","dojo/_base/sniff","dojo/_base/config","dojo/dom","dojo/dom-geometry","dojo/_base/window","./_base","./shape","./path","./arc","./gradient","./matrix"],function(f,i,d,q,e,c,m,j,s,g,l,p,k,a,v){function h(a,b,c){c=c||s.global;b.call(c,a);(a instanceof g.Surface||a instanceof g.Group)&&d.forEach(a.children,function(a){h(a,
b,c)})}var b=g.vml={};b.xmlns="urn:schemas-microsoft-com:vml";document.namespaces.add("v",b.xmlns);var a=["*","group","roundrect","oval","shape","rect","imagedata","path","textpath","text"],r=0,w=1,u=document.createStyleSheet();if(e("ie")>=8)r=1,w=a.length;for(;r<w;++r)u.addRule("v\\:"+a[r],"behavior:url(#default#VML); display:inline-block");b.text_alignment={start:"left",middle:"center",end:"right"};b._parseFloat=function(a){return a.match(/^\d+f$/i)?parseInt(a)/65536:parseFloat(a)};b._bool={t:1,
"true":1};i("dojox.gfx.vml.Shape",l.Shape,{setFill:function(a){if(!a)return this.fillStyle=null,this.rawNode.filled="f",this;var b,c,e;if(typeof a=="object"&&"type"in a){switch(a.type){case "linear":var f=this._getRealMatrix(),h=this.getBoundingBox(),i=this._getRealBBox?this._getRealBBox():this.getTransformedBoundingBox();e=[];if(this.fillStyle!==a)this.fillStyle=g.makeParameters(g.defaultLinearGradient,a);a=g.gradient.project(f,this.fillStyle,{x:h.x,y:h.y},{x:h.x+h.width,y:h.y+h.height},i[0],i[2]);
c=a.colors;c[0].offset.toFixed(5)!="0.00000"&&e.push("0 "+g.normalizeColor(c[0].color).toHex());for(b=0;b<c.length;++b)e.push(c[b].offset.toFixed(5)+" "+g.normalizeColor(c[b].color).toHex());b=c.length-1;c[b].offset.toFixed(5)!="1.00000"&&e.push("1 "+g.normalizeColor(c[b].color).toHex());b=this.rawNode.fill;b.colors.value=e.join(";");b.method="sigma";b.type="gradient";b.angle=(270-v._radToDeg(a.angle))%360;b.on=!0;break;case "radial":this.fillStyle=a=g.makeParameters(g.defaultRadialGradient,a);var f=
parseFloat(this.rawNode.style.left),h=parseFloat(this.rawNode.style.top),i=parseFloat(this.rawNode.style.width),j=parseFloat(this.rawNode.style.height),k=isNaN(i)?1:2*a.r/i;c=[];a.colors[0].offset>0&&c.push({offset:1,color:g.normalizeColor(a.colors[0].color)});d.forEach(a.colors,function(a){c.push({offset:1-a.offset*k,color:g.normalizeColor(a.color)})});for(b=c.length-1;b>=0&&c[b].offset<0;)--b;if(b<c.length-1){e=c[b];var l=c[b+1];l.color=q.blendColors(e.color,l.color,e.offset/(e.offset-l.offset));
for(l.offset=0;c.length-b>2;)c.pop()}b=c.length-1;e=[];for(c[b].offset>0&&e.push("0 "+c[b].color.toHex());b>=0;--b)e.push(c[b].offset.toFixed(5)+" "+c[b].color.toHex());b=this.rawNode.fill;b.colors.value=e.join(";");b.method="sigma";b.type="gradientradial";b.focusposition=isNaN(i)||isNaN(j)||isNaN(f)||isNaN(h)?"0.5 0.5":((a.cx-f)/i).toFixed(5)+" "+((a.cy-h)/j).toFixed(5);b.focussize="0 0";b.on=!0;break;case "pattern":this.fillStyle=a=g.makeParameters(g.defaultPattern,a);b=this.rawNode.fill;b.type=
"tile";b.src=a.src;if(a.width&&a.height)b.size.x=g.px2pt(a.width),b.size.y=g.px2pt(a.height);b.alignShape="f";b.position.x=0;b.position.y=0;b.origin.x=a.width?a.x/a.width:0;b.origin.y=a.height?a.y/a.height:0;b.on=!0}this.rawNode.fill.opacity=1;return this}this.fillStyle=g.normalizeColor(a);(b=this.rawNode.fill)||(b=this.rawNode.ownerDocument.createElement("v:fill"));b.method="any";b.type="solid";b.opacity=this.fillStyle.a;if(e=this.rawNode.filters["DXImageTransform.Microsoft.Alpha"])e.opacity=Math.round(this.fillStyle.a*
100);this.rawNode.fillcolor=this.fillStyle.toHex();this.rawNode.filled=!0;return this},setStroke:function(a){if(!a)return this.strokeStyle=null,this.rawNode.stroked="f",this;if(typeof a=="string"||f.isArray(a)||a instanceof q)a={color:a};a=this.strokeStyle=g.makeParameters(g.defaultStroke,a);a.color=g.normalizeColor(a.color);var b=this.rawNode;b.stroked=!0;b.strokecolor=a.color.toCss();b.strokeweight=a.width+"px";if(b.stroke)b.stroke.opacity=a.color.a,b.stroke.endcap=this._translate(this._capMap,
a.cap),typeof a.join=="number"?(b.stroke.joinstyle="miter",b.stroke.miterlimit=a.join):b.stroke.joinstyle=a.join,b.stroke.dashstyle=a.style=="none"?"Solid":a.style;return this},_capMap:{butt:"flat"},_capMapReversed:{flat:"butt"},_translate:function(a,b){return b in a?a[b]:b},_applyTransform:function(){var a=this._getRealMatrix();if(a){var b=this.rawNode.skew;if(typeof b=="undefined")for(var c=0;c<this.rawNode.childNodes.length;++c)if(this.rawNode.childNodes[c].tagName=="skew"){b=this.rawNode.childNodes[c];
break}if(b){b.on="f";var c=a.xx.toFixed(8)+" "+a.xy.toFixed(8)+" "+a.yx.toFixed(8)+" "+a.yy.toFixed(8)+" 0 0",a=Math.floor(a.dx).toFixed()+"px "+Math.floor(a.dy).toFixed()+"px",d=this.rawNode.style,e=parseFloat(d.left),f=parseFloat(d.top),g=parseFloat(d.width),d=parseFloat(d.height);isNaN(e)&&(e=0);isNaN(f)&&(f=0);if(isNaN(g)||!g)g=1;if(isNaN(d)||!d)d=1;e=(-e/g-0.5).toFixed(8)+" "+(-f/d-0.5).toFixed(8);b.matrix=c;b.origin=e;b.offset=a;b.on=!0}}this.fillStyle&&this.fillStyle.type=="linear"&&this.setFill(this.fillStyle);
return this},_setDimensions:function(){return this},setRawNode:function(a){a.stroked="f";a.filled="f";this.rawNode=a;this.rawNode.__gfxObject__=this.getUID()},_moveToFront:function(){this.rawNode.parentNode.appendChild(this.rawNode);return this},_moveToBack:function(){var a=this.rawNode,b=a.parentNode,c=b.firstChild;b.insertBefore(a,c);c.tagName=="rect"&&c.swapNode(a);return this},_getRealMatrix:function(){return this.parentMatrix?new v.Matrix2D([this.parentMatrix,this.matrix]):this.matrix}});i("dojox.gfx.vml.Group",
b.Shape,{constructor:function(){l.Container._init.call(this)},_applyTransform:function(){for(var a=this._getRealMatrix(),b=0;b<this.children.length;++b)this.children[b]._updateParentMatrix(a);return this},_setDimensions:function(a,b){var c=this.rawNode,d=c.style,e=this.bgNode.style;d.width=a;d.height=b;c.coordsize=a+" "+b;e.width=a;e.height=b;for(c=0;c<this.children.length;++c)this.children[c]._setDimensions(a,b);return this}});b.Group.nodeType="group";i("dojox.gfx.vml.Rect",[b.Shape,l.Rect],{setShape:function(a){a=
this.shape=g.makeParameters(this.shape,a);this.bbox=null;var b=Math.min(1,a.r/Math.min(parseFloat(a.width),parseFloat(a.height))).toFixed(8),c=this.rawNode.parentNode,d=null;if(c){if(c.lastChild!==this.rawNode)for(var f=0;f<c.childNodes.length;++f)if(c.childNodes[f]===this.rawNode){d=c.childNodes[f+1];break}c.removeChild(this.rawNode)}e("ie")>7?(f=this.rawNode.ownerDocument.createElement("v:roundrect"),f.arcsize=b,f.style.display="inline-block",this.rawNode=f,this.rawNode.__gfxObject__=this.getUID()):
this.rawNode.arcsize=b;c&&(d?c.insertBefore(this.rawNode,d):c.appendChild(this.rawNode));b=this.rawNode.style;b.left=a.x.toFixed();b.top=a.y.toFixed();b.width=typeof a.width=="string"&&a.width.indexOf("%")>=0?a.width:Math.max(a.width.toFixed(),0);b.height=typeof a.height=="string"&&a.height.indexOf("%")>=0?a.height:Math.max(a.height.toFixed(),0);return this.setTransform(this.matrix).setFill(this.fillStyle).setStroke(this.strokeStyle)}});b.Rect.nodeType="roundrect";i("dojox.gfx.vml.Ellipse",[b.Shape,
l.Ellipse],{setShape:function(a){a=this.shape=g.makeParameters(this.shape,a);this.bbox=null;var b=this.rawNode.style;b.left=(a.cx-a.rx).toFixed();b.top=(a.cy-a.ry).toFixed();b.width=(a.rx*2).toFixed();b.height=(a.ry*2).toFixed();return this.setTransform(this.matrix)}});b.Ellipse.nodeType="oval";i("dojox.gfx.vml.Circle",[b.Shape,l.Circle],{setShape:function(a){a=this.shape=g.makeParameters(this.shape,a);this.bbox=null;var b=this.rawNode.style;b.left=(a.cx-a.r).toFixed();b.top=(a.cy-a.r).toFixed();
b.width=(a.r*2).toFixed();b.height=(a.r*2).toFixed();return this}});b.Circle.nodeType="oval";i("dojox.gfx.vml.Line",[b.Shape,l.Line],{constructor:function(a){a&&a.setAttribute("dojoGfxType","line")},setShape:function(a){a=this.shape=g.makeParameters(this.shape,a);this.bbox=null;this.rawNode.path.v="m"+a.x1.toFixed()+" "+a.y1.toFixed()+"l"+a.x2.toFixed()+" "+a.y2.toFixed()+"e";return this.setTransform(this.matrix)}});b.Line.nodeType="shape";i("dojox.gfx.vml.Polyline",[b.Shape,l.Polyline],{constructor:function(a){a&&
a.setAttribute("dojoGfxType","polyline")},setShape:function(a,b){a&&a instanceof Array?(this.shape=g.makeParameters(this.shape,{points:a}),b&&this.shape.points.length&&this.shape.points.push(this.shape.points[0])):this.shape=g.makeParameters(this.shape,a);this.bbox=null;this._normalizePoints();var c=[],d=this.shape.points;if(d.length>0&&(c.push("m"),c.push(d[0].x.toFixed(),d[0].y.toFixed()),d.length>1)){c.push("l");for(var e=1;e<d.length;++e)c.push(d[e].x.toFixed(),d[e].y.toFixed())}c.push("e");this.rawNode.path.v=
c.join(" ");return this.setTransform(this.matrix)}});b.Polyline.nodeType="shape";i("dojox.gfx.vml.Image",[b.Shape,l.Image],{setShape:function(a){a=this.shape=g.makeParameters(this.shape,a);this.bbox=null;this.rawNode.firstChild.src=a.src;return this.setTransform(this.matrix)},_applyTransform:function(){var a=this._getRealMatrix(),b=this.rawNode,c=b.style,d=this.shape,a=a?v.multiply(a,{dx:d.x,dy:d.y}):v.normalize({dx:d.x,dy:d.y});if(a.xy==0&&a.yx==0&&a.xx>0&&a.yy>0)c.filter="",c.width=Math.floor(a.xx*
d.width),c.height=Math.floor(a.yy*d.height),c.left=Math.floor(a.dx),c.top=Math.floor(a.dy);else{var e=b.parentNode.style;c.left="0px";c.top="0px";c.width=e.width;c.height=e.height;a=v.multiply(a,{xx:d.width/parseInt(c.width),yy:d.height/parseInt(c.height)});(b=b.filters["DXImageTransform.Microsoft.Matrix"])?(b.M11=a.xx,b.M12=a.xy,b.M21=a.yx,b.M22=a.yy,b.Dx=a.dx,b.Dy=a.dy):c.filter="progid:DXImageTransform.Microsoft.Matrix(M11="+a.xx+", M12="+a.xy+", M21="+a.yx+", M22="+a.yy+", Dx="+a.dx+", Dy="+a.dy+
")"}return this},_setDimensions:function(a,b){var c=this.rawNode;if(c.filters["DXImageTransform.Microsoft.Matrix"])return c=c.style,c.width=a,c.height=b,this._applyTransform();return this}});b.Image.nodeType="rect";i("dojox.gfx.vml.Text",[b.Shape,l.Text],{constructor:function(a){a&&a.setAttribute("dojoGfxType","text");this.fontStyle=null},_alignment:{start:"left",middle:"center",end:"right"},setShape:function(a){this.shape=g.makeParameters(this.shape,a);this.bbox=null;var c=this.rawNode,a=this.shape,
d=a.x,e=a.y.toFixed();switch(a.align){case "middle":d-=5;break;case "end":d-=10}for(var e="m"+d.toFixed()+","+e+"l"+(d+10).toFixed()+","+e+"e",f=null,d=null,h=c.childNodes,i=0;i<h.length;++i){var j=h[i].tagName;if(j=="path"){if(f=h[i],d)break}else if(j=="textpath"&&(d=h[i],f))break}f||(f=c.ownerDocument.createElement("v:path"),c.appendChild(f));d||(d=c.ownerDocument.createElement("v:textpath"),c.appendChild(d));f.v=e;f.textPathOk=!0;d.on=!0;c=b.text_alignment[a.align];d.style["v-text-align"]=c?c:
"left";d.style["text-decoration"]=a.decoration;d.style["v-rotate-letters"]=a.rotated;d.style["v-text-kern"]=a.kerning;d.string=a.text;return this.setTransform(this.matrix)},_setFont:function(){for(var a=this.fontStyle,b=this.rawNode.childNodes,c=0;c<b.length;++c)if(b[c].tagName=="textpath"){b[c].style.font=g.makeFontString(a);break}this.setTransform(this.matrix)},_getRealMatrix:function(){var a=this.inherited(arguments);a&&(a=v.multiply(a,{dy:-g.normalizedLength(this.fontStyle?this.fontStyle.size:
"10pt")*0.35}));return a},getTextWidth:function(){var a=this.rawNode,b=a.style.display;a.style.display="inline";var c=g.pt2px(parseFloat(a.currentStyle.width));a.style.display=b;return c}});b.Text.nodeType="shape";i("dojox.gfx.vml.Path",[b.Shape,p.Path],{constructor:function(a){a&&!a.getAttribute("dojoGfxType")&&a.setAttribute("dojoGfxType","path");this.vmlPath="";this.lastControl={}},_updateWithSegment:function(a){var b=f.clone(this.last);this.inherited(arguments);if(!(arguments.length>1))b=this[this.renderers[a.action]](a,
b),typeof this.vmlPath=="string"?(this.vmlPath+=b.join(""),this.rawNode.path.v=this.vmlPath+" r0,0 e"):Array.prototype.push.apply(this.vmlPath,b)},setShape:function(){this.vmlPath=[];this.lastControl.type="";this.inherited(arguments);this.vmlPath=this.vmlPath.join("");this.rawNode.path.v=this.vmlPath+" r0,0 e";return this},_pathVmlToSvgMap:{m:"M",l:"L",t:"m",r:"l",c:"C",v:"c",qb:"Q",x:"z",e:""},renderers:{M:"_moveToA",m:"_moveToR",L:"_lineToA",l:"_lineToR",H:"_hLineToA",h:"_hLineToR",V:"_vLineToA",
v:"_vLineToR",C:"_curveToA",c:"_curveToR",S:"_smoothCurveToA",s:"_smoothCurveToR",Q:"_qCurveToA",q:"_qCurveToR",T:"_qSmoothCurveToA",t:"_qSmoothCurveToR",A:"_arcTo",a:"_arcTo",Z:"_closePath",z:"_closePath"},_addArgs:function(a,b,c,d){for(b=b instanceof Array?b:b.args;c<d;++c)a.push(" ",b[c].toFixed())},_adjustRelCrd:function(a,b,c){var b=b instanceof Array?b:b.args,d=b.length,e=Array(d),f=0,g=a.x,a=a.y;typeof g!="number"&&(e[0]=g=b[0],e[1]=a=b[1],f=2);if(typeof c=="number"&&c!=2)for(var h=c;h<=d;){for(;f<
h;f+=2)e[f]=g+b[f],e[f+1]=a+b[f+1];g=e[h-2];a=e[h-1];h+=c}else for(;f<d;f+=2)e[f]=g+=b[f],e[f+1]=a+=b[f+1];return e},_adjustRelPos:function(a,b){for(var c=b instanceof Array?b:b.args,d=c.length,e=Array(d),f=0;f<d;++f)e[f]=a+=c[f];return e},_moveToA:function(a){var b=[" m"],a=a instanceof Array?a:a.args,c=a.length;this._addArgs(b,a,0,2);c>2&&(b.push(" l"),this._addArgs(b,a,2,c));this.lastControl.type="";return b},_moveToR:function(a,b){return this._moveToA(this._adjustRelCrd(b,a))},_lineToA:function(a){var b=
[" l"],a=a instanceof Array?a:a.args;this._addArgs(b,a,0,a.length);this.lastControl.type="";return b},_lineToR:function(a,b){return this._lineToA(this._adjustRelCrd(b,a))},_hLineToA:function(a,b){for(var c=[" l"],d=" "+b.y.toFixed(),e=a instanceof Array?a:a.args,f=e.length,g=0;g<f;++g)c.push(" ",e[g].toFixed(),d);this.lastControl.type="";return c},_hLineToR:function(a,b){return this._hLineToA(this._adjustRelPos(b.x,a),b)},_vLineToA:function(a,b){for(var c=[" l"],d=" "+b.x.toFixed(),e=a instanceof
Array?a:a.args,f=e.length,g=0;g<f;++g)c.push(d," ",e[g].toFixed());this.lastControl.type="";return c},_vLineToR:function(a,b){return this._vLineToA(this._adjustRelPos(b.y,a),b)},_curveToA:function(a){for(var b=[],a=a instanceof Array?a:a.args,c=a.length,d=this.lastControl,e=0;e<c;e+=6)b.push(" c"),this._addArgs(b,a,e,e+6);d.x=a[c-4];d.y=a[c-3];d.type="C";return b},_curveToR:function(a,b){return this._curveToA(this._adjustRelCrd(b,a,6))},_smoothCurveToA:function(a,b){var c=[],d=a instanceof Array?
a:a.args,e=d.length,f=this.lastControl,g=0;if(f.type!="C")c.push(" c"),this._addArgs(c,[b.x,b.y],0,2),this._addArgs(c,d,0,4),f.x=d[0],f.y=d[1],f.type="C",g=4;for(;g<e;g+=4)c.push(" c"),this._addArgs(c,[2*b.x-f.x,2*b.y-f.y],0,2),this._addArgs(c,d,g,g+4),f.x=d[g],f.y=d[g+1];return c},_smoothCurveToR:function(a,b){return this._smoothCurveToA(this._adjustRelCrd(b,a,4),b)},_qCurveToA:function(a){for(var b=[],a=a instanceof Array?a:a.args,c=a.length,d=this.lastControl,e=0;e<c;e+=4)b.push(" qb"),this._addArgs(b,
a,e,e+4);d.x=a[c-4];d.y=a[c-3];d.type="Q";return b},_qCurveToR:function(a,b){return this._qCurveToA(this._adjustRelCrd(b,a,4))},_qSmoothCurveToA:function(a,b){var c=[],d=a instanceof Array?a:a.args,e=d.length,f=this.lastControl,g=0;if(f.type!="Q")c.push(" qb"),this._addArgs(c,[f.x=b.x,f.y=b.y],0,2),f.type="Q",this._addArgs(c,d,0,2),g=2;for(;g<e;g+=2)c.push(" qb"),this._addArgs(c,[f.x=2*b.x-f.x,f.y=2*b.y-f.y],0,2),this._addArgs(c,d,g,g+2);return c},_qSmoothCurveToR:function(a,b){return this._qSmoothCurveToA(this._adjustRelCrd(b,
a,2),b)},_arcTo:function(a,b){for(var c=[],d=a.args,e=d.length,f=a.action=="a",g=0;g<e;g+=7){var h=d[g+5],i=d[g+6];f&&(h+=b.x,i+=b.y);for(var j=k.arcAsBezier(b,d[g],d[g+1],d[g+2],d[g+3]?1:0,d[g+4]?1:0,h,i),l=0;l<j.length;++l){c.push(" c");var m=j[l];this._addArgs(c,m,0,m.length);this._updateBBox(m[0],m[1]);this._updateBBox(m[2],m[3]);this._updateBBox(m[4],m[5])}b.x=h;b.y=i}this.lastControl.type="";return c},_closePath:function(){this.lastControl.type="";return["x"]}});b.Path.nodeType="shape";i("dojox.gfx.vml.TextPath",
[b.Path,p.TextPath],{constructor:function(a){a&&a.setAttribute("dojoGfxType","textpath");this.fontStyle=null;if(!("text"in this))this.text=f.clone(g.defaultTextPath);if(!("fontStyle"in this))this.fontStyle=f.clone(g.defaultFont)},setText:function(a){this.text=g.makeParameters(this.text,typeof a=="string"?{text:a}:a);this._setText();return this},setFont:function(a){this.fontStyle=typeof a=="string"?g.splitFontString(a):g.makeParameters(g.defaultFont,a);this._setFont();return this},_setText:function(){this.bbox=
null;for(var a=this.rawNode,c=this.text,d=null,e=null,f=a.childNodes,g=0;g<f.length;++g){var h=f[g].tagName;if(h=="path"){if(d=f[g],e)break}else if(h=="textpath"&&(e=f[g],d))break}d||(d=this.rawNode.ownerDocument.createElement("v:path"),a.appendChild(d));e||(e=this.rawNode.ownerDocument.createElement("v:textpath"),a.appendChild(e));d.textPathOk=!0;e.on=!0;a=b.text_alignment[c.align];e.style["v-text-align"]=a?a:"left";e.style["text-decoration"]=c.decoration;e.style["v-rotate-letters"]=c.rotated;e.style["v-text-kern"]=
c.kerning;e.string=c.text},_setFont:function(){for(var a=this.fontStyle,b=this.rawNode.childNodes,c=0;c<b.length;++c)if(b[c].tagName=="textpath"){b[c].style.font=g.makeFontString(a);break}}});b.TextPath.nodeType="shape";i("dojox.gfx.vml.Surface",l.Surface,{constructor:function(){l.Container._init.call(this)},setDimensions:function(a,b){this.width=g.normalizedLength(a);this.height=g.normalizedLength(b);if(!this.rawNode)return this;var c=this.clipNode.style,d=this.rawNode,e=d.style,f=this.bgNode.style,
h=this._parent.style;h.width=a;h.height=b;c.width=a;c.height=b;c.clip="rect(0px "+a+"px "+b+"px 0px)";e.width=a;e.height=b;d.coordsize=a+" "+b;f.width=a;f.height=b;for(c=0;c<this.children.length;++c)this.children[c]._setDimensions(a,b);return this},getDimensions:function(){var a=this.rawNode?{width:g.normalizedLength(this.rawNode.style.width),height:g.normalizedLength(this.rawNode.style.height)}:null;if(a.width<=0)a.width=this.width;if(a.height<=0)a.height=this.height;return a}});b.createSurface=
function(a,c,d){if(!c&&!d)var f=j.position(a),c=c||f.w,d=d||f.h;typeof c=="number"&&(c+="px");typeof d=="number"&&(d+="px");var f=new b.Surface,a=m.byId(a),h=f.clipNode=a.ownerDocument.createElement("div"),i=f.rawNode=a.ownerDocument.createElement("v:group"),k=h.style,l=i.style;if(e("ie")>7)l.display="inline-block";f._parent=a;f._nodes.push(h);a.style.width=c;a.style.height=d;k.position="absolute";k.width=c;k.height=d;k.clip="rect(0px "+c+" "+d+" 0px)";l.position="absolute";l.width=c;l.height=d;i.coordsize=
(c==="100%"?c:parseFloat(c))+" "+(d==="100%"?d:parseFloat(d));i.coordorigin="0 0";var k=f.bgNode=i.ownerDocument.createElement("v:rect"),p=k.style;p.left=p.top=0;p.width=l.width;p.height=l.height;k.filled=k.stroked="f";i.appendChild(k);h.appendChild(i);a.appendChild(h);f.width=g.normalizedLength(c);f.height=g.normalizedLength(d);return f};var y=l.Container,i={add:c.fixVmlAdd===!0?function(a){if(this!=a.getParent()){var b=a.getParent();b&&b.remove(a);this.rawNode.appendChild(a.rawNode);y.add.apply(this,
arguments);h(this,function(a){typeof a.getFont=="function"&&(a.setShape(a.getShape()),a.setFont(a.getFont()));typeof a.setFill=="function"&&(a.setFill(a.getFill()),a.setStroke(a.getStroke()))})}return this}:function(a){this!=a.getParent()&&(this.rawNode.appendChild(a.rawNode),a.getParent()||(a.setFill(a.getFill()),a.setStroke(a.getStroke())),y.add.apply(this,arguments));return this},remove:function(a){this==a.getParent()&&(this.rawNode==a.rawNode.parentNode&&this.rawNode.removeChild(a.rawNode),y.remove.apply(this,
arguments));return this},clear:function(){for(var a=this.rawNode;a.firstChild!=a.lastChild;)a.firstChild!=this.bgNode&&a.removeChild(a.firstChild),a.lastChild!=this.bgNode&&a.removeChild(a.lastChild);return y.clear.apply(this,arguments)},_moveChildToFront:y._moveChildToFront,_moveChildToBack:y._moveChildToBack},c={createGroup:function(){var a=this.createObject(b.Group,null),c=a.rawNode.ownerDocument.createElement("v:rect");c.style.left=c.style.top=0;c.style.width=a.rawNode.style.width;c.style.height=
a.rawNode.style.height;c.filled=c.stroked="f";a.rawNode.appendChild(c);a.bgNode=c;return a},createImage:function(a){if(!this.rawNode)return null;var c=new b.Image,d=this.rawNode.ownerDocument,e=d.createElement("v:rect");e.stroked="f";e.style.width=this.rawNode.style.width;e.style.height=this.rawNode.style.height;d=d.createElement("v:imagedata");e.appendChild(d);c.setRawNode(e);this.rawNode.appendChild(e);c.setShape(a);this.add(c);return c},createRect:function(a){if(!this.rawNode)return null;var c=
new b.Rect,d=this.rawNode.ownerDocument.createElement("v:roundrect");if(e("ie")>7)d.style.display="inline-block";c.setRawNode(d);this.rawNode.appendChild(d);c.setShape(a);this.add(c);return c},createObject:function(a,c){if(!this.rawNode)return null;var d=new a,e=this.rawNode.ownerDocument.createElement("v:"+a.nodeType);d.setRawNode(e);this.rawNode.appendChild(e);switch(a){case b.Group:case b.Line:case b.Polyline:case b.Image:case b.Text:case b.Path:case b.TextPath:this._overrideSize(e)}d.setShape(c);
this.add(d);return d},_overrideSize:function(a){var b=this.rawNode.style,c=b.width,b=b.height;a.style.width=c;a.style.height=b;a.coordsize=parseInt(c)+" "+parseInt(b)}};f.extend(b.Group,i);f.extend(b.Group,l.Creator);f.extend(b.Group,c);f.extend(b.Surface,i);f.extend(b.Surface,l.Creator);f.extend(b.Surface,c);b.fixTarget=function(a){if(!a.gfxTarget)a.gfxTarget=l.byId(a.target.__gfxObject__);return!0};return b})}}});define("djeo-esri/esri",[],1);