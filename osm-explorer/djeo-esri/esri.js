//>>built
require({cache:{"dojox/gfx/arc":function(){define("dojox/gfx/arc",["./_base","dojo/_base/lang","./matrix"],function(e,i,d){function p(c){var m=Math.cos(c),c=Math.sin(c),j={x:m+4/3*(1-m),y:c-4/3*m*(1-m)/c};return{s:{x:m,y:-c},c1:{x:j.x,y:-j.y},c2:j,e:{x:m,y:c}}}var h=2*Math.PI,c=Math.PI/4,m=Math.PI/8,j=c+m,q=p(m);return e.arc={unitArcAsBezier:p,curvePI4:q,arcAsBezier:function(g,e,i,k,a,v,f,b){var a=Boolean(a),v=Boolean(v),r=d._degToRad(k),k=e*e,w=i*i,u=d.multiplyPoint(d.rotate(-r),{x:(g.x-f)/2,y:(g.y-
b)/2}),x=u.x*u.x,n=u.y*u.y,k=Math.sqrt((k*w-k*n-w*x)/(k*n+w*x));isNaN(k)&&(k=0);k={x:k*e*u.y/i,y:-k*i*u.x/e};a==v&&(k={x:-k.x,y:-k.y});k=d.multiplyPoint([d.translate((g.x+f)/2,(g.y+b)/2),d.rotate(r)],k);e=d.normalize([d.translate(k.x,k.y),d.rotate(r),d.scale(e,i)]);k=d.invert(e);g=d.multiplyPoint(k,g);b=d.multiplyPoint(k,f,b);f=Math.atan2(g.y,g.x);k=f-Math.atan2(b.y,b.x);v&&(k=-k);k<0?k+=h:k>h&&(k-=h);i=m;b=q;i=v?i:-i;g=[];for(a=k;a>0;a-=c)a<j&&(i=a/2,b=p(i),i=v?i:-i,a=0),u=d.normalize([e,d.rotate(f+
i)]),v?(k=d.multiplyPoint(u,b.c1),r=d.multiplyPoint(u,b.c2),u=d.multiplyPoint(u,b.e)):(k=d.multiplyPoint(u,b.c2),r=d.multiplyPoint(u,b.c1),u=d.multiplyPoint(u,b.s)),g.push([k.x,k.y,r.x,r.y,u.x,u.y]),f+=2*i;return g}}})},"dojo/_base/loader":function(){define("dojo/_base/loader",["./kernel","../has","require","module","./json","./lang","./array"],function(e,i,d,p,h,c,m){var j=function(b){return b.replace(/\./g,"/")},q=/\/\/>>built/,g=[],l=[],t,k=function(b){t[b.mid]=1;for(var n,o,a=b.deps||[],f=0;f<
a.length;f++)if(o=a[f],!(n=t[o.mid]))if(n===0||!k(o))return t[b.mid]=0,!1;return!0},a=function(){var b,o;t={};for(o in C)if(b=C[o],b.executed||b.noReqPluginCheck)t[o]=1;else{if(b.noReqPluginCheck!==0)b.noReqPluginCheck=/loadInit\!/.test(o)||/require\!/.test(o)?1:0;b.noReqPluginCheck?t[o]=1:b.injected!==n&&(t[o]=0)}for(var a=0,f=l.length;a<f;a++)if(b=l[a],!(o=t[b.mid]))if(o===0||!k(b))return;u.holdIdle();b=g;g=[];m.forEach(b,function(b){b(1)});u.releaseIdle()},v=function(b,n,o){var a=/\(|\)/g,f=1;
for(a.lastIndex=n;n=a.exec(b);)if(n[0]==")"?f-=1:f+=1,f==0)break;if(f!=0)throw"unmatched paren around character "+a.lastIndex+" in: "+b;return[e.trim(b.substring(o,a.lastIndex))+";\n",a.lastIndex]},f=/(\/\*([\s\S]*?)\*\/|\/\/(.*)$)/mg,b=/(^|\s)dojo\.(loadInit|require|provide|requireLocalization|requireIf|requireAfterIf|platformRequire)\s*\(/mg,r=/(^|\s)(require|define)\s*\(/m,w=function(n,o){var a,s,c,m=[],g=[];a=[];for(o=o||n.replace(f,function(n){b.lastIndex=r.lastIndex=0;return b.test(n)||r.test(n)?
"":n});a=b.exec(o);)s=b.lastIndex,c=s-a[0].length,s=v(o,s,c),a[2]=="loadInit"?m.push(s[0]):g.push(s[0]),b.lastIndex=s[1];a=m.concat(g);return a.length||!r.test(o)?[n.replace(/(^|\s)dojo\.loadInit\s*\(/g,"\n0 && dojo.loadInit("),a.join(""),a]:0},u=d.initSyncLoader(function(b,n,o){g.push(o);m.forEach(b.split(","),function(b){b=z(b,n.module);l.push(b);B(b)});a()},a,function(b,n){var o,a,f=[],s=[];if(q.test(n)||!(o=w(n)))return 0;a=b.mid+"-*loadInit";for(var r in z("dojo",b).result.scopeMap)f.push(r),
s.push('"'+r+'"');return"// xdomain rewrite of "+b.path+"\ndefine('"+a+"',{\n\tnames:"+e.toJson(f)+",\n\tdef:function("+f.join(",")+"){"+o[1]+"}});\n\ndefine("+e.toJson(f.concat(["dojo/loadInit!"+a]))+", function("+f.join(",")+"){\n"+o[0]+"});"}),x=u.sync,n=u.arrived,o=u.nonmodule,s=u.executing,y=u.executed,A=u.syncExecStack,C=u.modules,D=u.execQ,z=u.getModule,B=u.injectModule,E=u.setArrived,G=u.signal,H=u.finishExec,I=u.execModule,F=u.getLegacyMode;e.provide=function(b){var n=A[0],o=c.mixin(z(j(b),
d.module),{executed:s,result:c.getObject(b,!0)});E(o);if(n)(n.provides||(n.provides=[])).push(function(){o.result=c.getObject(b);delete o.provides;o.executed!==y&&H(o)});return o.result};i.add("config-publishRequireResult",1,0,0);e.require=function(b,a){var f=function(b,a){var f=z(j(b),d.module);if(A.length&&A[0].finish)A[0].finish.push(b);else{if(f.executed)return f.result;a&&(f.result=o);var s=F();B(f);s=F();f.executed!==y&&f.injected===n&&(u.holdIdle(),I(f),u.releaseIdle());if(f.executed)return f.result;
s==x?f.cjs?D.unshift(f):A.length&&(A[0].finish=[b]):D.push(f)}}(b,a);i("config-publishRequireResult")&&!c.exists(b)&&f!==void 0&&c.setObject(b,f);return f};e.loadInit=function(b){b()};e.registerModulePath=function(b,n){var o={};o[b.replace(/\./g,"/")]=n;d({paths:o})};e.platformRequire=function(b){for(var b=(b.common||[]).concat(b[e._name]||b["default"]||[]),n;b.length;)c.isArray(n=b.shift())?e.require.apply(e,n):e.require(n)};e.requireIf=e.requireAfterIf=function(b,n,o){b&&e.require(n,o)};e.requireLocalization=
function(b,n,o){d(["../i18n"],function(a){a.getLocalization(b,n,o)})};return{extractLegacyApiApplications:w,require:u.dojoRequirePlugin,loadInit:function(b,n,f){n([b],function(b){n(b.names,function(){for(var s="",r=[],c=0;c<arguments.length;c++)s+="var "+b.names[c]+"= arguments["+c+"]; ",r.push(arguments[c]);eval(s);var v=n.module,d=[],s={},h=[],y,c={provide:function(b){b=j(b);b=z(b,v);b!==v&&E(b)},require:function(b,n){b=j(b);n&&(z(b,v).result=o);h.push(b)},requireLocalization:function(b,n,o){d.length||
(d=["dojo/i18n"]);o=(o||e.locale).toLowerCase();b=j(b)+"/nls/"+(/root/i.test(o)?"":o+"/")+j(n);z(b,v).isXd&&d.push("dojo/i18n!"+b)},loadInit:function(b){b()}};try{for(y in c)s[y]=e[y],e[y]=c[y];b.def.apply(null,r)}catch(w){G("error",[{src:p.id,id:"failedDojoLoadInit"},w])}finally{for(y in c)e[y]=s[y]}h.length&&d.push("dojo/require!"+h.join(","));g.push(f);m.forEach(h,function(b){b=z(b,n.module);l.push(b);B(b)});a()})})}}})},"dojox/gfx/gradient":function(){define("dojox/gfx/gradient",["dojo/_base/lang",
"./matrix","dojo/_base/Color"],function(e,i,d){function p(c,j,d,g,h,e){c=i.multiplyPoint(d,c,j);g=i.multiplyPoint(g,c);return{r:c,p:g,o:i.multiplyPoint(h,g).x/e}}function h(c,j){return c.o-j.o}var c=e.getObject("dojox.gfx.gradient",!0);c.rescale=function(c,j,h){var g=c.length,e=h<j,i;e&&(i=j,j=h,h=i);if(!g)return[];if(h<=c[0].offset)i=[{offset:0,color:c[0].color},{offset:1,color:c[0].color}];else if(j>=c[g-1].offset)i=[{offset:0,color:c[g-1].color},{offset:1,color:c[g-1].color}];else{var k=h-j,a,
v,f;i=[];j<0&&i.push({offset:0,color:new d(c[0].color)});for(f=0;f<g;++f)if(a=c[f],a.offset>=j)break;f?(v=c[f-1],i.push({offset:0,color:d.blendColors(new d(v.color),new d(a.color),(j-v.offset)/(a.offset-v.offset))})):i.push({offset:0,color:new d(a.color)});for(;f<g;++f){a=c[f];if(a.offset>=h)break;i.push({offset:(a.offset-j)/k,color:new d(a.color)})}f<g?(v=c[f-1],i.push({offset:1,color:d.blendColors(new d(v.color),new d(a.color),(h-v.offset)/(a.offset-v.offset))})):i.push({offset:1,color:new d(c[g-
1].color)})}if(e){i.reverse();f=0;for(g=i.length;f<g;++f)a=i[f],a.offset=1-a.offset}return i};c.project=function(m,j,d,g){var m=m||i.identity,e=i.multiplyPoint(m,j.x1,j.y1),t=i.multiplyPoint(m,j.x2,j.y2),k=Math.atan2(t.y-e.y,t.x-e.x),a=i.project(t.x-e.x,t.y-e.y),e=i.multiplyPoint(a,e),t=i.multiplyPoint(a,t),e=new i.Matrix2D([i.rotate(-k),{dx:-e.x,dy:-e.y}]),t=i.multiplyPoint(e,t).x,m=[p(d.x,d.y,m,a,e,t),p(g.x,g.y,m,a,e,t),p(d.x,g.y,m,a,e,t),p(g.x,d.y,m,a,e,t)].sort(h),j=c.rescale(j.colors,m[0].o,
m[3].o);return{type:"linear",x1:m[0].p.x,y1:m[0].p.y,x2:m[3].p.x,y2:m[3].p.y,colors:j,angle:k}};return c})},"dojo/_base/browser":function(){require.has&&require.has.add("config-selectorEngine","acme");define("dojo/_base/browser",["../ready","./kernel","./connect","./unload","./window","./event","./html","./NodeList","../query","./xhr","./fx"],function(e){return e})},"djeo-esri/Placemark":function(){define("djeo-esri/Placemark",["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/_base/Color",
"djeo/_base","djeo/util/_base","djeo/common/Placemark"],function(e,i,d,p,h,c,m){function j(a,f,b){a=new p(a);if(f!==void 0)a.a=f;return new esri.symbol.SimpleLineSymbol(esri.symbol.SimpleLineSymbol.STYLE_SOLID,a,b)}function q(a,f,b,r){if(f||b!==void 0){f=f?new p(f):outline.color;if(b!==void 0)f.a=b;a.setColor(f)}r!==void 0&&a.setWidth(r)}function g(a){return esri.geometry.geographicToWebMercator(new esri.geometry.Point(a[0],a[1],{wkid:4326}))}var l,t,k={family:1,size:1,weight:1,style:1,variant:1},
a={style:"setStyle",variant:"setVariant",weight:"setWeight"},e=e([m],{constructor:function(a){i.mixin(this,a)},init:function(){var a=esri.symbol,f=a.TextSymbol,a=a.Font,b=this.engine.esriMap;l={start:f.ALIGN_START,middle:f.ALIGN_MIDDLE,end:f.ALIGN_END};t={style:{normal:a.STYLE_NORMAL,italic:a.STYLE_ITALIC,oblique:a.STYLE_OBLIQUE},variant:{normal:a.VARIANT_NORMAL,"small-caps":a.VARIANT_SMALLCAPS},weight:{normal:a.WEIGHT_NORMAL,bold:a.WEIGHT_BOLD,bolder:a.WEIGHT_BOLDER,lighter:a.WEIGHT_LIGHTER}};this.text=
b.addLayer(new esri.layers.GraphicsLayer)},remove:function(a){var f=a.baseShapes[0];this.engine._getParentLayer(a).remove(f)},show:function(a,f){var b=a.baseShapes[0];f?b.show():b.hide()},makePoint:function(){return null},makeLineString:function(a,f){var b=new esri.geometry.Polyline({paths:[f],spatialReference:this.map.engine.spatialReference});return new esri.Graphic(esri.geometry.geographicToWebMercator(b))},makeMultiLineString:function(a,f){var b=new esri.geometry.Polyline({paths:f,spatialReference:this.map.engine.spatialReference});
return new esri.Graphic(esri.geometry.geographicToWebMercator(b))},makePolygon:function(a,f){var b=new esri.geometry.Polygon({rings:f,spatialReference:this.map.engine.spatialReference});return new esri.Graphic(esri.geometry.geographicToWebMercator(b))},makeMultiPolygon:function(a,f){var b=[];d.forEach(f,function(a){d.forEach(a,function(a){b.push(a)})});return this.makePolygon(a,b)},applyPointStyle:function(a,f,b){var r=f.point,h=m.getSpecificShapeStyle(f.points,this.specificStyleIndex),j=a.baseShapes[0],
d=m.get("shape",f,r,h),n=m.getImgSrc(f,r,h),o=!0,s=m.getScale(f,r,h),e=j?j.symbol:new esri.symbol.PictureMarkerSymbol;if(!d&&n)o=!1;else if(!m.shapes[d]&&!j)d=m.defaultShapeType;(d=this._getIconUrl(o,d,n))&&e.setUrl(d);(d=o?m.getSize(f,r,h):m.getImgSize(f,r,h))?(f=o?[d[0]/2,d[1]/2]:m.getAnchor(f,r,h,d),f=[-f[0]+d[0]/2,f[1]-d[1]/2],e.setWidth(s*d[0]),e.setHeight(s*d[1]),e.setOffset(s*f[0],s*f[1])):j&&(s=m.get("rScale",f,r,h),s!==void 0&&(e.setWidth(s*e.width),e.setHeight(s*e.height),e.setOffset(s*
e.xoffset,s*e.yoffset)));if(j)j.setSymbol(e);else{j=a.orientation;if(j!==void 0){if(i.isObject(j))j=j.heading;e.setAngle(c.radToDeg(j))}a.baseShapes[0]=new esri.Graphic(g(b),e)}},applyLineStyle:function(a,f){var b=f.line,r=m.getSpecificShapeStyle(f.lines,this.specificStyleIndex),c=a.baseShapes[0],d=m.get("stroke",f,b,r),g=m.get("strokeOpacity",f,b,r),b=m.get("strokeWidth",f,b,r);(r=c.symbol)?(d||b!==void 0||g!==void 0)&&q(r,d,g,b):r=j(d,g,b);c.setSymbol(r)},applyPolygonStyle:function(a,f){var b=f.polygon,
r=a.baseShapes[0],c=m.get("fill",f,b),d=m.get("fillOpacity",f,b),g=m.get("stroke",f,b),n=m.get("strokeOpacity",f,b),b=m.get("strokeWidth",f,b),o=r.symbol;if(o){if(c||d!==void 0){c=c?new p(c):o.color;if(d!==void 0)c.a=d;o.setColor(c)}if(b===0)o.setOutline(null);else if(g||b||n!==void 0)(d=o.outline)?q(d,g,n,b):b&&(d=j(g,n,b)),o.setOutline(d)}else{o=new p(c);if(d!==void 0)o.a=d;o=new esri.symbol.SimpleFillSymbol(esri.symbol.SimpleFillSymbol.STYLE_SOLID,b?j(g,n,b):null,o)}r.setSymbol(o)},makeText:function(a,
f){a.textShapes&&d.forEach(a.textShapes,function(b){this.text.remove(b)},this);var b;if(a.isPoint())b=f.point;else if(a.isArea())b=f.area;if(b=m.get("text",f,b)){var c=b.label||this._getLabel(a,b);if(c)a.textShapes=[],a.reg.ts=b,b=this._makeTextShape(a,c,b),this.text.add(b),a.textShapes.push(b)}},_makeTextShape:function(c,f,b){var r=!0,d;if(c.isPoint()){if(b.hAlign)d=b.hAlign}else c.isArea()?d="middle":r=!1;if(r){var f=new esri.symbol.TextSymbol(f),r=m.getScale(c.reg.cs),j="dx"in b?r*b.dx:0,h="dy"in
b?r*b.dy:0,n=b.fill;d&&l[d]&&f.setAlign(l[d]);n&&f.setColor(new p(n));(j||h)&&f.setOffset(j,h);var o,s;for(s in k)if(s in b)if(o||(o=new esri.symbol.Font),t[s]){if(t[s][b[s]])o[a[s]](t[s][b[s]])}else s=="size"?o.setSize(r*b[s]):s=="family"&&o.setFamily(b[s]);o&&f.setFont(o);c=c.getCoords();return new esri.Graphic(g(c),f)}},setCoords:function(a,f){var b=g(a);f.baseShapes[0].setGeometry(b);f.textShapes&&f.textShapes[0].setGeometry(b)},setOrientation:function(a,f){var b=f.baseShapes[0],r=b.symbol;r.setAngle(c.radToDeg(a));
b.setSymbol(r)}});e.makePoint=g;return e})},"djeo-esri/WebTiles":function(){define("djeo-esri/WebTiles",["dojo/_base/declare","./_TiledWebMap"],function(e,i){return e(null,{init:function(){var d=new i({url:this.url,yFirst:this.yFirst});this._tileLayer=d;this.map.engine.esriMap.addLayer(d)}})})},"dojox/gfx/svg":function(){define("dojox/gfx/svg",["dojo/_base/lang","dojo/_base/window","dojo/dom","dojo/_base/declare","dojo/_base/array","dojo/dom-geometry","dojo/_base/Color","./_base","./shape","./path"],
function(e,i,d,p,h,c,m,j,q,g){function l(b,a){return i.doc.createElementNS?i.doc.createElementNS(b,a):i.doc.createElement(a)}function t(b){return k.useSvgWeb?i.doc.createTextNode(b,!0):i.doc.createTextNode(b)}var k=j.svg={};k.useSvgWeb=typeof window.svgweb!="undefined";var a=navigator.userAgent.toLowerCase(),v=a.search("iphone")>-1||a.search("ipad")>-1||a.search("ipod")>-1;k.xmlns={xlink:"http://www.w3.org/1999/xlink",svg:"http://www.w3.org/2000/svg"};k.getRef=function(b){if(!b||b=="none")return null;
if(b.match(/^url\(#.+\)$/))return d.byId(b.slice(5,-1));if(b.match(/^#dojoUnique\d+$/))return d.byId(b.slice(1));return null};k.dasharray={solid:"none",shortdash:[4,1],shortdot:[1,1],shortdashdot:[4,1,1,1],shortdashdotdot:[4,1,1,1,1,1],dot:[1,3],dash:[4,3],longdash:[8,3],dashdot:[4,3,1,3],longdashdot:[8,3,1,3],longdashdotdot:[8,3,1,3,1,3]};p("dojox.gfx.svg.Shape",q.Shape,{setFill:function(b){if(!b)return this.fillStyle=null,this.rawNode.setAttribute("fill","none"),this.rawNode.setAttribute("fill-opacity",
0),this;var a,f=function(b){this.setAttribute(b,a[b].toFixed(8))};if(typeof b=="object"&&"type"in b){switch(b.type){case "linear":a=j.makeParameters(j.defaultLinearGradient,b);b=this._setFillObject(a,"linearGradient");h.forEach(["x1","y1","x2","y2"],f,b);break;case "radial":a=j.makeParameters(j.defaultRadialGradient,b);b=this._setFillObject(a,"radialGradient");h.forEach(["cx","cy","r"],f,b);break;case "pattern":a=j.makeParameters(j.defaultPattern,b),b=this._setFillObject(a,"pattern"),h.forEach(["x",
"y","width","height"],f,b)}this.fillStyle=a;return this}this.fillStyle=a=j.normalizeColor(b);this.rawNode.setAttribute("fill",a.toCss());this.rawNode.setAttribute("fill-opacity",a.a);this.rawNode.setAttribute("fill-rule","evenodd");return this},setStroke:function(b){var a=this.rawNode;if(!b)return this.strokeStyle=null,a.setAttribute("stroke","none"),a.setAttribute("stroke-opacity",0),this;if(typeof b=="string"||e.isArray(b)||b instanceof m)b={color:b};b=this.strokeStyle=j.makeParameters(j.defaultStroke,
b);b.color=j.normalizeColor(b.color);if(b){a.setAttribute("stroke",b.color.toCss());a.setAttribute("stroke-opacity",b.color.a);a.setAttribute("stroke-width",b.width);a.setAttribute("stroke-linecap",b.cap);typeof b.join=="number"?(a.setAttribute("stroke-linejoin","miter"),a.setAttribute("stroke-miterlimit",b.join)):a.setAttribute("stroke-linejoin",b.join);var f=b.style.toLowerCase();f in k.dasharray&&(f=k.dasharray[f]);if(f instanceof Array){for(var f=e._toArray(f),c=0;c<f.length;++c)f[c]*=b.width;
if(b.cap!="butt"){for(c=0;c<f.length;c+=2)f[c]-=b.width,f[c]<1&&(f[c]=1);for(c=1;c<f.length;c+=2)f[c]+=b.width}f=f.join(",")}a.setAttribute("stroke-dasharray",f);a.setAttribute("dojoGfxStrokeStyle",b.style)}return this},_getParentSurface:function(){for(var b=this.parent;b&&!(b instanceof j.Surface);b=b.parent);return b},_setFillObject:function(b,a){var f=k.xmlns.svg;this.fillStyle=b;var c=this._getParentSurface().defNode,d=this.rawNode.getAttribute("fill");if(d=k.getRef(d))if(d.tagName.toLowerCase()!=
a.toLowerCase()){var n=d.id;d.parentNode.removeChild(d);d=l(f,a);d.setAttribute("id",n);c.appendChild(d)}else for(;d.childNodes.length;)d.removeChild(d.lastChild);else d=l(f,a),d.setAttribute("id",j._base._getUniqueId()),c.appendChild(d);if(a=="pattern")d.setAttribute("patternUnits","userSpaceOnUse"),f=l(f,"image"),f.setAttribute("x",0),f.setAttribute("y",0),f.setAttribute("width",b.width.toFixed(8)),f.setAttribute("height",b.height.toFixed(8)),f.setAttributeNS(k.xmlns.xlink,"xlink:href",b.src),d.appendChild(f);
else{d.setAttribute("gradientUnits","userSpaceOnUse");for(c=0;c<b.colors.length;++c){var n=b.colors[c],o=l(f,"stop"),s=n.color=j.normalizeColor(n.color);o.setAttribute("offset",n.offset.toFixed(8));o.setAttribute("stop-color",s.toCss());o.setAttribute("stop-opacity",s.a);d.appendChild(o)}}this.rawNode.setAttribute("fill","url(#"+d.getAttribute("id")+")");this.rawNode.removeAttribute("fill-opacity");this.rawNode.setAttribute("fill-rule","evenodd");return d},_applyTransform:function(){if(this.matrix){var b=
this.matrix;this.rawNode.setAttribute("transform","matrix("+b.xx.toFixed(8)+","+b.yx.toFixed(8)+","+b.xy.toFixed(8)+","+b.yy.toFixed(8)+","+b.dx.toFixed(8)+","+b.dy.toFixed(8)+")")}else this.rawNode.removeAttribute("transform");return this},setRawNode:function(b){b=this.rawNode=b;this.shape.type!="image"&&b.setAttribute("fill","none");b.setAttribute("fill-opacity",0);b.setAttribute("stroke","none");b.setAttribute("stroke-opacity",0);b.setAttribute("stroke-width",1);b.setAttribute("stroke-linecap",
"butt");b.setAttribute("stroke-linejoin","miter");b.setAttribute("stroke-miterlimit",4);b.__gfxObject__=this.getUID()},setShape:function(b){this.shape=j.makeParameters(this.shape,b);for(var a in this.shape)a!="type"&&this.rawNode.setAttribute(a,this.shape[a]);this.bbox=null;return this},_moveToFront:function(){this.rawNode.parentNode.appendChild(this.rawNode);return this},_moveToBack:function(){this.rawNode.parentNode.insertBefore(this.rawNode,this.rawNode.parentNode.firstChild);return this}});p("dojox.gfx.svg.Group",
k.Shape,{constructor:function(){q.Container._init.call(this)},setRawNode:function(b){this.rawNode=b;this.rawNode.__gfxObject__=this.getUID()}});k.Group.nodeType="g";p("dojox.gfx.svg.Rect",[k.Shape,q.Rect],{setShape:function(b){this.shape=j.makeParameters(this.shape,b);this.bbox=null;for(var a in this.shape)a!="type"&&a!="r"&&this.rawNode.setAttribute(a,this.shape[a]);this.shape.r!=null&&(this.rawNode.setAttribute("ry",this.shape.r),this.rawNode.setAttribute("rx",this.shape.r));return this}});k.Rect.nodeType=
"rect";p("dojox.gfx.svg.Ellipse",[k.Shape,q.Ellipse],{});k.Ellipse.nodeType="ellipse";p("dojox.gfx.svg.Circle",[k.Shape,q.Circle],{});k.Circle.nodeType="circle";p("dojox.gfx.svg.Line",[k.Shape,q.Line],{});k.Line.nodeType="line";p("dojox.gfx.svg.Polyline",[k.Shape,q.Polyline],{setShape:function(b,a){b&&b instanceof Array?(this.shape=j.makeParameters(this.shape,{points:b}),a&&this.shape.points.length&&this.shape.points.push(this.shape.points[0])):this.shape=j.makeParameters(this.shape,b);this.bbox=
null;this._normalizePoints();for(var f=[],c=this.shape.points,d=0;d<c.length;++d)f.push(c[d].x.toFixed(8),c[d].y.toFixed(8));this.rawNode.setAttribute("points",f.join(" "));return this}});k.Polyline.nodeType="polyline";p("dojox.gfx.svg.Image",[k.Shape,q.Image],{setShape:function(b){this.shape=j.makeParameters(this.shape,b);this.bbox=null;var b=this.rawNode,a;for(a in this.shape)a!="type"&&a!="src"&&b.setAttribute(a,this.shape[a]);b.setAttribute("preserveAspectRatio","none");b.setAttributeNS(k.xmlns.xlink,
"xlink:href",this.shape.src);b.__gfxObject__=this.getUID();return this}});k.Image.nodeType="image";p("dojox.gfx.svg.Text",[k.Shape,q.Text],{setShape:function(b){this.shape=j.makeParameters(this.shape,b);this.bbox=null;var b=this.rawNode,a=this.shape;b.setAttribute("x",a.x);b.setAttribute("y",a.y);b.setAttribute("text-anchor",a.align);b.setAttribute("text-decoration",a.decoration);b.setAttribute("rotate",a.rotated?90:0);b.setAttribute("kerning",a.kerning?"auto":0);b.setAttribute("text-rendering","optimizeLegibility");
b.firstChild?b.firstChild.nodeValue=a.text:b.appendChild(t(a.text));return this},getTextWidth:function(){var b=this.rawNode,a=b.parentNode,b=b.cloneNode(!0);b.style.visibility="hidden";var f=0,c=b.firstChild.nodeValue;a.appendChild(b);if(c!="")for(;!f;)f=b.getBBox?parseInt(b.getBBox().width):68;a.removeChild(b);return f}});k.Text.nodeType="text";p("dojox.gfx.svg.Path",[k.Shape,g.Path],{_updateWithSegment:function(){this.inherited(arguments);typeof this.shape.path=="string"&&this.rawNode.setAttribute("d",
this.shape.path)},setShape:function(){this.inherited(arguments);this.shape.path?this.rawNode.setAttribute("d",this.shape.path):this.rawNode.removeAttribute("d");return this}});k.Path.nodeType="path";p("dojox.gfx.svg.TextPath",[k.Shape,g.TextPath],{_updateWithSegment:function(){this.inherited(arguments);this._setTextPath()},setShape:function(){this.inherited(arguments);this._setTextPath();return this},_setTextPath:function(){if(typeof this.shape.path=="string"){var b=this.rawNode;if(!b.firstChild){var a=
l(k.xmlns.svg,"textPath"),f=t("");a.appendChild(f);b.appendChild(a)}a=(a=b.firstChild.getAttributeNS(k.xmlns.xlink,"href"))&&k.getRef(a);if(!a&&(f=this._getParentSurface())){var f=f.defNode,a=l(k.xmlns.svg,"path"),c=j._base._getUniqueId();a.setAttribute("id",c);f.appendChild(a);b.firstChild.setAttributeNS(k.xmlns.xlink,"xlink:href","#"+c)}a&&a.setAttribute("d",this.shape.path)}},_setText:function(){var b=this.rawNode;if(!b.firstChild){var a=l(k.xmlns.svg,"textPath"),f=t("");a.appendChild(f);b.appendChild(a)}b=
b.firstChild;a=this.text;b.setAttribute("alignment-baseline","middle");switch(a.align){case "middle":b.setAttribute("text-anchor","middle");b.setAttribute("startOffset","50%");break;case "end":b.setAttribute("text-anchor","end");b.setAttribute("startOffset","100%");break;default:b.setAttribute("text-anchor","start"),b.setAttribute("startOffset","0%")}b.setAttribute("baseline-shift","0.5ex");b.setAttribute("text-decoration",a.decoration);b.setAttribute("rotate",a.rotated?90:0);b.setAttribute("kerning",
a.kerning?"auto":0);b.firstChild.data=a.text}});k.TextPath.nodeType="text";p("dojox.gfx.svg.Surface",q.Surface,{constructor:function(){q.Container._init.call(this)},destroy:function(){this.defNode=null;this.inherited(arguments)},setDimensions:function(b,a){if(!this.rawNode)return this;this.rawNode.setAttribute("width",b);this.rawNode.setAttribute("height",a);return this},getDimensions:function(){return this.rawNode?{width:j.normalizedLength(this.rawNode.getAttribute("width")),height:j.normalizedLength(this.rawNode.getAttribute("height"))}:
null}});k.createSurface=function(b,a,f){var c=new k.Surface;c.rawNode=l(k.xmlns.svg,"svg");c.rawNode.setAttribute("overflow","hidden");a&&c.rawNode.setAttribute("width",a);f&&c.rawNode.setAttribute("height",f);a=l(k.xmlns.svg,"defs");c.rawNode.appendChild(a);c.defNode=a;c._parent=d.byId(b);c._parent.appendChild(c.rawNode);return c};var p={_setFont:function(){var b=this.fontStyle;this.rawNode.setAttribute("font-style",b.style);this.rawNode.setAttribute("font-variant",b.variant);this.rawNode.setAttribute("font-weight",
b.weight);this.rawNode.setAttribute("font-size",b.size);this.rawNode.setAttribute("font-family",b.family)}},f=q.Container,g={openBatch:function(){this.fragment=k.useSvgWeb?i.doc.createDocumentFragment(!0):i.doc.createDocumentFragment()},closeBatch:function(){this.fragment&&(this.rawNode.appendChild(this.fragment),delete this.fragment)},add:function(b){this!=b.getParent()&&(this.fragment?this.fragment.appendChild(b.rawNode):this.rawNode.appendChild(b.rawNode),f.add.apply(this,arguments));return this},
remove:function(b){this==b.getParent()&&(this.rawNode==b.rawNode.parentNode&&this.rawNode.removeChild(b.rawNode),this.fragment&&this.fragment==b.rawNode.parentNode&&this.fragment.removeChild(b.rawNode),f.remove.apply(this,arguments));return this},clear:function(){for(var b=this.rawNode;b.lastChild;)b.removeChild(b.lastChild);var a=this.defNode;if(a){for(;a.lastChild;)a.removeChild(a.lastChild);b.appendChild(a)}return f.clear.apply(this,arguments)},_moveChildToFront:f._moveChildToFront,_moveChildToBack:f._moveChildToBack},
a={createObject:function(b,a){if(!this.rawNode)return null;var f=new b,c=l(k.xmlns.svg,b.nodeType);f.setRawNode(c);f.setShape(a);this.add(f);return f}};e.extend(k.Text,p);e.extend(k.TextPath,p);e.extend(k.Group,g);e.extend(k.Group,q.Creator);e.extend(k.Group,a);e.extend(k.Surface,g);e.extend(k.Surface,q.Creator);e.extend(k.Surface,a);k.fixTarget=function(b){if(!b.gfxTarget)b.gfxTarget=v&&b.target.wholeText?q.byId(b.target.parentElement.__gfxObject__):q.byId(b.target.__gfxObject__);return!0};if(k.useSvgWeb)k.createSurface=
function(b,a,f){var g=new k.Surface;if(!a||!f)var h=c.position(b),a=a||h.w,f=f||h.h;var b=d.byId(b),h=b.id?b.id+"_svgweb":j._base._getUniqueId(),n=l(k.xmlns.svg,"svg");n.id=h;n.setAttribute("width",a);n.setAttribute("height",f);svgweb.appendChild(n,b);n.addEventListener("SVGLoad",function(){g.rawNode=this;g.isLoaded=!0;var b=l(k.xmlns.svg,"defs");g.rawNode.appendChild(b);g.defNode=b;if(g.onLoad)g.onLoad(g)},!1);g.isLoaded=!1;return g},k.Surface.extend({destroy:function(){var b=this.rawNode;svgweb.removeChild(b,
b.parentNode)}}),p={connect:function(b,a,f){b.substring(0,2)==="on"&&(b=b.substring(2));f=arguments.length==2?a:e.hitch(a,f);this.getEventSource().addEventListener(b,f,!1);return[this,b,f]},disconnect:function(b){this.getEventSource().removeEventListener(b[1],b[2],!1);delete b[0]}},e.extend(k.Shape,p),e.extend(k.Surface,p);return k})},"djeo/WebTiles":function(){define("djeo/WebTiles",["dojo/_base/declare","dojo/_base/lang","./_base"],function(e,i,d){d.registerDependency("WebTiles");return e(null,
{yFirst:!1,dependency:"WebTiles",constructor:function(d){i.mixin(this,d);d=d.paramStr?d.paramStr:this.url;if(i.isString(d)){var h=d.indexOf("[");if(h>-1){var c=d.indexOf("]");parts=d.substring(h+1,c).split(",");this.url=[];for(var e=0;e<parts.length;e++)this.url[e]=d.substring(0,h)+parts[e]+d.substring(c+1)}else this.url=[d]}this.numUrls=this.url.length},startup:function(d){this.map=d;if(d=this.map.engine.getFactory("WebTiles"))i.mixin(this,d),this.init()}})})},"dojox/gfx/path":function(){define("dojox/gfx/path",
["./_base","dojo/_base/lang","dojo/_base/declare","./matrix","./shape"],function(e,i,d,p,h){e.path={};h=d("dojox.gfx.path.Path",h.Shape,{constructor:function(c){this.shape=i.clone(e.defaultPath);this.segments=[];this.tbbox=null;this.absolute=!0;this.last={};this.rawNode=c;this.segmented=!1},setAbsoluteMode:function(c){this._confirmSegmented();this.absolute=typeof c=="string"?c=="absolute":c;return this},getAbsoluteMode:function(){this._confirmSegmented();return this.absolute},getBoundingBox:function(){this._confirmSegmented();
return this.bbox&&"l"in this.bbox?{x:this.bbox.l,y:this.bbox.t,width:this.bbox.r-this.bbox.l,height:this.bbox.b-this.bbox.t}:null},_getRealBBox:function(){this._confirmSegmented();if(this.tbbox)return this.tbbox;var c=this.bbox,d=this._getRealMatrix();this.bbox=null;for(var h=0,e=this.segments.length;h<e;++h)this._updateWithSegment(this.segments[h],d);d=this.bbox;this.bbox=c;return this.tbbox=d?[{x:d.l,y:d.t},{x:d.r,y:d.t},{x:d.r,y:d.b},{x:d.l,y:d.b}]:null},getLastPosition:function(){this._confirmSegmented();
return"x"in this.last?this.last:null},_applyTransform:function(){this.tbbox=null;return this.inherited(arguments)},_updateBBox:function(c,d,h){if(h)d=p.multiplyPoint(h,c,d),c=d.x,d=d.y;if(this.bbox&&"l"in this.bbox){if(this.bbox.l>c)this.bbox.l=c;if(this.bbox.r<c)this.bbox.r=c;if(this.bbox.t>d)this.bbox.t=d;if(this.bbox.b<d)this.bbox.b=d}else this.bbox={l:c,b:d,r:c,t:d}},_updateWithSegment:function(c,d){var h=c.args,i=h.length,g;switch(c.action){case "M":case "L":case "C":case "S":case "Q":case "T":for(g=
0;g<i;g+=2)this._updateBBox(h[g],h[g+1],d);this.last.x=h[i-2];this.last.y=h[i-1];this.absolute=!0;break;case "H":for(g=0;g<i;++g)this._updateBBox(h[g],this.last.y,d);this.last.x=h[i-1];this.absolute=!0;break;case "V":for(g=0;g<i;++g)this._updateBBox(this.last.x,h[g],d);this.last.y=h[i-1];this.absolute=!0;break;case "m":g=0;if(!("x"in this.last))this._updateBBox(this.last.x=h[0],this.last.y=h[1],d),g=2;for(;g<i;g+=2)this._updateBBox(this.last.x+=h[g],this.last.y+=h[g+1],d);this.absolute=!1;break;case "l":case "t":for(g=
0;g<i;g+=2)this._updateBBox(this.last.x+=h[g],this.last.y+=h[g+1],d);this.absolute=!1;break;case "h":for(g=0;g<i;++g)this._updateBBox(this.last.x+=h[g],this.last.y,d);this.absolute=!1;break;case "v":for(g=0;g<i;++g)this._updateBBox(this.last.x,this.last.y+=h[g],d);this.absolute=!1;break;case "c":for(g=0;g<i;g+=6)this._updateBBox(this.last.x+h[g],this.last.y+h[g+1],d),this._updateBBox(this.last.x+h[g+2],this.last.y+h[g+3],d),this._updateBBox(this.last.x+=h[g+4],this.last.y+=h[g+5],d);this.absolute=
!1;break;case "s":case "q":for(g=0;g<i;g+=4)this._updateBBox(this.last.x+h[g],this.last.y+h[g+1],d),this._updateBBox(this.last.x+=h[g+2],this.last.y+=h[g+3],d);this.absolute=!1;break;case "A":for(g=0;g<i;g+=7)this._updateBBox(h[g+5],h[g+6],d);this.last.x=h[i-2];this.last.y=h[i-1];this.absolute=!0;break;case "a":for(g=0;g<i;g+=7)this._updateBBox(this.last.x+=h[g+5],this.last.y+=h[g+6],d);this.absolute=!1}var l=[c.action];for(g=0;g<i;++g)l.push(e.formatNumber(h[g],!0));typeof this.shape.path=="string"?
this.shape.path+=l.join(""):Array.prototype.push.apply(this.shape.path,l)},_validSegments:{m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7,z:0},_pushSegment:function(c,d){this.tbbox=null;var h=this._validSegments[c.toLowerCase()];typeof h=="number"&&(h?d.length>=h&&(h={action:c,args:d.slice(0,d.length-d.length%h)},this.segments.push(h),this._updateWithSegment(h)):(h={action:c,args:[]},this.segments.push(h),this._updateWithSegment(h)))},_collectArgs:function(c,d){for(var h=0;h<d.length;++h){var e=d[h];typeof e==
"boolean"?c.push(e?1:0):typeof e=="number"?c.push(e):e instanceof Array?this._collectArgs(c,e):"x"in e&&"y"in e&&c.push(e.x,e.y)}},moveTo:function(){this._confirmSegmented();var c=[];this._collectArgs(c,arguments);this._pushSegment(this.absolute?"M":"m",c);return this},lineTo:function(){this._confirmSegmented();var c=[];this._collectArgs(c,arguments);this._pushSegment(this.absolute?"L":"l",c);return this},hLineTo:function(){this._confirmSegmented();var c=[];this._collectArgs(c,arguments);this._pushSegment(this.absolute?
"H":"h",c);return this},vLineTo:function(){this._confirmSegmented();var c=[];this._collectArgs(c,arguments);this._pushSegment(this.absolute?"V":"v",c);return this},curveTo:function(){this._confirmSegmented();var c=[];this._collectArgs(c,arguments);this._pushSegment(this.absolute?"C":"c",c);return this},smoothCurveTo:function(){this._confirmSegmented();var c=[];this._collectArgs(c,arguments);this._pushSegment(this.absolute?"S":"s",c);return this},qCurveTo:function(){this._confirmSegmented();var c=
[];this._collectArgs(c,arguments);this._pushSegment(this.absolute?"Q":"q",c);return this},qSmoothCurveTo:function(){this._confirmSegmented();var c=[];this._collectArgs(c,arguments);this._pushSegment(this.absolute?"T":"t",c);return this},arcTo:function(){this._confirmSegmented();var c=[];this._collectArgs(c,arguments);this._pushSegment(this.absolute?"A":"a",c);return this},closePath:function(){this._confirmSegmented();this._pushSegment("Z",[]);return this},_confirmSegmented:function(){if(!this.segmented){var c=
this.shape.path;this.shape.path=[];this._setPath(c);this.shape.path=this.shape.path.join("");this.segmented=!0}},_setPath:function(c){c=i.isArray(c)?c:c.match(e.pathSvgRegExp);this.segments=[];this.absolute=!0;this.bbox={};this.last={};if(c){for(var d="",h=[],q=c.length,g=0;g<q;++g){var l=c[g],p=parseFloat(l);isNaN(p)?(d&&this._pushSegment(d,h),h=[],d=l):h.push(p)}this._pushSegment(d,h)}},setShape:function(c){this.inherited(arguments,[typeof c=="string"?{path:c}:c]);this.segmented=!1;this.segments=
[];e.lazyPathSegmentation||this._confirmSegmented();return this},_2PI:Math.PI*2});d=d("dojox.gfx.path.TextPath",h,{constructor:function(){if(!("text"in this))this.text=i.clone(e.defaultTextPath);if(!("fontStyle"in this))this.fontStyle=i.clone(e.defaultFont)},getText:function(){return this.text},setText:function(c){this.text=e.makeParameters(this.text,typeof c=="string"?{text:c}:c);this._setText();return this},getFont:function(){return this.fontStyle},setFont:function(c){this.fontStyle=typeof c=="string"?
e.splitFontString(c):e.makeParameters(e.defaultFont,c);this._setFont();return this}});return{Path:h,TextPath:d}})},"dojo/require":function(){define("dojo/require",["./_base/loader"],function(e){return{dynamic:0,normalize:function(e){return e},load:e.require}})},"dojo/_base/NodeList":function(){define("dojo/_base/NodeList",["./kernel","../query","./array","./html","../NodeList-dom"],function(e,i,d){var i=i.NodeList,p=i.prototype;p.connect=i._adaptAsForEach(function(){return e.connect.apply(this,arguments)});
p.coords=i._adaptAsMap(e.coords);i.events=["blur","focus","change","click","error","keydown","keypress","keyup","load","mousedown","mouseenter","mouseleave","mousemove","mouseout","mouseover","mouseup","submit"];d.forEach(i.events,function(d){var c="on"+d;p[c]=function(d,h){return this.connect(c,d,h)}});e.NodeList=i;return e.NodeList})},"djeo-esri/Navigation":function(){define("djeo-esri/Navigation",["dojo/_base/declare","dojo/_base/lang","dojo/aspect"],function(e,i,d){return e(null,{enable:function(e){e===
void 0&&(e=!0);var h=this.map.engine.esriMap;e&&d.after(h,"onZoomEnd",i.hitch(this,this._onZoom),!0)}})})},"djeo-esri/_TiledWebMap":function(){define("djeo-esri/_TiledWebMap",["dojo/_base/declare","esri/jsapi"],function(e){return e([esri.layers.TiledMapServiceLayer],{constructor:function(e){this.spatialReference=new esri.SpatialReference({wkid:102100});this.initialExtent=this.fullExtent=new esri.geometry.Extent({xmin:-2.003750834E7,ymin:-2.003750834E7,xmax:2.003750834E7,ymax:2.003750834E7,spatialReference:{wkid:102100}});
this.tileInfo=new esri.layers.TileInfo({rows:256,cols:256,dpi:96,format:"PNG8",compressionQuality:0,origin:{x:-2.0037508342787E7,y:2.0037508342787E7},spatialReference:{wkid:102100},lods:[{level:0,scale:5.91657527591555E8,resolution:156543.033928},{level:1,scale:2.95828763795777E8,resolution:78271.5169639999},{level:2,scale:1.47914381897889E8,resolution:39135.7584820001},{level:3,scale:7.3957190948944E7,resolution:19567.8792409999},{level:4,scale:3.6978595474472E7,resolution:9783.93962049996},{level:5,
scale:1.8489297737236E7,resolution:4891.96981024998},{level:6,scale:9244648.868618,resolution:2445.98490512499},{level:7,scale:4622324.434309,resolution:1222.99245256249},{level:8,scale:2311162.217155,resolution:611.49622628138},{level:9,scale:1155581.108577,resolution:305.748113140558},{level:10,scale:577790.554289,resolution:152.874056570411},{level:11,scale:288895.277144,resolution:76.4370282850732},{level:12,scale:144447.638572,resolution:38.2185141425366},{level:13,scale:72223.819286,resolution:19.1092570712683},
{level:14,scale:36111.909643,resolution:9.55462853563415},{level:15,scale:18055.954822,resolution:4.77731426794937},{level:16,scale:9027.977411,resolution:2.38865713397468},{level:17,scale:4513.988705,resolution:1.19432856685505},{level:18,scale:2256.994353,resolution:0.597164283559817}]});this.url=e.url;this.yFirst=e.yFirst;if(this.url)this.numUrls=this.url.length;this.loaded=!0;this.onLoad(this)},getTileUrl:function(e,d,p){var h=this.yFirst?p:d;return this.url[h%this.numUrls]+"/"+e+"/"+(this.yFirst?
d:p)+"/"+h+".png"}})})},"djeo/_tiles":function(){define("djeo/_tiles",[],function(){var e=["WebTiles",{url:"http://[a,b,c].tile.openstreetmap.org"}];return{webtiles:["WebTiles",{}],roadmap:e,osm:e,openstreetmap:e,"osm.org":e,"openstreetmap.org":e,"mapquest-osm":["WebTiles",{url:"http://otile[1,2,3,4].mqcdn.com/tiles/1.0.0/osm"}],"mapquest-oa":["WebTiles",{url:"http://oatile[1,2,3,4].mqcdn.com/tiles/1.0.0/sat"}],arcgis_webtiles:["WebTiles",{}]}})},"djeo-esri/Engine":function(){define("djeo-esri/Engine",
["require","dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/aspect","djeo/Engine","./Placemark","djeo/_tiles"],function(e,i,d,p,h,c,m,j){function q(){t=i([k],{getTileUrl:function(){}})}j=d.mixin({},j);j.arcgis_webtiles=["ArcgisWebTiles",{}];var g={click:"onClick",mouseover:"onMouseOver",mouseout:"onMouseOut",mousedown:"onMouseDown",mouseup:"onMouseUp"},l={zoom_changed:"onZoomEnd",click:"onClick",mousemove:"onMouseMove"},t,k;return i([c],{esriMap:null,_eventRegistry:null,constructor:function(){this._require=
e;d.mixin(this.ignoredDependencies,{Highlight:1,Tooltip:1});this._eventRegistry={};this._supportedLayers=j;this._initBasicFactories(m({map:this.map,engine:this}))},initialize:function(a){var c=this.map,f=c.layers,b=["./_TiledWebMap"];if(f){d.isString(f)&&(f=[f]);var g=[];p.forEach(f,function(a){if(d.isString(a)){if(this.isValidLayerId(a)){var f=this.getLayerModuleId(a);f&&b.push("djeo/"+f,"./"+f);g.push(a)}}else b.push("./"+a.dependency),g.push(a)},this);f=g;c._layerLoaded=!0}b.push("esri/jsapi");
e({packages:[{location:"../djeo-esri/library/3.1/jsapi/js/esri",name:"esri"}]},b,d.hitch(this,function(b){t||(k=b,q());c.projection="EPSG:4326";this.spatialReference={wkid:4326};var g=new esri.Map(c.container,{extent:esri.geometry.geographicToWebMercator(new esri.geometry.Extent({xmin:-180,ymin:-75,xmax:75,ymax:71.91,spatialReference:this.spatialReference})),wrapAround180:!0,logo:!1});this.esriMap=g;h.after(g,"onLoad",function(){g.hideZoomSlider();a()});if(f&&f.length)for(var e=0;e<f.length;e++){var n=
f[e];d.isString(n)&&this.getLayerModuleId(n)&&this.setLayerConstructor(n,arguments[1+e]);this.enableLayer(n,!0)}else g.addLayer(new t(g))}))},prepare:function(){var a=this.esriMap;this.areas=a.addLayer(new esri.layers.GraphicsLayer);this.lines=a.addLayer(new esri.layers.GraphicsLayer);this.points=a.addLayer(new esri.layers.GraphicsLayer);this.factories.Placemark.init()},createContainer:function(){},appendChild:function(a,c){a._djeo=c;this._getParentLayer(c).add(a)},_getParentLayer:function(a){return a.isPoint()?
this.points:a.isArea()?this.areas:this.lines},onForFeature:function(a,c,f,b){this._eventRegistry[c]||(this._eventRegistry[c]={listener:{},features:{}});var e=this._eventRegistry[c].listener,j=a.isPoint()?"points":a.isArea()?"areas":"lines";e[j]||(e[j]=h.after(this[j],g[c],d.hitch(this,d.partial(this._onEvent,c)),!0));e=this._eventRegistry[c].features;e[a.id]||(e[a.id]=[]);f=[f,b];e[a.id].push(f);return[a.id,c,f]},_onEvent:function(a,c){var f=c.graphic;if(f){var b=f._djeo;(f=this._eventRegistry[a].features[b.id])&&
p.forEach(f,function(f){f[0].call(f[1],{type:a,nativeEvent:c,feature:b})})}},disconnect:function(a){for(var c=a[0],f=a[2],a=this._eventRegistry[a[1]].features,b=a[c],d=0;d<b.length;d++)if(f===b[d])break;b.splice(d,1);b.length==0&&delete a[c]},onForMap:function(a,c,f){return h.after(this.esriMap,l[a],function(b){var a=esri.geometry.webMercatorToGeographic(b.mapPoint);c.call(f,{mapCoords:[a.x,a.y],nativeEvent:b})},!0)},_on_zoom_changed:function(a,c,f){return h.after(this.esriMap,"onZoomEnd",function(){c.call(f)})},
_on_extent_changed:function(a,c,f){return h.after(this.esriMap,"onExtentChange",function(){c.call(f)})},zoomTo:function(a){a[0]==a[2]&&a[1]==a[3]&&(a=[0.99999*a[0],0.99999*a[1],1.00001*a[2],1.00001*a[3]]);this.esriMap.setExtent(esri.geometry.geographicToWebMercator(new esri.geometry.Extent({xmin:a[0],ymin:a[1],xmax:a[2],ymax:a[3],spatialReference:this.spatialReference})),!0)},destroy:function(){this.esriMap.destroy();delete this.esriMap},_setCamera:function(a){this.esriMap.centerAndZoom(m.makePoint(a.center),
a.zoom)},_set_center:function(a){this.esriMap.centerAt(m.makePoint(a))},_get_center:function(){var a=esri.geometry.webMercatorToGeographic(this.esriMap.extent.getCenter());return[a.x,a.y]},_set_zoom:function(a){var c=this.map;a<c.minZoom||a>c.maxZoom||this.esriMap.setLevel(a)},_get_zoom:function(){return this.esriMap.getLevel()},_get_extent:function(){var a=esri.geometry.webMercatorToGeographic(this.esriMap.extent);return[a.xmin,a.ymin,a.xmax,a.ymax]},_appendDiv:function(a){this.map.container.children[0].appendChild(a)}})})},
"dojox/gfx/matrix":function(){define("dojox/gfx/matrix",["./_base","dojo/_base/lang"],function(e,i){var d=e.matrix={},p={};d._degToRad=function(d){return p[d]||(p[d]=Math.PI*d/180)};d._radToDeg=function(d){return d/Math.PI*180};d.Matrix2D=function(h){if(h)if(typeof h=="number")this.xx=this.yy=h;else if(h instanceof Array){if(h.length>0){for(var c=d.normalize(h[0]),e=1;e<h.length;++e){var j=c,q=d.normalize(h[e]),c=new d.Matrix2D;c.xx=j.xx*q.xx+j.xy*q.yx;c.xy=j.xx*q.xy+j.xy*q.yy;c.yx=j.yx*q.xx+j.yy*
q.yx;c.yy=j.yx*q.xy+j.yy*q.yy;c.dx=j.xx*q.dx+j.xy*q.dy+j.dx;c.dy=j.yx*q.dx+j.yy*q.dy+j.dy}i.mixin(this,c)}}else i.mixin(this,h)};i.extend(d.Matrix2D,{xx:1,xy:0,yx:0,yy:1,dx:0,dy:0});i.mixin(d,{identity:new d.Matrix2D,flipX:new d.Matrix2D({xx:-1}),flipY:new d.Matrix2D({yy:-1}),flipXY:new d.Matrix2D({xx:-1,yy:-1}),translate:function(h,c){if(arguments.length>1)return new d.Matrix2D({dx:h,dy:c});return new d.Matrix2D({dx:h.x,dy:h.y})},scale:function(h,c){if(arguments.length>1)return new d.Matrix2D({xx:h,
yy:c});if(typeof h=="number")return new d.Matrix2D({xx:h,yy:h});return new d.Matrix2D({xx:h.x,yy:h.y})},rotate:function(h){var c=Math.cos(h),h=Math.sin(h);return new d.Matrix2D({xx:c,xy:-h,yx:h,yy:c})},rotateg:function(h){return d.rotate(d._degToRad(h))},skewX:function(h){return new d.Matrix2D({xy:Math.tan(h)})},skewXg:function(h){return d.skewX(d._degToRad(h))},skewY:function(h){return new d.Matrix2D({yx:Math.tan(h)})},skewYg:function(h){return d.skewY(d._degToRad(h))},reflect:function(h,c){if(arguments.length==
1)c=h.y,h=h.x;var e=h*h,j=c*c,i=e+j,g=2*h*c/i;return new d.Matrix2D({xx:2*e/i-1,xy:g,yx:g,yy:2*j/i-1})},project:function(h,c){if(arguments.length==1)c=h.y,h=h.x;var e=h*h,j=c*c,i=e+j,g=h*c/i;return new d.Matrix2D({xx:e/i,xy:g,yx:g,yy:j/i})},normalize:function(h){return h instanceof d.Matrix2D?h:new d.Matrix2D(h)},clone:function(h){var c=new d.Matrix2D,e;for(e in h)typeof h[e]=="number"&&typeof c[e]=="number"&&c[e]!=h[e]&&(c[e]=h[e]);return c},invert:function(h){var h=d.normalize(h),c=h.xx*h.yy-h.xy*
h.yx;return h=new d.Matrix2D({xx:h.yy/c,xy:-h.xy/c,yx:-h.yx/c,yy:h.xx/c,dx:(h.xy*h.dy-h.yy*h.dx)/c,dy:(h.yx*h.dx-h.xx*h.dy)/c})},_multiplyPoint:function(d,c,e){return{x:d.xx*c+d.xy*e+d.dx,y:d.yx*c+d.yy*e+d.dy}},multiplyPoint:function(e,c,i){e=d.normalize(e);if(typeof c=="number"&&typeof i=="number")return d._multiplyPoint(e,c,i);return d._multiplyPoint(e,c.x,c.y)},multiply:function(e){for(var c=d.normalize(e),i=1;i<arguments.length;++i){var j=c,q=d.normalize(arguments[i]),c=new d.Matrix2D;c.xx=j.xx*
q.xx+j.xy*q.yx;c.xy=j.xx*q.xy+j.xy*q.yy;c.yx=j.yx*q.xx+j.yy*q.yx;c.yy=j.yx*q.xy+j.yy*q.yy;c.dx=j.xx*q.dx+j.xy*q.dy+j.dx;c.dy=j.yx*q.dx+j.yy*q.dy+j.dy}return c},_sandwich:function(e,c,i){return d.multiply(d.translate(c,i),e,d.translate(-c,-i))},scaleAt:function(e,c,i,j){switch(arguments.length){case 4:return d._sandwich(d.scale(e,c),i,j);case 3:if(typeof i=="number")return d._sandwich(d.scale(e),c,i);return d._sandwich(d.scale(e,c),i.x,i.y)}return d._sandwich(d.scale(e),c.x,c.y)},rotateAt:function(e,
c,i){if(arguments.length>2)return d._sandwich(d.rotate(e),c,i);return d._sandwich(d.rotate(e),c.x,c.y)},rotategAt:function(e,c,i){if(arguments.length>2)return d._sandwich(d.rotateg(e),c,i);return d._sandwich(d.rotateg(e),c.x,c.y)},skewXAt:function(e,c,i){if(arguments.length>2)return d._sandwich(d.skewX(e),c,i);return d._sandwich(d.skewX(e),c.x,c.y)},skewXgAt:function(e,c,i){if(arguments.length>2)return d._sandwich(d.skewXg(e),c,i);return d._sandwich(d.skewXg(e),c.x,c.y)},skewYAt:function(e,c,i){if(arguments.length>
2)return d._sandwich(d.skewY(e),c,i);return d._sandwich(d.skewY(e),c.x,c.y)},skewYgAt:function(e,c,i){if(arguments.length>2)return d._sandwich(d.skewYg(e),c,i);return d._sandwich(d.skewYg(e),c.x,c.y)}});e.Matrix2D=d.Matrix2D;return d})},"dojox/gfx/_base":function(){define("dojox/gfx/_base",["dojo/_base/lang","dojo/_base/html","dojo/_base/Color","dojo/_base/sniff","dojo/_base/window","dojo/_base/array","dojo/dom","dojo/dom-construct","dojo/dom-geometry"],function(e,i,d,p,h,c,m,j,q){var g=e.getObject("dojox.gfx",
!0),l=g._base={};g._hasClass=function(a,b){var c=a.getAttribute("className");return c&&(" "+c+" ").indexOf(" "+b+" ")>=0};g._addClass=function(a,b){var c=a.getAttribute("className")||"";if(!c||(" "+c+" ").indexOf(" "+b+" ")<0)a.setAttribute("className",c+(c?" ":"")+b)};g._removeClass=function(a,b){var c=a.getAttribute("className");c&&a.setAttribute("className",c.replace(RegExp("(^|\\s+)"+b+"(\\s+|$)"),"$1$2"))};l._getFontMeasurements=function(){var a={"1em":0,"1ex":0,"100%":0,"12pt":0,"16px":0,"xx-small":0,
"x-small":0,small:0,medium:0,large:0,"x-large":0,"xx-large":0},b;if(p("ie"))h.doc.documentElement.style.fontSize="100%";var c=j.create("div",{style:{position:"absolute",left:"0",top:"-100px",width:"30px",height:"1000em",borderWidth:"0",margin:"0",padding:"0",outline:"none",lineHeight:"1",overflow:"hidden"}},h.body());for(b in a)c.style.fontSize=b,a[b]=Math.round(c.offsetHeight*12/16)*16/12/1E3;h.body().removeChild(c);return a};var t=null;l._getCachedFontMeasurements=function(a){if(a||!t)t=l._getFontMeasurements();
return t};var k=null,a={};l._getTextBox=function(c,b,d){var e,g,i=arguments.length,n;k||(k=j.create("div",{style:{position:"absolute",top:"-10000px",left:"0"}},h.body()));e=k;e.className="";g=e.style;g.borderWidth="0";g.margin="0";g.padding="0";g.outline="0";if(i>1&&b)for(n in b)n in a||(g[n]=b[n]);if(i>2&&d)e.className=d;e.innerHTML=c;return e.getBoundingClientRect?(e=e.getBoundingClientRect(),{l:e.left,t:e.top,w:e.width||e.right-e.left,h:e.height||e.bottom-e.top}):q.getMarginBox(e)};var v=0;l._getUniqueId=
function(){var a;do a=dojo._scopeName+"xUnique"+ ++v;while(m.byId(a));return a};e.mixin(g,{defaultPath:{type:"path",path:""},defaultPolyline:{type:"polyline",points:[]},defaultRect:{type:"rect",x:0,y:0,width:100,height:100,r:0},defaultEllipse:{type:"ellipse",cx:0,cy:0,rx:200,ry:100},defaultCircle:{type:"circle",cx:0,cy:0,r:100},defaultLine:{type:"line",x1:0,y1:0,x2:100,y2:100},defaultImage:{type:"image",x:0,y:0,width:0,height:0,src:""},defaultText:{type:"text",x:0,y:0,text:"",align:"start",decoration:"none",
rotated:!1,kerning:!0},defaultTextPath:{type:"textpath",text:"",align:"start",decoration:"none",rotated:!1,kerning:!0},defaultStroke:{type:"stroke",color:"black",style:"solid",width:1,cap:"butt",join:4},defaultLinearGradient:{type:"linear",x1:0,y1:0,x2:100,y2:100,colors:[{offset:0,color:"black"},{offset:1,color:"white"}]},defaultRadialGradient:{type:"radial",cx:0,cy:0,r:100,colors:[{offset:0,color:"black"},{offset:1,color:"white"}]},defaultPattern:{type:"pattern",x:0,y:0,width:0,height:0,src:""},
defaultFont:{type:"font",style:"normal",variant:"normal",weight:"normal",size:"10pt",family:"serif"},getDefault:function(){var a={};return function(b){var c=a[b];if(c)return new c;c=a[b]=new Function;c.prototype=g["default"+b];return new c}}(),normalizeColor:function(a){return a instanceof d?a:new d(a)},normalizeParameters:function(a,b){var c;if(b){var d={};for(c in a)c in b&&!(c in d)&&(a[c]=b[c])}return a},makeParameters:function(a,b){var c=null;if(!b)return e.delegate(a);var d={};for(c in a)c in
d||(d[c]=e.clone(c in b?b[c]:a[c]));return d},formatNumber:function(a,b){var c=a.toString();if(c.indexOf("e")>=0)c=a.toFixed(4);else{var d=c.indexOf(".");d>=0&&c.length-d>5&&(c=a.toFixed(4))}if(a<0)return c;return b?" "+c:c},makeFontString:function(a){return a.style+" "+a.variant+" "+a.weight+" "+a.size+" "+a.family},splitFontString:function(a){var b=g.getDefault("Font"),a=a.split(/\s+/);if(!(a.length<5)){b.style=a[0];b.variant=a[1];b.weight=a[2];var c=a[3].indexOf("/");b.size=c<0?a[3]:a[3].substring(0,
c);var d=4;c<0&&(a[4]=="/"?d=6:a[4].charAt(0)=="/"&&(d=5));if(d<a.length)b.family=a.slice(d).join(" ")}return b},cm_in_pt:72/2.54,mm_in_pt:7.2/2.54,px_in_pt:function(){return g._base._getCachedFontMeasurements()["12pt"]/12},pt2px:function(a){return a*g.px_in_pt()},px2pt:function(a){return a/g.px_in_pt()},normalizedLength:function(a){if(a.length===0)return 0;if(a.length>2){var b=g.px_in_pt(),c=parseFloat(a);switch(a.slice(-2)){case "px":return c;case "pt":return c*b;case "in":return c*72*b;case "pc":return c*
12*b;case "mm":return c*g.mm_in_pt*b;case "cm":return c*g.cm_in_pt*b}}return parseFloat(a)},pathVmlRegExp:/([A-Za-z]+)|(\d+(\.\d+)?)|(\.\d+)|(-\d+(\.\d+)?)|(-\.\d+)/g,pathSvgRegExp:/([A-Za-z])|(\d+(\.\d+)?)|(\.\d+)|(-\d+(\.\d+)?)|(-\.\d+)/g,equalSources:function(a,b){return a&&b&&a===b},switchTo:function(a){var b=typeof a=="string"?g[a]:a;b&&c.forEach(["Group","Rect","Ellipse","Circle","Line","Polyline","Image","Text","Path","TextPath","Surface","createSurface","fixTarget"],function(a){g[a]=b[a]})}});
return g})},"dojox/gfx/shape":function(){define("dojox/gfx/shape",["./_base","dojo/_base/lang","dojo/_base/declare","dojo/_base/window","dojo/_base/sniff","dojo/_base/connect","dojo/_base/array","dojo/dom-construct","dojo/_base/Color","./matrix"],function(e,i,d,p,h,c,m,j,q,g){var l=e.shape={},t={},k={};l.register=function(a){var c=a.declaredClass.split(".").pop(),d=c in t?++t[c]:t[c]=0;c+=d;k[c]=a;return c};l.byId=function(a){return k[a]};l.dispose=function(a){delete k[a.getUID()]};d("dojox.gfx.shape.Shape",
null,{constructor:function(){this.parentMatrix=this.parent=this.bbox=this.strokeStyle=this.fillStyle=this.matrix=this.shape=this.rawNode=null;var a=l.register(this);this.getUID=function(){return a}},getNode:function(){return this.rawNode},getShape:function(){return this.shape},getTransform:function(){return this.matrix},getFill:function(){return this.fillStyle},getStroke:function(){return this.strokeStyle},getParent:function(){return this.parent},getBoundingBox:function(){return this.bbox},getTransformedBoundingBox:function(){var a=
this.getBoundingBox();if(!a)return null;var c=this._getRealMatrix();return[g.multiplyPoint(c,a.x,a.y),g.multiplyPoint(c,a.x+a.width,a.y),g.multiplyPoint(c,a.x+a.width,a.y+a.height),g.multiplyPoint(c,a.x,a.y+a.height)]},getEventSource:function(){return this.rawNode},setShape:function(a){this.shape=e.makeParameters(this.shape,a);this.bbox=null;return this},setFill:function(a){if(!a)return this.fillStyle=null,this;var c=null;if(typeof a=="object"&&"type"in a)switch(a.type){case "linear":c=e.makeParameters(e.defaultLinearGradient,
a);break;case "radial":c=e.makeParameters(e.defaultRadialGradient,a);break;case "pattern":c=e.makeParameters(e.defaultPattern,a)}else c=e.normalizeColor(a);this.fillStyle=c;return this},setStroke:function(a){if(!a)return this.strokeStyle=null,this;if(typeof a=="string"||i.isArray(a)||a instanceof q)a={color:a};a=this.strokeStyle=e.makeParameters(e.defaultStroke,a);a.color=e.normalizeColor(a.color);return this},setTransform:function(a){this.matrix=g.clone(a?g.normalize(a):g.identity);return this._applyTransform()},
_applyTransform:function(){return this},moveToFront:function(){var a=this.getParent();a&&(a._moveChildToFront(this),this._moveToFront());return this},moveToBack:function(){var a=this.getParent();a&&(a._moveChildToBack(this),this._moveToBack());return this},_moveToFront:function(){},_moveToBack:function(){},applyRightTransform:function(a){return a?this.setTransform([this.matrix,a]):this},applyLeftTransform:function(a){return a?this.setTransform([a,this.matrix]):this},applyTransform:function(a){return a?
this.setTransform([this.matrix,a]):this},removeShape:function(a){this.parent&&this.parent.remove(this,a);return this},_setParent:function(a,c){this.parent=a;return this._updateParentMatrix(c)},_updateParentMatrix:function(a){this.parentMatrix=a?g.clone(a):null;return this._applyTransform()},_getRealMatrix:function(){for(var a=this.matrix,c=this.parent;c;)c.matrix&&(a=g.multiply(c.matrix,a)),c=c.parent;return a}});l._eventsProcessing={connect:function(a,d,f){return c.connect(this.getEventSource(),
a,l.fixCallback(this,e.fixTarget,d,f))},disconnect:function(a){c.disconnect(a)}};l.fixCallback=function(a,c,d,b){b||(b=d,d=null);if(i.isString(b)){d=d||p.global;if(!d[b])throw['dojox.gfx.shape.fixCallback: scope["',b,'"] is null (scope="',d,'")'].join("");return function(e){return c(e,a)?d[b].apply(d,arguments||[]):void 0}}return!d?function(e){return c(e,a)?b.apply(d,arguments):void 0}:function(e){return c(e,a)?b.apply(d,arguments||[]):void 0}};i.extend(l.Shape,l._eventsProcessing);l.Container={_init:function(){this.children=
[]},openBatch:function(){},closeBatch:function(){},add:function(a){var c=a.getParent();c&&c.remove(a,!0);this.children.push(a);return a._setParent(this,this._getRealMatrix())},remove:function(a,c){for(var d=0;d<this.children.length;++d)if(this.children[d]==a){if(!c)a.parent=null,a.parentMatrix=null;this.children.splice(d,1);break}return this},clear:function(){for(var a,c=0;c<this.children.length;++c)a=this.children[c],a.parent=null,a.parentMatrix=null;this.children=[];return this},_moveChildToFront:function(a){for(var c=
0;c<this.children.length;++c)if(this.children[c]==a){this.children.splice(c,1);this.children.push(a);break}return this},_moveChildToBack:function(a){for(var c=0;c<this.children.length;++c)if(this.children[c]==a){this.children.splice(c,1);this.children.unshift(a);break}return this}};d("dojox.gfx.shape.Surface",null,{constructor:function(){this._parent=this.rawNode=null;this._nodes=[];this._events=[]},destroy:function(){m.forEach(this._nodes,j.destroy);this._nodes=[];m.forEach(this._events,c.disconnect);
this._events=[];this.rawNode=null;if(h("ie"))for(;this._parent.lastChild;)j.destroy(this._parent.lastChild);else this._parent.innerHTML="";this._parent=null},getEventSource:function(){return this.rawNode},_getRealMatrix:function(){return null},isLoaded:!0,onLoad:function(){},whenLoaded:function(a,d){var e=i.hitch(a,d);if(this.isLoaded)e(this);else var b=c.connect(this,"onLoad",function(a){c.disconnect(b);e(a)})}});i.extend(l.Surface,l._eventsProcessing);d("dojox.gfx.Point",null,{});d("dojox.gfx.Rectangle",
null,{});d("dojox.gfx.shape.Rect",l.Shape,{constructor:function(a){this.shape=e.getDefault("Rect");this.rawNode=a},getBoundingBox:function(){return this.shape}});d("dojox.gfx.shape.Ellipse",l.Shape,{constructor:function(a){this.shape=e.getDefault("Ellipse");this.rawNode=a},getBoundingBox:function(){if(!this.bbox){var a=this.shape;this.bbox={x:a.cx-a.rx,y:a.cy-a.ry,width:2*a.rx,height:2*a.ry}}return this.bbox}});d("dojox.gfx.shape.Circle",l.Shape,{constructor:function(a){this.shape=e.getDefault("Circle");
this.rawNode=a},getBoundingBox:function(){if(!this.bbox){var a=this.shape;this.bbox={x:a.cx-a.r,y:a.cy-a.r,width:2*a.r,height:2*a.r}}return this.bbox}});d("dojox.gfx.shape.Line",l.Shape,{constructor:function(a){this.shape=e.getDefault("Line");this.rawNode=a},getBoundingBox:function(){if(!this.bbox){var a=this.shape;this.bbox={x:Math.min(a.x1,a.x2),y:Math.min(a.y1,a.y2),width:Math.abs(a.x2-a.x1),height:Math.abs(a.y2-a.y1)}}return this.bbox}});d("dojox.gfx.shape.Polyline",l.Shape,{constructor:function(a){this.shape=
e.getDefault("Polyline");this.rawNode=a},setShape:function(a,c){a&&a instanceof Array?(this.inherited(arguments,[{points:a}]),c&&this.shape.points.length&&this.shape.points.push(this.shape.points[0])):this.inherited(arguments,[a]);return this},_normalizePoints:function(){var a=this.shape.points,c=a&&a.length;if(c&&typeof a[0]=="number"){for(var d=[],b=0;b<c;b+=2)d.push({x:a[b],y:a[b+1]});this.shape.points=d}},getBoundingBox:function(){if(!this.bbox&&this.shape.points.length){for(var a=this.shape.points,
c=a.length,d=a[0],b={l:d.x,t:d.y,r:d.x,b:d.y},e=1;e<c;++e){d=a[e];if(b.l>d.x)b.l=d.x;if(b.r<d.x)b.r=d.x;if(b.t>d.y)b.t=d.y;if(b.b<d.y)b.b=d.y}this.bbox={x:b.l,y:b.t,width:b.r-b.l,height:b.b-b.t}}return this.bbox}});d("dojox.gfx.shape.Image",l.Shape,{constructor:function(a){this.shape=e.getDefault("Image");this.rawNode=a},getBoundingBox:function(){return this.shape},setStroke:function(){return this},setFill:function(){return this}});d("dojox.gfx.shape.Text",l.Shape,{constructor:function(a){this.fontStyle=
null;this.shape=e.getDefault("Text");this.rawNode=a},getFont:function(){return this.fontStyle},setFont:function(a){this.fontStyle=typeof a=="string"?e.splitFontString(a):e.makeParameters(e.defaultFont,a);this._setFont();return this}});l.Creator={createShape:function(a){switch(a.type){case e.defaultPath.type:return this.createPath(a);case e.defaultRect.type:return this.createRect(a);case e.defaultCircle.type:return this.createCircle(a);case e.defaultEllipse.type:return this.createEllipse(a);case e.defaultLine.type:return this.createLine(a);
case e.defaultPolyline.type:return this.createPolyline(a);case e.defaultImage.type:return this.createImage(a);case e.defaultText.type:return this.createText(a);case e.defaultTextPath.type:return this.createTextPath(a)}return null},createGroup:function(){return this.createObject(e.Group)},createRect:function(a){return this.createObject(e.Rect,a)},createEllipse:function(a){return this.createObject(e.Ellipse,a)},createCircle:function(a){return this.createObject(e.Circle,a)},createLine:function(a){return this.createObject(e.Line,
a)},createPolyline:function(a){return this.createObject(e.Polyline,a)},createImage:function(a){return this.createObject(e.Image,a)},createText:function(a){return this.createObject(e.Text,a)},createPath:function(a){return this.createObject(e.Path,a)},createTextPath:function(a){return this.createObject(e.TextPath,{}).setText(a)},createObject:function(){return null}};return l})},"dojo/main":function(){define("dojo/main",["./_base/kernel","./has","require","./_base/sniff","./_base/lang","./_base/array",
"./ready","./_base/declare","./_base/connect","./_base/Deferred","./_base/json","./_base/Color","require","./_base/browser","./_base/loader"],function(e,i,d,p,h,c,m){e.config.isDebug&&d(["./_firebug/firebug"]);var j=e.config.require;j&&(j=c.map(h.isArray(j)?j:[j],function(c){return c.replace(/\./g,"/")}),e.isAsync?d(j):m(1,function(){d(j)}));return e})},"dojox/gfx/vml":function(){define("dojox/gfx/vml",["dojo/_base/lang","dojo/_base/declare","dojo/_base/array","dojo/_base/Color","dojo/_base/sniff",
"dojo/_base/config","dojo/dom","dojo/dom-geometry","dojo/_base/window","./_base","./shape","./path","./arc","./gradient","./matrix"],function(e,i,d,p,h,c,m,j,q,g,l,t,k,a,v){function f(a,b,c){c=c||q.global;b.call(c,a);(a instanceof g.Surface||a instanceof g.Group)&&d.forEach(a.children,function(a){f(a,b,c)})}var b=g.vml={};b.xmlns="urn:schemas-microsoft-com:vml";document.namespaces.add("v",b.xmlns);var a=["*","group","roundrect","oval","shape","rect","imagedata","path","textpath","text"],r=0,w=1,u=
document.createStyleSheet();if(h("ie")>=8)r=1,w=a.length;for(;r<w;++r)u.addRule("v\\:"+a[r],"behavior:url(#default#VML); display:inline-block");b.text_alignment={start:"left",middle:"center",end:"right"};b._parseFloat=function(a){return a.match(/^\d+f$/i)?parseInt(a)/65536:parseFloat(a)};b._bool={t:1,"true":1};i("dojox.gfx.vml.Shape",l.Shape,{setFill:function(a){if(!a)return this.fillStyle=null,this.rawNode.filled="f",this;var b,c,e;if(typeof a=="object"&&"type"in a){switch(a.type){case "linear":var f=
this._getRealMatrix(),h=this.getBoundingBox(),i=this._getRealBBox?this._getRealBBox():this.getTransformedBoundingBox();e=[];if(this.fillStyle!==a)this.fillStyle=g.makeParameters(g.defaultLinearGradient,a);a=g.gradient.project(f,this.fillStyle,{x:h.x,y:h.y},{x:h.x+h.width,y:h.y+h.height},i[0],i[2]);c=a.colors;c[0].offset.toFixed(5)!="0.00000"&&e.push("0 "+g.normalizeColor(c[0].color).toHex());for(b=0;b<c.length;++b)e.push(c[b].offset.toFixed(5)+" "+g.normalizeColor(c[b].color).toHex());b=c.length-
1;c[b].offset.toFixed(5)!="1.00000"&&e.push("1 "+g.normalizeColor(c[b].color).toHex());b=this.rawNode.fill;b.colors.value=e.join(";");b.method="sigma";b.type="gradient";b.angle=(270-v._radToDeg(a.angle))%360;b.on=!0;break;case "radial":this.fillStyle=a=g.makeParameters(g.defaultRadialGradient,a);var f=parseFloat(this.rawNode.style.left),h=parseFloat(this.rawNode.style.top),i=parseFloat(this.rawNode.style.width),j=parseFloat(this.rawNode.style.height),k=isNaN(i)?1:2*a.r/i;c=[];a.colors[0].offset>0&&
c.push({offset:1,color:g.normalizeColor(a.colors[0].color)});d.forEach(a.colors,function(a){c.push({offset:1-a.offset*k,color:g.normalizeColor(a.color)})});for(b=c.length-1;b>=0&&c[b].offset<0;)--b;if(b<c.length-1){e=c[b];var l=c[b+1];l.color=p.blendColors(e.color,l.color,e.offset/(e.offset-l.offset));for(l.offset=0;c.length-b>2;)c.pop()}b=c.length-1;e=[];for(c[b].offset>0&&e.push("0 "+c[b].color.toHex());b>=0;--b)e.push(c[b].offset.toFixed(5)+" "+c[b].color.toHex());b=this.rawNode.fill;b.colors.value=
e.join(";");b.method="sigma";b.type="gradientradial";b.focusposition=isNaN(i)||isNaN(j)||isNaN(f)||isNaN(h)?"0.5 0.5":((a.cx-f)/i).toFixed(5)+" "+((a.cy-h)/j).toFixed(5);b.focussize="0 0";b.on=!0;break;case "pattern":this.fillStyle=a=g.makeParameters(g.defaultPattern,a);b=this.rawNode.fill;b.type="tile";b.src=a.src;if(a.width&&a.height)b.size.x=g.px2pt(a.width),b.size.y=g.px2pt(a.height);b.alignShape="f";b.position.x=0;b.position.y=0;b.origin.x=a.width?a.x/a.width:0;b.origin.y=a.height?a.y/a.height:
0;b.on=!0}this.rawNode.fill.opacity=1;return this}this.fillStyle=g.normalizeColor(a);(b=this.rawNode.fill)||(b=this.rawNode.ownerDocument.createElement("v:fill"));b.method="any";b.type="solid";b.opacity=this.fillStyle.a;if(e=this.rawNode.filters["DXImageTransform.Microsoft.Alpha"])e.opacity=Math.round(this.fillStyle.a*100);this.rawNode.fillcolor=this.fillStyle.toHex();this.rawNode.filled=!0;return this},setStroke:function(a){if(!a)return this.strokeStyle=null,this.rawNode.stroked="f",this;if(typeof a==
"string"||e.isArray(a)||a instanceof p)a={color:a};a=this.strokeStyle=g.makeParameters(g.defaultStroke,a);a.color=g.normalizeColor(a.color);var b=this.rawNode;b.stroked=!0;b.strokecolor=a.color.toCss();b.strokeweight=a.width+"px";if(b.stroke)b.stroke.opacity=a.color.a,b.stroke.endcap=this._translate(this._capMap,a.cap),typeof a.join=="number"?(b.stroke.joinstyle="miter",b.stroke.miterlimit=a.join):b.stroke.joinstyle=a.join,b.stroke.dashstyle=a.style=="none"?"Solid":a.style;return this},_capMap:{butt:"flat"},
_capMapReversed:{flat:"butt"},_translate:function(a,b){return b in a?a[b]:b},_applyTransform:function(){var a=this._getRealMatrix();if(a){var b=this.rawNode.skew;if(typeof b=="undefined")for(var c=0;c<this.rawNode.childNodes.length;++c)if(this.rawNode.childNodes[c].tagName=="skew"){b=this.rawNode.childNodes[c];break}if(b){b.on="f";var c=a.xx.toFixed(8)+" "+a.xy.toFixed(8)+" "+a.yx.toFixed(8)+" "+a.yy.toFixed(8)+" 0 0",a=Math.floor(a.dx).toFixed()+"px "+Math.floor(a.dy).toFixed()+"px",d=this.rawNode.style,
e=parseFloat(d.left),f=parseFloat(d.top),g=parseFloat(d.width),d=parseFloat(d.height);isNaN(e)&&(e=0);isNaN(f)&&(f=0);if(isNaN(g)||!g)g=1;if(isNaN(d)||!d)d=1;e=(-e/g-0.5).toFixed(8)+" "+(-f/d-0.5).toFixed(8);b.matrix=c;b.origin=e;b.offset=a;b.on=!0}}this.fillStyle&&this.fillStyle.type=="linear"&&this.setFill(this.fillStyle);return this},_setDimensions:function(){return this},setRawNode:function(a){a.stroked="f";a.filled="f";this.rawNode=a;this.rawNode.__gfxObject__=this.getUID()},_moveToFront:function(){this.rawNode.parentNode.appendChild(this.rawNode);
return this},_moveToBack:function(){var a=this.rawNode,b=a.parentNode,c=b.firstChild;b.insertBefore(a,c);c.tagName=="rect"&&c.swapNode(a);return this},_getRealMatrix:function(){return this.parentMatrix?new v.Matrix2D([this.parentMatrix,this.matrix]):this.matrix}});i("dojox.gfx.vml.Group",b.Shape,{constructor:function(){l.Container._init.call(this)},_applyTransform:function(){for(var a=this._getRealMatrix(),b=0;b<this.children.length;++b)this.children[b]._updateParentMatrix(a);return this},_setDimensions:function(a,
b){var c=this.rawNode,d=c.style,e=this.bgNode.style;d.width=a;d.height=b;c.coordsize=a+" "+b;e.width=a;e.height=b;for(c=0;c<this.children.length;++c)this.children[c]._setDimensions(a,b);return this}});b.Group.nodeType="group";i("dojox.gfx.vml.Rect",[b.Shape,l.Rect],{setShape:function(a){a=this.shape=g.makeParameters(this.shape,a);this.bbox=null;var b=Math.min(1,a.r/Math.min(parseFloat(a.width),parseFloat(a.height))).toFixed(8),c=this.rawNode.parentNode,d=null;if(c){if(c.lastChild!==this.rawNode)for(var e=
0;e<c.childNodes.length;++e)if(c.childNodes[e]===this.rawNode){d=c.childNodes[e+1];break}c.removeChild(this.rawNode)}h("ie")>7?(e=this.rawNode.ownerDocument.createElement("v:roundrect"),e.arcsize=b,e.style.display="inline-block",this.rawNode=e,this.rawNode.__gfxObject__=this.getUID()):this.rawNode.arcsize=b;c&&(d?c.insertBefore(this.rawNode,d):c.appendChild(this.rawNode));b=this.rawNode.style;b.left=a.x.toFixed();b.top=a.y.toFixed();b.width=typeof a.width=="string"&&a.width.indexOf("%")>=0?a.width:
Math.max(a.width.toFixed(),0);b.height=typeof a.height=="string"&&a.height.indexOf("%")>=0?a.height:Math.max(a.height.toFixed(),0);return this.setTransform(this.matrix).setFill(this.fillStyle).setStroke(this.strokeStyle)}});b.Rect.nodeType="roundrect";i("dojox.gfx.vml.Ellipse",[b.Shape,l.Ellipse],{setShape:function(a){a=this.shape=g.makeParameters(this.shape,a);this.bbox=null;var b=this.rawNode.style;b.left=(a.cx-a.rx).toFixed();b.top=(a.cy-a.ry).toFixed();b.width=(a.rx*2).toFixed();b.height=(a.ry*
2).toFixed();return this.setTransform(this.matrix)}});b.Ellipse.nodeType="oval";i("dojox.gfx.vml.Circle",[b.Shape,l.Circle],{setShape:function(a){a=this.shape=g.makeParameters(this.shape,a);this.bbox=null;var b=this.rawNode.style;b.left=(a.cx-a.r).toFixed();b.top=(a.cy-a.r).toFixed();b.width=(a.r*2).toFixed();b.height=(a.r*2).toFixed();return this}});b.Circle.nodeType="oval";i("dojox.gfx.vml.Line",[b.Shape,l.Line],{constructor:function(a){a&&a.setAttribute("dojoGfxType","line")},setShape:function(a){a=
this.shape=g.makeParameters(this.shape,a);this.bbox=null;this.rawNode.path.v="m"+a.x1.toFixed()+" "+a.y1.toFixed()+"l"+a.x2.toFixed()+" "+a.y2.toFixed()+"e";return this.setTransform(this.matrix)}});b.Line.nodeType="shape";i("dojox.gfx.vml.Polyline",[b.Shape,l.Polyline],{constructor:function(a){a&&a.setAttribute("dojoGfxType","polyline")},setShape:function(a,b){a&&a instanceof Array?(this.shape=g.makeParameters(this.shape,{points:a}),b&&this.shape.points.length&&this.shape.points.push(this.shape.points[0])):
this.shape=g.makeParameters(this.shape,a);this.bbox=null;this._normalizePoints();var c=[],d=this.shape.points;if(d.length>0&&(c.push("m"),c.push(d[0].x.toFixed(),d[0].y.toFixed()),d.length>1)){c.push("l");for(var e=1;e<d.length;++e)c.push(d[e].x.toFixed(),d[e].y.toFixed())}c.push("e");this.rawNode.path.v=c.join(" ");return this.setTransform(this.matrix)}});b.Polyline.nodeType="shape";i("dojox.gfx.vml.Image",[b.Shape,l.Image],{setShape:function(a){a=this.shape=g.makeParameters(this.shape,a);this.bbox=
null;this.rawNode.firstChild.src=a.src;return this.setTransform(this.matrix)},_applyTransform:function(){var a=this._getRealMatrix(),b=this.rawNode,c=b.style,d=this.shape,a=a?v.multiply(a,{dx:d.x,dy:d.y}):v.normalize({dx:d.x,dy:d.y});if(a.xy==0&&a.yx==0&&a.xx>0&&a.yy>0)c.filter="",c.width=Math.floor(a.xx*d.width),c.height=Math.floor(a.yy*d.height),c.left=Math.floor(a.dx),c.top=Math.floor(a.dy);else{var e=b.parentNode.style;c.left="0px";c.top="0px";c.width=e.width;c.height=e.height;a=v.multiply(a,
{xx:d.width/parseInt(c.width),yy:d.height/parseInt(c.height)});(b=b.filters["DXImageTransform.Microsoft.Matrix"])?(b.M11=a.xx,b.M12=a.xy,b.M21=a.yx,b.M22=a.yy,b.Dx=a.dx,b.Dy=a.dy):c.filter="progid:DXImageTransform.Microsoft.Matrix(M11="+a.xx+", M12="+a.xy+", M21="+a.yx+", M22="+a.yy+", Dx="+a.dx+", Dy="+a.dy+")"}return this},_setDimensions:function(a,b){var c=this.rawNode;if(c.filters["DXImageTransform.Microsoft.Matrix"])return c=c.style,c.width=a,c.height=b,this._applyTransform();return this}});
b.Image.nodeType="rect";i("dojox.gfx.vml.Text",[b.Shape,l.Text],{constructor:function(a){a&&a.setAttribute("dojoGfxType","text");this.fontStyle=null},_alignment:{start:"left",middle:"center",end:"right"},setShape:function(a){this.shape=g.makeParameters(this.shape,a);this.bbox=null;var c=this.rawNode,a=this.shape,d=a.x,e=a.y.toFixed();switch(a.align){case "middle":d-=5;break;case "end":d-=10}for(var e="m"+d.toFixed()+","+e+"l"+(d+10).toFixed()+","+e+"e",f=null,d=null,h=c.childNodes,i=0;i<h.length;++i){var j=
h[i].tagName;if(j=="path"){if(f=h[i],d)break}else if(j=="textpath"&&(d=h[i],f))break}f||(f=c.ownerDocument.createElement("v:path"),c.appendChild(f));d||(d=c.ownerDocument.createElement("v:textpath"),c.appendChild(d));f.v=e;f.textPathOk=!0;d.on=!0;c=b.text_alignment[a.align];d.style["v-text-align"]=c?c:"left";d.style["text-decoration"]=a.decoration;d.style["v-rotate-letters"]=a.rotated;d.style["v-text-kern"]=a.kerning;d.string=a.text;return this.setTransform(this.matrix)},_setFont:function(){for(var a=
this.fontStyle,b=this.rawNode.childNodes,c=0;c<b.length;++c)if(b[c].tagName=="textpath"){b[c].style.font=g.makeFontString(a);break}this.setTransform(this.matrix)},_getRealMatrix:function(){var a=this.inherited(arguments);a&&(a=v.multiply(a,{dy:-g.normalizedLength(this.fontStyle?this.fontStyle.size:"10pt")*0.35}));return a},getTextWidth:function(){var a=this.rawNode,b=a.style.display;a.style.display="inline";var c=g.pt2px(parseFloat(a.currentStyle.width));a.style.display=b;return c}});b.Text.nodeType=
"shape";i("dojox.gfx.vml.Path",[b.Shape,t.Path],{constructor:function(a){a&&!a.getAttribute("dojoGfxType")&&a.setAttribute("dojoGfxType","path");this.vmlPath="";this.lastControl={}},_updateWithSegment:function(a){var b=e.clone(this.last);this.inherited(arguments);if(!(arguments.length>1))b=this[this.renderers[a.action]](a,b),typeof this.vmlPath=="string"?(this.vmlPath+=b.join(""),this.rawNode.path.v=this.vmlPath+" r0,0 e"):Array.prototype.push.apply(this.vmlPath,b)},setShape:function(){this.vmlPath=
[];this.lastControl.type="";this.inherited(arguments);this.vmlPath=this.vmlPath.join("");this.rawNode.path.v=this.vmlPath+" r0,0 e";return this},_pathVmlToSvgMap:{m:"M",l:"L",t:"m",r:"l",c:"C",v:"c",qb:"Q",x:"z",e:""},renderers:{M:"_moveToA",m:"_moveToR",L:"_lineToA",l:"_lineToR",H:"_hLineToA",h:"_hLineToR",V:"_vLineToA",v:"_vLineToR",C:"_curveToA",c:"_curveToR",S:"_smoothCurveToA",s:"_smoothCurveToR",Q:"_qCurveToA",q:"_qCurveToR",T:"_qSmoothCurveToA",t:"_qSmoothCurveToR",A:"_arcTo",a:"_arcTo",Z:"_closePath",
z:"_closePath"},_addArgs:function(a,b,c,d){for(b=b instanceof Array?b:b.args;c<d;++c)a.push(" ",b[c].toFixed())},_adjustRelCrd:function(a,b,c){var b=b instanceof Array?b:b.args,d=b.length,e=Array(d),f=0,g=a.x,a=a.y;typeof g!="number"&&(e[0]=g=b[0],e[1]=a=b[1],f=2);if(typeof c=="number"&&c!=2)for(var h=c;h<=d;){for(;f<h;f+=2)e[f]=g+b[f],e[f+1]=a+b[f+1];g=e[h-2];a=e[h-1];h+=c}else for(;f<d;f+=2)e[f]=g+=b[f],e[f+1]=a+=b[f+1];return e},_adjustRelPos:function(a,b){for(var c=b instanceof Array?b:b.args,
d=c.length,e=Array(d),f=0;f<d;++f)e[f]=a+=c[f];return e},_moveToA:function(a){var b=[" m"],a=a instanceof Array?a:a.args,c=a.length;this._addArgs(b,a,0,2);c>2&&(b.push(" l"),this._addArgs(b,a,2,c));this.lastControl.type="";return b},_moveToR:function(a,b){return this._moveToA(this._adjustRelCrd(b,a))},_lineToA:function(a){var b=[" l"],a=a instanceof Array?a:a.args;this._addArgs(b,a,0,a.length);this.lastControl.type="";return b},_lineToR:function(a,b){return this._lineToA(this._adjustRelCrd(b,a))},
_hLineToA:function(a,b){for(var c=[" l"],d=" "+b.y.toFixed(),e=a instanceof Array?a:a.args,f=e.length,g=0;g<f;++g)c.push(" ",e[g].toFixed(),d);this.lastControl.type="";return c},_hLineToR:function(a,b){return this._hLineToA(this._adjustRelPos(b.x,a),b)},_vLineToA:function(a,b){for(var c=[" l"],d=" "+b.x.toFixed(),e=a instanceof Array?a:a.args,f=e.length,g=0;g<f;++g)c.push(d," ",e[g].toFixed());this.lastControl.type="";return c},_vLineToR:function(a,b){return this._vLineToA(this._adjustRelPos(b.y,
a),b)},_curveToA:function(a){for(var b=[],a=a instanceof Array?a:a.args,c=a.length,d=this.lastControl,e=0;e<c;e+=6)b.push(" c"),this._addArgs(b,a,e,e+6);d.x=a[c-4];d.y=a[c-3];d.type="C";return b},_curveToR:function(a,b){return this._curveToA(this._adjustRelCrd(b,a,6))},_smoothCurveToA:function(a,b){var c=[],d=a instanceof Array?a:a.args,e=d.length,f=this.lastControl,g=0;if(f.type!="C")c.push(" c"),this._addArgs(c,[b.x,b.y],0,2),this._addArgs(c,d,0,4),f.x=d[0],f.y=d[1],f.type="C",g=4;for(;g<e;g+=4)c.push(" c"),
this._addArgs(c,[2*b.x-f.x,2*b.y-f.y],0,2),this._addArgs(c,d,g,g+4),f.x=d[g],f.y=d[g+1];return c},_smoothCurveToR:function(a,b){return this._smoothCurveToA(this._adjustRelCrd(b,a,4),b)},_qCurveToA:function(a){for(var b=[],a=a instanceof Array?a:a.args,c=a.length,d=this.lastControl,e=0;e<c;e+=4)b.push(" qb"),this._addArgs(b,a,e,e+4);d.x=a[c-4];d.y=a[c-3];d.type="Q";return b},_qCurveToR:function(a,b){return this._qCurveToA(this._adjustRelCrd(b,a,4))},_qSmoothCurveToA:function(a,b){var c=[],d=a instanceof
Array?a:a.args,e=d.length,f=this.lastControl,g=0;if(f.type!="Q")c.push(" qb"),this._addArgs(c,[f.x=b.x,f.y=b.y],0,2),f.type="Q",this._addArgs(c,d,0,2),g=2;for(;g<e;g+=2)c.push(" qb"),this._addArgs(c,[f.x=2*b.x-f.x,f.y=2*b.y-f.y],0,2),this._addArgs(c,d,g,g+2);return c},_qSmoothCurveToR:function(a,b){return this._qSmoothCurveToA(this._adjustRelCrd(b,a,2),b)},_arcTo:function(a,b){for(var c=[],d=a.args,e=d.length,f=a.action=="a",g=0;g<e;g+=7){var h=d[g+5],i=d[g+6];f&&(h+=b.x,i+=b.y);for(var j=k.arcAsBezier(b,
d[g],d[g+1],d[g+2],d[g+3]?1:0,d[g+4]?1:0,h,i),l=0;l<j.length;++l){c.push(" c");var m=j[l];this._addArgs(c,m,0,m.length);this._updateBBox(m[0],m[1]);this._updateBBox(m[2],m[3]);this._updateBBox(m[4],m[5])}b.x=h;b.y=i}this.lastControl.type="";return c},_closePath:function(){this.lastControl.type="";return["x"]}});b.Path.nodeType="shape";i("dojox.gfx.vml.TextPath",[b.Path,t.TextPath],{constructor:function(a){a&&a.setAttribute("dojoGfxType","textpath");this.fontStyle=null;if(!("text"in this))this.text=
e.clone(g.defaultTextPath);if(!("fontStyle"in this))this.fontStyle=e.clone(g.defaultFont)},setText:function(a){this.text=g.makeParameters(this.text,typeof a=="string"?{text:a}:a);this._setText();return this},setFont:function(a){this.fontStyle=typeof a=="string"?g.splitFontString(a):g.makeParameters(g.defaultFont,a);this._setFont();return this},_setText:function(){this.bbox=null;for(var a=this.rawNode,c=this.text,d=null,e=null,f=a.childNodes,g=0;g<f.length;++g){var h=f[g].tagName;if(h=="path"){if(d=
f[g],e)break}else if(h=="textpath"&&(e=f[g],d))break}d||(d=this.rawNode.ownerDocument.createElement("v:path"),a.appendChild(d));e||(e=this.rawNode.ownerDocument.createElement("v:textpath"),a.appendChild(e));d.textPathOk=!0;e.on=!0;a=b.text_alignment[c.align];e.style["v-text-align"]=a?a:"left";e.style["text-decoration"]=c.decoration;e.style["v-rotate-letters"]=c.rotated;e.style["v-text-kern"]=c.kerning;e.string=c.text},_setFont:function(){for(var a=this.fontStyle,b=this.rawNode.childNodes,c=0;c<b.length;++c)if(b[c].tagName==
"textpath"){b[c].style.font=g.makeFontString(a);break}}});b.TextPath.nodeType="shape";i("dojox.gfx.vml.Surface",l.Surface,{constructor:function(){l.Container._init.call(this)},setDimensions:function(a,b){this.width=g.normalizedLength(a);this.height=g.normalizedLength(b);if(!this.rawNode)return this;var c=this.clipNode.style,d=this.rawNode,e=d.style,f=this.bgNode.style,h=this._parent.style;h.width=a;h.height=b;c.width=a;c.height=b;c.clip="rect(0px "+a+"px "+b+"px 0px)";e.width=a;e.height=b;d.coordsize=
a+" "+b;f.width=a;f.height=b;for(c=0;c<this.children.length;++c)this.children[c]._setDimensions(a,b);return this},getDimensions:function(){var a=this.rawNode?{width:g.normalizedLength(this.rawNode.style.width),height:g.normalizedLength(this.rawNode.style.height)}:null;if(a.width<=0)a.width=this.width;if(a.height<=0)a.height=this.height;return a}});b.createSurface=function(a,c,d){if(!c&&!d)var e=j.position(a),c=c||e.w,d=d||e.h;typeof c=="number"&&(c+="px");typeof d=="number"&&(d+="px");var e=new b.Surface,
a=m.byId(a),f=e.clipNode=a.ownerDocument.createElement("div"),i=e.rawNode=a.ownerDocument.createElement("v:group"),k=f.style,l=i.style;if(h("ie")>7)l.display="inline-block";e._parent=a;e._nodes.push(f);a.style.width=c;a.style.height=d;k.position="absolute";k.width=c;k.height=d;k.clip="rect(0px "+c+" "+d+" 0px)";l.position="absolute";l.width=c;l.height=d;i.coordsize=(c==="100%"?c:parseFloat(c))+" "+(d==="100%"?d:parseFloat(d));i.coordorigin="0 0";var k=e.bgNode=i.ownerDocument.createElement("v:rect"),
p=k.style;p.left=p.top=0;p.width=l.width;p.height=l.height;k.filled=k.stroked="f";i.appendChild(k);f.appendChild(i);a.appendChild(f);e.width=g.normalizedLength(c);e.height=g.normalizedLength(d);return e};var x=l.Container,i={add:c.fixVmlAdd===!0?function(a){if(this!=a.getParent()){var b=a.getParent();b&&b.remove(a);this.rawNode.appendChild(a.rawNode);x.add.apply(this,arguments);f(this,function(a){typeof a.getFont=="function"&&(a.setShape(a.getShape()),a.setFont(a.getFont()));typeof a.setFill=="function"&&
(a.setFill(a.getFill()),a.setStroke(a.getStroke()))})}return this}:function(a){this!=a.getParent()&&(this.rawNode.appendChild(a.rawNode),a.getParent()||(a.setFill(a.getFill()),a.setStroke(a.getStroke())),x.add.apply(this,arguments));return this},remove:function(a){this==a.getParent()&&(this.rawNode==a.rawNode.parentNode&&this.rawNode.removeChild(a.rawNode),x.remove.apply(this,arguments));return this},clear:function(){for(var a=this.rawNode;a.firstChild!=a.lastChild;)a.firstChild!=this.bgNode&&a.removeChild(a.firstChild),
a.lastChild!=this.bgNode&&a.removeChild(a.lastChild);return x.clear.apply(this,arguments)},_moveChildToFront:x._moveChildToFront,_moveChildToBack:x._moveChildToBack},c={createGroup:function(){var a=this.createObject(b.Group,null),c=a.rawNode.ownerDocument.createElement("v:rect");c.style.left=c.style.top=0;c.style.width=a.rawNode.style.width;c.style.height=a.rawNode.style.height;c.filled=c.stroked="f";a.rawNode.appendChild(c);a.bgNode=c;return a},createImage:function(a){if(!this.rawNode)return null;
var c=new b.Image,d=this.rawNode.ownerDocument,e=d.createElement("v:rect");e.stroked="f";e.style.width=this.rawNode.style.width;e.style.height=this.rawNode.style.height;d=d.createElement("v:imagedata");e.appendChild(d);c.setRawNode(e);this.rawNode.appendChild(e);c.setShape(a);this.add(c);return c},createRect:function(a){if(!this.rawNode)return null;var c=new b.Rect,d=this.rawNode.ownerDocument.createElement("v:roundrect");if(h("ie")>7)d.style.display="inline-block";c.setRawNode(d);this.rawNode.appendChild(d);
c.setShape(a);this.add(c);return c},createObject:function(a,c){if(!this.rawNode)return null;var d=new a,e=this.rawNode.ownerDocument.createElement("v:"+a.nodeType);d.setRawNode(e);this.rawNode.appendChild(e);switch(a){case b.Group:case b.Line:case b.Polyline:case b.Image:case b.Text:case b.Path:case b.TextPath:this._overrideSize(e)}d.setShape(c);this.add(d);return d},_overrideSize:function(a){var b=this.rawNode.style,c=b.width,b=b.height;a.style.width=c;a.style.height=b;a.coordsize=parseInt(c)+" "+
parseInt(b)}};e.extend(b.Group,i);e.extend(b.Group,l.Creator);e.extend(b.Group,c);e.extend(b.Surface,i);e.extend(b.Surface,l.Creator);e.extend(b.Surface,c);b.fixTarget=function(a){if(!a.gfxTarget)a.gfxTarget=l.byId(a.target.__gfxObject__);return!0};return b})}}});define("djeo-esri/esri",[],1);